<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:23:35 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_1ab815038f534adda65c8b4ae4993449.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_16d825f1fa9ecca2e70b1a8d9256d0e6.html">asterisk</a>
  </div>
</div>
<div class="contents">
<h1>xmldoc.h File Reference</h1>
<p>Asterisk XML Documentation API.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="xml_8h_source.html">asterisk/xml.h</a>&quot;</code><br/>

<p><a href="xmldoc_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xmldoc_8h.html#a54ea6bbcddbb8ef17051136a73227847">ast_xmldoc_build_arguments</a> (const char *<a class="el" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, const char *<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generate the [arguments] tag based on type of node ('application', 'function' or 'agi') and name.  <a href="#a54ea6bbcddbb8ef17051136a73227847"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xmldoc_8h.html#a7e6109ee5ae553d1fb3b6e7a7c4617f9">ast_xmldoc_build_description</a> (const char *<a class="el" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, const char *<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generate description documentation from XML.  <a href="#a7e6109ee5ae553d1fb3b6e7a7c4617f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xmldoc_8h.html#a51987b5bfa995cc9b76c81dd1a1d6ad4">ast_xmldoc_build_seealso</a> (const char *<a class="el" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, const char *<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parse the &lt;see-also&gt; node content.  <a href="#a51987b5bfa995cc9b76c81dd1a1d6ad4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xmldoc_8h.html#a92ab99fc2fa8a31c591531b36d391e3f">ast_xmldoc_build_synopsis</a> (const char *<a class="el" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, const char *<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generate synopsis documentation from XML.  <a href="#a92ab99fc2fa8a31c591531b36d391e3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xmldoc_8h.html#a54a5b2e3ff1b6b6f06d9bab70e70c924">ast_xmldoc_build_syntax</a> (const char *<a class="el" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, const char *<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the syntax for a specified application or function.  <a href="#a54a5b2e3ff1b6b6f06d9bab70e70c924"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a> (const char *bwinput, int withcolors)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Colorize and put delimiters (instead of tags) to the xmldoc output.  <a href="#a637de870dfc83d0694f588c5a814ce38"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Asterisk XML Documentation API. </p>

<p>Definition in file <a class="el" href="xmldoc_8h_source.html">xmldoc.h</a>.</p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a54ea6bbcddbb8ef17051136a73227847"></a><!-- doxytag: member="xmldoc.h::ast_xmldoc_build_arguments" ref="a54ea6bbcddbb8ef17051136a73227847" args="(const char *type, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_xmldoc_build_arguments </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generate the [arguments] tag based on type of node ('application', 'function' or 'agi') and name. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>'application', 'function' or 'agi' ? </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Name of the application or function to build the 'arguments' tag. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>on error. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Output</em>&nbsp;</td><td>buffer with the [arguments] tag content. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="xmldoc_8c_source.html#l01611">1611</a> of file <a class="el" href="xmldoc_8c_source.html">xmldoc.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="strings_8h_source.html#l00488">ast_str_buffer()</a>, <a class="el" href="strings_8h_source.html#l00415">ast_str_create()</a>, <a class="el" href="strings_8h_source.html#l00466">ast_str_strlen()</a>, <a class="el" href="strings_8h_source.html#l00506">ast_str_truncate()</a>, <a class="el" href="astmm_8h_source.html#l00099">ast_strdup</a>, <a class="el" href="strings_8h_source.html#l00063">ast_strlen_zero()</a>, <a class="el" href="xml_8c_source.html#l00184">ast_xml_node_get_children()</a>, <a class="el" href="xml_8c_source.html#l00179">ast_xml_node_get_name()</a>, <a class="el" href="xml_8c_source.html#l00189">ast_xml_node_get_next()</a>, <a class="el" href="adsistub_8c_source.html#l00059">buf</a>, <a class="el" href="xmldoc_8c_source.html#l00465">xmldoc_get_node()</a>, and <a class="el" href="xmldoc_8c_source.html#l01558">xmldoc_parse_parameter()</a>.</p>

<p>Referenced by <a class="el" href="pbx_8c_source.html#l03244">acf_retrieve_docs()</a>, and <a class="el" href="pbx_8c_source.html#l05062">ast_register_application2()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01612"></a>01612 {
<a name="l01613"></a>01613    <span class="keyword">struct </span>ast_xml_node *node;
<a name="l01614"></a>01614    <span class="keyword">struct </span><a class="code" href="structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed...">ast_str</a> *ret = <a class="code" href="strings_8h.html#a8ec37e4acb6ecb20eb6f6edd1141cd76" title="Create a malloc&amp;#39;ed dynamic length string.">ast_str_create</a>(128);
<a name="l01615"></a>01615    <span class="keywordtype">char</span> *retstr = NULL;
<a name="l01616"></a>01616 
<a name="l01617"></a>01617    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>) || <a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)) {
<a name="l01618"></a>01618       <span class="keywordflow">return</span> NULL;
<a name="l01619"></a>01619    }
<a name="l01620"></a>01620 
<a name="l01621"></a>01621    node = <a class="code" href="xmldoc_8c.html#af1f439077def997dc752361c8dbdcb12">xmldoc_get_node</a>(<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, <a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="xmldoc_8c.html#a0b2ace3b0a473d2514ce792377817934" title="XML documentation language.">documentation_language</a>);
<a name="l01622"></a>01622 
<a name="l01623"></a>01623    <span class="keywordflow">if</span> (!node || !<a class="code" href="xml_8h.html#a6064a4b3e299bb92aa8c8c7c1b363527" title="Get the node&amp;#39;s children.">ast_xml_node_get_children</a>(node)) {
<a name="l01624"></a>01624       <span class="keywordflow">return</span> NULL;
<a name="l01625"></a>01625    }
<a name="l01626"></a>01626 
<a name="l01627"></a>01627    <span class="comment">/* Find the syntax field. */</span>
<a name="l01628"></a>01628    <span class="keywordflow">for</span> (node = <a class="code" href="xml_8h.html#a6064a4b3e299bb92aa8c8c7c1b363527" title="Get the node&amp;#39;s children.">ast_xml_node_get_children</a>(node); node; node = <a class="code" href="xml_8h.html#aa7d34402682c9bc1dfb9aea971f9eba7" title="Get the next node in the same level.">ast_xml_node_get_next</a>(node)) {
<a name="l01629"></a>01629       <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="xml_8h.html#a02cd60b8b2d5d96e78c858429b1b1d11" title="Get the name of a node.">ast_xml_node_get_name</a>(node), <span class="stringliteral">&quot;syntax&quot;</span>)) {
<a name="l01630"></a>01630          <span class="keywordflow">break</span>;
<a name="l01631"></a>01631       }
<a name="l01632"></a>01632    }
<a name="l01633"></a>01633 
<a name="l01634"></a>01634    <span class="keywordflow">if</span> (!node || !<a class="code" href="xml_8h.html#a6064a4b3e299bb92aa8c8c7c1b363527" title="Get the node&amp;#39;s children.">ast_xml_node_get_children</a>(node)) {
<a name="l01635"></a>01635       <span class="comment">/* We couldn&apos;t find the syntax node. */</span>
<a name="l01636"></a>01636       <span class="keywordflow">return</span> NULL;
<a name="l01637"></a>01637    }
<a name="l01638"></a>01638 
<a name="l01639"></a>01639    <span class="keywordflow">for</span> (node = <a class="code" href="xml_8h.html#a6064a4b3e299bb92aa8c8c7c1b363527" title="Get the node&amp;#39;s children.">ast_xml_node_get_children</a>(node); node; node = <a class="code" href="xml_8h.html#aa7d34402682c9bc1dfb9aea971f9eba7" title="Get the next node in the same level.">ast_xml_node_get_next</a>(node)) {
<a name="l01640"></a>01640       <a class="code" href="xmldoc_8c.html#a837048ecc987ccedb98848189349f7c8">xmldoc_parse_parameter</a>(node, <span class="stringliteral">&quot;&quot;</span>, &amp;ret);
<a name="l01641"></a>01641    }
<a name="l01642"></a>01642 
<a name="l01643"></a>01643    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#a99409c17a1d20e1c3dc00039b7925a2d" title="Returns the current length of the string stored within buf.">ast_str_strlen</a>(ret) &gt; 0) {
<a name="l01644"></a>01644       <span class="comment">/* remove last &apos;\n&apos; */</span>
<a name="l01645"></a>01645       <span class="keywordtype">char</span> *<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a> = <a class="code" href="strings_8h.html#a053bdfc229997a75f112bdd7b995e00b" title="Returns the string buffer within the ast_str buf.">ast_str_buffer</a>(ret);
<a name="l01646"></a>01646       <span class="keywordflow">if</span> (buf[<a class="code" href="strings_8h.html#a99409c17a1d20e1c3dc00039b7925a2d" title="Returns the current length of the string stored within buf.">ast_str_strlen</a>(ret) - 1] == <span class="charliteral">&apos;\n&apos;</span>) {
<a name="l01647"></a>01647          <a class="code" href="strings_8h.html#a5744f4b4f751c19399c955971f36ecfa" title="Truncates the enclosed string to the given length.">ast_str_truncate</a>(ret, -1);
<a name="l01648"></a>01648       }
<a name="l01649"></a>01649       retstr = <a class="code" href="astmm_8h.html#a2ef2401ade6b4b773138a82c86c40903">ast_strdup</a>(<a class="code" href="strings_8h.html#a053bdfc229997a75f112bdd7b995e00b" title="Returns the string buffer within the ast_str buf.">ast_str_buffer</a>(ret));
<a name="l01650"></a>01650    }
<a name="l01651"></a>01651    <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ret);
<a name="l01652"></a>01652 
<a name="l01653"></a>01653    <span class="keywordflow">return</span> retstr;
<a name="l01654"></a>01654 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7e6109ee5ae553d1fb3b6e7a7c4617f9"></a><!-- doxytag: member="xmldoc.h::ast_xmldoc_build_description" ref="a7e6109ee5ae553d1fb3b6e7a7c4617f9" args="(const char *type, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_xmldoc_build_description </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generate description documentation from XML. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>The source of documentation (application, function, etc). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>The name of the application, function, etc. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>on error. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>A</em>&nbsp;</td><td>malloc'ed string with the formatted description. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="xmldoc_8c_source.html#l01745">1745</a> of file <a class="el" href="xmldoc_8c_source.html">xmldoc.c</a>.</p>

<p>References <a class="el" href="xmldoc_8c_source.html#l01706">xmldoc_build_field()</a>.</p>

<p>Referenced by <a class="el" href="pbx_8c_source.html#l03244">acf_retrieve_docs()</a>, <a class="el" href="res__agi_8c_source.html#l02556">ast_agi_register()</a>, and <a class="el" href="pbx_8c_source.html#l05062">ast_register_application2()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01746"></a>01746 {
<a name="l01747"></a>01747    <span class="keywordflow">return</span> <a class="code" href="xmldoc_8c.html#aeb2341b29c15727e507610b6abc7e18e" title="Get the content of a field (synopsis, description, etc) from an asterisk document...">xmldoc_build_field</a>(<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, <a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="stringliteral">&quot;description&quot;</span>, 0);
<a name="l01748"></a>01748 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a51987b5bfa995cc9b76c81dd1a1d6ad4"></a><!-- doxytag: member="xmldoc.h::ast_xmldoc_build_seealso" ref="a51987b5bfa995cc9b76c81dd1a1d6ad4" args="(const char *type, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_xmldoc_build_seealso </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parse the &lt;see-also&gt; node content. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>'application', 'function' or 'agi'. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Application or functions name. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>on error. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Content</em>&nbsp;</td><td>of the see-also node. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="xmldoc_8c_source.html#l01318">1318</a> of file <a class="el" href="xmldoc_8c_source.html">xmldoc.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="strings_8h_source.html#l00846">ast_str_append()</a>, <a class="el" href="strings_8h_source.html#l00488">ast_str_buffer()</a>, <a class="el" href="strings_8h_source.html#l00415">ast_str_create()</a>, <a class="el" href="astmm_8h_source.html#l00099">ast_strdup</a>, <a class="el" href="strings_8h_source.html#l00063">ast_strlen_zero()</a>, <a class="el" href="xml_8c_source.html#l00107">ast_xml_free_attr()</a>, <a class="el" href="xml_8c_source.html#l00114">ast_xml_free_text()</a>, <a class="el" href="xml_8c_source.html#l00121">ast_xml_get_attribute()</a>, <a class="el" href="xml_8c_source.html#l00170">ast_xml_get_text()</a>, <a class="el" href="xml_8c_source.html#l00184">ast_xml_node_get_children()</a>, <a class="el" href="xml_8c_source.html#l00179">ast_xml_node_get_name()</a>, <a class="el" href="xml_8c_source.html#l00189">ast_xml_node_get_next()</a>, <a class="el" href="devicestate_8c_source.html#l00198">first</a>, and <a class="el" href="xmldoc_8c_source.html#l00465">xmldoc_get_node()</a>.</p>

<p>Referenced by <a class="el" href="pbx_8c_source.html#l03244">acf_retrieve_docs()</a>, <a class="el" href="res__agi_8c_source.html#l02556">ast_agi_register()</a>, and <a class="el" href="pbx_8c_source.html#l05062">ast_register_application2()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01319"></a>01319 {
<a name="l01320"></a>01320    <span class="keyword">struct </span><a class="code" href="structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed...">ast_str</a> *outputstr;
<a name="l01321"></a>01321    <span class="keywordtype">char</span> *output;
<a name="l01322"></a>01322    <span class="keyword">struct </span>ast_xml_node *node;
<a name="l01323"></a>01323    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">typename</span>;
<a name="l01324"></a>01324    <span class="keyword">const</span> <span class="keywordtype">char</span> *content;
<a name="l01325"></a>01325    <span class="keywordtype">int</span> <a class="code" href="devicestate_8c.html#abd2135e6f8a41bc900933b1985d97165">first</a> = 1;
<a name="l01326"></a>01326 
<a name="l01327"></a>01327    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>) || <a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)) {
<a name="l01328"></a>01328       <span class="keywordflow">return</span> NULL;
<a name="l01329"></a>01329    }
<a name="l01330"></a>01330 
<a name="l01331"></a>01331    <span class="comment">/* get the application/function root node. */</span>
<a name="l01332"></a>01332    node = <a class="code" href="xmldoc_8c.html#af1f439077def997dc752361c8dbdcb12">xmldoc_get_node</a>(<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, <a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="xmldoc_8c.html#a0b2ace3b0a473d2514ce792377817934" title="XML documentation language.">documentation_language</a>);
<a name="l01333"></a>01333    <span class="keywordflow">if</span> (!node || !<a class="code" href="xml_8h.html#a6064a4b3e299bb92aa8c8c7c1b363527" title="Get the node&amp;#39;s children.">ast_xml_node_get_children</a>(node)) {
<a name="l01334"></a>01334       <span class="keywordflow">return</span> NULL;
<a name="l01335"></a>01335    }
<a name="l01336"></a>01336 
<a name="l01337"></a>01337    <span class="comment">/* Find the &lt;see-also&gt; node. */</span>
<a name="l01338"></a>01338    <span class="keywordflow">for</span> (node = <a class="code" href="xml_8h.html#a6064a4b3e299bb92aa8c8c7c1b363527" title="Get the node&amp;#39;s children.">ast_xml_node_get_children</a>(node); node; node = <a class="code" href="xml_8h.html#aa7d34402682c9bc1dfb9aea971f9eba7" title="Get the next node in the same level.">ast_xml_node_get_next</a>(node)) {
<a name="l01339"></a>01339       <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="xml_8h.html#a02cd60b8b2d5d96e78c858429b1b1d11" title="Get the name of a node.">ast_xml_node_get_name</a>(node), <span class="stringliteral">&quot;see-also&quot;</span>)) {
<a name="l01340"></a>01340          <span class="keywordflow">break</span>;
<a name="l01341"></a>01341       }
<a name="l01342"></a>01342    }
<a name="l01343"></a>01343 
<a name="l01344"></a>01344    <span class="keywordflow">if</span> (!node || !<a class="code" href="xml_8h.html#a6064a4b3e299bb92aa8c8c7c1b363527" title="Get the node&amp;#39;s children.">ast_xml_node_get_children</a>(node)) {
<a name="l01345"></a>01345       <span class="comment">/* we couldnt find a &lt;see-also&gt; node. */</span>
<a name="l01346"></a>01346       <span class="keywordflow">return</span> NULL;
<a name="l01347"></a>01347    }
<a name="l01348"></a>01348 
<a name="l01349"></a>01349    <span class="comment">/* prepare the output string. */</span>
<a name="l01350"></a>01350    outputstr = <a class="code" href="strings_8h.html#a8ec37e4acb6ecb20eb6f6edd1141cd76" title="Create a malloc&amp;#39;ed dynamic length string.">ast_str_create</a>(128);
<a name="l01351"></a>01351    <span class="keywordflow">if</span> (!outputstr) {
<a name="l01352"></a>01352       <span class="keywordflow">return</span> NULL;
<a name="l01353"></a>01353    }
<a name="l01354"></a>01354 
<a name="l01355"></a>01355    <span class="comment">/* get into the &lt;see-also&gt; node. */</span>
<a name="l01356"></a>01356    <span class="keywordflow">for</span> (node = <a class="code" href="xml_8h.html#a6064a4b3e299bb92aa8c8c7c1b363527" title="Get the node&amp;#39;s children.">ast_xml_node_get_children</a>(node); node; node = <a class="code" href="xml_8h.html#aa7d34402682c9bc1dfb9aea971f9eba7" title="Get the next node in the same level.">ast_xml_node_get_next</a>(node)) {
<a name="l01357"></a>01357       <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="xml_8h.html#a02cd60b8b2d5d96e78c858429b1b1d11" title="Get the name of a node.">ast_xml_node_get_name</a>(node), <span class="stringliteral">&quot;ref&quot;</span>)) {
<a name="l01358"></a>01358          <span class="keywordflow">continue</span>;
<a name="l01359"></a>01359       }
<a name="l01360"></a>01360 
<a name="l01361"></a>01361       <span class="comment">/* parse the &lt;ref&gt; node. &apos;type&apos; attribute is required. */</span>
<a name="l01362"></a>01362       <span class="keyword">typename</span> = <a class="code" href="xml_8h.html#aa530ec72e11a97546295ede1736a1475" title="Get a node attribute by name.">ast_xml_get_attribute</a>(node, <span class="stringliteral">&quot;type&quot;</span>);
<a name="l01363"></a>01363       <span class="keywordflow">if</span> (!<span class="keyword">typename</span>) {
<a name="l01364"></a>01364          <span class="keywordflow">continue</span>;
<a name="l01365"></a>01365       }
<a name="l01366"></a>01366       content = <a class="code" href="xml_8h.html#ad113291cd96631f7b440d82fbc33dd13" title="Get an element content string.">ast_xml_get_text</a>(node);
<a name="l01367"></a>01367       <span class="keywordflow">if</span> (!content) {
<a name="l01368"></a>01368          <a class="code" href="xml_8h.html#a8a555ceb9dcd4102c73aad5304ff2f34" title="Free an attribute returned by ast_xml_get_attribute().">ast_xml_free_attr</a>(<span class="keyword">typename</span>);
<a name="l01369"></a>01369          <span class="keywordflow">continue</span>;
<a name="l01370"></a>01370       }
<a name="l01371"></a>01371       <span class="keywordflow">if</span> (!strcasecmp(<span class="keyword">typename</span>, <span class="stringliteral">&quot;application&quot;</span>)) {
<a name="l01372"></a>01372          <a class="code" href="strings_8h.html#a85cd5a8ef499e39d22b4bfeb8b9a64f7" title="Append to a thread local dynamic string.">ast_str_append</a>(&amp;outputstr, 0, <span class="stringliteral">&quot;%s%s()&quot;</span>,   (first ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;, &quot;</span>), content);
<a name="l01373"></a>01373       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<span class="keyword">typename</span>, <span class="stringliteral">&quot;function&quot;</span>)) {
<a name="l01374"></a>01374          <a class="code" href="strings_8h.html#a85cd5a8ef499e39d22b4bfeb8b9a64f7" title="Append to a thread local dynamic string.">ast_str_append</a>(&amp;outputstr, 0, <span class="stringliteral">&quot;%s%s&quot;</span>, (first ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;, &quot;</span>), content);
<a name="l01375"></a>01375       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<span class="keyword">typename</span>, <span class="stringliteral">&quot;astcli&quot;</span>)) {
<a name="l01376"></a>01376          <a class="code" href="strings_8h.html#a85cd5a8ef499e39d22b4bfeb8b9a64f7" title="Append to a thread local dynamic string.">ast_str_append</a>(&amp;outputstr, 0, <span class="stringliteral">&quot;%s&lt;astcli&gt;%s&lt;/astcli&gt;&quot;</span>, (first ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;, &quot;</span>), content);
<a name="l01377"></a>01377       } <span class="keywordflow">else</span> {
<a name="l01378"></a>01378          <a class="code" href="strings_8h.html#a85cd5a8ef499e39d22b4bfeb8b9a64f7" title="Append to a thread local dynamic string.">ast_str_append</a>(&amp;outputstr, 0, <span class="stringliteral">&quot;%s%s&quot;</span>, (first ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;, &quot;</span>), content);
<a name="l01379"></a>01379       }
<a name="l01380"></a>01380       first = 0;
<a name="l01381"></a>01381       <a class="code" href="xml_8h.html#ae428c2b44d463e2fe692360f4d530cdb" title="Free a content element that was returned by ast_xml_get_text().">ast_xml_free_text</a>(content);
<a name="l01382"></a>01382       <a class="code" href="xml_8h.html#a8a555ceb9dcd4102c73aad5304ff2f34" title="Free an attribute returned by ast_xml_get_attribute().">ast_xml_free_attr</a>(<span class="keyword">typename</span>);
<a name="l01383"></a>01383    }
<a name="l01384"></a>01384 
<a name="l01385"></a>01385    output = <a class="code" href="astmm_8h.html#a2ef2401ade6b4b773138a82c86c40903">ast_strdup</a>(<a class="code" href="strings_8h.html#a053bdfc229997a75f112bdd7b995e00b" title="Returns the string buffer within the ast_str buf.">ast_str_buffer</a>(outputstr));
<a name="l01386"></a>01386    <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(outputstr);
<a name="l01387"></a>01387 
<a name="l01388"></a>01388    <span class="keywordflow">return</span> output;
<a name="l01389"></a>01389 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a92ab99fc2fa8a31c591531b36d391e3f"></a><!-- doxytag: member="xmldoc.h::ast_xmldoc_build_synopsis" ref="a92ab99fc2fa8a31c591531b36d391e3f" args="(const char *type, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_xmldoc_build_synopsis </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generate synopsis documentation from XML. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>The source of documentation (application, function, etc). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>The name of the application, function, etc. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>on error. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>A</em>&nbsp;</td><td>malloc'ed string with the synopsis. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="xmldoc_8c_source.html#l01740">1740</a> of file <a class="el" href="xmldoc_8c_source.html">xmldoc.c</a>.</p>

<p>References <a class="el" href="xmldoc_8c_source.html#l01706">xmldoc_build_field()</a>.</p>

<p>Referenced by <a class="el" href="pbx_8c_source.html#l03244">acf_retrieve_docs()</a>, <a class="el" href="res__agi_8c_source.html#l02556">ast_agi_register()</a>, and <a class="el" href="pbx_8c_source.html#l05062">ast_register_application2()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01741"></a>01741 {
<a name="l01742"></a>01742    <span class="keywordflow">return</span> <a class="code" href="xmldoc_8c.html#aeb2341b29c15727e507610b6abc7e18e" title="Get the content of a field (synopsis, description, etc) from an asterisk document...">xmldoc_build_field</a>(<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, <a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="stringliteral">&quot;synopsis&quot;</span>, 1);
<a name="l01743"></a>01743 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a54a5b2e3ff1b6b6f06d9bab70e70c924"></a><!-- doxytag: member="xmldoc.h::ast_xmldoc_build_syntax" ref="a54a5b2e3ff1b6b6f06d9bab70e70c924" args="(const char *type, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_xmldoc_build_syntax </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the syntax for a specified application or function. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Application, Function or AGI ? </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Name of the application or function. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>on error. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>The</em>&nbsp;</td><td>generated syntax in a ast_malloc'ed string. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="xmldoc_8c_source.html#l01020">1020</a> of file <a class="el" href="xmldoc_8c_source.html">xmldoc.c</a>.</p>

<p>References <a class="el" href="xml_8c_source.html#l00184">ast_xml_node_get_children()</a>, <a class="el" href="xml_8c_source.html#l00179">ast_xml_node_get_name()</a>, <a class="el" href="xml_8c_source.html#l00189">ast_xml_node_get_next()</a>, <a class="el" href="xmldoc_8c_source.html#l00989">FUNCTION_SYNTAX</a>, <a class="el" href="xmldoc_8c_source.html#l00465">xmldoc_get_node()</a>, <a class="el" href="xmldoc_8c_source.html#l00898">xmldoc_get_syntax_cmd()</a>, <a class="el" href="xmldoc_8c_source.html#l00620">xmldoc_get_syntax_fun()</a>, and <a class="el" href="xmldoc_8c_source.html#l01008">xmldoc_get_syntax_type()</a>.</p>

<p>Referenced by <a class="el" href="pbx_8c_source.html#l03244">acf_retrieve_docs()</a>, <a class="el" href="res__agi_8c_source.html#l02556">ast_agi_register()</a>, and <a class="el" href="pbx_8c_source.html#l05062">ast_register_application2()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01021"></a>01021 {
<a name="l01022"></a>01022    <span class="keyword">struct </span>ast_xml_node *node;
<a name="l01023"></a>01023    <span class="keywordtype">char</span> *syntax = NULL;
<a name="l01024"></a>01024 
<a name="l01025"></a>01025    node = <a class="code" href="xmldoc_8c.html#af1f439077def997dc752361c8dbdcb12">xmldoc_get_node</a>(<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, <a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="xmldoc_8c.html#a0b2ace3b0a473d2514ce792377817934" title="XML documentation language.">documentation_language</a>);
<a name="l01026"></a>01026    <span class="keywordflow">if</span> (!node) {
<a name="l01027"></a>01027       <span class="keywordflow">return</span> NULL;
<a name="l01028"></a>01028    }
<a name="l01029"></a>01029 
<a name="l01030"></a>01030    <span class="keywordflow">for</span> (node = <a class="code" href="xml_8h.html#a6064a4b3e299bb92aa8c8c7c1b363527" title="Get the node&amp;#39;s children.">ast_xml_node_get_children</a>(node); node; node = <a class="code" href="xml_8h.html#aa7d34402682c9bc1dfb9aea971f9eba7" title="Get the next node in the same level.">ast_xml_node_get_next</a>(node)) {
<a name="l01031"></a>01031       <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="xml_8h.html#a02cd60b8b2d5d96e78c858429b1b1d11" title="Get the name of a node.">ast_xml_node_get_name</a>(node), <span class="stringliteral">&quot;syntax&quot;</span>)) {
<a name="l01032"></a>01032          <span class="keywordflow">break</span>;
<a name="l01033"></a>01033       }
<a name="l01034"></a>01034    }
<a name="l01035"></a>01035 
<a name="l01036"></a>01036    <span class="keywordflow">if</span> (node) {
<a name="l01037"></a>01037       <span class="keywordflow">if</span> (<a class="code" href="xmldoc_8c.html#a5b51a11f16e9d07806af135522e258be">xmldoc_get_syntax_type</a>(<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>) == <a class="code" href="xmldoc_8c.html#a595475242aec01e7323361b70fb5f567a2f5c1738e74ee48467e4c16ba168e163">FUNCTION_SYNTAX</a>) {
<a name="l01038"></a>01038          syntax = <a class="code" href="xmldoc_8c.html#a6cc1d90ffce561545d1d4d9e6d5a8df1">xmldoc_get_syntax_fun</a>(node, <a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="stringliteral">&quot;parameter&quot;</span>, 1, 1);
<a name="l01039"></a>01039       } <span class="keywordflow">else</span> {
<a name="l01040"></a>01040          syntax = <a class="code" href="xmldoc_8c.html#a715470224f007f05ca6940fee40132ef">xmldoc_get_syntax_cmd</a>(node, <a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, 1);
<a name="l01041"></a>01041       }
<a name="l01042"></a>01042    }
<a name="l01043"></a>01043    <span class="keywordflow">return</span> syntax;
<a name="l01044"></a>01044 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a637de870dfc83d0694f588c5a814ce38"></a><!-- doxytag: member="xmldoc.h::ast_xmldoc_printable" ref="a637de870dfc83d0694f588c5a814ce38" args="(const char *bwinput, int withcolors)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_xmldoc_printable </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>bwinput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>withcolors</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Colorize and put delimiters (instead of tags) to the xmldoc output. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bwinput</em>&nbsp;</td><td>Not colorized input with tags. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>withcolors</em>&nbsp;</td><td>Result output with colors. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>on error. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>New</em>&nbsp;</td><td>malloced buffer colorized and with delimiters. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="xmldoc_8c_source.html#l00309">309</a> of file <a class="el" href="xmldoc_8c_source.html">xmldoc.c</a>.</p>

<p>References <a class="el" href="isdn__lib_8c_source.html#l00040">ARRAY_LEN</a>, <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="strings_8h_source.html#l00846">ast_str_append()</a>, <a class="el" href="strings_8h_source.html#l00488">ast_str_buffer()</a>, <a class="el" href="strings_8h_source.html#l00415">ast_str_create()</a>, <a class="el" href="term_8c_source.html#l00226">ast_term_color_code()</a>, <a class="el" href="adsistub_8c_source.html#l00059">buf</a>, <a class="el" href="term_8h_source.html#l00059">COLOR_CYAN</a>, <a class="el" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>, <a class="el" href="func__strings_8c_source.html#l00821">len()</a>, <a class="el" href="agi_2strcompat_8c_source.html#l00093">strcasestr()</a>, <a class="el" href="term_8c_source.html#l00348">term_end()</a>, and <a class="el" href="xmldoc_8c_source.html#l00232">xmldoc_string_wrap()</a>.</p>

<p>Referenced by <a class="el" href="res__agi_8c_source.html#l02996">handle_cli_agi_show()</a>, <a class="el" href="pbx_8c_source.html#l03095">handle_show_function()</a>, <a class="el" href="pbx_8c_source.html#l05186">print_app_docs()</a>, and <a class="el" href="res__agi_8c_source.html#l03130">write_htmldump()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00310"></a>00310 {
<a name="l00311"></a>00311    <span class="keyword">struct </span><a class="code" href="structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed...">ast_str</a> *colorized;
<a name="l00312"></a>00312    <span class="keywordtype">char</span> *wrapped = NULL;
<a name="l00313"></a>00313    <span class="keywordtype">int</span> i, c, <a class="code" href="func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, colorsection;
<a name="l00314"></a>00314    <span class="keywordtype">char</span> *tmp;
<a name="l00315"></a>00315    <span class="keywordtype">size_t</span> bwinputlen;
<a name="l00316"></a>00316    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> base_fg = <a class="code" href="term_8h.html#a82573859711fce56f1aa0a76b18a9b18">COLOR_CYAN</a>;
<a name="l00317"></a>00317 
<a name="l00318"></a>00318    <span class="keywordflow">if</span> (!bwinput) {
<a name="l00319"></a>00319       <span class="keywordflow">return</span> NULL;
<a name="l00320"></a>00320    }
<a name="l00321"></a>00321 
<a name="l00322"></a>00322    bwinputlen = strlen(bwinput);
<a name="l00323"></a>00323 
<a name="l00324"></a>00324    <span class="keywordflow">if</span> (!(colorized = <a class="code" href="strings_8h.html#a8ec37e4acb6ecb20eb6f6edd1141cd76" title="Create a malloc&amp;#39;ed dynamic length string.">ast_str_create</a>(256))) {
<a name="l00325"></a>00325       <span class="keywordflow">return</span> NULL;
<a name="l00326"></a>00326    }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328    <span class="keywordflow">if</span> (withcolors) {
<a name="l00329"></a>00329       <a class="code" href="term_8h.html#a5793417e507670e905f441b1d6e30f86" title="Append a color sequence to an ast_str.">ast_term_color_code</a>(&amp;colorized, base_fg, 0);
<a name="l00330"></a>00330       <span class="keywordflow">if</span> (!colorized) {
<a name="l00331"></a>00331          <span class="keywordflow">return</span> NULL;
<a name="l00332"></a>00332       }
<a name="l00333"></a>00333    }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335    <span class="keywordflow">for</span> (i = 0; i &lt; bwinputlen; i++) {
<a name="l00336"></a>00336       colorsection = 0;
<a name="l00337"></a>00337       <span class="comment">/* Check if we are at the beginning of a tag to be colorized. */</span>
<a name="l00338"></a>00338       <span class="keywordflow">for</span> (c = 0; c &lt; <a class="code" href="isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>); c++) {
<a name="l00339"></a>00339          <span class="keywordflow">if</span> (strncasecmp(bwinput + i, <a class="code" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>[c].inittag, strlen(<a class="code" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>[c].inittag))) {
<a name="l00340"></a>00340             <span class="keywordflow">continue</span>;
<a name="l00341"></a>00341          }
<a name="l00342"></a>00342 
<a name="l00343"></a>00343          <span class="keywordflow">if</span> (!(tmp = <a class="code" href="agi_2strcompat_8c.html#ae9229017a4501f8d6a637b4498cfed2e">strcasestr</a>(bwinput + i + strlen(<a class="code" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>[c].inittag), <a class="code" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>[c].endtag))) {
<a name="l00344"></a>00344             <span class="keywordflow">continue</span>;
<a name="l00345"></a>00345          }
<a name="l00346"></a>00346 
<a name="l00347"></a>00347          len = tmp - (bwinput + i + strlen(<a class="code" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>[c].inittag));
<a name="l00348"></a>00348 
<a name="l00349"></a>00349          <span class="comment">/* Setup color */</span>
<a name="l00350"></a>00350          <span class="keywordflow">if</span> (withcolors) {
<a name="l00351"></a>00351             <a class="code" href="term_8h.html#a5793417e507670e905f441b1d6e30f86" title="Append a color sequence to an ast_str.">ast_term_color_code</a>(&amp;colorized, <a class="code" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>[c].colorfg, 0);
<a name="l00352"></a>00352             <span class="keywordflow">if</span> (!colorized) {
<a name="l00353"></a>00353                <span class="keywordflow">return</span> NULL;
<a name="l00354"></a>00354             }
<a name="l00355"></a>00355          }
<a name="l00356"></a>00356 
<a name="l00357"></a>00357          <span class="comment">/* copy initial string replace */</span>
<a name="l00358"></a>00358          <a class="code" href="strings_8h.html#a85cd5a8ef499e39d22b4bfeb8b9a64f7" title="Append to a thread local dynamic string.">ast_str_append</a>(&amp;colorized, 0, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>[c].init);
<a name="l00359"></a>00359          <span class="keywordflow">if</span> (!colorized) {
<a name="l00360"></a>00360             <span class="keywordflow">return</span> NULL;
<a name="l00361"></a>00361          }
<a name="l00362"></a>00362          {
<a name="l00363"></a>00363             <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>[len + 1];
<a name="l00364"></a>00364             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(buf, bwinput + i + strlen(<a class="code" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>[c].inittag), <span class="keyword">sizeof</span>(buf));
<a name="l00365"></a>00365             <a class="code" href="strings_8h.html#a85cd5a8ef499e39d22b4bfeb8b9a64f7" title="Append to a thread local dynamic string.">ast_str_append</a>(&amp;colorized, 0, <span class="stringliteral">&quot;%s&quot;</span>, buf);
<a name="l00366"></a>00366          }
<a name="l00367"></a>00367          <span class="keywordflow">if</span> (!colorized) {
<a name="l00368"></a>00368             <span class="keywordflow">return</span> NULL;
<a name="l00369"></a>00369          }
<a name="l00370"></a>00370 
<a name="l00371"></a>00371          <span class="comment">/* copy the ending string replace */</span>
<a name="l00372"></a>00372          <a class="code" href="strings_8h.html#a85cd5a8ef499e39d22b4bfeb8b9a64f7" title="Append to a thread local dynamic string.">ast_str_append</a>(&amp;colorized, 0, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>[c].end);
<a name="l00373"></a>00373          <span class="keywordflow">if</span> (!colorized) {
<a name="l00374"></a>00374             <span class="keywordflow">return</span> NULL;
<a name="l00375"></a>00375          }
<a name="l00376"></a>00376 
<a name="l00377"></a>00377          <span class="comment">/* Continue with the last color. */</span>
<a name="l00378"></a>00378          <span class="keywordflow">if</span> (withcolors) {
<a name="l00379"></a>00379             <a class="code" href="term_8h.html#a5793417e507670e905f441b1d6e30f86" title="Append a color sequence to an ast_str.">ast_term_color_code</a>(&amp;colorized, base_fg, 0);
<a name="l00380"></a>00380             <span class="keywordflow">if</span> (!colorized) {
<a name="l00381"></a>00381                <span class="keywordflow">return</span> NULL;
<a name="l00382"></a>00382             }
<a name="l00383"></a>00383          }
<a name="l00384"></a>00384 
<a name="l00385"></a>00385          i += len + strlen(<a class="code" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>[c].endtag) + strlen(<a class="code" href="xmldoc_8c.html#a9712901310108a9614a9a28136e6754a">colorized_tags</a>[c].inittag) - 1;
<a name="l00386"></a>00386          colorsection = 1;
<a name="l00387"></a>00387          <span class="keywordflow">break</span>;
<a name="l00388"></a>00388       }
<a name="l00389"></a>00389 
<a name="l00390"></a>00390       <span class="keywordflow">if</span> (!colorsection) {
<a name="l00391"></a>00391          <a class="code" href="strings_8h.html#a85cd5a8ef499e39d22b4bfeb8b9a64f7" title="Append to a thread local dynamic string.">ast_str_append</a>(&amp;colorized, 0, <span class="stringliteral">&quot;%c&quot;</span>, bwinput[i]);
<a name="l00392"></a>00392          <span class="keywordflow">if</span> (!colorized) {
<a name="l00393"></a>00393             <span class="keywordflow">return</span> NULL;
<a name="l00394"></a>00394          }
<a name="l00395"></a>00395       }
<a name="l00396"></a>00396    }
<a name="l00397"></a>00397 
<a name="l00398"></a>00398    <span class="keywordflow">if</span> (withcolors) {
<a name="l00399"></a>00399       <a class="code" href="strings_8h.html#a85cd5a8ef499e39d22b4bfeb8b9a64f7" title="Append to a thread local dynamic string.">ast_str_append</a>(&amp;colorized, 0, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="term_8h.html#a7c737dda11a1138a30529adcffaf56ff">term_end</a>());
<a name="l00400"></a>00400       <span class="keywordflow">if</span> (!colorized) {
<a name="l00401"></a>00401          <span class="keywordflow">return</span> NULL;
<a name="l00402"></a>00402       }
<a name="l00403"></a>00403    }
<a name="l00404"></a>00404 
<a name="l00405"></a>00405    <span class="comment">/* Wrap the text, notice that string wrap will avoid cutting an ESC sequence. */</span>
<a name="l00406"></a>00406    wrapped = <a class="code" href="xmldoc_8c.html#a487c5c730276403d585b07d5b4a43cd9">xmldoc_string_wrap</a>(<a class="code" href="strings_8h.html#a053bdfc229997a75f112bdd7b995e00b" title="Returns the string buffer within the ast_str buf.">ast_str_buffer</a>(colorized), <a class="code" href="xmldoc_8c.html#aa552c3993b1ab39a21a153f6dccb8125" title="Number of columns to print when showing the XML documentation with a &amp;#39;core show...">xmldoc_text_columns</a>, <a class="code" href="xmldoc_8c.html#a35180e7cd29687b79b6450706156f539" title="This is a value that we will use to let the wrapping mechanism move the cursor backward...">xmldoc_max_diff</a>);
<a name="l00407"></a>00407 
<a name="l00408"></a>00408    <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(colorized);
<a name="l00409"></a>00409 
<a name="l00410"></a>00410    <span class="keywordflow">return</span> wrapped;
<a name="l00411"></a>00411 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:23:35 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
