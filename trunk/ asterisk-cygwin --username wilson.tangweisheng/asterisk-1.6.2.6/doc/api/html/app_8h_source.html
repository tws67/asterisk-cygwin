<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:18:24 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_1ab815038f534adda65c8b4ae4993449.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_16d825f1fa9ecca2e70b1a8d9256d0e6.html">asterisk</a>
  </div>
</div>
<div class="contents">
<h1>app.h</h1><a href="app_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Asterisk -- An open source telephony toolkit.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 1999 - 2005, Digium, Inc.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Mark Spencer &lt;markster@digium.com&gt;</span>
<a name="l00007"></a>00007 <span class="comment"> * See http://www.asterisk.org for more information about</span>
<a name="l00008"></a>00008 <span class="comment"> * the Asterisk project. Please do not directly contact</span>
<a name="l00009"></a>00009 <span class="comment"> * any of the maintainers of this project for assistance;</span>
<a name="l00010"></a>00010 <span class="comment"> * the project provides a web site, mailing lists and IRC</span>
<a name="l00011"></a>00011 <span class="comment"> * channels for your use.</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> * This program is free software, distributed under the terms of</span>
<a name="l00014"></a>00014 <span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span>
<a name="l00015"></a>00015 <span class="comment"> * at the top of the source tree.</span>
<a name="l00016"></a>00016 <span class="comment"> */</span>
<a name="l00017"></a>00017 <span class="comment"></span>
<a name="l00018"></a>00018 <span class="comment">/*! \file</span>
<a name="l00019"></a>00019 <span class="comment"> * \brief Application convenience functions, designed to give consistent</span>
<a name="l00020"></a>00020 <span class="comment"> *        look and feel to Asterisk apps.</span>
<a name="l00021"></a>00021 <span class="comment"> */</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#ifndef _ASTERISK_APP_H</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#define _ASTERISK_APP_H</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="strings_8h.html" title="String manipulation functions.">asterisk/strings.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="threadstorage_8h.html" title="Definitions to aid in the use of thread local storage.">asterisk/threadstorage.h</a>&quot;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="keyword">struct </span><a class="code" href="structast__flags64.html" title="Structure used to handle a large number of boolean flags == used only in app_dial...">ast_flags64</a>;
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="preprocessor">#if defined(__cplusplus) || defined(c_plusplus)</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00033"></a>00033 <span class="preprocessor">#endif</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>
<a name="l00035"></a>00035 <a class="code" href="threadstorage_8h.html#af805e11a57bcee8656b8e65e7546379e">AST_THREADSTORAGE_EXTERNAL</a>(ast_str_thread_global_buf);
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="comment">/* IVR stuff */</span>
<a name="l00038"></a>00038 <span class="comment"></span>
<a name="l00039"></a>00039 <span class="comment">/*! \brief Callback function for IVR</span>
<a name="l00040"></a>00040 <span class="comment">    \return returns 0 on completion, -1 on hangup or digit if interrupted</span>
<a name="l00041"></a>00041 <span class="comment">  */</span>
<a name="l00042"></a><a class="code" href="app_8h.html#a69c12aaf969284756dee28dc1fa503fa">00042</a> <span class="keyword">typedef</span> int (*<a class="code" href="app_8h.html#a69c12aaf969284756dee28dc1fa503fa" title="Callback function for IVR.">ast_ivr_callback</a>)(<span class="keyword">struct </span><a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *<a class="code" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, <span class="keywordtype">char</span> *option, <span class="keywordtype">void</span> *cbdata);
<a name="l00043"></a>00043 
<a name="l00044"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5">00044</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l00045"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a23d56e69a479b44ce2f89034fda4ed9a">00045</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a23d56e69a479b44ce2f89034fda4ed9a">AST_ACTION_UPONE</a>, <span class="comment">/*!&lt; adata is unused */</span>
<a name="l00046"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a9f49762cd1386370ddc2f8fc64965b88">00046</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a9f49762cd1386370ddc2f8fc64965b88">AST_ACTION_EXIT</a>,  <span class="comment">/*!&lt; adata is the return value for ast_ivr_menu_run if channel was not hungup */</span>
<a name="l00047"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a911a0be3e05292936e4e6f8646194f7f">00047</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a911a0be3e05292936e4e6f8646194f7f">AST_ACTION_CALLBACK</a>, <span class="comment">/*!&lt; adata is an ast_ivr_callback */</span>
<a name="l00048"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a4bd0306ccd5256f1b150ec9b1d220f0f">00048</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a4bd0306ccd5256f1b150ec9b1d220f0f">AST_ACTION_PLAYBACK</a>, <span class="comment">/*!&lt; adata is file to play */</span>
<a name="l00049"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5ab738e4ae4a7e6b7cd68b13d2a58985ba">00049</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5ab738e4ae4a7e6b7cd68b13d2a58985ba">AST_ACTION_BACKGROUND</a>,  <span class="comment">/*!&lt; adata is file to play */</span>
<a name="l00050"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a5a5e2a82ee86aab6a69decbb02514e68">00050</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a5a5e2a82ee86aab6a69decbb02514e68">AST_ACTION_PLAYLIST</a>, <span class="comment">/*!&lt; adata is list of files, separated by ; to play */</span>
<a name="l00051"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5adc38e521e86969765c95912988cf6e2a">00051</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5adc38e521e86969765c95912988cf6e2a">AST_ACTION_MENU</a>,  <span class="comment">/*!&lt; adata is a pointer to an ast_ivr_menu */</span>
<a name="l00052"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5ae951cfbea814df40816b70a1eeba65e8">00052</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5ae951cfbea814df40816b70a1eeba65e8">AST_ACTION_REPEAT</a>,   <span class="comment">/*!&lt; adata is max # of repeats, cast to a pointer */</span>
<a name="l00053"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a53ddb6911a10ea526b86f4cde6b2ce80">00053</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a53ddb6911a10ea526b86f4cde6b2ce80">AST_ACTION_RESTART</a>,  <span class="comment">/*!&lt; adata is like repeat, but resets repeats to 0 */</span>
<a name="l00054"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5af34630ccb66618ee9dfef4d14423a6d0">00054</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5af34630ccb66618ee9dfef4d14423a6d0">AST_ACTION_TRANSFER</a>, <span class="comment">/*!&lt; adata is a string with exten\verbatim[@context]\endverbatim */</span>
<a name="l00055"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5ac8b97828ca2347ecf4bf942478ddf0ba">00055</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5ac8b97828ca2347ecf4bf942478ddf0ba">AST_ACTION_WAITOPTION</a>,  <span class="comment">/*!&lt; adata is a timeout, or 0 for defaults */</span>
<a name="l00056"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a9470126e5a37e3044d577f6ba1140644">00056</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a9470126e5a37e3044d577f6ba1140644">AST_ACTION_NOOP</a>,  <span class="comment">/*!&lt; adata is unused */</span>
<a name="l00057"></a><a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a363ce24d1bbcbf4687e4fd21aa1ee621">00057</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a363ce24d1bbcbf4687e4fd21aa1ee621">AST_ACTION_BACKLIST</a>, <span class="comment">/*!&lt; adata is list of files separated by ; allows interruption */</span>
<a name="l00058"></a>00058 } <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5">ast_ivr_action</a>;
<a name="l00059"></a>00059 <span class="comment"></span>
<a name="l00060"></a>00060 <span class="comment">/*!</span>
<a name="l00061"></a>00061 <span class="comment">    Special &quot;options&quot; are:</span>
<a name="l00062"></a>00062 <span class="comment">   \arg &quot;s&quot; - &quot;start here (one time greeting)&quot;</span>
<a name="l00063"></a>00063 <span class="comment">   \arg &quot;g&quot; - &quot;greeting/instructions&quot;</span>
<a name="l00064"></a>00064 <span class="comment">   \arg &quot;t&quot; - &quot;timeout&quot;</span>
<a name="l00065"></a>00065 <span class="comment">   \arg &quot;h&quot; - &quot;hangup&quot;</span>
<a name="l00066"></a>00066 <span class="comment">   \arg &quot;i&quot; - &quot;invalid selection&quot;</span>
<a name="l00067"></a>00067 <span class="comment"></span>
<a name="l00068"></a>00068 <span class="comment">*/</span>
<a name="l00069"></a><a class="code" href="structast__ivr__option.html">00069</a> <span class="keyword">struct </span><a class="code" href="structast__ivr__option.html">ast_ivr_option</a> {
<a name="l00070"></a><a class="code" href="structast__ivr__option.html#a756aafa2c9b99eaa7eb7f8886c7a8cb2">00070</a>    <span class="keywordtype">char</span> *option;
<a name="l00071"></a><a class="code" href="structast__ivr__option.html#af5aafe3716e15fcb2fb46ac4a7dc10d1">00071</a>    <a class="code" href="app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5">ast_ivr_action</a> <a class="code" href="structast__ivr__option.html#af5aafe3716e15fcb2fb46ac4a7dc10d1">action</a>;
<a name="l00072"></a><a class="code" href="structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">00072</a>    <span class="keywordtype">void</span> *<a class="code" href="structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">adata</a>;
<a name="l00073"></a>00073 };
<a name="l00074"></a>00074 
<a name="l00075"></a><a class="code" href="structast__ivr__menu.html">00075</a> <span class="keyword">struct </span><a class="code" href="structast__ivr__menu.html">ast_ivr_menu</a> {
<a name="l00076"></a><a class="code" href="structast__ivr__menu.html#af06d911bb9e05f491ef3da520d03796c">00076</a>    <span class="keywordtype">char</span> *<a class="code" href="structast__ivr__menu.html#af06d911bb9e05f491ef3da520d03796c">title</a>;      <span class="comment">/*!&lt; Title of menu */</span>
<a name="l00077"></a><a class="code" href="structast__ivr__menu.html#ac92588540e8c1d014a08cd8a45462b19">00077</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structast__ivr__menu.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>;  <span class="comment">/*!&lt; Flags */</span>
<a name="l00078"></a><a class="code" href="structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">00078</a>    <span class="keyword">struct </span><a class="code" href="structast__ivr__option.html">ast_ivr_option</a> *<a class="code" href="structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">options</a>;  <span class="comment">/*!&lt; All options */</span>
<a name="l00079"></a>00079 };
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="app_8h.html#aa592076f909040907106f25bf7a2d727">00081</a> <span class="preprocessor">#define AST_IVR_FLAG_AUTORESTART (1 &lt;&lt; 0)</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span>
<a name="l00083"></a><a class="code" href="app_8h.html#adfb9b356a8ef9eb14a39601cf228277a">00083</a> <span class="preprocessor">#define AST_IVR_DECLARE_MENU(holder, title, flags, foo...) \</span>
<a name="l00084"></a>00084 <span class="preprocessor">   static struct ast_ivr_option __options_##holder[] = foo;\</span>
<a name="l00085"></a>00085 <span class="preprocessor">   static struct ast_ivr_menu holder = { title, flags, __options_##holder }</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span>
<a name="l00087"></a>00087 <span class="comment"></span>
<a name="l00088"></a>00088 <span class="comment">/*!   \brief Runs an IVR menu</span>
<a name="l00089"></a>00089 <span class="comment">   \return returns 0 on successful completion, -1 on hangup, or -2 on user error in menu */</span>
<a name="l00090"></a>00090 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a855c3d16ea8884345a7b1c3fe5a16577" title="Runs an IVR menu.">ast_ivr_menu_run</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *c, <span class="keyword">struct</span> <a class="code" href="structast__ivr__menu.html">ast_ivr_menu</a> *menu, <span class="keywordtype">void</span> *cbdata);
<a name="l00091"></a>00091 <span class="comment"></span>
<a name="l00092"></a>00092 <span class="comment">/*! \brief Plays a stream and gets DTMF data from a channel</span>
<a name="l00093"></a>00093 <span class="comment"> * \param c Which channel one is interacting with</span>
<a name="l00094"></a>00094 <span class="comment"> * \param prompt File to pass to ast_streamfile (the one that you wish to play).</span>
<a name="l00095"></a>00095 <span class="comment"> *        It is also valid for this to be multiple files concatenated by &quot;&amp;&quot;.</span>
<a name="l00096"></a>00096 <span class="comment"> *        For example, &quot;file1&amp;file2&amp;file3&quot;.</span>
<a name="l00097"></a>00097 <span class="comment"> * \param s The location where the DTMF data will be stored</span>
<a name="l00098"></a>00098 <span class="comment"> * \param maxlen Max Length of the data</span>
<a name="l00099"></a>00099 <span class="comment"> * \param timeout Timeout length waiting for data(in milliseconds).  Set to 0 for standard timeout(six seconds), or -1 for no time out.</span>
<a name="l00100"></a>00100 <span class="comment"> *</span>
<a name="l00101"></a>00101 <span class="comment"> *  This function was designed for application programmers for situations where they need</span>
<a name="l00102"></a>00102 <span class="comment"> *  to play a message and then get some DTMF data in response to the message.  If a digit</span>
<a name="l00103"></a>00103 <span class="comment"> *  is pressed during playback, it will immediately break out of the message and continue</span>
<a name="l00104"></a>00104 <span class="comment"> *  execution of your code.</span>
<a name="l00105"></a>00105 <span class="comment"> */</span>
<a name="l00106"></a>00106 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#af3f76858d4dd513e59dbe5e67bc46220" title="Plays a stream and gets DTMF data from a channel.">ast_app_getdata</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a>, <span class="keywordtype">char</span> *<a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a>, <span class="keywordtype">int</span> maxlen, <span class="keywordtype">int</span> timeout);
<a name="l00107"></a>00107 <span class="comment"></span>
<a name="l00108"></a>00108 <span class="comment">/*! \brief Full version with audiofd and controlfd.  NOTE: returns &apos;2&apos; on ctrlfd available, not &apos;1&apos; like other full functions */</span>
<a name="l00109"></a>00109 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a9fc880ff0cd0b42ef6212b43deb4b98f" title="Full version with audiofd and controlfd. NOTE: returns &amp;#39;2&amp;#39; on ctrlfd available...">ast_app_getdata_full</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *c, <span class="keywordtype">char</span> *<a class="code" href="asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a>, <span class="keywordtype">char</span> *<a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a>, <span class="keywordtype">int</span> maxlen, <span class="keywordtype">int</span> timeout, <span class="keywordtype">int</span> audiofd, <span class="keywordtype">int</span> ctrlfd);
<a name="l00110"></a>00110 <span class="comment"></span>
<a name="l00111"></a>00111 <span class="comment">/*!</span>
<a name="l00112"></a>00112 <span class="comment"> * \brief Set voicemail function callbacks</span>
<a name="l00113"></a>00113 <span class="comment"> * \param[in] inboxcount2_func set function pointer</span>
<a name="l00114"></a>00114 <span class="comment"> * \param[in] sayname_func set function pointer</span>
<a name="l00115"></a>00115 <span class="comment"> * \param[in] inboxcount_func set function pointer</span>
<a name="l00116"></a>00116 <span class="comment"> * \param[in] messagecount_func set function pointer</span>
<a name="l00117"></a>00117 <span class="comment"> * \version 1.6.1 Added inboxcount2_func, sayname_func</span>
<a name="l00118"></a>00118 <span class="comment"> */</span>
<a name="l00119"></a>00119 <span class="keywordtype">void</span> <a class="code" href="app_8h.html#a27992e5c39b818ff6b190f726a80cb50" title="Set voicemail function callbacks.">ast_install_vm_functions</a>(<span class="keywordtype">int</span> (*has_voicemail_func)(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="chan__mgcp_8c.html#ac81f44f4f22dee90de5975cf8fa4641b">mailbox</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *folder),
<a name="l00120"></a>00120                <span class="keywordtype">int</span> (*inboxcount_func)(<span class="keyword">const</span> <span class="keywordtype">char</span> *mailbox, <span class="keywordtype">int</span> *newmsgs, <span class="keywordtype">int</span> *oldmsgs),
<a name="l00121"></a>00121                <span class="keywordtype">int</span> (*inboxcount2_func)(<span class="keyword">const</span> <span class="keywordtype">char</span> *mailbox, <span class="keywordtype">int</span> *urgentmsgs, <span class="keywordtype">int</span> *newmsgs, <span class="keywordtype">int</span> *oldmsgs),
<a name="l00122"></a>00122                <span class="keywordtype">int</span> (*messagecount_func)(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *mailbox, <span class="keyword">const</span> <span class="keywordtype">char</span> *folder),
<a name="l00123"></a>00123                <span class="keywordtype">int</span> (*sayname_func)(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *mailbox, <span class="keyword">const</span> <span class="keywordtype">char</span> *context));
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 <span class="keywordtype">void</span> <a class="code" href="app_8h.html#a65d1324f7632267a35a6d933fdbdc6f9">ast_uninstall_vm_functions</a>(<span class="keywordtype">void</span>);
<a name="l00126"></a>00126 <span class="comment"></span>
<a name="l00127"></a>00127 <span class="comment">/*!</span>
<a name="l00128"></a>00128 <span class="comment"> * \brief Determine if a given mailbox has any voicemail</span>
<a name="l00129"></a>00129 <span class="comment"> * If folder is NULL, defaults to &quot;INBOX&quot;.  If folder is &quot;INBOX&quot;, includes the</span>
<a name="l00130"></a>00130 <span class="comment"> * number of messages in the &quot;Urgent&quot; folder.</span>
<a name="l00131"></a>00131 <span class="comment"> * \retval 1 Mailbox has voicemail</span>
<a name="l00132"></a>00132 <span class="comment"> * \retval 0 No new voicemail in specified mailbox</span>
<a name="l00133"></a>00133 <span class="comment"> * \retval -1 Failure</span>
<a name="l00134"></a>00134 <span class="comment"> * \since 1.0</span>
<a name="l00135"></a>00135 <span class="comment"> */</span>
<a name="l00136"></a>00136 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#ae5953304e56862ac7efc1fed0ac6732f" title="Determine if a given mailbox has any voicemail If folder is NULL, defaults to &amp;quot;INBOX&amp;quot;...">ast_app_has_voicemail</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *mailbox, <span class="keyword">const</span> <span class="keywordtype">char</span> *folder);
<a name="l00137"></a>00137 <span class="comment"></span>
<a name="l00138"></a>00138 <span class="comment">/*!</span>
<a name="l00139"></a>00139 <span class="comment"> * \brief Determine number of new/old messages in a mailbox</span>
<a name="l00140"></a>00140 <span class="comment"> * \since 1.0</span>
<a name="l00141"></a>00141 <span class="comment"> * \param[in] mailbox Mailbox specification in the format mbox[@context][&amp;mbox2[@context2]][...]</span>
<a name="l00142"></a>00142 <span class="comment"> * \param[out] newmsgs Number of messages in the &quot;INBOX&quot; folder.  Includes number of messages in the &quot;Urgent&quot; folder, if any.</span>
<a name="l00143"></a>00143 <span class="comment"> * \param[out] oldmsgs Number of messages in the &quot;Old&quot; folder.</span>
<a name="l00144"></a>00144 <span class="comment"> * \retval 0 Success</span>
<a name="l00145"></a>00145 <span class="comment"> * \retval -1 Failure</span>
<a name="l00146"></a>00146 <span class="comment"> */</span>
<a name="l00147"></a>00147 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a318582ad072d31085d4623e634edf46c" title="Determine number of new/old messages in a mailbox.">ast_app_inboxcount</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *mailbox, <span class="keywordtype">int</span> *newmsgs, <span class="keywordtype">int</span> *oldmsgs);
<a name="l00148"></a>00148 <span class="comment"></span>
<a name="l00149"></a>00149 <span class="comment">/*!</span>
<a name="l00150"></a>00150 <span class="comment"> * \brief Determine number of urgent/new/old messages in a mailbox</span>
<a name="l00151"></a>00151 <span class="comment"> * \param[in] mailbox the mailbox context to use</span>
<a name="l00152"></a>00152 <span class="comment"> * \param[out] urgentmsgs the urgent message count</span>
<a name="l00153"></a>00153 <span class="comment"> * \param[out] newmsgs the new message count</span>
<a name="l00154"></a>00154 <span class="comment"> * \param[out] oldmsgs the old message count</span>
<a name="l00155"></a>00155 <span class="comment"> * \return Returns 0 for success, negative upon error</span>
<a name="l00156"></a>00156 <span class="comment"> * \since 1.6.1</span>
<a name="l00157"></a>00157 <span class="comment"> */</span>
<a name="l00158"></a>00158 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a6f9a8f7a54dd80f1b5363b6cadfd4939" title="Determine number of urgent/new/old messages in a mailbox.">ast_app_inboxcount2</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *mailbox, <span class="keywordtype">int</span> *urgentmsgs, <span class="keywordtype">int</span> *newmsgs, <span class="keywordtype">int</span> *oldmsgs);
<a name="l00159"></a>00159 <span class="comment"></span>
<a name="l00160"></a>00160 <span class="comment">/*!</span>
<a name="l00161"></a>00161 <span class="comment"> * \brief Given a mailbox and context, play that mailbox owner&apos;s name to the channel specified</span>
<a name="l00162"></a>00162 <span class="comment"> * \param[in] chan Channel on which to play the name</span>
<a name="l00163"></a>00163 <span class="comment"> * \param[in] mailbox Mailbox number from which to retrieve the recording</span>
<a name="l00164"></a>00164 <span class="comment"> * \param[in] context Mailbox context from which to locate the mailbox number</span>
<a name="l00165"></a>00165 <span class="comment"> * \retval 0 Name played without interruption</span>
<a name="l00166"></a>00166 <span class="comment"> * \retval dtmf ASCII value of the DTMF which interrupted playback.</span>
<a name="l00167"></a>00167 <span class="comment"> * \retval -1 Unable to locate mailbox or hangup occurred.</span>
<a name="l00168"></a>00168 <span class="comment"> * \since 1.6.1</span>
<a name="l00169"></a>00169 <span class="comment"> */</span>
<a name="l00170"></a>00170 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a3c444cef1f29205f033db05bfeee8298" title="Given a mailbox and context, play that mailbox owner&amp;#39;s name to the channel specified...">ast_app_sayname</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *mailbox, <span class="keyword">const</span> <span class="keywordtype">char</span> *context);
<a name="l00171"></a>00171 <span class="comment"></span>
<a name="l00172"></a>00172 <span class="comment">/*!</span>
<a name="l00173"></a>00173 <span class="comment"> * \brief Check number of messages in a given context, mailbox, and folder</span>
<a name="l00174"></a>00174 <span class="comment"> * \since 1.4</span>
<a name="l00175"></a>00175 <span class="comment"> * \param[in] context Mailbox context</span>
<a name="l00176"></a>00176 <span class="comment"> * \param[in] mailbox Mailbox number</span>
<a name="l00177"></a>00177 <span class="comment"> * \param[in] folder Mailbox folder</span>
<a name="l00178"></a>00178 <span class="comment"> * \return Number of messages in the given context, mailbox, and folder.  If folder is NULL, folder &quot;INBOX&quot; is assumed.  If folder is &quot;INBOX&quot;, includes number of messages in the &quot;Urgent&quot; folder.</span>
<a name="l00179"></a>00179 <span class="comment"> */</span>
<a name="l00180"></a>00180 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#aa34e72e01cab2e09f4a195eb79175f95" title="Check number of messages in a given context, mailbox, and folder.">ast_app_messagecount</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *context, <span class="keyword">const</span> <span class="keywordtype">char</span> *mailbox, <span class="keyword">const</span> <span class="keywordtype">char</span> *folder);
<a name="l00181"></a>00181 <span class="comment"></span>
<a name="l00182"></a>00182 <span class="comment">/*! \brief Safely spawn an external program while closing file descriptors</span>
<a name="l00183"></a>00183 <span class="comment">   \note This replaces the \b system call in all Asterisk modules</span>
<a name="l00184"></a>00184 <span class="comment">*/</span>
<a name="l00185"></a>00185 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a9fb5cf0385848033ee3e98625e5f9784" title="Safely spawn an external program while closing file descriptors.">ast_safe_system</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a>);
<a name="l00186"></a>00186 <span class="comment"></span>
<a name="l00187"></a>00187 <span class="comment">/*!</span>
<a name="l00188"></a>00188 <span class="comment"> * \brief Replace the SIGCHLD handler</span>
<a name="l00189"></a>00189 <span class="comment"> *</span>
<a name="l00190"></a>00190 <span class="comment"> * Normally, Asterisk has a SIGCHLD handler that is cleaning up all zombie</span>
<a name="l00191"></a>00191 <span class="comment"> * processes from forking elsewhere in Asterisk.  However, if you want to</span>
<a name="l00192"></a>00192 <span class="comment"> * wait*() on the process to retrieve information about it&apos;s exit status,</span>
<a name="l00193"></a>00193 <span class="comment"> * then this signal handler needs to be temporarily replaced.</span>
<a name="l00194"></a>00194 <span class="comment"> *</span>
<a name="l00195"></a>00195 <span class="comment"> * Code that executes this function *must* call ast_unreplace_sigchld()</span>
<a name="l00196"></a>00196 <span class="comment"> * after it is finished doing the wait*().</span>
<a name="l00197"></a>00197 <span class="comment"> */</span>
<a name="l00198"></a>00198 <span class="keywordtype">void</span> <a class="code" href="app_8h.html#a6de8ef28c39cc39978497de1918bfd70" title="Replace the SIGCHLD handler.">ast_replace_sigchld</a>(<span class="keywordtype">void</span>);
<a name="l00199"></a>00199 <span class="comment"></span>
<a name="l00200"></a>00200 <span class="comment">/*!</span>
<a name="l00201"></a>00201 <span class="comment"> * \brief Restore the SIGCHLD handler</span>
<a name="l00202"></a>00202 <span class="comment"> *</span>
<a name="l00203"></a>00203 <span class="comment"> * This function is called after a call to ast_replace_sigchld.  It restores</span>
<a name="l00204"></a>00204 <span class="comment"> * the SIGCHLD handler that cleans up any zombie processes.</span>
<a name="l00205"></a>00205 <span class="comment"> */</span>
<a name="l00206"></a>00206 <span class="keywordtype">void</span> <a class="code" href="app_8h.html#ad7c2a7da4125347c06d9719580731228" title="Restore the SIGCHLD handler.">ast_unreplace_sigchld</a>(<span class="keywordtype">void</span>);
<a name="l00207"></a>00207 <span class="comment"></span>
<a name="l00208"></a>00208 <span class="comment">/*!</span>
<a name="l00209"></a>00209 <span class="comment">  \brief Send DTMF to a channel</span>
<a name="l00210"></a>00210 <span class="comment"></span>
<a name="l00211"></a>00211 <span class="comment">  \param chan    The channel that will receive the DTMF frames</span>
<a name="l00212"></a>00212 <span class="comment">  \param peer    (optional) Peer channel that will be autoserviced while the</span>
<a name="l00213"></a>00213 <span class="comment">                 primary channel is receiving DTMF</span>
<a name="l00214"></a>00214 <span class="comment">  \param digits  This is a string of characters representing the DTMF digits</span>
<a name="l00215"></a>00215 <span class="comment">                 to be sent to the channel.  Valid characters are</span>
<a name="l00216"></a>00216 <span class="comment">                 &quot;0123456789*#abcdABCD&quot;.  Note: You can pass arguments &apos;f&apos; or</span>
<a name="l00217"></a>00217 <span class="comment">                 &apos;F&apos;, if you want to Flash the channel (if supported by the</span>
<a name="l00218"></a>00218 <span class="comment">                 channel), or &apos;w&apos; to add a 500 millisecond pause to the DTMF</span>
<a name="l00219"></a>00219 <span class="comment">                 sequence.</span>
<a name="l00220"></a>00220 <span class="comment">  \param between This is the number of milliseconds to wait in between each</span>
<a name="l00221"></a>00221 <span class="comment">                 DTMF digit.  If zero milliseconds is specified, then the</span>
<a name="l00222"></a>00222 <span class="comment">                 default value of 100 will be used.</span>
<a name="l00223"></a>00223 <span class="comment">  \param duration This is the duration that each DTMF digit should have.</span>
<a name="l00224"></a>00224 <span class="comment">*/</span>
<a name="l00225"></a>00225 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#af20b8ac2e28e659be352bbaecdf0ab03" title="Send DTMF to a channel.">ast_dtmf_stream</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *peer, <span class="keyword">const</span> <span class="keywordtype">char</span> *digits, <span class="keywordtype">int</span> between, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> duration);
<a name="l00226"></a>00226 <span class="comment"></span>
<a name="l00227"></a>00227 <span class="comment">/*! \brief Stream a filename (or file descriptor) as a generator. */</span>
<a name="l00228"></a>00228 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a2566e275a6e912943c68cbfc867cc60a" title="Stream a filename (or file descriptor) as a generator.">ast_linear_stream</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keywordtype">int</span> fd, <span class="keywordtype">int</span> allowoverride);
<a name="l00229"></a>00229 <span class="comment"></span>
<a name="l00230"></a>00230 <span class="comment">/*!</span>
<a name="l00231"></a>00231 <span class="comment"> * \brief Stream a file with fast forward, pause, reverse, restart.</span>
<a name="l00232"></a>00232 <span class="comment"> * \param chan</span>
<a name="l00233"></a>00233 <span class="comment"> * \param file filename</span>
<a name="l00234"></a>00234 <span class="comment"> * \param fwd, rev, stop, pause, restart, skipms, offsetms</span>
<a name="l00235"></a>00235 <span class="comment"> *</span>
<a name="l00236"></a>00236 <span class="comment"> * Before calling this function, set this to be the number</span>
<a name="l00237"></a>00237 <span class="comment"> * of ms to start from the beginning of the file.  When the function</span>
<a name="l00238"></a>00238 <span class="comment"> * returns, it will be the number of ms from the beginning where the</span>
<a name="l00239"></a>00239 <span class="comment"> * playback stopped.  Pass NULL if you don&apos;t care.</span>
<a name="l00240"></a>00240 <span class="comment"> */</span>
<a name="l00241"></a>00241 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a3405b1282cefdceebba734b8e756c55d" title="Stream a file with fast forward, pause, reverse, restart.">ast_control_streamfile</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *file, <span class="keyword">const</span> <span class="keywordtype">char</span> *fwd, <span class="keyword">const</span> <span class="keywordtype">char</span> *rev, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="res__ais_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *pause, <span class="keyword">const</span> <span class="keywordtype">char</span> *restart, <span class="keywordtype">int</span> <a class="code" href="app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>, <span class="keywordtype">long</span> *offsetms);
<a name="l00242"></a>00242 <span class="comment"></span>
<a name="l00243"></a>00243 <span class="comment">/*! \brief Play a stream and wait for a digit, returning the digit that was pressed */</span>
<a name="l00244"></a>00244 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#abbbec6ab9a303e865a1d1a261152540d" title="Play a stream and wait for a digit, returning the digit that was pressed.">ast_play_and_wait</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *fn);
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a7f35e9e75513344d3ed7c56b22b8ea1f">ast_play_and_record_full</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *playfile, <span class="keyword">const</span> <span class="keywordtype">char</span> *recordfile, <span class="keywordtype">int</span> maxtime_sec, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, <span class="keywordtype">int</span> *duration, <span class="keywordtype">int</span> <a class="code" href="app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a>, <span class="keywordtype">int</span> maxsilence_ms, <span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="chan__agent_8c.html#a97629727ac11792aa963aed4457abde8">acceptdtmf</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *canceldtmf);
<a name="l00247"></a>00247 <span class="comment"></span>
<a name="l00248"></a>00248 <span class="comment">/*! \brief Record a file for a max amount of time (in seconds), in a given list of formats separated by &apos;|&apos;, outputting the duration of the recording, and with a maximum</span>
<a name="l00249"></a>00249 <span class="comment"> \n</span>
<a name="l00250"></a>00250 <span class="comment"> permitted silence time in milliseconds of &apos;maxsilence&apos; under &apos;silencethreshold&apos; or use &apos;-1&apos; for either or both parameters for defaults.</span>
<a name="l00251"></a>00251 <span class="comment">     calls ast_unlock_path() on &apos;path&apos; if passed */</span>
<a name="l00252"></a>00252 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a5189403102ce3cae44bd1b1644ee97a2" title="Record a file for a max amount of time (in seconds), in a given list of formats separated...">ast_play_and_record</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *playfile, <span class="keyword">const</span> <span class="keywordtype">char</span> *recordfile, <span class="keywordtype">int</span> maxtime_sec, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, <span class="keywordtype">int</span> *duration, <span class="keywordtype">int</span> <a class="code" href="app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a>, <span class="keywordtype">int</span> maxsilence_ms, <span class="keyword">const</span> <span class="keywordtype">char</span> *path);
<a name="l00253"></a>00253 <span class="comment"></span>
<a name="l00254"></a>00254 <span class="comment">/*! \brief Record a message and prepend the message to the given record file after</span>
<a name="l00255"></a>00255 <span class="comment">    playing the optional playfile (or a beep), storing the duration in</span>
<a name="l00256"></a>00256 <span class="comment">    &apos;duration&apos; and with a maximum permitted silence time in milliseconds of &apos;maxsilence&apos; under</span>
<a name="l00257"></a>00257 <span class="comment">    &apos;silencethreshold&apos; or use &apos;-1&apos; for either or both parameters for defaults. */</span>
<a name="l00258"></a>00258 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a46e323bf2b852abe8ed7490fcb6e1f6d" title="Record a message and prepend the message to the given record file after playing the...">ast_play_and_prepend</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan, <span class="keywordtype">char</span> *playfile, <span class="keywordtype">char</span> *recordfile, <span class="keywordtype">int</span> maxtime_sec, <span class="keywordtype">char</span> *fmt, <span class="keywordtype">int</span> *duration, <span class="keywordtype">int</span> <a class="code" href="chan__agent_8c.html#a690b549792f347bebb6a13518822bcf7">beep</a>, <span class="keywordtype">int</span> <a class="code" href="app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a>, <span class="keywordtype">int</span> maxsilence_ms);
<a name="l00259"></a>00259 
<a name="l00260"></a><a class="code" href="app_8h.html#a10624bc470a4ac2634221dfa74bdb17f">00260</a> <span class="keyword">enum</span> <a class="code" href="app_8h.html#a10624bc470a4ac2634221dfa74bdb17f">ast_getdata_result</a> {
<a name="l00261"></a><a class="code" href="app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa447a1a659574cde67aa71538c804206f">00261</a>    <a class="code" href="app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa447a1a659574cde67aa71538c804206f">AST_GETDATA_FAILED</a> = -1,
<a name="l00262"></a><a class="code" href="app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa76a0cf0f0ca1c3000e227686d7de7d9c">00262</a>    <a class="code" href="app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa76a0cf0f0ca1c3000e227686d7de7d9c">AST_GETDATA_COMPLETE</a> = 0,
<a name="l00263"></a><a class="code" href="app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa79554349b620ac61794e76cb70eef322">00263</a>    <a class="code" href="app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa79554349b620ac61794e76cb70eef322">AST_GETDATA_TIMEOUT</a> = 1,
<a name="l00264"></a><a class="code" href="app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa74b94669f324ba10f5bfb979f54e636c">00264</a>    <a class="code" href="app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa74b94669f324ba10f5bfb979f54e636c">AST_GETDATA_INTERRUPTED</a> = 2,<span class="comment"></span>
<a name="l00265"></a>00265 <span class="comment">   /*! indicates a user terminated empty string rather than an empty string resulting </span>
<a name="l00266"></a>00266 <span class="comment">    * from a timeout or other factors */</span>
<a name="l00267"></a><a class="code" href="app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa94425459ee6ac7993c6289fde4d4ea8c">00267</a>    <a class="code" href="app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa94425459ee6ac7993c6289fde4d4ea8c">AST_GETDATA_EMPTY_END_TERMINATED</a> = 3,
<a name="l00268"></a>00268 };
<a name="l00269"></a>00269 
<a name="l00270"></a><a class="code" href="app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8c">00270</a> <span class="keyword">enum</span> <a class="code" href="app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8c">AST_LOCK_RESULT</a> {
<a name="l00271"></a><a class="code" href="app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca37bdbc92223520af2a24d5bfd6f561bb">00271</a>    <a class="code" href="app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca37bdbc92223520af2a24d5bfd6f561bb">AST_LOCK_SUCCESS</a> = 0,
<a name="l00272"></a><a class="code" href="app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca9c0f41302de02bb0130a92669d17333d">00272</a>    <a class="code" href="app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca9c0f41302de02bb0130a92669d17333d">AST_LOCK_TIMEOUT</a> = -1,
<a name="l00273"></a><a class="code" href="app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca46f6f55c5ee9576afd8dde6376c2b01a">00273</a>    <a class="code" href="app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca46f6f55c5ee9576afd8dde6376c2b01a">AST_LOCK_PATH_NOT_FOUND</a> = -2,
<a name="l00274"></a><a class="code" href="app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8cac59129c6f641d69ad14017c1ba1f2635">00274</a>    <a class="code" href="app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8cac59129c6f641d69ad14017c1ba1f2635">AST_LOCK_FAILURE</a> = -3,
<a name="l00275"></a>00275 };
<a name="l00276"></a>00276 <span class="comment"></span>
<a name="l00277"></a>00277 <span class="comment">/*! \brief Type of locking to use in ast_lock_path / ast_unlock_path */</span>
<a name="l00278"></a><a class="code" href="app_8h.html#a889fad4c6cc627add80454ae61b53241">00278</a> <span class="keyword">enum</span> <a class="code" href="app_8h.html#a889fad4c6cc627add80454ae61b53241" title="Type of locking to use in ast_lock_path / ast_unlock_path.">AST_LOCK_TYPE</a> {
<a name="l00279"></a><a class="code" href="app_8h.html#a889fad4c6cc627add80454ae61b53241a599f18fdf355d7530bb754b8c66d6de7">00279</a>    <a class="code" href="app_8h.html#a889fad4c6cc627add80454ae61b53241a599f18fdf355d7530bb754b8c66d6de7">AST_LOCK_TYPE_LOCKFILE</a> = 0,
<a name="l00280"></a><a class="code" href="app_8h.html#a889fad4c6cc627add80454ae61b53241a78cd7e44280d287fc0168a0c31b75e3f">00280</a>    <a class="code" href="app_8h.html#a889fad4c6cc627add80454ae61b53241a78cd7e44280d287fc0168a0c31b75e3f">AST_LOCK_TYPE_FLOCK</a> = 1,
<a name="l00281"></a>00281 };
<a name="l00282"></a>00282 <span class="comment"></span>
<a name="l00283"></a>00283 <span class="comment">/*!</span>
<a name="l00284"></a>00284 <span class="comment"> * \brief Set the type of locks used by ast_lock_path()</span>
<a name="l00285"></a>00285 <span class="comment"> * \param type the locking type to use</span>
<a name="l00286"></a>00286 <span class="comment"> */</span>
<a name="l00287"></a>00287 <span class="keywordtype">void</span> <a class="code" href="app_8h.html#aaef9c9ee6c9e05a6675201486ea2f02e" title="Set the type of locks used by ast_lock_path().">ast_set_lock_type</a>(<span class="keyword">enum</span> <a class="code" href="app_8h.html#a889fad4c6cc627add80454ae61b53241" title="Type of locking to use in ast_lock_path / ast_unlock_path.">AST_LOCK_TYPE</a> <a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>);
<a name="l00288"></a>00288 <span class="comment"></span>
<a name="l00289"></a>00289 <span class="comment">/*!</span>
<a name="l00290"></a>00290 <span class="comment"> * \brief Lock a filesystem path.</span>
<a name="l00291"></a>00291 <span class="comment"> * \param path the path to be locked</span>
<a name="l00292"></a>00292 <span class="comment"> * \return one of \ref AST_LOCK_RESULT values</span>
<a name="l00293"></a>00293 <span class="comment"> */</span>
<a name="l00294"></a>00294 <span class="keyword">enum</span> <a class="code" href="app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8c">AST_LOCK_RESULT</a> <a class="code" href="app_8h.html#a74c57b5a842dcbc15cc991a31f679a13" title="Lock a filesystem path.">ast_lock_path</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path);
<a name="l00295"></a>00295 <span class="comment"></span>
<a name="l00296"></a>00296 <span class="comment">/*! \brief Unlock a path */</span>
<a name="l00297"></a>00297 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#af6428878db94a4adf8136850e6a654f5" title="Unlock a path.">ast_unlock_path</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path);
<a name="l00298"></a>00298 <span class="comment"></span>
<a name="l00299"></a>00299 <span class="comment">/*! \brief Read a file into asterisk*/</span>
<a name="l00300"></a>00300 <span class="keywordtype">char</span> *<a class="code" href="app_8h.html#ac5aea5ca8a190e3a89d29b74a09cdb3e" title="Read a file into asterisk.">ast_read_textfile</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *file);
<a name="l00301"></a>00301 
<a name="l00302"></a>00302 <span class="keyword">struct </span><a class="code" href="structast__group__info.html" title="channel group info">ast_group_info</a>;
<a name="l00303"></a>00303 <span class="comment"></span>
<a name="l00304"></a>00304 <span class="comment">/*! \brief Split a group string into group and category, returning a default category if none is provided. */</span>
<a name="l00305"></a>00305 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#ab926dd29fc418cde5b67a00ba914cd2c" title="Split a group string into group and category, returning a default category if none...">ast_app_group_split_group</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">char</span> *<a class="code" href="structgroup.html">group</a>, <span class="keywordtype">int</span> group_max, <span class="keywordtype">char</span> *<a class="code" href="structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>, <span class="keywordtype">int</span> category_max);
<a name="l00306"></a>00306 <span class="comment"></span>
<a name="l00307"></a>00307 <span class="comment">/*! \brief Set the group for a channel, splitting the provided data into group and category, if specified. */</span>
<a name="l00308"></a>00308 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a6bd3fac13a76cd864600a84ffd66724e" title="Set the group for a channel, splitting the provided data into group and category...">ast_app_group_set_channel</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data);
<a name="l00309"></a>00309 <span class="comment"></span>
<a name="l00310"></a>00310 <span class="comment">/*! \brief Get the current channel count of the specified group and category. */</span>
<a name="l00311"></a>00311 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a026ae712c21ad8f1e8cde66467153838" title="Get the current channel count of the specified group and category.">ast_app_group_get_count</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structgroup.html">group</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>);
<a name="l00312"></a>00312 <span class="comment"></span>
<a name="l00313"></a>00313 <span class="comment">/*! \brief Get the current channel count of all groups that match the specified pattern and category. */</span>
<a name="l00314"></a>00314 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a687e664c7fb3bb2acb4f5fa17f28d3a2" title="Get the current channel count of all groups that match the specified pattern and...">ast_app_group_match_get_count</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *groupmatch, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>);
<a name="l00315"></a>00315 <span class="comment"></span>
<a name="l00316"></a>00316 <span class="comment">/*! \brief Discard all group counting for a channel */</span>
<a name="l00317"></a>00317 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#add0f96b4b815205f528f5248ccb3d515" title="Discard all group counting for a channel.">ast_app_group_discard</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan);
<a name="l00318"></a>00318 <span class="comment"></span>
<a name="l00319"></a>00319 <span class="comment">/*! \brief Update all group counting for a channel to a new one */</span>
<a name="l00320"></a>00320 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a69e90e401aa3da48a6eef5139727cbb3" title="Update all group counting for a channel to a new one.">ast_app_group_update</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *oldchan, <span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *newchan);
<a name="l00321"></a>00321 <span class="comment"></span>
<a name="l00322"></a>00322 <span class="comment">/*! \brief Write Lock the group count list */</span>
<a name="l00323"></a>00323 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a6d1783b818b130e529c611e710beafe9" title="Write Lock the group count list.">ast_app_group_list_wrlock</a>(<span class="keywordtype">void</span>);
<a name="l00324"></a>00324 <span class="comment"></span>
<a name="l00325"></a>00325 <span class="comment">/*! \brief Read Lock the group count list */</span>
<a name="l00326"></a>00326 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#afa354da7388ee1882ac981396f143bda" title="Read Lock the group count list.">ast_app_group_list_rdlock</a>(<span class="keywordtype">void</span>);
<a name="l00327"></a>00327 <span class="comment"></span>
<a name="l00328"></a>00328 <span class="comment">/*! \brief Get the head of the group count list */</span>
<a name="l00329"></a>00329 <span class="keyword">struct </span><a class="code" href="structast__group__info.html" title="channel group info">ast_group_info</a> *<a class="code" href="app_8h.html#ae351dc6f23997a800e7a743d6411b8e7" title="Get the head of the group count list.">ast_app_group_list_head</a>(<span class="keywordtype">void</span>);
<a name="l00330"></a>00330 <span class="comment"></span>
<a name="l00331"></a>00331 <span class="comment">/*! \brief Unlock the group count list */</span>
<a name="l00332"></a>00332 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#aa3d01e65e04cddfa84781590b37732e8" title="Unlock the group count list.">ast_app_group_list_unlock</a>(<span class="keywordtype">void</span>);
<a name="l00333"></a>00333 <span class="comment"></span>
<a name="l00334"></a>00334 <span class="comment">/*!</span>
<a name="l00335"></a>00335 <span class="comment">  \brief Define an application argument</span>
<a name="l00336"></a>00336 <span class="comment">  \param name The name of the argument</span>
<a name="l00337"></a>00337 <span class="comment">*/</span>
<a name="l00338"></a><a class="code" href="app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">00338</a> <span class="preprocessor">#define AST_APP_ARG(name) char *name</span>
<a name="l00339"></a>00339 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00340"></a>00340 <span class="comment">/*!</span>
<a name="l00341"></a>00341 <span class="comment">  \brief Declare a structure to hold an application&apos;s arguments.</span>
<a name="l00342"></a>00342 <span class="comment">  \param name The name of the structure</span>
<a name="l00343"></a>00343 <span class="comment">  \param arglist The list of arguments, defined using AST_APP_ARG</span>
<a name="l00344"></a>00344 <span class="comment"></span>
<a name="l00345"></a>00345 <span class="comment">  This macro declares a structure intended to be used in a call</span>
<a name="l00346"></a>00346 <span class="comment">  to ast_app_separate_args(). The structure includes all the</span>
<a name="l00347"></a>00347 <span class="comment">  arguments specified, plus an argv array that overlays them and an</span>
<a name="l00348"></a>00348 <span class="comment">  argc argument counter. The arguments must be declared using AST_APP_ARG,</span>
<a name="l00349"></a>00349 <span class="comment">  and they will all be character pointers (strings).</span>
<a name="l00350"></a>00350 <span class="comment"></span>
<a name="l00351"></a>00351 <span class="comment">  \note The structure is &lt;b&gt;not&lt;/b&gt; initialized, as the call to</span>
<a name="l00352"></a>00352 <span class="comment">  ast_app_separate_args() will perform that function before parsing</span>
<a name="l00353"></a>00353 <span class="comment">  the arguments.</span>
<a name="l00354"></a>00354 <span class="comment"> */</span>
<a name="l00355"></a><a class="code" href="app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">00355</a> <span class="preprocessor">#define AST_DECLARE_APP_ARGS(name, arglist) AST_DEFINE_APP_ARGS_TYPE(, arglist) name</span>
<a name="l00356"></a>00356 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00357"></a>00357 <span class="comment">/*!</span>
<a name="l00358"></a>00358 <span class="comment">  \brief Define a structure type to hold an application&apos;s arguments.</span>
<a name="l00359"></a>00359 <span class="comment">  \param type The name of the structure type</span>
<a name="l00360"></a>00360 <span class="comment">  \param arglist The list of arguments, defined using AST_APP_ARG</span>
<a name="l00361"></a>00361 <span class="comment"></span>
<a name="l00362"></a>00362 <span class="comment">  This macro defines a structure type intended to be used in a call</span>
<a name="l00363"></a>00363 <span class="comment">  to ast_app_separate_args(). The structure includes all the</span>
<a name="l00364"></a>00364 <span class="comment">  arguments specified, plus an argv array that overlays them and an</span>
<a name="l00365"></a>00365 <span class="comment">  argc argument counter. The arguments must be declared using AST_APP_ARG,</span>
<a name="l00366"></a>00366 <span class="comment">  and they will all be character pointers (strings).</span>
<a name="l00367"></a>00367 <span class="comment"></span>
<a name="l00368"></a>00368 <span class="comment">  \note This defines a structure type, but does not declare an instance</span>
<a name="l00369"></a>00369 <span class="comment">  of the structure. That must be done separately.</span>
<a name="l00370"></a>00370 <span class="comment"> */</span>
<a name="l00371"></a><a class="code" href="app_8h.html#a439373ac35099110fa9fa3d52a4628fe">00371</a> <span class="preprocessor">#define AST_DEFINE_APP_ARGS_TYPE(type, arglist) \</span>
<a name="l00372"></a>00372 <span class="preprocessor">   struct type { \</span>
<a name="l00373"></a>00373 <span class="preprocessor">      unsigned int argc; \</span>
<a name="l00374"></a>00374 <span class="preprocessor">      char *argv[0]; \</span>
<a name="l00375"></a>00375 <span class="preprocessor">      arglist \</span>
<a name="l00376"></a>00376 <span class="preprocessor">   }</span>
<a name="l00377"></a>00377 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00378"></a>00378 <span class="comment">/*!</span>
<a name="l00379"></a>00379 <span class="comment">  \brief Performs the &apos;standard&apos; argument separation process for an application.</span>
<a name="l00380"></a>00380 <span class="comment">  \param args An argument structure defined using AST_DECLARE_APP_ARGS</span>
<a name="l00381"></a>00381 <span class="comment">  \param parse A modifiable buffer containing the input to be parsed</span>
<a name="l00382"></a>00382 <span class="comment"></span>
<a name="l00383"></a>00383 <span class="comment">  This function will separate the input string using the standard argument</span>
<a name="l00384"></a>00384 <span class="comment">  separator character &apos;,&apos; and fill in the provided structure, including</span>
<a name="l00385"></a>00385 <span class="comment">  the argc argument counter field.</span>
<a name="l00386"></a>00386 <span class="comment"> */</span>
<a name="l00387"></a><a class="code" href="app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">00387</a> <span class="preprocessor">#define AST_STANDARD_APP_ARGS(args, parse) \</span>
<a name="l00388"></a>00388 <span class="preprocessor">   args.argc = __ast_app_separate_args(parse, &apos;,&apos;, 1, args.argv, ((sizeof(args) - offsetof(typeof(args), argv)) / sizeof(args.argv[0])))</span>
<a name="l00389"></a><a class="code" href="app_8h.html#a1fc2af00a8197196f3fe2047297466db">00389</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_STANDARD_RAW_ARGS(args, parse) \</span>
<a name="l00390"></a>00390 <span class="preprocessor">   args.argc = __ast_app_separate_args(parse, &apos;,&apos;, 0, args.argv, ((sizeof(args) - offsetof(typeof(args), argv)) / sizeof(args.argv[0])))</span>
<a name="l00391"></a>00391 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00392"></a>00392 <span class="comment">/*!</span>
<a name="l00393"></a>00393 <span class="comment">  \brief Performs the &apos;nonstandard&apos; argument separation process for an application.</span>
<a name="l00394"></a>00394 <span class="comment">  \param args An argument structure defined using AST_DECLARE_APP_ARGS</span>
<a name="l00395"></a>00395 <span class="comment">  \param parse A modifiable buffer containing the input to be parsed</span>
<a name="l00396"></a>00396 <span class="comment">  \param sep A nonstandard separator character</span>
<a name="l00397"></a>00397 <span class="comment"></span>
<a name="l00398"></a>00398 <span class="comment">  This function will separate the input string using the nonstandard argument</span>
<a name="l00399"></a>00399 <span class="comment">  separator character and fill in the provided structure, including</span>
<a name="l00400"></a>00400 <span class="comment">  the argc argument counter field.</span>
<a name="l00401"></a>00401 <span class="comment"> */</span>
<a name="l00402"></a><a class="code" href="app_8h.html#accfcb380df76a64251d88ef49c2dd4e3">00402</a> <span class="preprocessor">#define AST_NONSTANDARD_APP_ARGS(args, parse, sep) \</span>
<a name="l00403"></a>00403 <span class="preprocessor">   args.argc = __ast_app_separate_args(parse, sep, 1, args.argv, ((sizeof(args) - offsetof(typeof(args), argv)) / sizeof(args.argv[0])))</span>
<a name="l00404"></a><a class="code" href="app_8h.html#afc33d0723a077475b09f7285c288ed42">00404</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_NONSTANDARD_RAW_ARGS(args, parse, sep) \</span>
<a name="l00405"></a>00405 <span class="preprocessor">   args.argc = __ast_app_separate_args(parse, sep, 0, args.argv, ((sizeof(args) - offsetof(typeof(args), argv)) / sizeof(args.argv[0])))</span>
<a name="l00406"></a>00406 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00407"></a>00407 <span class="comment">/*!</span>
<a name="l00408"></a>00408 <span class="comment">  \brief Separate a string into arguments in an array</span>
<a name="l00409"></a>00409 <span class="comment">  \param buf The string to be parsed (this must be a writable copy, as it will be modified)</span>
<a name="l00410"></a>00410 <span class="comment">  \param delim The character to be used to delimit arguments</span>
<a name="l00411"></a>00411 <span class="comment">  \param remove_chars Remove backslashes and quote characters, while parsing</span>
<a name="l00412"></a>00412 <span class="comment">  \param array An array of &apos;char *&apos; to be filled in with pointers to the found arguments</span>
<a name="l00413"></a>00413 <span class="comment">  \param arraylen The number of elements in the array (i.e. the number of arguments you will accept)</span>
<a name="l00414"></a>00414 <span class="comment"></span>
<a name="l00415"></a>00415 <span class="comment">  Note: if there are more arguments in the string than the array will hold, the last element of</span>
<a name="l00416"></a>00416 <span class="comment">  the array will contain the remaining arguments, not separated.</span>
<a name="l00417"></a>00417 <span class="comment"></span>
<a name="l00418"></a>00418 <span class="comment">  The array will be completely zeroed by this function before it populates any entries.</span>
<a name="l00419"></a>00419 <span class="comment"></span>
<a name="l00420"></a>00420 <span class="comment">  \return The number of arguments found, or zero if the function arguments are not valid.</span>
<a name="l00421"></a>00421 <span class="comment">*/</span>
<a name="l00422"></a>00422 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a1b65265bef5e0d7110092144ba9ee4da" title="Separate a string into arguments in an array.">__ast_app_separate_args</a>(<span class="keywordtype">char</span> *<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <span class="keywordtype">char</span> delim, <span class="keywordtype">int</span> remove_chars, <span class="keywordtype">char</span> **<a class="code" href="func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a>, <span class="keywordtype">int</span> arraylen);
<a name="l00423"></a><a class="code" href="app_8h.html#a588ed7395623b8493efcf229024af9c5">00423</a> <span class="preprocessor">#define ast_app_separate_args(a,b,c,d) __ast_app_separate_args(a,b,1,c,d)</span>
<a name="l00424"></a>00424 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00425"></a>00425 <span class="comment">/*!</span>
<a name="l00426"></a>00426 <span class="comment">  \brief A structure to hold the description of an application &apos;option&apos;.</span>
<a name="l00427"></a>00427 <span class="comment"></span>
<a name="l00428"></a>00428 <span class="comment">  Application &apos;options&apos; are single-character flags that can be supplied</span>
<a name="l00429"></a>00429 <span class="comment">  to the application to affect its behavior; they can also optionally</span>
<a name="l00430"></a>00430 <span class="comment">  accept arguments enclosed in parenthesis.</span>
<a name="l00431"></a>00431 <span class="comment"></span>
<a name="l00432"></a>00432 <span class="comment">  These structures are used by the ast_app_parse_options function, uses</span>
<a name="l00433"></a>00433 <span class="comment">  this data to fill in a flags structure (to indicate which options were</span>
<a name="l00434"></a>00434 <span class="comment">  supplied) and array of argument pointers (for those options that had</span>
<a name="l00435"></a>00435 <span class="comment">  arguments supplied).</span>
<a name="l00436"></a>00436 <span class="comment"> */</span>
<a name="l00437"></a><a class="code" href="structast__app__option.html">00437</a> <span class="keyword">struct </span><a class="code" href="structast__app__option.html" title="A structure to hold the description of an application &amp;#39;option&amp;#39;.">ast_app_option</a> {<span class="comment"></span>
<a name="l00438"></a>00438 <span class="comment">   /*! \brief The flag bit that represents this option. */</span>
<a name="l00439"></a><a class="code" href="structast__app__option.html#a34cd0c19ab09fd2149547b106ed68481">00439</a>    uint64_t <a class="code" href="structast__app__option.html#a34cd0c19ab09fd2149547b106ed68481" title="The flag bit that represents this option.">flag</a>;<span class="comment"></span>
<a name="l00440"></a>00440 <span class="comment">   /*! \brief The index of the entry in the arguments array</span>
<a name="l00441"></a>00441 <span class="comment">     that should be used for this option&apos;s argument. */</span>
<a name="l00442"></a><a class="code" href="structast__app__option.html#a7fba4686db1ab2c33d8920fb7019d916">00442</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structast__app__option.html#a7fba4686db1ab2c33d8920fb7019d916" title="The index of the entry in the arguments array that should be used for this option&amp;#39;s...">arg_index</a>;
<a name="l00443"></a>00443 };
<a name="l00444"></a>00444 
<a name="l00445"></a><a class="code" href="app_8h.html#ab451a4653176c211d131b899e1f91bde">00445</a> <span class="preprocessor">#define BEGIN_OPTIONS {</span>
<a name="l00446"></a><a class="code" href="app_8h.html#a2a1890787b3e55318c417c0a3e1432c7">00446</a> <span class="preprocessor"></span><span class="preprocessor">#define END_OPTIONS }</span>
<a name="l00447"></a>00447 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00448"></a>00448 <span class="comment">/*!</span>
<a name="l00449"></a>00449 <span class="comment">  \brief Declares an array of options for an application.</span>
<a name="l00450"></a>00450 <span class="comment">  \param holder The name of the array to be created</span>
<a name="l00451"></a>00451 <span class="comment">  \param options The actual options to be placed into the array</span>
<a name="l00452"></a>00452 <span class="comment">  \sa ast_app_parse_options</span>
<a name="l00453"></a>00453 <span class="comment"></span>
<a name="l00454"></a>00454 <span class="comment">  This macro declares a &apos;static const&apos; array of \c struct \c ast_option</span>
<a name="l00455"></a>00455 <span class="comment">  elements to hold the list of available options for an application.</span>
<a name="l00456"></a>00456 <span class="comment">  Each option must be declared using either the AST_APP_OPTION()</span>
<a name="l00457"></a>00457 <span class="comment">  or AST_APP_OPTION_ARG() macros.</span>
<a name="l00458"></a>00458 <span class="comment"></span>
<a name="l00459"></a>00459 <span class="comment">  Example usage:</span>
<a name="l00460"></a>00460 <span class="comment">  \code</span>
<a name="l00461"></a>00461 <span class="comment">  enum {</span>
<a name="l00462"></a>00462 <span class="comment">        OPT_JUMP = (1 &lt;&lt; 0),</span>
<a name="l00463"></a>00463 <span class="comment">        OPT_BLAH = (1 &lt;&lt; 1),</span>
<a name="l00464"></a>00464 <span class="comment">        OPT_BLORT = (1 &lt;&lt; 2),</span>
<a name="l00465"></a>00465 <span class="comment">  } my_app_option_flags;</span>
<a name="l00466"></a>00466 <span class="comment"></span>
<a name="l00467"></a>00467 <span class="comment">  enum {</span>
<a name="l00468"></a>00468 <span class="comment">        OPT_ARG_BLAH = 0,</span>
<a name="l00469"></a>00469 <span class="comment">        OPT_ARG_BLORT,</span>
<a name="l00470"></a>00470 <span class="comment">        !! this entry tells how many possible arguments there are,</span>
<a name="l00471"></a>00471 <span class="comment">           and must be the last entry in the list</span>
<a name="l00472"></a>00472 <span class="comment">        OPT_ARG_ARRAY_SIZE,</span>
<a name="l00473"></a>00473 <span class="comment">  } my_app_option_args;</span>
<a name="l00474"></a>00474 <span class="comment"></span>
<a name="l00475"></a>00475 <span class="comment">  AST_APP_OPTIONS(my_app_options, {</span>
<a name="l00476"></a>00476 <span class="comment">        AST_APP_OPTION(&apos;j&apos;, OPT_JUMP),</span>
<a name="l00477"></a>00477 <span class="comment">        AST_APP_OPTION_ARG(&apos;b&apos;, OPT_BLAH, OPT_ARG_BLAH),</span>
<a name="l00478"></a>00478 <span class="comment">        AST_APP_OPTION_BLORT(&apos;B&apos;, OPT_BLORT, OPT_ARG_BLORT),</span>
<a name="l00479"></a>00479 <span class="comment">  });</span>
<a name="l00480"></a>00480 <span class="comment"></span>
<a name="l00481"></a>00481 <span class="comment">  static int my_app_exec(struct ast_channel *chan, void *data)</span>
<a name="l00482"></a>00482 <span class="comment">  {</span>
<a name="l00483"></a>00483 <span class="comment">   char *options;</span>
<a name="l00484"></a>00484 <span class="comment">   struct ast_flags opts = { 0, };</span>
<a name="l00485"></a>00485 <span class="comment">   char *opt_args[OPT_ARG_ARRAY_SIZE];</span>
<a name="l00486"></a>00486 <span class="comment"></span>
<a name="l00487"></a>00487 <span class="comment">   ... do any argument parsing here ...</span>
<a name="l00488"></a>00488 <span class="comment"></span>
<a name="l00489"></a>00489 <span class="comment">   if (ast_parseoptions(my_app_options, &amp;opts, opt_args, options)) {</span>
<a name="l00490"></a>00490 <span class="comment">      ast_module_user_remove(u);</span>
<a name="l00491"></a>00491 <span class="comment">      return -1;</span>
<a name="l00492"></a>00492 <span class="comment">   }</span>
<a name="l00493"></a>00493 <span class="comment">  }</span>
<a name="l00494"></a>00494 <span class="comment">  \endcode</span>
<a name="l00495"></a>00495 <span class="comment"> */</span>
<a name="l00496"></a><a class="code" href="app_8h.html#a520a3c6b7d57903d9a616051da1a019d">00496</a> <span class="preprocessor">#define AST_APP_OPTIONS(holder, options...) \</span>
<a name="l00497"></a>00497 <span class="preprocessor">   static const struct ast_app_option holder[128] = options</span>
<a name="l00498"></a>00498 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00499"></a>00499 <span class="comment">/*!</span>
<a name="l00500"></a>00500 <span class="comment">  \brief Declares an application option that does not accept an argument.</span>
<a name="l00501"></a>00501 <span class="comment">  \param option The single character representing the option</span>
<a name="l00502"></a>00502 <span class="comment">  \param flagno The flag index to be set if this option is present</span>
<a name="l00503"></a>00503 <span class="comment">  \sa AST_APP_OPTIONS, ast_app_parse_options</span>
<a name="l00504"></a>00504 <span class="comment"> */</span>
<a name="l00505"></a><a class="code" href="app_8h.html#aca036489931bf5571e2472331c8ac80b">00505</a> <span class="preprocessor">#define AST_APP_OPTION(option, flagno) \</span>
<a name="l00506"></a>00506 <span class="preprocessor">   [option] = { .flag = flagno }</span>
<a name="l00507"></a>00507 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00508"></a>00508 <span class="comment">/*!</span>
<a name="l00509"></a>00509 <span class="comment">  \brief Declares an application option that accepts an argument.</span>
<a name="l00510"></a>00510 <span class="comment">  \param option The single character representing the option</span>
<a name="l00511"></a>00511 <span class="comment">  \param flagno The flag index to be set if this option is present</span>
<a name="l00512"></a>00512 <span class="comment">  \param argno The index into the argument array where the argument should</span>
<a name="l00513"></a>00513 <span class="comment">  be placed</span>
<a name="l00514"></a>00514 <span class="comment">  \sa AST_APP_OPTIONS, ast_app_parse_options</span>
<a name="l00515"></a>00515 <span class="comment"> */</span>
<a name="l00516"></a><a class="code" href="app_8h.html#a7549377df87038be737e8cae73acaa9d">00516</a> <span class="preprocessor">#define AST_APP_OPTION_ARG(option, flagno, argno) \</span>
<a name="l00517"></a>00517 <span class="preprocessor">   [option] = { .flag = flagno, .arg_index = argno + 1 }</span>
<a name="l00518"></a>00518 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00519"></a>00519 <span class="comment">/*!</span>
<a name="l00520"></a>00520 <span class="comment">  \brief Parses a string containing application options and sets flags/arguments.</span>
<a name="l00521"></a>00521 <span class="comment">  \param options The array of possible options declared with AST_APP_OPTIONS</span>
<a name="l00522"></a>00522 <span class="comment">  \param flags The flag structure to have option flags set</span>
<a name="l00523"></a>00523 <span class="comment">  \param args The array of argument pointers to hold arguments found</span>
<a name="l00524"></a>00524 <span class="comment">  \param optstr The string containing the options to be parsed</span>
<a name="l00525"></a>00525 <span class="comment">  \return zero for success, non-zero if an error occurs</span>
<a name="l00526"></a>00526 <span class="comment">  \sa AST_APP_OPTIONS</span>
<a name="l00527"></a>00527 <span class="comment"> */</span>
<a name="l00528"></a>00528 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb" title="Parses a string containing application options and sets flags/arguments.">ast_app_parse_options</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structast__app__option.html" title="A structure to hold the description of an application &amp;#39;option&amp;#39;.">ast_app_option</a> *options, <span class="keyword">struct</span> <a class="code" href="structast__flags.html" title="Structure used to handle boolean flags.">ast_flags</a> *flags, <span class="keywordtype">char</span> **args, <span class="keywordtype">char</span> *optstr);
<a name="l00529"></a>00529 <span class="comment"></span>
<a name="l00530"></a>00530 <span class="comment">   /*!</span>
<a name="l00531"></a>00531 <span class="comment">  \brief Parses a string containing application options and sets flags/arguments.</span>
<a name="l00532"></a>00532 <span class="comment">  \param options The array of possible options declared with AST_APP_OPTIONS</span>
<a name="l00533"></a>00533 <span class="comment">  \param flags The 64-bit flag structure to have option flags set</span>
<a name="l00534"></a>00534 <span class="comment">  \param args The array of argument pointers to hold arguments found</span>
<a name="l00535"></a>00535 <span class="comment">  \param optstr The string containing the options to be parsed</span>
<a name="l00536"></a>00536 <span class="comment">  \return zero for success, non-zero if an error occurs</span>
<a name="l00537"></a>00537 <span class="comment">  \sa AST_APP_OPTIONS</span>
<a name="l00538"></a>00538 <span class="comment"> */</span>
<a name="l00539"></a>00539 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#af85cb9dfd2fea9cfe820d2323c7dd471" title="Parses a string containing application options and sets flags/arguments.">ast_app_parse_options64</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structast__app__option.html" title="A structure to hold the description of an application &amp;#39;option&amp;#39;.">ast_app_option</a> *options, <span class="keyword">struct</span> <a class="code" href="structast__flags64.html" title="Structure used to handle a large number of boolean flags == used only in app_dial...">ast_flags64</a> *flags, <span class="keywordtype">char</span> **args, <span class="keywordtype">char</span> *optstr);
<a name="l00540"></a>00540 <span class="comment"></span>
<a name="l00541"></a>00541 <span class="comment">/*! \brief Given a list of options array, return an option string based on passed flags</span>
<a name="l00542"></a>00542 <span class="comment">   \param options The array of possible options declared with AST_APP_OPTIONS</span>
<a name="l00543"></a>00543 <span class="comment">   \param flags The flags of the options that you wish to populate the buffer with</span>
<a name="l00544"></a>00544 <span class="comment">   \param buf The buffer to fill with the string of options</span>
<a name="l00545"></a>00545 <span class="comment">   \param len The maximum length of buf</span>
<a name="l00546"></a>00546 <span class="comment">*/</span>
<a name="l00547"></a>00547 <span class="keywordtype">void</span> <a class="code" href="app_8h.html#adc36d870f1a77a726a74f4891f1365d3" title="Given a list of options array, return an option string based on passed flags.">ast_app_options2str64</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structast__app__option.html" title="A structure to hold the description of an application &amp;#39;option&amp;#39;.">ast_app_option</a> *options, <span class="keyword">struct</span> <a class="code" href="structast__flags64.html" title="Structure used to handle a large number of boolean flags == used only in app_dial...">ast_flags64</a> *flags, <span class="keywordtype">char</span> *<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <span class="keywordtype">size_t</span> <a class="code" href="func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);
<a name="l00548"></a>00548 <span class="comment"></span>
<a name="l00549"></a>00549 <span class="comment">/*! \brief Present a dialtone and collect a certain length extension.</span>
<a name="l00550"></a>00550 <span class="comment">    \return Returns 1 on valid extension entered, -1 on hangup, or 0 on invalid extension.</span>
<a name="l00551"></a>00551 <span class="comment">\note Note that if &apos;collect&apos; holds digits already, new digits will be appended, so be sure it&apos;s initialized properly */</span>
<a name="l00552"></a>00552 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#af4825b337b9cd145a059852ce85ec6cd" title="Present a dialtone and collect a certain length extension.">ast_app_dtget</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *context, <span class="keywordtype">char</span> *collect, <span class="keywordtype">size_t</span> size, <span class="keywordtype">int</span> maxlen, <span class="keywordtype">int</span> timeout);
<a name="l00553"></a>00553 <span class="comment"></span>
<a name="l00554"></a>00554 <span class="comment">/*! \brief Allow to record message and have a review option */</span>
<a name="l00555"></a>00555 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a88b6ee77eea0c8a6cc0a315e1c1fc815" title="Allow to record message and have a review option.">ast_record_review</a>(<span class="keyword">struct</span> <a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *playfile, <span class="keyword">const</span> <span class="keywordtype">char</span> *recordfile, <span class="keywordtype">int</span> maxtime, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, <span class="keywordtype">int</span> *duration, <span class="keyword">const</span> <span class="keywordtype">char</span> *path);
<a name="l00556"></a>00556 <span class="comment"></span>
<a name="l00557"></a>00557 <span class="comment">/*! \brief Decode an encoded control or extended ASCII character </span>
<a name="l00558"></a>00558 <span class="comment">    \return Returns a pointer to the result string</span>
<a name="l00559"></a>00559 <span class="comment">*/</span>
<a name="l00560"></a>00560 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a1e8f73e62b3c2243eca582ee0d8d6147" title="Decode an encoded control or extended ASCII character.">ast_get_encoded_char</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *stream, <span class="keywordtype">char</span> *result, <span class="keywordtype">size_t</span> *consumed);
<a name="l00561"></a>00561 <span class="comment"></span>
<a name="l00562"></a>00562 <span class="comment">/*! \brief Decode a stream of encoded control or extended ASCII characters */</span>
<a name="l00563"></a>00563 <span class="keywordtype">char</span> *<a class="code" href="app_8h.html#a2fdf311701900d162bced0d30e923b92" title="Decode a stream of encoded control or extended ASCII characters.">ast_get_encoded_str</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *stream, <span class="keywordtype">char</span> *result, <span class="keywordtype">size_t</span> result_len);
<a name="l00564"></a>00564 <span class="comment"></span>
<a name="l00565"></a>00565 <span class="comment">/*! \brief Decode a stream of encoded control or extended ASCII characters */</span>
<a name="l00566"></a>00566 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a1528703fa0e2ea11fcab7e04f8e0a6cb" title="Decode a stream of encoded control or extended ASCII characters.">ast_str_get_encoded_str</a>(<span class="keyword">struct</span> <a class="code" href="structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed...">ast_str</a> **<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, <span class="keywordtype">int</span> maxlen, <span class="keyword">const</span> <span class="keywordtype">char</span> *stream);
<a name="l00567"></a>00567 <span class="comment"></span>
<a name="l00568"></a>00568 <span class="comment">/*!</span>
<a name="l00569"></a>00569 <span class="comment"> * \brief Common routine for child processes, to close all fds prior to exec(2)</span>
<a name="l00570"></a>00570 <span class="comment"> * \param[in] n starting file descriptor number for closing all higher file descriptors</span>
<a name="l00571"></a>00571 <span class="comment"> * \since 1.6.1</span>
<a name="l00572"></a>00572 <span class="comment"> */</span>
<a name="l00573"></a>00573 <span class="keywordtype">void</span> <a class="code" href="app_8h.html#afcbfdd6dfc8c5f0f549b0a5d7e263e97" title="Common routine for child processes, to close all fds prior to exec(2).">ast_close_fds_above_n</a>(<span class="keywordtype">int</span> n);
<a name="l00574"></a>00574 <span class="comment"></span>
<a name="l00575"></a>00575 <span class="comment">/*!</span>
<a name="l00576"></a>00576 <span class="comment"> * \brief Common routine to safely fork without a chance of a signal handler firing badly in the child</span>
<a name="l00577"></a>00577 <span class="comment"> * \param[in] stop_reaper flag to determine if sigchld handler is replaced or not</span>
<a name="l00578"></a>00578 <span class="comment"> * \since 1.6.1</span>
<a name="l00579"></a>00579 <span class="comment"> */</span>
<a name="l00580"></a>00580 <span class="keywordtype">int</span> <a class="code" href="app_8h.html#a7a4c7e208ffc4d11a1918beb0e920ec0" title="Common routine to safely fork without a chance of a signal handler firing badly in...">ast_safe_fork</a>(<span class="keywordtype">int</span> stop_reaper);
<a name="l00581"></a>00581 <span class="comment"></span>
<a name="l00582"></a>00582 <span class="comment">/*!</span>
<a name="l00583"></a>00583 <span class="comment"> * \brief Common routine to cleanup after fork&apos;ed process is complete (if reaping was stopped)</span>
<a name="l00584"></a>00584 <span class="comment"> * \since 1.6.1</span>
<a name="l00585"></a>00585 <span class="comment"> */</span>
<a name="l00586"></a>00586 <span class="keywordtype">void</span> <a class="code" href="app_8h.html#a1044fae6847dc8986a212af0af492a23" title="Common routine to cleanup after fork&amp;#39;ed process is complete (if reaping was stopped)...">ast_safe_fork_cleanup</a>(<span class="keywordtype">void</span>);
<a name="l00587"></a>00587 
<a name="l00588"></a>00588 <span class="preprocessor">#if defined(__cplusplus) || defined(c_plusplus)</span>
<a name="l00589"></a>00589 <span class="preprocessor"></span>}
<a name="l00590"></a>00590 <span class="preprocessor">#endif</span>
<a name="l00591"></a>00591 <span class="preprocessor"></span>
<a name="l00592"></a>00592 <span class="preprocessor">#endif </span><span class="comment">/* _ASTERISK_APP_H */</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:18:24 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
