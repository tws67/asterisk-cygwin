<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:22:18 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_1ab815038f534adda65c8b4ae4993449.html">include</a>
  </div>
</div>
<div class="contents">
<h1>jitterbuf.h File Reference</h1>
<p><a class="el" href="structjitterbuf.html">jitterbuf</a>: an application-independent jitterbuffer <a class="el" href="jitterbuf_8c.html">jitterbuf.c</a>  
<a href="#_details">More...</a></p>

<p><a href="jitterbuf_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjb__conf.html">jb_conf</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjb__frame.html">jb_frame</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjb__info.html">jb_info</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjitterbuf.html">jitterbuf</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">configuration constants</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpdd2c52009080ad16842257faa3161fc1"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a5b69cdb660d614cbf51521bc8bc114c1">JB_ADJUST_DELAY</a>&nbsp;&nbsp;&nbsp;40</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#ac67629555c4de1f47f146669bab821cf">JB_HISTORY_DROPPCT</a>&nbsp;&nbsp;&nbsp;3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a212c8dc3ed8bc5dd607396645c19ba9b">JB_HISTORY_DROPPCT_MAX</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#ac2d587e25cce0de796a6b8522b7b5e10">JB_HISTORY_MAXBUF_SZ</a>&nbsp;&nbsp;&nbsp;JB_HISTORY_SZ * JB_HISTORY_DROPPCT_MAX / 100</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a9dc3051902032b0955fbd9d8965ac824">JB_HISTORY_SZ</a>&nbsp;&nbsp;&nbsp;500</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a17730bc1072071b7613d0f937cd9ad74">JB_TARGET_EXTRA</a>&nbsp;&nbsp;&nbsp;40</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a799359320cd26f5d8940efeb58364e53">jb_output_function_t</a> )(const char *fmt,...)</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5">jb_frame_type</a> { <a class="el" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5a50fcc4e23186d417f90aa3f8582c70eb">JB_TYPE_CONTROL</a>, 
<a class="el" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5ad5dc59855a16913d9c6bdda89bb8ea31">JB_TYPE_VOICE</a>, 
<a class="el" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5a1201e6bd467195a2347a6c75d34a7cc4">JB_TYPE_VIDEO</a>, 
<a class="el" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5ab7844afd5de9edf071e06de0c65b707b">JB_TYPE_SILENCE</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a> { <br/>
&nbsp;&nbsp;<a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5abcbf2631f2f32ca1af2a49ff82bebaec">JB_OK</a>, 
<a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5a0abf1d52696752de6c37e8f57396f4a5">JB_EMPTY</a>, 
<a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5ab70c5579075588aaade78deb3800c0a9">JB_NOFRAME</a>, 
<a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5abaf74218828771bc4c562a6594dd218e">JB_INTERP</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5a5807660dd8eaef6bea3e3347a91c93a6">JB_DROP</a>, 
<a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5a3ef27a58ff51c815b4c27e94f65cfdd2">JB_SCHED</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a2714537be23d6bb12425ba8542c4b1f7">jb_destroy</a> (<a class="el" href="structjitterbuf.html">jitterbuf</a> *jb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">destroy <a class="el" href="structjitterbuf.html">jitterbuf</a>  <a href="#a2714537be23d6bb12425ba8542c4b1f7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a37158045e8af38a69ab6d15ee51dc08e">jb_get</a> (<a class="el" href="structjitterbuf.html">jitterbuf</a> *jb, <a class="el" href="structjb__frame.html">jb_frame</a> *frame, long now, long interpl)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get a frame for time now (receiver's time) return value is one of JB_OK: You've got frame! JB_DROP: Here's an audio frame you should just drop. Ask me again for this time.. JB_NOFRAME: There's no frame scheduled for this time. JB_INTERP: Please interpolate an interpl-length frame for this time (either we need to grow, or there was a lost frame) JB_EMPTY: The jb is empty.  <a href="#a37158045e8af38a69ab6d15ee51dc08e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#aaca01cea1cbcba683ca6d5b0bc009666">jb_getall</a> (<a class="el" href="structjitterbuf.html">jitterbuf</a> *jb, <a class="el" href="structjb__frame.html">jb_frame</a> *frameout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">unconditionally get frames from <a class="el" href="structjitterbuf.html">jitterbuf</a> until empty  <a href="#aaca01cea1cbcba683ca6d5b0bc009666"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#aed5937e57dcecf58443eb130f9f02d31">jb_getinfo</a> (<a class="el" href="structjitterbuf.html">jitterbuf</a> *jb, <a class="el" href="structjb__info.html">jb_info</a> *stats)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get <a class="el" href="structjitterbuf.html">jitterbuf</a> info: only "statistics" may be valid  <a href="#aed5937e57dcecf58443eb130f9f02d31"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjitterbuf.html">jitterbuf</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a2fd56d2b8a06ad6b89cf67619f790911">jb_new</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">new <a class="el" href="structjitterbuf.html">jitterbuf</a>  <a href="#a2fd56d2b8a06ad6b89cf67619f790911"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a72883f3dc8328524ab3930122946e0a0">jb_next</a> (<a class="el" href="structjitterbuf.html">jitterbuf</a> *jb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">when is the next frame due out, in receiver's time (0=EMPTY) This value may change as frames are added (esp non-audio frames)  <a href="#a72883f3dc8328524ab3930122946e0a0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a68bbac088e27e18441bd5b403f7f31d7">jb_put</a> (<a class="el" href="structjitterbuf.html">jitterbuf</a> *jb, void *data, const enum <a class="el" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5">jb_frame_type</a> <a class="el" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, long ms, long ts, long now)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">queue a frame  <a href="#a68bbac088e27e18441bd5b403f7f31d7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a2c9efa9222ff9d7324a06c4a21b5ef72">jb_reset</a> (<a class="el" href="structjitterbuf.html">jitterbuf</a> *jb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">reset <a class="el" href="structjitterbuf.html">jitterbuf</a>  <a href="#a2c9efa9222ff9d7324a06c4a21b5ef72"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a8ecded60181a9c1d1dae2fe05bddccf8">jb_setconf</a> (<a class="el" href="structjitterbuf.html">jitterbuf</a> *jb, <a class="el" href="structjb__conf.html">jb_conf</a> *conf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">set <a class="el" href="structjitterbuf.html">jitterbuf</a> conf  <a href="#a8ecded60181a9c1d1dae2fe05bddccf8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jitterbuf_8h.html#a5198ca5f2885b8b4a2579ba58e6f196f">jb_setoutput</a> (<a class="el" href="jitterbuf_8h.html#a799359320cd26f5d8940efeb58364e53">jb_output_function_t</a> err, <a class="el" href="jitterbuf_8h.html#a799359320cd26f5d8940efeb58364e53">jb_output_function_t</a> warn, <a class="el" href="jitterbuf_8h.html#a799359320cd26f5d8940efeb58364e53">jb_output_function_t</a> dbg)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p><a class="el" href="structjitterbuf.html">jitterbuf</a>: an application-independent jitterbuffer <a class="el" href="jitterbuf_8c.html">jitterbuf.c</a> </p>

<p>Definition in file <a class="el" href="jitterbuf_8h_source.html">jitterbuf.h</a>.</p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a5b69cdb660d614cbf51521bc8bc114c1"></a><!-- doxytag: member="jitterbuf.h::JB_ADJUST_DELAY" ref="a5b69cdb660d614cbf51521bc8bc114c1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define JB_ADJUST_DELAY&nbsp;&nbsp;&nbsp;40</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>ms between growing and shrinking; may not be honored if jitterbuffer runs out of space </p>

<p>Definition at line <a class="el" href="jitterbuf_8h_source.html#l00044">44</a> of file <a class="el" href="jitterbuf_8h_source.html">jitterbuf.h</a>.</p>

<p>Referenced by <a class="el" href="jitterbuf_8c_source.html#l00548">_jb_get()</a>.</p>

</div>
</div>
<a class="anchor" id="ac67629555c4de1f47f146669bab821cf"></a><!-- doxytag: member="jitterbuf.h::JB_HISTORY_DROPPCT" ref="ac67629555c4de1f47f146669bab821cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define JB_HISTORY_DROPPCT&nbsp;&nbsp;&nbsp;3</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>what percentage of timestamps should we drop from the history when we examine it; this might eventually be something made configurable </p>

<p>Definition at line <a class="el" href="jitterbuf_8h_source.html#l00036">36</a> of file <a class="el" href="jitterbuf_8h_source.html">jitterbuf.h</a>.</p>

<p>Referenced by <a class="el" href="jitterbuf_8c_source.html#l00277">history_get()</a>.</p>

</div>
</div>
<a class="anchor" id="a212c8dc3ed8bc5dd607396645c19ba9b"></a><!-- doxytag: member="jitterbuf.h::JB_HISTORY_DROPPCT_MAX" ref="a212c8dc3ed8bc5dd607396645c19ba9b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define JB_HISTORY_DROPPCT_MAX&nbsp;&nbsp;&nbsp;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>the maximum droppct we can handle (say it was configurable). </p>

<p>Definition at line <a class="el" href="jitterbuf_8h_source.html#l00038">38</a> of file <a class="el" href="jitterbuf_8h_source.html">jitterbuf.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac2d587e25cce0de796a6b8522b7b5e10"></a><!-- doxytag: member="jitterbuf.h::JB_HISTORY_MAXBUF_SZ" ref="ac2d587e25cce0de796a6b8522b7b5e10" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define JB_HISTORY_MAXBUF_SZ&nbsp;&nbsp;&nbsp;JB_HISTORY_SZ * JB_HISTORY_DROPPCT_MAX / 100</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>the size of the buffer we use to keep the top and botton timestamps for dropping </p>

<p>Definition at line <a class="el" href="jitterbuf_8h_source.html#l00040">40</a> of file <a class="el" href="jitterbuf_8h_source.html">jitterbuf.h</a>.</p>

<p>Referenced by <a class="el" href="jitterbuf_8c_source.html#l00200">history_calc_maxbuf()</a>, <a class="el" href="jitterbuf_8c_source.html#l00277">history_get()</a>, and <a class="el" href="jitterbuf_8c_source.html#l00125">history_put()</a>.</p>

</div>
</div>
<a class="anchor" id="a9dc3051902032b0955fbd9d8965ac824"></a><!-- doxytag: member="jitterbuf.h::JB_HISTORY_SZ" ref="a9dc3051902032b0955fbd9d8965ac824" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define JB_HISTORY_SZ&nbsp;&nbsp;&nbsp;500</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of historical timestamps to use in calculating jitter and drift </p>

<p>Definition at line <a class="el" href="jitterbuf_8h_source.html#l00033">33</a> of file <a class="el" href="jitterbuf_8h_source.html">jitterbuf.h</a>.</p>

<p>Referenced by <a class="el" href="jitterbuf_8c_source.html#l00200">history_calc_maxbuf()</a>, <a class="el" href="jitterbuf_8c_source.html#l00277">history_get()</a>, and <a class="el" href="jitterbuf_8c_source.html#l00125">history_put()</a>.</p>

</div>
</div>
<a class="anchor" id="a17730bc1072071b7613d0f937cd9ad74"></a><!-- doxytag: member="jitterbuf.h::JB_TARGET_EXTRA" ref="a17730bc1072071b7613d0f937cd9ad74" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define JB_TARGET_EXTRA&nbsp;&nbsp;&nbsp;40</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>amount of additional jitterbuffer adjustment </p>

<p>Definition at line <a class="el" href="jitterbuf_8h_source.html#l00042">42</a> of file <a class="el" href="jitterbuf_8h_source.html">jitterbuf.h</a>.</p>

<p>Referenced by <a class="el" href="jitterbuf_8c_source.html#l00070">jb_reset()</a>, and <a class="el" href="jitterbuf_8c_source.html#l00828">jb_setconf()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a799359320cd26f5d8940efeb58364e53"></a><!-- doxytag: member="jitterbuf.h::jb_output_function_t" ref="a799359320cd26f5d8940efeb58364e53" args=")(const char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="jitterbuf_8h.html#a799359320cd26f5d8940efeb58364e53">jb_output_function_t</a>)(const char *fmt,...)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jitterbuf_8h_source.html#l00166">166</a> of file <a class="el" href="jitterbuf_8h_source.html">jitterbuf.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a7e72da000f982634fda8319b82db8de5"></a><!-- doxytag: member="jitterbuf.h::jb_frame_type" ref="a7e72da000f982634fda8319b82db8de5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5">jb_frame_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a7e72da000f982634fda8319b82db8de5a50fcc4e23186d417f90aa3f8582c70eb"></a><!-- doxytag: member="JB_TYPE_CONTROL" ref="a7e72da000f982634fda8319b82db8de5a50fcc4e23186d417f90aa3f8582c70eb" args="" -->JB_TYPE_CONTROL</em>&nbsp;</td><td>
<p>0 </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7e72da000f982634fda8319b82db8de5ad5dc59855a16913d9c6bdda89bb8ea31"></a><!-- doxytag: member="JB_TYPE_VOICE" ref="a7e72da000f982634fda8319b82db8de5ad5dc59855a16913d9c6bdda89bb8ea31" args="" -->JB_TYPE_VOICE</em>&nbsp;</td><td>
<p>1 </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7e72da000f982634fda8319b82db8de5a1201e6bd467195a2347a6c75d34a7cc4"></a><!-- doxytag: member="JB_TYPE_VIDEO" ref="a7e72da000f982634fda8319b82db8de5a1201e6bd467195a2347a6c75d34a7cc4" args="" -->JB_TYPE_VIDEO</em>&nbsp;</td><td>
<p>2 - reserved </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7e72da000f982634fda8319b82db8de5ab7844afd5de9edf071e06de0c65b707b"></a><!-- doxytag: member="JB_TYPE_SILENCE" ref="a7e72da000f982634fda8319b82db8de5ab7844afd5de9edf071e06de0c65b707b" args="" -->JB_TYPE_SILENCE</em>&nbsp;</td><td>
<p>3 </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="jitterbuf_8h_source.html#l00057">57</a> of file <a class="el" href="jitterbuf_8h_source.html">jitterbuf.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00057"></a>00057                    {
<a name="l00058"></a>00058    <span class="comment">/* frame types */</span>
<a name="l00059"></a>00059    <a class="code" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5a50fcc4e23186d417f90aa3f8582c70eb">JB_TYPE_CONTROL</a>,  <span class="comment">/*!&lt; 0            */</span>
<a name="l00060"></a>00060    <a class="code" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5ad5dc59855a16913d9c6bdda89bb8ea31">JB_TYPE_VOICE</a>,    <span class="comment">/*!&lt; 1            */</span>
<a name="l00061"></a>00061    <a class="code" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5a1201e6bd467195a2347a6c75d34a7cc4">JB_TYPE_VIDEO</a>,    <span class="comment">/*!&lt; 2 - reserved */</span>
<a name="l00062"></a>00062    <a class="code" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5ab7844afd5de9edf071e06de0c65b707b">JB_TYPE_SILENCE</a>   <span class="comment">/*!&lt; 3            */</span>
<a name="l00063"></a>00063 };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad8d0ce8a0ebfabfe77a56b17b2d154f5"></a><!-- doxytag: member="jitterbuf.h::jb_return_code" ref="ad8d0ce8a0ebfabfe77a56b17b2d154f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ad8d0ce8a0ebfabfe77a56b17b2d154f5abcbf2631f2f32ca1af2a49ff82bebaec"></a><!-- doxytag: member="JB_OK" ref="ad8d0ce8a0ebfabfe77a56b17b2d154f5abcbf2631f2f32ca1af2a49ff82bebaec" args="" -->JB_OK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad8d0ce8a0ebfabfe77a56b17b2d154f5a0abf1d52696752de6c37e8f57396f4a5"></a><!-- doxytag: member="JB_EMPTY" ref="ad8d0ce8a0ebfabfe77a56b17b2d154f5a0abf1d52696752de6c37e8f57396f4a5" args="" -->JB_EMPTY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad8d0ce8a0ebfabfe77a56b17b2d154f5ab70c5579075588aaade78deb3800c0a9"></a><!-- doxytag: member="JB_NOFRAME" ref="ad8d0ce8a0ebfabfe77a56b17b2d154f5ab70c5579075588aaade78deb3800c0a9" args="" -->JB_NOFRAME</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad8d0ce8a0ebfabfe77a56b17b2d154f5abaf74218828771bc4c562a6594dd218e"></a><!-- doxytag: member="JB_INTERP" ref="ad8d0ce8a0ebfabfe77a56b17b2d154f5abaf74218828771bc4c562a6594dd218e" args="" -->JB_INTERP</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad8d0ce8a0ebfabfe77a56b17b2d154f5a5807660dd8eaef6bea3e3347a91c93a6"></a><!-- doxytag: member="JB_DROP" ref="ad8d0ce8a0ebfabfe77a56b17b2d154f5a5807660dd8eaef6bea3e3347a91c93a6" args="" -->JB_DROP</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad8d0ce8a0ebfabfe77a56b17b2d154f5a3ef27a58ff51c815b4c27e94f65cfdd2"></a><!-- doxytag: member="JB_SCHED" ref="ad8d0ce8a0ebfabfe77a56b17b2d154f5a3ef27a58ff51c815b4c27e94f65cfdd2" args="" -->JB_SCHED</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="jitterbuf_8h_source.html#l00047">47</a> of file <a class="el" href="jitterbuf_8h_source.html">jitterbuf.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00047"></a>00047                     {
<a name="l00048"></a>00048    <span class="comment">/* return codes */</span>
<a name="l00049"></a>00049    <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5abcbf2631f2f32ca1af2a49ff82bebaec">JB_OK</a>,            <span class="comment">/* 0 */</span>
<a name="l00050"></a>00050    <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5a0abf1d52696752de6c37e8f57396f4a5">JB_EMPTY</a>,         <span class="comment">/* 1 */</span>
<a name="l00051"></a>00051    <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5ab70c5579075588aaade78deb3800c0a9">JB_NOFRAME</a>,       <span class="comment">/* 2 */</span>
<a name="l00052"></a>00052    <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5abaf74218828771bc4c562a6594dd218e">JB_INTERP</a>,        <span class="comment">/* 3 */</span>
<a name="l00053"></a>00053    <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5a5807660dd8eaef6bea3e3347a91c93a6">JB_DROP</a>,          <span class="comment">/* 4 */</span>
<a name="l00054"></a>00054    <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5a3ef27a58ff51c815b4c27e94f65cfdd2">JB_SCHED</a>          <span class="comment">/* 5 */</span>
<a name="l00055"></a>00055 };
</pre></div></p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a2714537be23d6bb12425ba8542c4b1f7"></a><!-- doxytag: member="jitterbuf.h::jb_destroy" ref="a2714537be23d6bb12425ba8542c4b1f7" args="(jitterbuf *jb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jb_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjitterbuf.html">jitterbuf</a> *&nbsp;</td>
          <td class="paramname"> <em>jb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>destroy <a class="el" href="structjitterbuf.html">jitterbuf</a> </p>

<p>Definition at line <a class="el" href="jitterbuf_8c_source.html#l00095">95</a> of file <a class="el" href="jitterbuf_8c_source.html">jitterbuf.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="jitterbuf_8h_source.html#l00119">jitterbuf::free</a>, <a class="el" href="jitterbuf_8c_source.html#l00048">jb_dbg2</a>, and <a class="el" href="jitterbuf_8h_source.html#l00104">jb_frame::next</a>.</p>

<p>Referenced by <a class="el" href="abstract__jb_8c_source.html#l00754">jb_destroy_adaptive()</a>, and <a class="el" href="chan__iax2_8c_source.html#l01715">pvt_destructor()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00096"></a>00096 {
<a name="l00097"></a>00097    <a class="code" href="structjb__frame.html">jb_frame</a> *frame; 
<a name="l00098"></a>00098    <a class="code" href="jitterbuf_8c.html#a7b907115de11349a6a3581fd26855359">jb_dbg2</a>(<span class="stringliteral">&quot;jb_destroy(%x)\n&quot;</span>, jb);
<a name="l00099"></a>00099 
<a name="l00100"></a>00100    <span class="comment">/* free all the frames on the &quot;free list&quot; */</span>
<a name="l00101"></a>00101    frame = jb-&gt;<a class="code" href="structjitterbuf.html#a495c27f4de72f6725afaa826daa6b7e1">free</a>;
<a name="l00102"></a>00102    <span class="keywordflow">while</span> (frame != NULL) {
<a name="l00103"></a>00103       <a class="code" href="structjb__frame.html">jb_frame</a> *next = frame-&gt;<a class="code" href="structjb__frame.html#a5c4983c998fadf3f76193fd24783bde7">next</a>;
<a name="l00104"></a>00104       <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(frame);
<a name="l00105"></a>00105       frame = next;
<a name="l00106"></a>00106    }
<a name="l00107"></a>00107 
<a name="l00108"></a>00108    <span class="comment">/* free ourselves! */</span> 
<a name="l00109"></a>00109    <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(jb);
<a name="l00110"></a>00110 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a37158045e8af38a69ab6d15ee51dc08e"></a><!-- doxytag: member="jitterbuf.h::jb_get" ref="a37158045e8af38a69ab6d15ee51dc08e" args="(jitterbuf *jb, jb_frame *frame, long now, long interpl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a> jb_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjitterbuf.html">jitterbuf</a> *&nbsp;</td>
          <td class="paramname"> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjb__frame.html">jb_frame</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>interpl</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get a frame for time now (receiver's time) return value is one of JB_OK: You've got frame! JB_DROP: Here's an audio frame you should just drop. Ask me again for this time.. JB_NOFRAME: There's no frame scheduled for this time. JB_INTERP: Please interpolate an interpl-length frame for this time (either we need to grow, or there was a lost frame) JB_EMPTY: The jb is empty. </p>

<p>Definition at line <a class="el" href="jitterbuf_8c_source.html#l00788">788</a> of file <a class="el" href="jitterbuf_8c_source.html">jitterbuf.c</a>.</p>

<p>References <a class="el" href="jitterbuf_8c_source.html#l00548">_jb_get()</a>, <a class="el" href="jitterbuf_8h_source.html#l00108">jitterbuf::info</a>, <a class="el" href="jitterbuf_8h_source.html#l00053">JB_DROP</a>, <a class="el" href="jitterbuf_8h_source.html#l00052">JB_INTERP</a>, <a class="el" href="jitterbuf_8h_source.html#l00049">JB_OK</a>, <a class="el" href="jitterbuf_8c_source.html#l00041">jb_warn</a>, <a class="el" href="jitterbuf_8h_source.html#l00090">jb_info::last_voice_ms</a>, <a class="el" href="jitterbuf_8h_source.html#l00102">jb_frame::ms</a>, and <a class="el" href="jitterbuf_8h_source.html#l00101">jb_frame::ts</a>.</p>

<p>Referenced by <a class="el" href="chan__iax2_8c_source.html#l03879">__get_from_jb()</a>, and <a class="el" href="abstract__jb_8c_source.html#l00779">jb_get_adaptive()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00789"></a>00789 {
<a name="l00790"></a>00790    <span class="keyword">enum</span> <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a> ret = <a class="code" href="jitterbuf_8c.html#a0d7b54ace278bd3b433dd791e3e51785">_jb_get</a>(jb, frameout, now, interpl);
<a name="l00791"></a>00791 <span class="preprocessor">#if 0</span>
<a name="l00792"></a>00792 <span class="preprocessor"></span>   <span class="keyword">static</span> <span class="keywordtype">int</span> lastts=0;
<a name="l00793"></a>00793    <span class="keywordtype">int</span> thists = ((ret == <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5abcbf2631f2f32ca1af2a49ff82bebaec">JB_OK</a>) || (ret == <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5a5807660dd8eaef6bea3e3347a91c93a6">JB_DROP</a>)) ? frameout-&gt;ts : 0;
<a name="l00794"></a>00794    <a class="code" href="jitterbuf_8c.html#a02aa7da76d559f7ad7754d75312c6a44">jb_warn</a>(<span class="stringliteral">&quot;jb_get(%x,%x,%ld) = %d (%d)\n&quot;</span>, jb, frameout, now, ret, thists);
<a name="l00795"></a>00795    <span class="keywordflow">if</span> (thists &amp;&amp; thists &lt; lastts) <a class="code" href="jitterbuf_8c.html#a02aa7da76d559f7ad7754d75312c6a44">jb_warn</a>(<span class="stringliteral">&quot;XXXX timestamp roll-back!!!\n&quot;</span>);
<a name="l00796"></a>00796    lastts = thists;
<a name="l00797"></a>00797 <span class="preprocessor">#endif</span>
<a name="l00798"></a>00798 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (ret == <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5abaf74218828771bc4c562a6594dd218e">JB_INTERP</a>) 
<a name="l00799"></a>00799       frameout-&gt;ms = jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#ad98d5991900a7017490036fe5ebb2396">last_voice_ms</a>;
<a name="l00800"></a>00800    
<a name="l00801"></a>00801    <span class="keywordflow">return</span> ret;
<a name="l00802"></a>00802 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aaca01cea1cbcba683ca6d5b0bc009666"></a><!-- doxytag: member="jitterbuf.h::jb_getall" ref="aaca01cea1cbcba683ca6d5b0bc009666" args="(jitterbuf *jb, jb_frame *frameout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a> jb_getall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjitterbuf.html">jitterbuf</a> *&nbsp;</td>
          <td class="paramname"> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjb__frame.html">jb_frame</a> *&nbsp;</td>
          <td class="paramname"> <em>frameout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>unconditionally get frames from <a class="el" href="structjitterbuf.html">jitterbuf</a> until empty </p>

<p>Definition at line <a class="el" href="jitterbuf_8c_source.html#l00804">804</a> of file <a class="el" href="jitterbuf_8c_source.html">jitterbuf.c</a>.</p>

<p>References <a class="el" href="jitterbuf_8h_source.html#l00051">JB_NOFRAME</a>, <a class="el" href="jitterbuf_8h_source.html#l00049">JB_OK</a>, and <a class="el" href="jitterbuf_8c_source.html#l00436">queue_getall()</a>.</p>

<p>Referenced by <a class="el" href="chan__iax2_8c_source.html#l08026">complete_transfer()</a>, <a class="el" href="abstract__jb_8c_source.html#l00817">jb_empty_and_reset_adaptive()</a>, <a class="el" href="abstract__jb_8c_source.html#l00800">jb_remove_adaptive()</a>, <a class="el" href="chan__iax2_8c_source.html#l01715">pvt_destructor()</a>, and <a class="el" href="chan__iax2_8c_source.html#l03970">schedule_delivery()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00805"></a>00805 {
<a name="l00806"></a>00806    <a class="code" href="structjb__frame.html">jb_frame</a> *frame;
<a name="l00807"></a>00807    frame = <a class="code" href="jitterbuf_8c.html#a734149f77d12d0fd5e8c1a97b2f06191">queue_getall</a>(jb);
<a name="l00808"></a>00808 
<a name="l00809"></a>00809    <span class="keywordflow">if</span> (!frame) {
<a name="l00810"></a>00810       <span class="keywordflow">return</span> <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5ab70c5579075588aaade78deb3800c0a9">JB_NOFRAME</a>;
<a name="l00811"></a>00811    }
<a name="l00812"></a>00812 
<a name="l00813"></a>00813    *frameout = *frame;
<a name="l00814"></a>00814    <span class="keywordflow">return</span> <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5abcbf2631f2f32ca1af2a49ff82bebaec">JB_OK</a>;
<a name="l00815"></a>00815 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aed5937e57dcecf58443eb130f9f02d31"></a><!-- doxytag: member="jitterbuf.h::jb_getinfo" ref="aed5937e57dcecf58443eb130f9f02d31" args="(jitterbuf *jb, jb_info *stats)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a> jb_getinfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjitterbuf.html">jitterbuf</a> *&nbsp;</td>
          <td class="paramname"> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjb__info.html">jb_info</a> *&nbsp;</td>
          <td class="paramname"> <em>stats</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get <a class="el" href="structjitterbuf.html">jitterbuf</a> info: only "statistics" may be valid </p>

<p>Definition at line <a class="el" href="jitterbuf_8c_source.html#l00818">818</a> of file <a class="el" href="jitterbuf_8c_source.html">jitterbuf.c</a>.</p>

<p>References <a class="el" href="jitterbuf_8c_source.html#l00277">history_get()</a>, <a class="el" href="jitterbuf_8h_source.html#l00108">jitterbuf::info</a>, and <a class="el" href="jitterbuf_8h_source.html#l00049">JB_OK</a>.</p>

<p>Referenced by <a class="el" href="chan__iax2_8c_source.html#l06891">ast_cli_netstats()</a>, <a class="el" href="chan__iax2_8c_source.html#l09007">construct_rr()</a>, <a class="el" href="chan__iax2_8c_source.html#l06825">handle_cli_iax2_show_channels()</a>, and <a class="el" href="chan__iax2_8c_source.html#l09064">log_jitterstats()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00819"></a>00819 {
<a name="l00820"></a>00820 
<a name="l00821"></a>00821    <a class="code" href="jitterbuf_8c.html#a0c7fc00e6ed5c337beebe69165ff630d">history_get</a>(jb);
<a name="l00822"></a>00822 
<a name="l00823"></a>00823    *stats = jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>;
<a name="l00824"></a>00824 
<a name="l00825"></a>00825    <span class="keywordflow">return</span> <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5abcbf2631f2f32ca1af2a49ff82bebaec">JB_OK</a>;
<a name="l00826"></a>00826 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2fd56d2b8a06ad6b89cf67619f790911"></a><!-- doxytag: member="jitterbuf.h::jb_new" ref="a2fd56d2b8a06ad6b89cf67619f790911" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjitterbuf.html">jitterbuf</a>* jb_new </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>new <a class="el" href="structjitterbuf.html">jitterbuf</a> </p>

<p>Definition at line <a class="el" href="jitterbuf_8c_source.html#l00082">82</a> of file <a class="el" href="jitterbuf_8c_source.html">jitterbuf.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00081">ast_malloc</a>, <a class="el" href="jitterbuf_8c_source.html#l00048">jb_dbg2</a>, and <a class="el" href="jitterbuf_8c_source.html#l00070">jb_reset()</a>.</p>

<p>Referenced by <a class="el" href="abstract__jb_8c_source.html#l00736">jb_create_adaptive()</a>, and <a class="el" href="chan__iax2_8c_source.html#l01763">new_iax()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00083"></a>00083 {
<a name="l00084"></a>00084    <a class="code" href="structjitterbuf.html">jitterbuf</a> *jb;
<a name="l00085"></a>00085 
<a name="l00086"></a>00086    <span class="keywordflow">if</span> (!(jb = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>(<span class="keyword">sizeof</span>(*jb)))) 
<a name="l00087"></a>00087       <span class="keywordflow">return</span> NULL;
<a name="l00088"></a>00088 
<a name="l00089"></a>00089    <a class="code" href="jitterbuf_8h.html#a2c9efa9222ff9d7324a06c4a21b5ef72" title="reset jitterbuf">jb_reset</a>(jb);
<a name="l00090"></a>00090 
<a name="l00091"></a>00091    <a class="code" href="jitterbuf_8c.html#a7b907115de11349a6a3581fd26855359">jb_dbg2</a>(<span class="stringliteral">&quot;jb_new() = %x\n&quot;</span>, jb);
<a name="l00092"></a>00092    <span class="keywordflow">return</span> jb;
<a name="l00093"></a>00093 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a72883f3dc8328524ab3930122946e0a0"></a><!-- doxytag: member="jitterbuf.h::jb_next" ref="a72883f3dc8328524ab3930122946e0a0" args="(jitterbuf *jb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long jb_next </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjitterbuf.html">jitterbuf</a> *&nbsp;</td>
          <td class="paramname"> <em>jb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>when is the next frame due out, in receiver's time (0=EMPTY) This value may change as frames are added (esp non-audio frames) </p>

<p>Definition at line <a class="el" href="jitterbuf_8c_source.html#l00770">770</a> of file <a class="el" href="jitterbuf_8c_source.html">jitterbuf.c</a>.</p>

<p>References <a class="el" href="jitterbuf_8h_source.html#l00074">jb_info::conf</a>, <a class="el" href="jitterbuf_8h_source.html#l00086">jb_info::current</a>, <a class="el" href="jitterbuf_8h_source.html#l00118">jitterbuf::frames</a>, <a class="el" href="jitterbuf_8c_source.html#l00277">history_get()</a>, <a class="el" href="jitterbuf_8h_source.html#l00108">jitterbuf::info</a>, <a class="el" href="jitterbuf_8c_source.html#l00038">JB_LONGMAX</a>, <a class="el" href="jitterbuf_8h_source.html#l00092">jb_info::last_adjustment</a>, <a class="el" href="jitterbuf_8h_source.html#l00089">jb_info::next_voice_ts</a>, <a class="el" href="jitterbuf_8c_source.html#l00380">queue_next()</a>, <a class="el" href="jitterbuf_8h_source.html#l00091">jb_info::silence_begin_ts</a>, <a class="el" href="jitterbuf_8h_source.html#l00087">jb_info::target</a>, and <a class="el" href="jitterbuf_8h_source.html#l00070">jb_conf::target_extra</a>.</p>

<p>Referenced by <a class="el" href="chan__iax2_8c_source.html#l03879">__get_from_jb()</a>, <a class="el" href="abstract__jb_8c_source.html#l00792">jb_next_adaptive()</a>, and <a class="el" href="chan__iax2_8c_source.html#l03862">update_jbsched()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00771"></a>00771 {
<a name="l00772"></a>00772    <span class="keywordflow">if</span> (jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a888d38ba07ae3ca79c6b76e05140794e">silence_begin_ts</a>) {
<a name="l00773"></a>00773       <span class="keywordflow">if</span> (jb-&gt;<a class="code" href="structjitterbuf.html#a4e4377c016656f816b5fd18c58c2c522">frames</a>) {
<a name="l00774"></a>00774          <span class="keywordtype">long</span> next = <a class="code" href="jitterbuf_8c.html#a88d1a029272b919e300339f9a6643dda">queue_next</a>(jb);
<a name="l00775"></a>00775          <a class="code" href="jitterbuf_8c.html#a0c7fc00e6ed5c337beebe69165ff630d">history_get</a>(jb);
<a name="l00776"></a>00776          <span class="comment">/* shrink during silence */</span>
<a name="l00777"></a>00777          <span class="keywordflow">if</span> (jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a30c079f38fd808d70f29cd0d0c433f51">target</a> - jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a67fec00dfad51ea05ccda5e0141a5169">current</a> &lt; -jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a9473109a7fc3289f61f51fb2a9ee1a2c">conf</a>.<a class="code" href="structjb__conf.html#a322d898485ffd6c3c07391f381903bdd">target_extra</a>)
<a name="l00778"></a>00778             <span class="keywordflow">return</span> jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#ad879d1824febb52f8784a42e975e2071">last_adjustment</a> + 10;
<a name="l00779"></a>00779          <span class="keywordflow">return</span> next + jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a30c079f38fd808d70f29cd0d0c433f51">target</a>;
<a name="l00780"></a>00780       }
<a name="l00781"></a>00781       <span class="keywordflow">else</span> 
<a name="l00782"></a>00782          <span class="keywordflow">return</span> <a class="code" href="jitterbuf_8c.html#a77d851e317393150538d977a67e6604a">JB_LONGMAX</a>;
<a name="l00783"></a>00783    } <span class="keywordflow">else</span> {
<a name="l00784"></a>00784       <span class="keywordflow">return</span> jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#ae1a11de077ce06513a902d8488385d47">next_voice_ts</a>;
<a name="l00785"></a>00785    }
<a name="l00786"></a>00786 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a68bbac088e27e18441bd5b403f7f31d7"></a><!-- doxytag: member="jitterbuf.h::jb_put" ref="a68bbac088e27e18441bd5b403f7f31d7" args="(jitterbuf *jb, void *data, const enum jb_frame_type type, long ms, long ts, long now)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a> jb_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjitterbuf.html">jitterbuf</a> *&nbsp;</td>
          <td class="paramname"> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const enum <a class="el" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5">jb_frame_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>now</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>queue a frame </p>
<p>data=frame data, timings (in ms): ms=length of frame (for voice), ts=ts (sender's time) now=now (in receiver's time) return value is one of JB_OK: Frame added. Last call to <a class="el" href="jitterbuf_8h.html#a72883f3dc8328524ab3930122946e0a0" title="when is the next frame due out, in receiver&#39;s time (0=EMPTY) This value may change...">jb_next()</a> still valid JB_DROP: Drop this frame immediately JB_SCHED: Frame added. Call <a class="el" href="jitterbuf_8h.html#a72883f3dc8328524ab3930122946e0a0" title="when is the next frame due out, in receiver&#39;s time (0=EMPTY) This value may change...">jb_next()</a> to get a new time for the next frame </p>

<p>Definition at line <a class="el" href="jitterbuf_8c_source.html#l00507">507</a> of file <a class="el" href="jitterbuf_8c_source.html">jitterbuf.c</a>.</p>

<p>References <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="jitterbuf_8h_source.html#l00074">jb_info::conf</a>, <a class="el" href="jitterbuf_8h_source.html#l00116">jitterbuf::dropem</a>, <a class="el" href="jitterbuf_8h_source.html#l00118">jitterbuf::frames</a>, <a class="el" href="jitterbuf_8h_source.html#l00081">jb_info::frames_dropped</a>, <a class="el" href="jitterbuf_8h_source.html#l00077">jb_info::frames_in</a>, <a class="el" href="jitterbuf_8c_source.html#l00125">history_put()</a>, <a class="el" href="jitterbuf_8h_source.html#l00108">jitterbuf::info</a>, <a class="el" href="jitterbuf_8c_source.html#l00048">jb_dbg2</a>, <a class="el" href="jitterbuf_8h_source.html#l00053">JB_DROP</a>, <a class="el" href="jitterbuf_8h_source.html#l00049">JB_OK</a>, <a class="el" href="jitterbuf_8h_source.html#l00054">JB_SCHED</a>, <a class="el" href="jitterbuf_8h_source.html#l00060">JB_TYPE_VOICE</a>, <a class="el" href="jitterbuf_8h_source.html#l00067">jb_conf::max_jitterbuf</a>, <a class="el" href="jitterbuf_8h_source.html#l00104">jb_frame::prev</a>, <a class="el" href="jitterbuf_8c_source.html#l00319">queue_put()</a>, and <a class="el" href="jitterbuf_8h_source.html#l00101">jb_frame::ts</a>.</p>

<p>Referenced by <a class="el" href="abstract__jb_8c_source.html#l00768">jb_put_adaptive()</a>, and <a class="el" href="chan__iax2_8c_source.html#l03970">schedule_delivery()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00508"></a>00508 {
<a name="l00509"></a>00509    <span class="keywordtype">long</span> numts;
<a name="l00510"></a>00510 
<a name="l00511"></a>00511    <a class="code" href="jitterbuf_8c.html#a7b907115de11349a6a3581fd26855359">jb_dbg2</a>(<span class="stringliteral">&quot;jb_put(%x,%x,%ld,%ld,%ld)\n&quot;</span>, jb, data, ms, ts, now);
<a name="l00512"></a>00512 
<a name="l00513"></a>00513    numts = 0;
<a name="l00514"></a>00514    <span class="keywordflow">if</span> (jb-&gt;<a class="code" href="structjitterbuf.html#a4e4377c016656f816b5fd18c58c2c522">frames</a>)
<a name="l00515"></a>00515       numts = jb-&gt;<a class="code" href="structjitterbuf.html#a4e4377c016656f816b5fd18c58c2c522">frames</a>-&gt;<a class="code" href="structjb__frame.html#a270ed630495c3d453d342630569eb7c2">prev</a>-&gt;<a class="code" href="structjb__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a> - jb-&gt;<a class="code" href="structjitterbuf.html#a4e4377c016656f816b5fd18c58c2c522">frames</a>-&gt;<a class="code" href="structjb__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a>;
<a name="l00516"></a>00516 
<a name="l00517"></a>00517    <span class="keywordflow">if</span> (numts &gt;= jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a9473109a7fc3289f61f51fb2a9ee1a2c">conf</a>.<a class="code" href="structjb__conf.html#a560b79d26ead7b640d797181c9c3122c">max_jitterbuf</a>) {
<a name="l00518"></a>00518       <span class="keywordflow">if</span> (!jb-&gt;<a class="code" href="structjitterbuf.html#aa109858435512697e48eef62e04f0c4a">dropem</a>) {
<a name="l00519"></a>00519          <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Attempting to exceed Jitterbuf max %ld timeslots\n&quot;</span>,
<a name="l00520"></a>00520             jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a9473109a7fc3289f61f51fb2a9ee1a2c">conf</a>.<a class="code" href="structjb__conf.html#a560b79d26ead7b640d797181c9c3122c">max_jitterbuf</a>);
<a name="l00521"></a>00521          jb-&gt;<a class="code" href="structjitterbuf.html#aa109858435512697e48eef62e04f0c4a">dropem</a> = 1;
<a name="l00522"></a>00522       }
<a name="l00523"></a>00523       jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#ad46c17494e36cde0dda69873d2246614">frames_dropped</a>++;
<a name="l00524"></a>00524       <span class="keywordflow">return</span> <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5a5807660dd8eaef6bea3e3347a91c93a6">JB_DROP</a>;
<a name="l00525"></a>00525    } <span class="keywordflow">else</span> {
<a name="l00526"></a>00526       jb-&gt;<a class="code" href="structjitterbuf.html#aa109858435512697e48eef62e04f0c4a">dropem</a> = 0;
<a name="l00527"></a>00527    }
<a name="l00528"></a>00528 
<a name="l00529"></a>00529    <span class="keywordflow">if</span> (<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a> == <a class="code" href="jitterbuf_8h.html#a7e72da000f982634fda8319b82db8de5ad5dc59855a16913d9c6bdda89bb8ea31">JB_TYPE_VOICE</a>) {
<a name="l00530"></a>00530       <span class="comment">/* presently, I&apos;m only adding VOICE frames to history and drift calculations; mostly because with the</span>
<a name="l00531"></a>00531 <span class="comment">       * IAX integrations, I&apos;m sending retransmitted control frames with their awkward timestamps through */</span>
<a name="l00532"></a>00532       <span class="keywordflow">if</span> (<a class="code" href="jitterbuf_8c.html#a8d44357259339f8ac2baf81d17a23033" title="simple history manipulation">history_put</a>(jb,ts,now,ms)) {
<a name="l00533"></a>00533          jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#ad46c17494e36cde0dda69873d2246614">frames_dropped</a>++;
<a name="l00534"></a>00534          <span class="keywordflow">return</span> <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5a5807660dd8eaef6bea3e3347a91c93a6">JB_DROP</a>;
<a name="l00535"></a>00535       }
<a name="l00536"></a>00536    }
<a name="l00537"></a>00537 
<a name="l00538"></a>00538    jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a6b4cf44c3596e1c177e012e0a139b992">frames_in</a>++;
<a name="l00539"></a>00539 
<a name="l00540"></a>00540    <span class="comment">/* if put into head of queue, caller needs to reschedule */</span>
<a name="l00541"></a>00541    <span class="keywordflow">if</span> (<a class="code" href="jitterbuf_8c.html#aaa09e4c16baa2ebc0bf7ae9ac6cd4b0d">queue_put</a>(jb,data,<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>,ms,ts)) {
<a name="l00542"></a>00542       <span class="keywordflow">return</span> <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5a3ef27a58ff51c815b4c27e94f65cfdd2">JB_SCHED</a>;
<a name="l00543"></a>00543    }
<a name="l00544"></a>00544    <span class="keywordflow">return</span> <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5abcbf2631f2f32ca1af2a49ff82bebaec">JB_OK</a>;
<a name="l00545"></a>00545 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2c9efa9222ff9d7324a06c4a21b5ef72"></a><!-- doxytag: member="jitterbuf.h::jb_reset" ref="a2c9efa9222ff9d7324a06c4a21b5ef72" args="(jitterbuf *jb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jb_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjitterbuf.html">jitterbuf</a> *&nbsp;</td>
          <td class="paramname"> <em>jb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>reset <a class="el" href="structjitterbuf.html">jitterbuf</a> </p>
<dl class="note"><dt><b>Note:</b></dt><dd>The jitterbuffer should be empty before you call this, otherwise you will leak queued frames, and some internal structures </dd></dl>

<p>Definition at line <a class="el" href="jitterbuf_8c_source.html#l00070">70</a> of file <a class="el" href="jitterbuf_8c_source.html">jitterbuf.c</a>.</p>

<p>References <a class="el" href="jitterbuf_8h_source.html#l00074">jb_info::conf</a>, <a class="el" href="jitterbuf_8h_source.html#l00086">jb_info::current</a>, <a class="el" href="jitterbuf_8h_source.html#l00108">jitterbuf::info</a>, <a class="el" href="jitterbuf_8h_source.html#l00042">JB_TARGET_EXTRA</a>, <a class="el" href="aesopt_8h_source.html#l00399">s</a>, <a class="el" href="jitterbuf_8h_source.html#l00091">jb_info::silence_begin_ts</a>, <a class="el" href="jitterbuf_8h_source.html#l00087">jb_info::target</a>, and <a class="el" href="jitterbuf_8h_source.html#l00070">jb_conf::target_extra</a>.</p>

<p>Referenced by <a class="el" href="chan__iax2_8c_source.html#l08026">complete_transfer()</a>, <a class="el" href="abstract__jb_8c_source.html#l00817">jb_empty_and_reset_adaptive()</a>, <a class="el" href="jitterbuf_8c_source.html#l00082">jb_new()</a>, and <a class="el" href="chan__iax2_8c_source.html#l03970">schedule_delivery()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00071"></a>00071 {
<a name="l00072"></a>00072    <span class="comment">/* only save settings */</span>
<a name="l00073"></a>00073    <a class="code" href="structjb__conf.html">jb_conf</a> <a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a> = jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a9473109a7fc3289f61f51fb2a9ee1a2c">conf</a>;
<a name="l00074"></a>00074    memset(jb, 0, <span class="keyword">sizeof</span>(*jb));
<a name="l00075"></a>00075    jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a9473109a7fc3289f61f51fb2a9ee1a2c">conf</a> = s;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077    <span class="comment">/* initialize length, using the default value */</span>
<a name="l00078"></a>00078    jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a67fec00dfad51ea05ccda5e0141a5169">current</a> = jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a30c079f38fd808d70f29cd0d0c433f51">target</a> = jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a9473109a7fc3289f61f51fb2a9ee1a2c">conf</a>.<a class="code" href="structjb__conf.html#a322d898485ffd6c3c07391f381903bdd">target_extra</a> = <a class="code" href="jitterbuf_8h.html#a17730bc1072071b7613d0f937cd9ad74">JB_TARGET_EXTRA</a>;
<a name="l00079"></a>00079    jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a888d38ba07ae3ca79c6b76e05140794e">silence_begin_ts</a> = -1; 
<a name="l00080"></a>00080 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8ecded60181a9c1d1dae2fe05bddccf8"></a><!-- doxytag: member="jitterbuf.h::jb_setconf" ref="a8ecded60181a9c1d1dae2fe05bddccf8" args="(jitterbuf *jb, jb_conf *conf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5">jb_return_code</a> jb_setconf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjitterbuf.html">jitterbuf</a> *&nbsp;</td>
          <td class="paramname"> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjb__conf.html">jb_conf</a> *&nbsp;</td>
          <td class="paramname"> <em>conf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>set <a class="el" href="structjitterbuf.html">jitterbuf</a> conf </p>

<p>Definition at line <a class="el" href="jitterbuf_8c_source.html#l00828">828</a> of file <a class="el" href="jitterbuf_8c_source.html">jitterbuf.c</a>.</p>

<p>References <a class="el" href="jitterbuf_8h_source.html#l00074">jb_info::conf</a>, <a class="el" href="jitterbuf_8h_source.html#l00086">jb_info::current</a>, <a class="el" href="jitterbuf_8h_source.html#l00108">jitterbuf::info</a>, <a class="el" href="jitterbuf_8h_source.html#l00049">JB_OK</a>, <a class="el" href="jitterbuf_8h_source.html#l00042">JB_TARGET_EXTRA</a>, <a class="el" href="jitterbuf_8h_source.html#l00069">jb_conf::max_contig_interp</a>, <a class="el" href="jitterbuf_8h_source.html#l00067">jb_conf::max_jitterbuf</a>, <a class="el" href="jitterbuf_8h_source.html#l00068">jb_conf::resync_threshold</a>, <a class="el" href="jitterbuf_8h_source.html#l00087">jb_info::target</a>, and <a class="el" href="jitterbuf_8h_source.html#l00070">jb_conf::target_extra</a>.</p>

<p>Referenced by <a class="el" href="abstract__jb_8c_source.html#l00736">jb_create_adaptive()</a>, and <a class="el" href="chan__iax2_8c_source.html#l01763">new_iax()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00829"></a>00829 {
<a name="l00830"></a>00830    <span class="comment">/* take selected settings from the struct */</span>
<a name="l00831"></a>00831 
<a name="l00832"></a>00832    jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a9473109a7fc3289f61f51fb2a9ee1a2c">conf</a>.<a class="code" href="structjb__conf.html#a560b79d26ead7b640d797181c9c3122c">max_jitterbuf</a> = conf-&gt;<a class="code" href="structjb__conf.html#a560b79d26ead7b640d797181c9c3122c">max_jitterbuf</a>;
<a name="l00833"></a>00833    jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a9473109a7fc3289f61f51fb2a9ee1a2c">conf</a>.<a class="code" href="structjb__conf.html#ab5d708c3e3489b6fd1f92b19939c18e8">resync_threshold</a> = conf-&gt;<a class="code" href="structjb__conf.html#ab5d708c3e3489b6fd1f92b19939c18e8">resync_threshold</a>;
<a name="l00834"></a>00834    jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a9473109a7fc3289f61f51fb2a9ee1a2c">conf</a>.<a class="code" href="structjb__conf.html#af42f40eb2b87dd2147bd66357e99eff4">max_contig_interp</a> = conf-&gt;<a class="code" href="structjb__conf.html#af42f40eb2b87dd2147bd66357e99eff4">max_contig_interp</a>;
<a name="l00835"></a>00835 
<a name="l00836"></a>00836    <span class="comment">/* -1 indicates use of the default JB_TARGET_EXTRA value */</span>
<a name="l00837"></a>00837    jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a9473109a7fc3289f61f51fb2a9ee1a2c">conf</a>.<a class="code" href="structjb__conf.html#a322d898485ffd6c3c07391f381903bdd">target_extra</a> = ( conf-&gt;<a class="code" href="structjb__conf.html#a322d898485ffd6c3c07391f381903bdd">target_extra</a> == -1 )
<a name="l00838"></a>00838       ? <a class="code" href="jitterbuf_8h.html#a17730bc1072071b7613d0f937cd9ad74">JB_TARGET_EXTRA</a>
<a name="l00839"></a>00839       : conf-&gt;<a class="code" href="structjb__conf.html#a322d898485ffd6c3c07391f381903bdd">target_extra</a>
<a name="l00840"></a>00840       ;
<a name="l00841"></a>00841       
<a name="l00842"></a>00842    <span class="comment">/* update these to match new target_extra setting */</span>
<a name="l00843"></a>00843    jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a67fec00dfad51ea05ccda5e0141a5169">current</a> = jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a9473109a7fc3289f61f51fb2a9ee1a2c">conf</a>.<a class="code" href="structjb__conf.html#a322d898485ffd6c3c07391f381903bdd">target_extra</a>;
<a name="l00844"></a>00844    jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a30c079f38fd808d70f29cd0d0c433f51">target</a> = jb-&gt;<a class="code" href="structjitterbuf.html#afb95a482485b36fdc8722161454d567f">info</a>.<a class="code" href="structjb__info.html#a9473109a7fc3289f61f51fb2a9ee1a2c">conf</a>.<a class="code" href="structjb__conf.html#a322d898485ffd6c3c07391f381903bdd">target_extra</a>;
<a name="l00845"></a>00845 
<a name="l00846"></a>00846    <span class="keywordflow">return</span> <a class="code" href="jitterbuf_8h.html#ad8d0ce8a0ebfabfe77a56b17b2d154f5abcbf2631f2f32ca1af2a49ff82bebaec">JB_OK</a>;
<a name="l00847"></a>00847 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5198ca5f2885b8b4a2579ba58e6f196f"></a><!-- doxytag: member="jitterbuf.h::jb_setoutput" ref="a5198ca5f2885b8b4a2579ba58e6f196f" args="(jb_output_function_t err, jb_output_function_t warn, jb_output_function_t dbg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jb_setoutput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jitterbuf_8h.html#a799359320cd26f5d8940efeb58364e53">jb_output_function_t</a>&nbsp;</td>
          <td class="paramname"> <em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="jitterbuf_8h.html#a799359320cd26f5d8940efeb58364e53">jb_output_function_t</a>&nbsp;</td>
          <td class="paramname"> <em>warn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="jitterbuf_8h.html#a799359320cd26f5d8940efeb58364e53">jb_output_function_t</a>&nbsp;</td>
          <td class="paramname"> <em>dbg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jitterbuf_8c_source.html#l00053">53</a> of file <a class="el" href="jitterbuf_8c_source.html">jitterbuf.c</a>.</p>

<p>Referenced by <a class="el" href="chan__iax2_8c_source.html#l07073">handle_cli_iax2_set_debug_jb()</a>, and <a class="el" href="chan__iax2_8c_source.html#l13805">load_module()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00054"></a>00054 {
<a name="l00055"></a>00055    <a class="code" href="jitterbuf_8c.html#a21b6dcbef37066214a9e88ebd90bd042">errf</a> = err;
<a name="l00056"></a>00056    <a class="code" href="jitterbuf_8c.html#a52d322ea948ef4873e756dcf4abef593">warnf</a> = warn;
<a name="l00057"></a>00057    <a class="code" href="jitterbuf_8c.html#a037e29db53b865cda18756fd12ec97cd">dbgf</a> = dbg;
<a name="l00058"></a>00058 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:22:18 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
