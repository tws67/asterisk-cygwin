<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:22:53 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_6ae6169cd48d88136f0d813c029ee18c.html">pbx</a>
  </div>
</div>
<div class="contents">
<h1>pbx_loopback.c File Reference</h1>
<p>Loopback PBX Module.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="asterisk_8h_source.html">asterisk.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="file_8h_source.html">asterisk/file.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="logger_8h_source.html">asterisk/logger.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="config_8h_source.html">asterisk/config.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="module_8h_source.html">asterisk/module.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="frame_8h_source.html">asterisk/frame.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="md5_8h_source.html">asterisk/md5.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="chanvars_8h_source.html">asterisk/chanvars.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sched_8h_source.html">asterisk/sched.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="io_8h_source.html">asterisk/io.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="crypto_8h_source.html">asterisk/crypto.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="astdb_8h_source.html">asterisk/astdb.h</a>&quot;</code><br/>

<p><a href="pbx__loopback_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#a852803b26edba9a43aaf1ef748908c91">LOOPBACK_COMMON</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#ad1c481909e44649a15268090eda1dcb5">loopback_canmatch</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, const char *<a class="el" href="chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, int priority, const char *callerid, const char *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#a777f133e80e89791c5dc34b7a2e65535">loopback_exec</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, const char *<a class="el" href="chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, int priority, const char *callerid, const char *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#a422634b3ea9bd6d3c4a339136f87dbbc">loopback_exists</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, const char *<a class="el" href="chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, int priority, const char *callerid, const char *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#ab462b517bf3325af4425a29d0ad3b7a5">loopback_matchmore</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, const char *<a class="el" href="chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, int priority, const char *callerid, const char *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#a24ffa9c7d1cd0908910bdb4dd5750b03">loopback_parse</a> (char **newexten, char **newcontext, int *priority, char **newpattern, char *<a class="el" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#a66454946462f17d51b6840088f5d40cc">loopback_subst</a> (char *<a class="el" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, int buflen, const char *<a class="el" href="chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, const char *<a class="el" href="chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, int priority, const char *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structast__module__info.html">ast_module_info</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = AST_MODULE, .flags = AST_MODFLAG_DEFAULT , .<a class="el" href="callerid_8c.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a> = &quot;Loopback Switch&quot; , .key = &quot;This paragraph is copyright (c) 2006 by Digium, Inc. \In order for your module to load, it must return this \key via a function called \&quot;key\&quot;. Any code which \includes this paragraph must be licensed under the GNU \General Public License <a class="el" href="res__config__pgsql_8c.html#aad880fc4455c253781e8968f2239d56f">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;aefddfaffd51bc118c14a748e96eb9a0&quot; , .load = load_module, .unload = unload_module, }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structast__module__info.html">ast_module_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#ae25b9f3970870610911f8850897e8ead">ast_module_info</a> = &amp;<a class="el" href="res__timing__timerfd_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structast__switch.html">ast_switch</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__loopback_8c.html#a5259e29cd37bb2ef8a7f2ddaa9c6842b">loopback_switch</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Loopback PBX Module. </p>

<p>Definition in file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a852803b26edba9a43aaf1ef748908c91"></a><!-- doxytag: member="pbx_loopback.c::LOOPBACK_COMMON" ref="a852803b26edba9a43aaf1ef748908c91" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOOPBACK_COMMON</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00072">72</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

<p>Referenced by <a class="el" href="pbx__loopback_8c_source.html#l00135">loopback_canmatch()</a>, <a class="el" href="pbx__loopback_8c_source.html#l00144">loopback_exec()</a>, <a class="el" href="pbx__loopback_8c_source.html#l00126">loopback_exists()</a>, and <a class="el" href="pbx__loopback_8c_source.html#l00152">loopback_matchmore()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a88b7c88fed6b80fd18f34f97757dfc04"></a><!-- doxytag: member="pbx_loopback.c::__reg_module" ref="a88b7c88fed6b80fd18f34f97757dfc04" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00184">184</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

</div>
</div>
<a class="anchor" id="afeab1257bd17282b95875499393a147a"></a><!-- doxytag: member="pbx_loopback.c::__unreg_module" ref="afeab1257bd17282b95875499393a147a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00184">184</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac3382bf6da54c56b37069bd76bbdf4f9"></a><!-- doxytag: member="pbx_loopback.c::load_module" ref="ac3382bf6da54c56b37069bd76bbdf4f9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00177">177</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

<p>References <a class="el" href="module_8h_source.html#l00065">AST_MODULE_LOAD_FAILURE</a>, <a class="el" href="module_8h_source.html#l00061">AST_MODULE_LOAD_SUCCESS</a>, and <a class="el" href="pbx_8c_source.html#l05157">ast_register_switch()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00178"></a>00178 {
<a name="l00179"></a>00179    <span class="keywordflow">if</span> (<a class="code" href="pbx_8h.html#a5297fa9c52ff50da5b08c7217d9251b4" title="Register an alternative dialplan switch.">ast_register_switch</a>(&amp;<a class="code" href="pbx__loopback_8c.html#a5259e29cd37bb2ef8a7f2ddaa9c6842b">loopback_switch</a>))
<a name="l00180"></a>00180       <span class="keywordflow">return</span> <a class="code" href="module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a>;
<a name="l00181"></a>00181    <span class="keywordflow">return</span> <a class="code" href="module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;
<a name="l00182"></a>00182 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad1c481909e44649a15268090eda1dcb5"></a><!-- doxytag: member="pbx_loopback.c::loopback_canmatch" ref="ad1c481909e44649a15268090eda1dcb5" args="(struct ast_channel *chan, const char *context, const char *exten, int priority, const char *callerid, const char *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int loopback_canmatch </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>callerid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00135">135</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

<p>References <a class="el" href="pbx_8c_source.html#l04158">ast_canmatch_extension()</a>, <a class="el" href="pbx_8c_source.html#l02402">ast_extension_match()</a>, and <a class="el" href="pbx__loopback_8c_source.html#l00072">LOOPBACK_COMMON</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00136"></a>00136 {
<a name="l00137"></a>00137    <a class="code" href="pbx__loopback_8c.html#a852803b26edba9a43aaf1ef748908c91">LOOPBACK_COMMON</a>;
<a name="l00138"></a>00138    res = <a class="code" href="pbx_8h.html#a93f9868530c1e8a9d9d367d1ead8782e" title="Looks for a valid matching extension.">ast_canmatch_extension</a>(chan, newcontext, newexten, newpriority, callerid);
<a name="l00139"></a>00139    <span class="keywordflow">if</span> (newpattern &amp;&amp; !<a class="code" href="pbx_8h.html#a94cf2f099462a906620b5566871af797" title="Determine if a given extension matches a given pattern (in NXX format).">ast_extension_match</a>(newpattern, <a class="code" href="chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>))
<a name="l00140"></a>00140       res = 0;
<a name="l00141"></a>00141    <span class="keywordflow">return</span> res;
<a name="l00142"></a>00142 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a777f133e80e89791c5dc34b7a2e65535"></a><!-- doxytag: member="pbx_loopback.c::loopback_exec" ref="a777f133e80e89791c5dc34b7a2e65535" args="(struct ast_channel *chan, const char *context, const char *exten, int priority, const char *callerid, const char *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int loopback_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>callerid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00144">144</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

<p>References <a class="el" href="pbx_8c_source.html#l04168">ast_spawn_extension()</a>, and <a class="el" href="pbx__loopback_8c_source.html#l00072">LOOPBACK_COMMON</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00145"></a>00145 {
<a name="l00146"></a>00146    <span class="keywordtype">int</span> found;
<a name="l00147"></a>00147    <a class="code" href="pbx__loopback_8c.html#a852803b26edba9a43aaf1ef748908c91">LOOPBACK_COMMON</a>;
<a name="l00148"></a>00148    res = <a class="code" href="pbx_8h.html#a94ca71e502d95d1cb0a815072e059aee" title="Launch a new extension (i.e. new stack).">ast_spawn_extension</a>(chan, newcontext, newexten, newpriority, callerid, &amp;found, 0);
<a name="l00149"></a>00149    <span class="keywordflow">return</span> res;
<a name="l00150"></a>00150 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a422634b3ea9bd6d3c4a339136f87dbbc"></a><!-- doxytag: member="pbx_loopback.c::loopback_exists" ref="a422634b3ea9bd6d3c4a339136f87dbbc" args="(struct ast_channel *chan, const char *context, const char *exten, int priority, const char *callerid, const char *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int loopback_exists </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>callerid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00126">126</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

<p>References <a class="el" href="pbx_8c_source.html#l04143">ast_exists_extension()</a>, <a class="el" href="pbx_8c_source.html#l02402">ast_extension_match()</a>, and <a class="el" href="pbx__loopback_8c_source.html#l00072">LOOPBACK_COMMON</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00127"></a>00127 {
<a name="l00128"></a>00128    <a class="code" href="pbx__loopback_8c.html#a852803b26edba9a43aaf1ef748908c91">LOOPBACK_COMMON</a>;
<a name="l00129"></a>00129    res = <a class="code" href="pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7" title="Determine whether an extension exists.">ast_exists_extension</a>(chan, newcontext, newexten, newpriority, callerid);
<a name="l00130"></a>00130    <span class="keywordflow">if</span> (newpattern &amp;&amp; !<a class="code" href="pbx_8h.html#a94cf2f099462a906620b5566871af797" title="Determine if a given extension matches a given pattern (in NXX format).">ast_extension_match</a>(newpattern, <a class="code" href="chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>))
<a name="l00131"></a>00131       res = 0;
<a name="l00132"></a>00132    <span class="keywordflow">return</span> res;
<a name="l00133"></a>00133 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab462b517bf3325af4425a29d0ad3b7a5"></a><!-- doxytag: member="pbx_loopback.c::loopback_matchmore" ref="ab462b517bf3325af4425a29d0ad3b7a5" args="(struct ast_channel *chan, const char *context, const char *exten, int priority, const char *callerid, const char *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int loopback_matchmore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>callerid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00152">152</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

<p>References <a class="el" href="pbx_8c_source.html#l02402">ast_extension_match()</a>, <a class="el" href="pbx_8c_source.html#l04163">ast_matchmore_extension()</a>, and <a class="el" href="pbx__loopback_8c_source.html#l00072">LOOPBACK_COMMON</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00153"></a>00153 {
<a name="l00154"></a>00154    <a class="code" href="pbx__loopback_8c.html#a852803b26edba9a43aaf1ef748908c91">LOOPBACK_COMMON</a>;
<a name="l00155"></a>00155    res = <a class="code" href="pbx_8h.html#ac359af75b9494f50904583d2168a7577" title="Looks to see if adding anything to this extension might match something. (exists...">ast_matchmore_extension</a>(chan, newcontext, newexten, newpriority, callerid);
<a name="l00156"></a>00156    <span class="keywordflow">if</span> (newpattern &amp;&amp; !<a class="code" href="pbx_8h.html#a94cf2f099462a906620b5566871af797" title="Determine if a given extension matches a given pattern (in NXX format).">ast_extension_match</a>(newpattern, <a class="code" href="chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>))
<a name="l00157"></a>00157       res = 0;
<a name="l00158"></a>00158    <span class="keywordflow">return</span> res;
<a name="l00159"></a>00159 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a24ffa9c7d1cd0908910bdb4dd5750b03"></a><!-- doxytag: member="pbx_loopback.c::loopback_parse" ref="a24ffa9c7d1cd0908910bdb4dd5750b03" args="(char **newexten, char **newcontext, int *priority, char **newpattern, char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void loopback_parse </td>
          <td>(</td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>newexten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>newcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>newpattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00105">105</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00063">ast_strlen_zero()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00106"></a>00106 {
<a name="l00107"></a>00107    <span class="keywordtype">char</span> *con;
<a name="l00108"></a>00108    <span class="keywordtype">char</span> *pri;
<a name="l00109"></a>00109    *newpattern = strchr(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <span class="charliteral">&apos;/&apos;</span>);
<a name="l00110"></a>00110    <span class="keywordflow">if</span> (*newpattern)
<a name="l00111"></a>00111       *(*newpattern)++ = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l00112"></a>00112    con = strchr(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <span class="charliteral">&apos;@&apos;</span>);
<a name="l00113"></a>00113    <span class="keywordflow">if</span> (con) {
<a name="l00114"></a>00114       *con++ = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l00115"></a>00115       pri = strchr(con, <span class="charliteral">&apos;:&apos;</span>);
<a name="l00116"></a>00116    } <span class="keywordflow">else</span>
<a name="l00117"></a>00117       pri = strchr(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <span class="charliteral">&apos;:&apos;</span>);
<a name="l00118"></a>00118    <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>))
<a name="l00119"></a>00119       *newexten = <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>;
<a name="l00120"></a>00120    <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(con))
<a name="l00121"></a>00121       *newcontext = con;
<a name="l00122"></a>00122    <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(pri))
<a name="l00123"></a>00123       sscanf(pri, <span class="stringliteral">&quot;%30d&quot;</span>, priority);
<a name="l00124"></a>00124 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a66454946462f17d51b6840088f5d40cc"></a><!-- doxytag: member="pbx_loopback.c::loopback_subst" ref="a66454946462f17d51b6840088f5d40cc" args="(char *buf, int buflen, const char *exten, const char *context, int priority, const char *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* loopback_subst </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00083">83</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

<p>References <a class="el" href="linkedlists_8h_source.html#l00665">AST_LIST_HEAD_INIT_NOLOCK</a>, <a class="el" href="linkedlists_8h_source.html#l00695">AST_LIST_INSERT_HEAD</a>, <a class="el" href="linkedlists_8h_source.html#l00817">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="chanvars_8c_source.html#l00037">ast_var_assign()</a>, <a class="el" href="chanvars_8c_source.html#l00059">ast_var_delete()</a>, and <a class="el" href="pbx_8c_source.html#l03604">pbx_substitute_variables_varshead()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00084"></a>00084 {
<a name="l00085"></a>00085    <span class="keyword">struct </span><a class="code" href="structast__var__t.html">ast_var_t</a> *newvariable;
<a name="l00086"></a>00086    <span class="keyword">struct </span>varshead headp;
<a name="l00087"></a>00087    <span class="keywordtype">char</span> tmp[80];
<a name="l00088"></a>00088 
<a name="l00089"></a>00089    snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%d&quot;</span>, priority);
<a name="l00090"></a>00090    <a class="code" href="linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27" title="Initializes a list head structure.">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;headp);
<a name="l00091"></a>00091    newvariable = <a class="code" href="chanvars_8h.html#a8ea2b5a29fa275115c7ed27a593b727d">ast_var_assign</a>(<span class="stringliteral">&quot;EXTEN&quot;</span>, <a class="code" href="chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>);
<a name="l00092"></a>00092    <a class="code" href="linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307" title="Inserts a list entry at the head of a list.">AST_LIST_INSERT_HEAD</a>(&amp;headp, newvariable, entries);
<a name="l00093"></a>00093    newvariable = <a class="code" href="chanvars_8h.html#a8ea2b5a29fa275115c7ed27a593b727d">ast_var_assign</a>(<span class="stringliteral">&quot;CONTEXT&quot;</span>, <a class="code" href="chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>);
<a name="l00094"></a>00094    <a class="code" href="linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307" title="Inserts a list entry at the head of a list.">AST_LIST_INSERT_HEAD</a>(&amp;headp, newvariable, entries);
<a name="l00095"></a>00095    newvariable = <a class="code" href="chanvars_8h.html#a8ea2b5a29fa275115c7ed27a593b727d">ast_var_assign</a>(<span class="stringliteral">&quot;PRIORITY&quot;</span>, tmp);
<a name="l00096"></a>00096    <a class="code" href="linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307" title="Inserts a list entry at the head of a list.">AST_LIST_INSERT_HEAD</a>(&amp;headp, newvariable, entries);
<a name="l00097"></a>00097    <span class="comment">/* Substitute variables */</span>
<a name="l00098"></a>00098    <a class="code" href="pbx_8h.html#a2b3355625306d4b98ca8047cd2245459">pbx_substitute_variables_varshead</a>(&amp;headp, data, <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, buflen);
<a name="l00099"></a>00099    <span class="comment">/* free the list */</span>
<a name="l00100"></a>00100    <span class="keywordflow">while</span> ((newvariable = <a class="code" href="linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989" title="Removes and returns the head entry from a list.">AST_LIST_REMOVE_HEAD</a>(&amp;headp, entries)))
<a name="l00101"></a>00101                 <a class="code" href="chanvars_8h.html#a52aaa758ed30031250c2d356b993c6d9">ast_var_delete</a>(newvariable);
<a name="l00102"></a>00102    <span class="keywordflow">return</span> <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>;
<a name="l00103"></a>00103 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad09fa931f468002152a3cc2d5ce25eae"></a><!-- doxytag: member="pbx_loopback.c::unload_module" ref="ad09fa931f468002152a3cc2d5ce25eae" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00171">171</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

<p>References <a class="el" href="pbx_8c_source.html#l05175">ast_unregister_switch()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00172"></a>00172 {
<a name="l00173"></a>00173    <a class="code" href="pbx_8h.html#a4b11d763a689cb0df33a4a16c9d89ef3" title="Unregister an alternative switch.">ast_unregister_switch</a>(&amp;<a class="code" href="pbx__loopback_8c.html#a5259e29cd37bb2ef8a7f2ddaa9c6842b">loopback_switch</a>);
<a name="l00174"></a>00174    <span class="keywordflow">return</span> 0;
<a name="l00175"></a>00175 }
</pre></div></p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ab22f32016155f7f403e7178767163d7d"></a><!-- doxytag: member="pbx_loopback.c::__mod_info" ref="ab22f32016155f7f403e7178767163d7d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__module__info.html">ast_module_info</a> <a class="el" href="res__timing__timerfd_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = AST_MODULE, .flags = AST_MODFLAG_DEFAULT , .<a class="el" href="callerid_8c.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a> = &quot;Loopback Switch&quot; , .key = &quot;This paragraph is copyright (c) 2006 by Digium, Inc. \In order for your module to load, it must return this \key via a function called \&quot;key\&quot;. Any code which \includes this paragraph must be licensed under the GNU \General Public License <a class="el" href="res__config__pgsql_8c.html#aad880fc4455c253781e8968f2239d56f">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;aefddfaffd51bc118c14a748e96eb9a0&quot; , .load = load_module, .unload = unload_module, }<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00184">184</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae25b9f3970870610911f8850897e8ead"></a><!-- doxytag: member="pbx_loopback.c::ast_module_info" ref="ae25b9f3970870610911f8850897e8ead" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__module__info.html">ast_module_info</a>* <a class="el" href="structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="res__timing__timerfd_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00184">184</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5259e29cd37bb2ef8a7f2ddaa9c6842b"></a><!-- doxytag: member="pbx_loopback.c::loopback_switch" ref="a5259e29cd37bb2ef8a7f2ddaa9c6842b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__switch.html">ast_switch</a> <a class="el" href="pbx__loopback_8c.html#a5259e29cd37bb2ef8a7f2ddaa9c6842b">loopback_switch</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__loopback_8c_source.html#l00161">161</a> of file <a class="el" href="pbx__loopback_8c_source.html">pbx_loopback.c</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:22:53 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
