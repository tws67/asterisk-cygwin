<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:23:42 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>eventqent Struct Reference<br/>
<small>
[<a class="el" href="group__Group__AMI.html">AMI functions</a>]</small>
</h1><!-- doxytag: class="eventqent" --><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a></td></tr>
<tr><td class="memItemLeft" >struct {</td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;struct <a class="el" href="structeventqent.html">eventqent</a> *&nbsp;&nbsp;&nbsp;<a class="el" href="structeventqent.html#acd0d01241b583ddfe7ed3e80617447c5">next</a></td></tr>
<tr><td class="memItemLeft" valign="top">}&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structeventqent.html#a6d891cfc6bf83e8cc2c45289210189a4">eq_next</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structeventqent.html#af45073fe7168fa90739567b07ebf47b7">eventdata</a> [1]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structeventqent.html#a1db4845df10d789835dcc97c392a2fe6">seq</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">usecount</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Linked list of events. Global events are appended to the list by <a class="el" href="group__Group__AMI.html#gae456544c8bf8d684b871f41851f8eab1">append_event()</a>. The usecount is the <a class="el" href="structnumber.html" title="Number structure.">number</a> of stored pointers to the element, excluding the list pointers. So an element that is only in the list has a usecount of 0, not 1.</p>
<p>Clients have a pointer to the last event processed, and for each of these clients we track the usecount of the elements. If we have a pointer to an entry in the list, it is safe to navigate it forward because elements will not be deleted, but only appended. The worst that can happen is seeing the pointer still NULL.</p>
<p>When the usecount of an element drops to 0, and the element is the first in the list, we can remove it. Removal is done within the main thread, which is woken up for the purpose.</p>
<p>For simplicity of implementation, we make sure the list is never empty. </p>

<p>Definition at line <a class="el" href="manager_8c_source.html#l00112">112</a> of file <a class="el" href="manager_8c_source.html">manager.c</a>.</p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="a60863e080514b398bce285b4d087dcf1"></a><!-- doxytag: member="eventqent::category" ref="a60863e080514b398bce285b4d087dcf1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="manager_8c_source.html#l00114">114</a> of file <a class="el" href="manager_8c_source.html">manager.c</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l01156">action_getconfig()</a>, <a class="el" href="manager_8c_source.html#l01257">action_getconfigjson()</a>, <a class="el" href="manager_8c_source.html#l01204">action_listcategories()</a>, <a class="el" href="manager_8c_source.html#l01591">action_waitevent()</a>, <a class="el" href="manager_8c_source.html#l03273">append_event()</a>, <a class="el" href="manager_8c_source.html#l00758">handle_showmaneventq()</a>, <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>, and <a class="el" href="manager_8c_source.html#l02654">process_events()</a>.</p>

</div>
</div>
<a class="anchor" id="a6d891cfc6bf83e8cc2c45289210189a4"></a><!-- doxytag: member="eventqent::eq_next" ref="a6d891cfc6bf83e8cc2c45289210189a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   <a class="el" href="structeventqent.html#a6d891cfc6bf83e8cc2c45289210189a4">eq_next</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af45073fe7168fa90739567b07ebf47b7"></a><!-- doxytag: member="eventqent::eventdata" ref="af45073fe7168fa90739567b07ebf47b7" args="[1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="structeventqent.html#af45073fe7168fa90739567b07ebf47b7">eventdata</a>[1]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>really variable size, allocated by <a class="el" href="group__Group__AMI.html#gae456544c8bf8d684b871f41851f8eab1">append_event()</a> </p>

<p>Definition at line <a class="el" href="manager_8c_source.html#l00117">117</a> of file <a class="el" href="manager_8c_source.html">manager.c</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l01591">action_waitevent()</a>, <a class="el" href="manager_8c_source.html#l03273">append_event()</a>, <a class="el" href="manager_8c_source.html#l00758">handle_showmaneventq()</a>, and <a class="el" href="manager_8c_source.html#l02654">process_events()</a>.</p>

</div>
</div>
<a class="anchor" id="acd0d01241b583ddfe7ed3e80617447c5"></a><!-- doxytag: member="eventqent::next" ref="acd0d01241b583ddfe7ed3e80617447c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structeventqent.html">eventqent</a>* <a class="el" href="structeventqent.html#acd0d01241b583ddfe7ed3e80617447c5">next</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="manager_8c_source.html#l00116">116</a> of file <a class="el" href="manager_8c_source.html">manager.c</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l00413">ast_instring()</a>.</p>

</div>
</div>
<a class="anchor" id="a1db4845df10d789835dcc97c392a2fe6"></a><!-- doxytag: member="eventqent::seq" ref="a1db4845df10d789835dcc97c392a2fe6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="structeventqent.html#a1db4845df10d789835dcc97c392a2fe6">seq</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>sequence <a class="el" href="structnumber.html" title="Number structure.">number</a> </p>

<p>Definition at line <a class="el" href="manager_8c_source.html#l00115">115</a> of file <a class="el" href="manager_8c_source.html">manager.c</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l03300">__manager_event()</a>, and <a class="el" href="manager_8c_source.html#l03273">append_event()</a>.</p>

</div>
</div>
<a class="anchor" id="ab0f2e84f976dc042139d37fd1c28d73b"></a><!-- doxytag: member="eventqent::usecount" ref="ab0f2e84f976dc042139d37fd1c28d73b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">usecount</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p># of clients who still need the event </p>

<p>Definition at line <a class="el" href="manager_8c_source.html#l00113">113</a> of file <a class="el" href="manager_8c_source.html">manager.c</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l03273">append_event()</a>, <a class="el" href="manager_8c_source.html#l00330">grab_last()</a>, <a class="el" href="manager_8c_source.html#l00758">handle_showmaneventq()</a>, <a class="el" href="manager_8c_source.html#l00349">purge_events()</a>, <a class="el" href="manager_8c_source.html#l00826">ref_event()</a>, and <a class="el" href="manager_8c_source.html#l00820">unref_event()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="manager_8c_source.html">manager.c</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:23:42 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
