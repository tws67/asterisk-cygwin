<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:18:43 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_1ab815038f534adda65c8b4ae4993449.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_16d825f1fa9ecca2e70b1a8d9256d0e6.html">asterisk</a>
  </div>
</div>
<div class="contents">
<h1>manager.h</h1><a href="manager_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Asterisk -- An open source telephony toolkit.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 1999 - 2005, Digium, Inc.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Mark Spencer &lt;markster@digium.com&gt;</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * See http://www.asterisk.org for more information about</span>
<a name="l00009"></a>00009 <span class="comment"> * the Asterisk project. Please do not directly contact</span>
<a name="l00010"></a>00010 <span class="comment"> * any of the maintainers of this project for assistance;</span>
<a name="l00011"></a>00011 <span class="comment"> * the project provides a web site, mailing lists and IRC</span>
<a name="l00012"></a>00012 <span class="comment"> * channels for your use.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * This program is free software, distributed under the terms of</span>
<a name="l00015"></a>00015 <span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span>
<a name="l00016"></a>00016 <span class="comment"> * at the top of the source tree.</span>
<a name="l00017"></a>00017 <span class="comment"> */</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#ifndef _ASTERISK_MANAGER_H</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define _ASTERISK_MANAGER_H</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="network_8h.html" title="Wrapper for network related headers, masking differences between various operating...">asterisk/network.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="lock_8h.html" title="Asterisk locking-related definitions:ast_mutext_t, ast_rwlock_t and related functions;atomic...">asterisk/lock.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="datastore_8h.html" title="Asterisk datastore objects.">asterisk/datastore.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="comment"></span>
<a name="l00026"></a>00026 <span class="comment">/*!</span>
<a name="l00027"></a>00027 <span class="comment"> \file</span>
<a name="l00028"></a>00028 <span class="comment"> \brief The AMI - Asterisk Manager Interface - is a TCP protocol created to</span>
<a name="l00029"></a>00029 <span class="comment"> manage Asterisk with third-party software.</span>
<a name="l00030"></a>00030 <span class="comment"></span>
<a name="l00031"></a>00031 <span class="comment"> Manager protocol packages are text fields of the form a: b.  There is</span>
<a name="l00032"></a>00032 <span class="comment"> always exactly one space after the colon.</span>
<a name="l00033"></a>00033 <span class="comment"></span>
<a name="l00034"></a>00034 <span class="comment">\verbatim</span>
<a name="l00035"></a>00035 <span class="comment"></span>
<a name="l00036"></a>00036 <span class="comment"> For Actions replies, the first line of the reply is a &quot;Response:&quot; header with</span>
<a name="l00037"></a>00037 <span class="comment"> values &quot;success&quot;, &quot;error&quot; or &quot;follows&quot;. &quot;Follows&quot; implies that the</span>
<a name="l00038"></a>00038 <span class="comment"> response is coming as separate events with the same ActionID. If the</span>
<a name="l00039"></a>00039 <span class="comment"> Action request has no ActionID, it will be hard matching events</span>
<a name="l00040"></a>00040 <span class="comment"> to the Action request in the manager client.</span>
<a name="l00041"></a>00041 <span class="comment"></span>
<a name="l00042"></a>00042 <span class="comment"> The first header type is the &quot;Event&quot; header.  Other headers vary from</span>
<a name="l00043"></a>00043 <span class="comment"> event to event.  Headers end with standard \\r\\n termination.</span>
<a name="l00044"></a>00044 <span class="comment"> The last line of the manager response or event is an empty line.</span>
<a name="l00045"></a>00045 <span class="comment"> (\\r\\n)</span>
<a name="l00046"></a>00046 <span class="comment"></span>
<a name="l00047"></a>00047 <span class="comment">\endverbatim</span>
<a name="l00048"></a>00048 <span class="comment"></span>
<a name="l00049"></a>00049 <span class="comment"> \note Please try to \b re-use \b existing \b headers to simplify manager message parsing in clients.</span>
<a name="l00050"></a>00050 <span class="comment">    Don&apos;t re-use an existing header with a new meaning, please.</span>
<a name="l00051"></a>00051 <span class="comment">    You can find a reference of standard headers in doc/manager.txt</span>
<a name="l00052"></a>00052 <span class="comment"></span>
<a name="l00053"></a>00053 <span class="comment">- \ref manager.c Main manager code file</span>
<a name="l00054"></a>00054 <span class="comment"> */</span>
<a name="l00055"></a>00055 
<a name="l00056"></a><a class="code" href="manager_8h.html#a9aa10c963efd367eaab256f4a05db100">00056</a> <span class="preprocessor">#define AMI_VERSION                     &quot;1.1&quot;</span>
<a name="l00057"></a><a class="code" href="manager_8h.html#a9aeced7f8d9056c4ec2663f1ad10a4a4">00057</a> <span class="preprocessor"></span><span class="preprocessor">#define DEFAULT_MANAGER_PORT 5038   </span><span class="comment">/* Default port for Asterisk management via TCP */</span>
<a name="l00058"></a>00058 <span class="comment"></span>
<a name="l00059"></a>00059 <span class="comment">/*! \name Manager event classes */</span><span class="comment"></span>
<a name="l00060"></a>00060 <span class="comment">/*@{ */</span>
<a name="l00061"></a><a class="code" href="manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">00061</a> <span class="preprocessor">#define EVENT_FLAG_SYSTEM     (1 &lt;&lt; 0) </span><span class="comment">/* System events such as module load/unload */</span>
<a name="l00062"></a><a class="code" href="manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">00062</a> <span class="preprocessor">#define EVENT_FLAG_CALL       (1 &lt;&lt; 1) </span><span class="comment">/* Call event, such as state change, etc */</span>
<a name="l00063"></a><a class="code" href="manager_8h.html#af805764035071e210ec71c41a3a1ae6c">00063</a> <span class="preprocessor">#define EVENT_FLAG_LOG        (1 &lt;&lt; 2) </span><span class="comment">/* Log events */</span>
<a name="l00064"></a><a class="code" href="manager_8h.html#a02eaf5c4a70ebad8e543c2efb7707869">00064</a> <span class="preprocessor">#define EVENT_FLAG_VERBOSE    (1 &lt;&lt; 3) </span><span class="comment">/* Verbose messages */</span>
<a name="l00065"></a><a class="code" href="manager_8h.html#ab9bbbe9b1fbde6ccff1f0a1ec0521afd">00065</a> <span class="preprocessor">#define EVENT_FLAG_COMMAND    (1 &lt;&lt; 4) </span><span class="comment">/* Ability to read/set commands */</span>
<a name="l00066"></a><a class="code" href="manager_8h.html#acd32bc0b58b87cc22c60ffff79496c7f">00066</a> <span class="preprocessor">#define EVENT_FLAG_AGENT      (1 &lt;&lt; 5) </span><span class="comment">/* Ability to read/set agent info */</span>
<a name="l00067"></a><a class="code" href="manager_8h.html#acc12c2bc03dce67ddd1590d67ab11f4d">00067</a> <span class="preprocessor">#define EVENT_FLAG_USER                 (1 &lt;&lt; 6) </span><span class="comment">/* Ability to read/set user info */</span>
<a name="l00068"></a><a class="code" href="manager_8h.html#a36fb89c2a73755209133b6c73fe92e54">00068</a> <span class="preprocessor">#define EVENT_FLAG_CONFIG     (1 &lt;&lt; 7) </span><span class="comment">/* Ability to modify configurations */</span>
<a name="l00069"></a><a class="code" href="manager_8h.html#a6307f76e83767cdcd6b618dfbd214526">00069</a> <span class="preprocessor">#define EVENT_FLAG_DTMF       (1 &lt;&lt; 8) </span><span class="comment">/* Ability to read DTMF events */</span>
<a name="l00070"></a><a class="code" href="manager_8h.html#a0b1b4140c2836696a6950e92ab48a580">00070</a> <span class="preprocessor">#define EVENT_FLAG_REPORTING     (1 &lt;&lt; 9) </span><span class="comment">/* Reporting events such as rtcp sent */</span>
<a name="l00071"></a><a class="code" href="manager_8h.html#adabf40844c4a05c6e0ef870002599dbe">00071</a> <span class="preprocessor">#define EVENT_FLAG_CDR        (1 &lt;&lt; 10) </span><span class="comment">/* CDR events */</span>
<a name="l00072"></a><a class="code" href="manager_8h.html#ad602e069591b527f28e36dd472425e7e">00072</a> <span class="preprocessor">#define EVENT_FLAG_DIALPLAN      (1 &lt;&lt; 11) </span><span class="comment">/* Dialplan events (VarSet, NewExten) */</span>
<a name="l00073"></a><a class="code" href="manager_8h.html#ad6acb19e6de27692675f1706d390f548">00073</a> <span class="preprocessor">#define EVENT_FLAG_ORIGINATE  (1 &lt;&lt; 12) </span><span class="comment">/* Originate a call to an extension */</span>
<a name="l00074"></a><a class="code" href="manager_8h.html#ac7370fe764f1305cdb3c543d3964d5ed">00074</a> <span class="preprocessor">#define EVENT_FLAG_AGI        (1 &lt;&lt; 13) </span><span class="comment">/* AGI events */</span>
<a name="l00075"></a>00075 <span class="comment">/*@} */</span>
<a name="l00076"></a>00076 <span class="comment"></span>
<a name="l00077"></a>00077 <span class="comment">/*! \brief Export manager structures */</span>
<a name="l00078"></a><a class="code" href="manager_8h.html#a98b15e5ddea410372fed1a16c046034b">00078</a> <span class="preprocessor">#define AST_MAX_MANHEADERS 128</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00080"></a>00080 <span class="comment">/*! \brief Manager Helper Function */</span>
<a name="l00081"></a><a class="code" href="manager_8h.html#a7552ea1b684fbcf440e5c9ecce471fcb">00081</a> <span class="keyword">typedef</span> int (*<a class="code" href="manager_8h.html#a7552ea1b684fbcf440e5c9ecce471fcb" title="Manager Helper Function.">manager_hook_t</a>)(int, <span class="keyword">const</span> <span class="keywordtype">char</span> *, <span class="keywordtype">char</span> *); 
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 
<a name="l00084"></a><a class="code" href="structmanager__custom__hook.html">00084</a> <span class="keyword">struct </span><a class="code" href="structmanager__custom__hook.html">manager_custom_hook</a> {<span class="comment"></span>
<a name="l00085"></a>00085 <span class="comment">   /*! Identifier */</span>
<a name="l00086"></a><a class="code" href="structmanager__custom__hook.html#adf16cd437526a5c5e0e0af87745acbb8">00086</a>    <span class="keywordtype">char</span> *<a class="code" href="structmanager__custom__hook.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>;<span class="comment"></span>
<a name="l00087"></a>00087 <span class="comment">   /*! helper function */</span>
<a name="l00088"></a><a class="code" href="structmanager__custom__hook.html#a563331ff9859f8ff63ed061c4c68d8cd">00088</a>    <a class="code" href="manager_8h.html#a7552ea1b684fbcf440e5c9ecce471fcb" title="Manager Helper Function.">manager_hook_t</a> <a class="code" href="structmanager__custom__hook.html#a563331ff9859f8ff63ed061c4c68d8cd">helper</a>;<span class="comment"></span>
<a name="l00089"></a>00089 <span class="comment">   /*! Linked list information */</span>
<a name="l00090"></a><a class="code" href="structmanager__custom__hook.html#acd82db5c35266d8ea29895c63ccb3ae2">00090</a>    <a class="code" href="linkedlists_8h.html#ac63e9e237da22b6faf3be4edfc4f5a11">AST_RWLIST_ENTRY</a>(<a class="code" href="structmanager__custom__hook.html">manager_custom_hook</a>) <a class="code" href="structmanager__custom__hook.html#a4b06fddd7909758971a2d0255047aa37">list</a>;
<a name="l00091"></a>00091 };
<a name="l00092"></a>00092 <span class="comment"></span>
<a name="l00093"></a>00093 <span class="comment">/*! \brief Check if AMI is enabled */</span>
<a name="l00094"></a>00094 <span class="keywordtype">int</span> <a class="code" href="group__Group__AMI.html#gad908dfa4d3b37621b01531d8f9f41df6" title="Check if AMI is enabled.">check_manager_enabled</a>(<span class="keywordtype">void</span>);
<a name="l00095"></a>00095 <span class="comment"></span>
<a name="l00096"></a>00096 <span class="comment">/*! \brief Check if AMI/HTTP is enabled */</span>
<a name="l00097"></a>00097 <span class="keywordtype">int</span> <a class="code" href="group__Group__AMI.html#gafd05c33fae7e3a3db836fede838c0b09" title="Check if AMI/HTTP is enabled.">check_webmanager_enabled</a>(<span class="keywordtype">void</span>);
<a name="l00098"></a>00098 <span class="comment"></span>
<a name="l00099"></a>00099 <span class="comment">/*! Add a custom hook to be called when an event is fired </span>
<a name="l00100"></a>00100 <span class="comment"> \param hook struct manager_custom_hook object to add</span>
<a name="l00101"></a>00101 <span class="comment">*/</span>
<a name="l00102"></a>00102 <span class="keywordtype">void</span> <a class="code" href="group__Group__AMI.html#ga9b312f4df19fa79a2185f41ff533516b" title="Add a custom hook to be called when an event is fired.">ast_manager_register_hook</a>(struct <a class="code" href="structmanager__custom__hook.html">manager_custom_hook</a> *hook);
<a name="l00103"></a>00103 <span class="comment"></span>
<a name="l00104"></a>00104 <span class="comment">/*! Delete a custom hook to be called when an event is fired</span>
<a name="l00105"></a>00105 <span class="comment">    \param hook struct manager_custom_hook object to delete</span>
<a name="l00106"></a>00106 <span class="comment">*/</span>
<a name="l00107"></a>00107 <span class="keywordtype">void</span> <a class="code" href="group__Group__AMI.html#ga9592be65e0f9c99b7952a5841888757f" title="Delete a custom hook to be called when an event is fired.">ast_manager_unregister_hook</a>(struct <a class="code" href="structmanager__custom__hook.html">manager_custom_hook</a> *hook);
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 struct <a class="code" href="structmansession.html">mansession</a>;
<a name="l00110"></a>00110 
<a name="l00111"></a><a class="code" href="structmessage.html">00111</a> struct <a class="code" href="structmessage.html">message</a> {
<a name="l00112"></a><a class="code" href="structmessage.html#a2337374fe8025cb750f52a316166aa6d">00112</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> hdrcount;
<a name="l00113"></a><a class="code" href="structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">00113</a>    <span class="keyword">const</span> <span class="keywordtype">char</span> *headers[<a class="code" href="manager_8h.html#a98b15e5ddea410372fed1a16c046034b" title="Export manager structures.">AST_MAX_MANHEADERS</a>];
<a name="l00114"></a>00114 };
<a name="l00115"></a>00115 
<a name="l00116"></a><a class="code" href="structmanager__action.html">00116</a> <span class="keyword">struct </span><a class="code" href="structmanager__action.html">manager_action</a> {<span class="comment"></span>
<a name="l00117"></a>00117 <span class="comment">   /*! Name of the action */</span>
<a name="l00118"></a><a class="code" href="structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">00118</a>    <span class="keyword">const</span> <span class="keywordtype">char</span> *action;<span class="comment"></span>
<a name="l00119"></a>00119 <span class="comment">   /*! Short description of the action */</span>
<a name="l00120"></a><a class="code" href="structmanager__action.html#afa26529a1480355101f5b6d883a7d37e">00120</a>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="app__externalivr_8c.html#afa26529a1480355101f5b6d883a7d37e">synopsis</a>;<span class="comment"></span>
<a name="l00121"></a>00121 <span class="comment">   /*! Detailed description of the action */</span>
<a name="l00122"></a><a class="code" href="structmanager__action.html#a68344fa88cf4e86b5079fd69a5c22d57">00122</a>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a>;<span class="comment"></span>
<a name="l00123"></a>00123 <span class="comment">   /*! Permission required for action.  EVENT_FLAG_* */</span>
<a name="l00124"></a><a class="code" href="structmanager__action.html#a321c2ead2a4079cde828f7491c2ef733">00124</a>    <span class="keywordtype">int</span> authority;<span class="comment"></span>
<a name="l00125"></a>00125 <span class="comment">   /*! Function to be called */</span>
<a name="l00126"></a>00126    int (*func)(<span class="keyword">struct </span><a class="code" href="structmansession.html">mansession</a> *<a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a>, <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structmessage.html">message</a> *m);<span class="comment"></span>
<a name="l00127"></a>00127 <span class="comment">   /*! For easy linking */</span>
<a name="l00128"></a><a class="code" href="structmanager__action.html#a4dcea72c5f608904529dc03849dfb4f3">00128</a>    <a class="code" href="linkedlists_8h.html#ac63e9e237da22b6faf3be4edfc4f5a11">AST_RWLIST_ENTRY</a>(<a class="code" href="structmanager__action.html">manager_action</a>) <a class="code" href="structmanager__custom__hook.html#a4b06fddd7909758971a2d0255047aa37">list</a>;
<a name="l00129"></a>00129 };
<a name="l00130"></a>00130 <span class="comment"></span>
<a name="l00131"></a>00131 <span class="comment">/*! \brief External routines may register/unregister manager callbacks this way </span>
<a name="l00132"></a>00132 <span class="comment"> * \note  Use ast_manager_register2() to register with help text for new manager commands */</span>
<a name="l00133"></a><a class="code" href="manager_8h.html#a24c8fe57053553be1a1458d4afe8909b">00133</a> <span class="preprocessor">#define ast_manager_register(a, b, c, d) ast_manager_register2(a, b, c, d, NULL)</span>
<a name="l00134"></a>00134 <span class="preprocessor"></span>
<a name="l00135"></a>00135 <span class="comment"></span>
<a name="l00136"></a>00136 <span class="comment">/*! \brief Register a manager command with the manager interface </span>
<a name="l00137"></a>00137 <span class="comment">   \param action Name of the requested Action:</span>
<a name="l00138"></a>00138 <span class="comment">   \param authority Required authority for this command</span>
<a name="l00139"></a>00139 <span class="comment">   \param func Function to call for this command</span>
<a name="l00140"></a>00140 <span class="comment">   \param synopsis Help text (one line, up to 30 chars) for CLI manager show commands</span>
<a name="l00141"></a>00141 <span class="comment">   \param description Help text, several lines</span>
<a name="l00142"></a>00142 <span class="comment">*/</span>
<a name="l00143"></a>00143 <span class="keywordtype">int</span> <a class="code" href="group__Group__AMI.html#ga332bf7ef48f67d63d849dd9febb18fb2" title="Register a manager command with the manager interface.">ast_manager_register2</a>(
<a name="l00144"></a>00144    <span class="keyword">const</span> <span class="keywordtype">char</span> *action,
<a name="l00145"></a>00145    <span class="keywordtype">int</span> authority,
<a name="l00146"></a>00146    <span class="keywordtype">int</span> (*func)(<span class="keyword">struct</span> <a class="code" href="structmansession.html">mansession</a> *<a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmessage.html">message</a> *m),
<a name="l00147"></a>00147    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="app__externalivr_8c.html#afa26529a1480355101f5b6d883a7d37e">synopsis</a>,
<a name="l00148"></a>00148    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a>);
<a name="l00149"></a>00149 <span class="comment"></span>
<a name="l00150"></a>00150 <span class="comment">/*! \brief Unregister a registered manager command </span>
<a name="l00151"></a>00151 <span class="comment">   \param action Name of registered Action:</span>
<a name="l00152"></a>00152 <span class="comment">*/</span>
<a name="l00153"></a>00153 <span class="keywordtype">int</span> <a class="code" href="group__Group__AMI.html#ga5a9336fe5bb6b2cf350de9571080809d" title="Unregister a registered manager command.">ast_manager_unregister</a>( <span class="keywordtype">char</span> *action );
<a name="l00154"></a>00154 <span class="comment"></span>
<a name="l00155"></a>00155 <span class="comment">/*! </span>
<a name="l00156"></a>00156 <span class="comment"> * \brief Verify a session&apos;s read permissions against a permission mask.  </span>
<a name="l00157"></a>00157 <span class="comment"> * \param ident session identity</span>
<a name="l00158"></a>00158 <span class="comment"> * \param perm permission mask to verify</span>
<a name="l00159"></a>00159 <span class="comment"> * \retval 1 if the session has the permission mask capabilities</span>
<a name="l00160"></a>00160 <span class="comment"> * \retval 0 otherwise</span>
<a name="l00161"></a>00161 <span class="comment"> */</span>
<a name="l00162"></a>00162 <span class="keywordtype">int</span> <a class="code" href="manager_8h.html#a73a22446241314099a4e371157e360f5" title="Verify a session&amp;#39;s read permissions against a permission mask.">astman_verify_session_readpermissions</a>(uint32_t ident, <span class="keywordtype">int</span> perm);
<a name="l00163"></a>00163 <span class="comment"></span>
<a name="l00164"></a>00164 <span class="comment">/*!</span>
<a name="l00165"></a>00165 <span class="comment"> * \brief Verify a session&apos;s write permissions against a permission mask.  </span>
<a name="l00166"></a>00166 <span class="comment"> * \param ident session identity</span>
<a name="l00167"></a>00167 <span class="comment"> * \param perm permission mask to verify</span>
<a name="l00168"></a>00168 <span class="comment"> * \retval 1 if the session has the permission mask capabilities, otherwise 0</span>
<a name="l00169"></a>00169 <span class="comment"> * \retval 0 otherwise</span>
<a name="l00170"></a>00170 <span class="comment"> */</span>
<a name="l00171"></a>00171 <span class="keywordtype">int</span> <a class="code" href="manager_8h.html#a38eb222ca678604d4f203c9e9d5295ab" title="Verify a session&amp;#39;s write permissions against a permission mask.">astman_verify_session_writepermissions</a>(uint32_t ident, <span class="keywordtype">int</span> perm);
<a name="l00172"></a>00172 <span class="comment"></span>
<a name="l00173"></a>00173 <span class="comment">/*! \brief External routines may send asterisk manager events this way </span>
<a name="l00174"></a>00174 <span class="comment"> *    \param category   Event category, matches manager authorization</span>
<a name="l00175"></a>00175 <span class="comment">   \param event   Event name</span>
<a name="l00176"></a>00176 <span class="comment">   \param contents   Contents of event</span>
<a name="l00177"></a>00177 <span class="comment">*/</span>
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 <span class="comment">/* XXX the parser in gcc 2.95 gets confused if you don&apos;t put a space</span>
<a name="l00180"></a>00180 <span class="comment"> * between the last arg before VA_ARGS and the comma */</span>
<a name="l00181"></a><a class="code" href="manager_8h.html#a1ef0ee0044dbbeb4c3a5abc6c046b208">00181</a> <span class="preprocessor">#define manager_event(category, event, contents , ...)   \</span>
<a name="l00182"></a>00182 <span class="preprocessor">        __manager_event(category, event, __FILE__, __LINE__, __PRETTY_FUNCTION__, contents , ## __VA_ARGS__)</span>
<a name="l00183"></a>00183 <span class="preprocessor"></span>
<a name="l00184"></a>00184 <span class="keywordtype">int</span> __attribute__((<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>(printf, 6, 7))) <a class="code" href="group__Group__AMI.html#gaa77d1f2d6eb8dbf1e1bc5d6d682b82cd" title="manager_event: Send AMI event to client">__manager_event</a>(<span class="keywordtype">int</span> category, const <span class="keywordtype">char</span> *event,
<a name="l00185"></a>00185                         const <span class="keywordtype">char</span> *<a class="code" href="structmanager__custom__hook.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>, <span class="keywordtype">int</span> line, const <span class="keywordtype">char</span> *func,
<a name="l00186"></a>00186                         const <span class="keywordtype">char</span> *contents, ...);
<a name="l00187"></a>00187 <span class="comment"></span>
<a name="l00188"></a>00188 <span class="comment">/*! \brief Get header from mananger transaction */</span>
<a name="l00189"></a>00189 const <span class="keywordtype">char</span> *<a class="code" href="group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556" title="Get header from mananger transaction.">astman_get_header</a>(const struct <a class="code" href="structmessage.html">message</a> *m, <span class="keywordtype">char</span> *<a class="code" href="ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>);
<a name="l00190"></a>00190 <span class="comment"></span>
<a name="l00191"></a>00191 <span class="comment">/*! \brief Get a linked list of the Variable: headers */</span>
<a name="l00192"></a>00192 struct <a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *<a class="code" href="group__Group__AMI.html#ga21a20a25e6d03f6fd32cdc86fe9b53d1" title="Get a linked list of the Variable: headers.">astman_get_variables</a>(const struct <a class="code" href="structmessage.html">message</a> *m);
<a name="l00193"></a>00193 <span class="comment"></span>
<a name="l00194"></a>00194 <span class="comment">/*! \brief Send error in manager transaction */</span>
<a name="l00195"></a>00195 <span class="keywordtype">void</span> <a class="code" href="group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c" title="Send error in manager transaction.">astman_send_error</a>(struct <a class="code" href="structmansession.html">mansession</a> *<a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a>, const struct <a class="code" href="structmessage.html">message</a> *m, <span class="keywordtype">char</span> *error);
<a name="l00196"></a>00196 <span class="comment"></span>
<a name="l00197"></a>00197 <span class="comment">/*! \brief Send response in manager transaction */</span>
<a name="l00198"></a>00198 <span class="keywordtype">void</span> <a class="code" href="group__Group__AMI.html#ga26805df02a1c92688ae132f29ac4478a" title="Send response in manager transaction.">astman_send_response</a>(struct <a class="code" href="structmansession.html">mansession</a> *s, const struct <a class="code" href="structmessage.html">message</a> *m, <span class="keywordtype">char</span> *resp, <span class="keywordtype">char</span> *<a class="code" href="adsistub_8c.html#a0dee90db1d6eb30329bee1ae6cec036a">msg</a>);
<a name="l00199"></a>00199 <span class="comment"></span>
<a name="l00200"></a>00200 <span class="comment">/*! \brief Send ack in manager transaction */</span>
<a name="l00201"></a>00201 <span class="keywordtype">void</span> <a class="code" href="group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3" title="Send ack in manager transaction.">astman_send_ack</a>(struct <a class="code" href="structmansession.html">mansession</a> *s, const struct <a class="code" href="structmessage.html">message</a> *m, <span class="keywordtype">char</span> *msg);
<a name="l00202"></a>00202 <span class="comment"></span>
<a name="l00203"></a>00203 <span class="comment">/*! \brief Send ack in manager list transaction */</span>
<a name="l00204"></a>00204 <span class="keywordtype">void</span> <a class="code" href="group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72" title="Send ack in manager list transaction.">astman_send_listack</a>(struct <a class="code" href="structmansession.html">mansession</a> *s, const struct <a class="code" href="structmessage.html">message</a> *m, <span class="keywordtype">char</span> *msg, <span class="keywordtype">char</span> *listflag);
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 <span class="keywordtype">void</span> __attribute__((<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>(printf, 2, 3))) <a class="code" href="group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(struct <a class="code" href="structmansession.html">mansession</a> *s, const <span class="keywordtype">char</span> *fmt, ...);
<a name="l00207"></a>00207 <span class="comment"></span>
<a name="l00208"></a>00208 <span class="comment">/*! \brief Determinie if a manager session ident is authenticated */</span>
<a name="l00209"></a>00209 <span class="keywordtype">int</span> <a class="code" href="manager_8h.html#acb49e15f3ae80cc0ee0cfa3a250d00c0" title="Determinie if a manager session ident is authenticated.">astman_is_authed</a>(uint32_t ident);
<a name="l00210"></a>00210 <span class="comment"></span>
<a name="l00211"></a>00211 <span class="comment">/*! \brief Called by Asterisk initialization */</span>
<a name="l00212"></a>00212 <span class="keywordtype">int</span> <a class="code" href="manager_8h.html#abd67495092f6edf4b7e5b6ae94be3154" title="Called by Asterisk initialization.">init_manager</a>(<span class="keywordtype">void</span>);
<a name="l00213"></a>00213 <span class="comment"></span>
<a name="l00214"></a>00214 <span class="comment">/*! \brief Called by Asterisk module functions and the CLI command */</span>
<a name="l00215"></a>00215 <span class="keywordtype">int</span> <a class="code" href="manager_8h.html#a272b99cacf89996831cfd6dc5253d6e8" title="Called by Asterisk module functions and the CLI command.">reload_manager</a>(<span class="keywordtype">void</span>);
<a name="l00216"></a>00216 <span class="comment"></span>
<a name="l00217"></a>00217 <span class="comment">/*! </span>
<a name="l00218"></a>00218 <span class="comment"> * \brief Add a datastore to a session</span>
<a name="l00219"></a>00219 <span class="comment"> *</span>
<a name="l00220"></a>00220 <span class="comment"> * \retval 0 success</span>
<a name="l00221"></a>00221 <span class="comment"> * \retval non-zero failure</span>
<a name="l00222"></a>00222 <span class="comment"> * \since 1.6.1</span>
<a name="l00223"></a>00223 <span class="comment"> */</span>
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 <span class="keywordtype">int</span> <a class="code" href="manager_8h.html#a56275a7a3b863c8b4a49d2e74ebe739c" title="Add a datastore to a session.">astman_datastore_add</a>(struct <a class="code" href="structmansession.html">mansession</a> *s, struct <a class="code" href="structast__datastore.html" title="Structure for a data store object.">ast_datastore</a> *datastore);
<a name="l00226"></a>00226 <span class="comment"></span>
<a name="l00227"></a>00227 <span class="comment">/*! </span>
<a name="l00228"></a>00228 <span class="comment"> * \brief Remove a datastore from a session</span>
<a name="l00229"></a>00229 <span class="comment"> *</span>
<a name="l00230"></a>00230 <span class="comment"> * \retval 0 success</span>
<a name="l00231"></a>00231 <span class="comment"> * \retval non-zero failure</span>
<a name="l00232"></a>00232 <span class="comment"> * \since 1.6.1</span>
<a name="l00233"></a>00233 <span class="comment"> */</span>
<a name="l00234"></a>00234 <span class="keywordtype">int</span> <a class="code" href="manager_8h.html#af9f2dfb1df89986ee6613d2bfa541688" title="Remove a datastore from a session.">astman_datastore_remove</a>(struct <a class="code" href="structmansession.html">mansession</a> *s, struct <a class="code" href="structast__datastore.html" title="Structure for a data store object.">ast_datastore</a> *datastore);
<a name="l00235"></a>00235 <span class="comment"></span>
<a name="l00236"></a>00236 <span class="comment">/*! </span>
<a name="l00237"></a>00237 <span class="comment"> * \brief Find a datastore on a session</span>
<a name="l00238"></a>00238 <span class="comment"> *</span>
<a name="l00239"></a>00239 <span class="comment"> * \retval pointer to the datastore if found</span>
<a name="l00240"></a>00240 <span class="comment"> * \retval NULL if not found</span>
<a name="l00241"></a>00241 <span class="comment"> * \since 1.6.1</span>
<a name="l00242"></a>00242 <span class="comment"> */</span>
<a name="l00243"></a>00243 struct <a class="code" href="structast__datastore.html" title="Structure for a data store object.">ast_datastore</a> *<a class="code" href="manager_8h.html#a1a24728a1340746b7d1e914f0bc6bc78" title="Find a datastore on a session.">astman_datastore_find</a>(struct <a class="code" href="structmansession.html">mansession</a> *s, const struct <a class="code" href="structast__datastore__info.html" title="Structure for a data store type.">ast_datastore_info</a> *info, const <span class="keywordtype">char</span> *uid);
<a name="l00244"></a>00244 
<a name="l00245"></a>00245 <span class="preprocessor">#endif </span><span class="comment">/* _ASTERISK_MANAGER_H */</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:18:43 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
