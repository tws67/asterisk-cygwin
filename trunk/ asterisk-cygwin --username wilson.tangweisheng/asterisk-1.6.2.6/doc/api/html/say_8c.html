<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:23:23 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_afe38fc0ccf2e9eefca5d5c6b03503d9.html">main</a>
  </div>
</div>
<div class="contents">
<h1>say.c File Reference</h1>
<p>Say numbers and dates (maybe words one day too).  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="asterisk_8h_source.html">asterisk.h</a>&quot;</code><br/>
<code>#include &lt;netinet/in.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="time_8h_source.html">time.h</a>&gt;</code><br/>
<code>#include &lt;ctype.h&gt;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="file_8h_source.html">asterisk/file.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="say_8h_source.html">asterisk/say.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="localtime_8h_source.html">asterisk/localtime.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="app_8h_source.html">asterisk/app.h</a>&quot;</code><br/>

<p><a href="say_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structodmiana.html">odmiana</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a0b99cf67059d2eb20698b97e9d497f7c">IL_DATE_STR</a>&nbsp;&nbsp;&nbsp;&quot;AdBY&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a4090a3c05b11cb894e84742a16f74338">IL_DATE_STR_FULL</a>&nbsp;&nbsp;&nbsp;IL_DATE_STR &quot; 'digits/at' &quot; IL_TIME_STR</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a8c2f5a4fc79b2bd58e638be817baa9d8">IL_TIME_STR</a>&nbsp;&nbsp;&nbsp;&quot;HM&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a7a03a2adba7f5a40aaa36b4244ba458b">SAY_NUM_BUF_SIZE</a>&nbsp;&nbsp;&nbsp;256</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a424142749552772ec268fa9e433f0ba7">__say_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a74275337fb907d90a515b2908b219b0c">ast_say_counted_adjective</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char adjective[], const char gender[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ade8c296ab3c5662d167ef72ba01cafde">ast_say_counted_noun</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char noun[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a6e8374e9a7b5c82447477a3b5a442b80">ast_say_date_da</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a6e866250f44614aabf009459a675f5cd">ast_say_date_de</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a069a18b405b4f17b0b694f9fe2cb7141">ast_say_date_en</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a6ad066de3ff3dc730b43981ddd7be59d">ast_say_date_fr</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a60123b2a06ece77ffbf3ed22592626f1">ast_say_date_gr</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ad52e7050e59c13cd34f4763c298fbf6c">ast_say_date_he</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#abcdaae528aa25fbad39f0989a124d839">ast_say_date_hu</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#afdcccc4ef35819f2ee23e8335c7865fd">ast_say_date_ka</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a822dba1d36a7a0a9e2fa14c592e54987">ast_say_date_nl</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a63f449411fb6ca36bb528da40e411f5a">ast_say_date_pt</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#adbf3d46f5d912ff259174e80b3edad57">ast_say_date_th</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a857ff68a92ef5766188e533b3cc51f99">ast_say_date_with_format_da</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a9197bf1dc303f38a93b46eec6c30375d">ast_say_date_with_format_de</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a100824ee16949d59a2d401d5ef36a4e8">ast_say_date_with_format_es</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a08d7b66004fdb5bbd2f3dcce332a20e9">ast_say_date_with_format_fr</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#aad88a3dda8e3e4e1c49eaa4d675577fb">ast_say_date_with_format_gr</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ab05d072f242f91f3504cf17f1f0b877b">ast_say_date_with_format_he</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#aa96c082ebfc847b6df805efa37b6063d">ast_say_date_with_format_it</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a26c460c2765ec1c9b84e98f29833bb2c">ast_say_date_with_format_nl</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a0181ffcc431bd141412a0057d13f28b7">ast_say_date_with_format_pl</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#aee531482d70b9bc3de78394b28c20d18">ast_say_date_with_format_pt</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a756da2d5b06a162994055452f6c36f15">ast_say_date_with_format_th</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#acdffaf2715cd5ed1365c81d0a637a879">ast_say_date_with_format_zh</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ad2b3493567e92893e2c49982a62bb133">ast_say_datetime_de</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a903a842c47304dcebf1029fdf9c391e6">ast_say_datetime_en</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ab8696b88027ae3520d11a1dcc13245b9">ast_say_datetime_fr</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#adea77ee3cd971d260a61f8354c438a38">ast_say_datetime_from_now_en</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#aa64343f4ca63fbbb8db4fe04c63aa9e7">ast_say_datetime_from_now_fr</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a48c6e490794bdfc3fc7a7c7118ec652b">ast_say_datetime_from_now_he</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a2fc8cdab06987ce2abbcd535365121b5">ast_say_datetime_from_now_ka</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a2e50b0f8e92cfa56a1eda5967fd3f99f">ast_say_datetime_from_now_pt</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a78a476fede4f60e45b0656ff85424981">ast_say_datetime_gr</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a85945136cf41f790db09a29850dedd25">ast_say_datetime_he</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#aaee931489d2eb92e130cda3ace16505f">ast_say_datetime_hu</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a3539aa9a04f8013a3b388a4540ab476a">ast_say_datetime_ka</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a26cb7541c29e2f861ab8832cd576e58c">ast_say_datetime_nl</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a30ce2ebb46bb411cfb4cfe721d75f850">ast_say_datetime_pt</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a25e7724f153b68b5414a967cc53c9d1d">ast_say_datetime_pt_BR</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#af059b7c3e29c8b085b01b656eccc30a5">ast_say_datetime_th</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ad8f59361f5238c163bcfe2f89b952ca7">ast_say_datetime_zh</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ae60d6664e3b02ccf86e95df90039ea82">ast_say_enumeration_full_da</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_enumeration_full_da: Danish syntax  <a href="#ae60d6664e3b02ccf86e95df90039ea82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#af62cf96bd4eede73a25a8734f7cb1ee1">ast_say_enumeration_full_de</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_enumeration_full_de: German syntax  <a href="#af62cf96bd4eede73a25a8734f7cb1ee1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a0e5c6401d55a76947f9dbf5a425a077d">ast_say_enumeration_full_en</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_enumeration_full_en: English syntax  <a href="#a0e5c6401d55a76947f9dbf5a425a077d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a4fea2317fdf960edf9351980cf60cc8f">ast_say_enumeration_full_he</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a49f831d39c9d7571cbbb30c4c5e11ee0">ast_say_number_full_cs</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_cs: Czech syntax  <a href="#a49f831d39c9d7571cbbb30c4c5e11ee0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ad0ff1295c4031b4385391a40ce5d4d85">ast_say_number_full_da</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_da: Danish syntax  <a href="#ad0ff1295c4031b4385391a40ce5d4d85"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a5ab1deb33c81966bd9269f860881f6df">ast_say_number_full_de</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_de: German syntax  <a href="#a5ab1deb33c81966bd9269f860881f6df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ad44c88ef3d874e42ed56b7bcdf57cb85">ast_say_number_full_en</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_en: English syntax  <a href="#ad44c88ef3d874e42ed56b7bcdf57cb85"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a904d8ce61420f03ce0f20e525dcf7040">ast_say_number_full_en_GB</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_en_GB: British and Norwegian syntax  <a href="#a904d8ce61420f03ce0f20e525dcf7040"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a7e1aac3120524368ac2bb9a72da190fc">ast_say_number_full_es</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_es: Spanish syntax  <a href="#a7e1aac3120524368ac2bb9a72da190fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#aa525a58f2cd9090afe8adb150b14ef2f">ast_say_number_full_fr</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_fr: French syntax  <a href="#aa525a58f2cd9090afe8adb150b14ef2f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ac16b9b35bdddf06b7fe0c347120adf37">ast_say_number_full_gr</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, int audiofd, int ctrlfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a9a8df90a122f5b736f0a359c03804f5e">ast_say_number_full_hu</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_hu: Hungarian syntax  <a href="#a9a8df90a122f5b736f0a359c03804f5e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a2230fadaf90551bdbbc5f33cfdba1d8c">ast_say_number_full_it</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_it: Italian  <a href="#a2230fadaf90551bdbbc5f33cfdba1d8c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a86cb2d32ea9a4d78b8534aa4ce3410f2">ast_say_number_full_ka</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_ka: Georgian syntax  <a href="#a86cb2d32ea9a4d78b8534aa4ce3410f2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a47ca4077ef4937c00d24c4f4ea47a809">ast_say_number_full_nl</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_nl: dutch syntax  <a href="#a47ca4077ef4937c00d24c4f4ea47a809"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a9b2edaefe9c8e5a03a16d1809c56c5f7">ast_say_number_full_no</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_no: Norwegian syntax  <a href="#a9b2edaefe9c8e5a03a16d1809c56c5f7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ae60374c49cb7d12e43fa96fc9153d814">ast_say_number_full_pl</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a31997e60e00663fb65c4c875303f63e4">ast_say_number_full_pt</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a5318e736eefec1203eea76e14e3bda08">ast_say_number_full_ru</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_ru: Russian syntax  <a href="#a5318e736eefec1203eea76e14e3bda08"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#acdcc3b9113521b1537d27b7a7b2dd3e5">ast_say_number_full_se</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_se: Swedish syntax  <a href="#acdcc3b9113521b1537d27b7a7b2dd3e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ab741ec8f1012e4aff2a7e4bd8df2efb3">ast_say_number_full_th</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, int audiofd, int ctrlfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#aad53034af1449eeffe92422447968224">ast_say_number_full_zh</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full_zh: Taiwanese / Chinese syntax  <a href="#aad53034af1449eeffe92422447968224"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a2f96f38cfd786e2037474bf885499713">ast_say_time_de</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#aa6e079dc99911282bcfca18b87dbe18e">ast_say_time_en</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#abaf1d38a580a6676b6c369b273bb110a">ast_say_time_fr</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a9df5ed9ed2f58cd4b0f26c3bb506409d">ast_say_time_gr</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a4fa30770543cf1238ad95aeb855778aa">ast_say_time_he</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a9ffe4a620c3103ccc73cf12395c3bc85">ast_say_time_hu</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ad961c5f8bcfad964dc48985bc21fa164">ast_say_time_ka</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a86fd5f2bc784f22fb979fa27a23d39bf">ast_say_time_nl</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ad35c6b6c9c03292fc3c2662c231d27d6">ast_say_time_pt</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ae7eeb1cfa8f6ae609d70b6a54ab70011">ast_say_time_pt_BR</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a2719111a35bea21d5a87f46c6c84ed63">ast_say_time_th</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ab8c68a104324a10f6e65daf995e7bbdc">ast_say_time_zh</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a> (int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, char *res, int res_len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a5d5b152e52948f96a43da4a15a6cc893">counted_adjective_ending_ru</a> (int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char gender[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a78aa7c1262499db13104f5c0e2443e03">counted_noun_ending_en</a> (int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a7bf341399850ee7e80584cacb05033e5">counted_noun_ending_slavic</a> (int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a1f44a56c8bcc760fc4f0ebc95ad03a66">exp10_int</a> (int power)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a2d19a0df8b737872d1032d9c58f8d35f">get_lastdigits_ru</a> (int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">determine last digits for thousands/millions (ru)  <a href="#a2d19a0df8b737872d1032d9c58f8d35f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a1ac32f4ca37eaea55e69c5189617da16">gr_say_number_female</a> (int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ada19aba234cf58e125365b608e4f6555">next_item</a> (const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#aba72db3a0a460c4d2707f1b37661a72f">pl_append</a> (char *buffer, char *<a class="el" href="evt_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ad7bca11f9e43421cf5b5a04da4cb60a5">pl_odtworz_plik</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, int audiofd, int ctrlfd, const char *ints, char *fn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a618360d137cd7b34c454e13fe827f2ca">pl_rzad_na_tekst</a> (<a class="el" href="structodmiana.html">odmiana</a> *odm, int i, int rzad)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ae7cfe5af00e53525309cb121d9b2f607">powiedz</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, int audiofd, int ctrlfd, const char *ints, <a class="el" href="structodmiana.html">odmiana</a> *odm, int rzad, int i)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a28a689ee86ec09fa0858691834d9383c">say_character_str_full</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, const char *<a class="el" href="evt_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, const char *ints, const char *lang, int audiofd, int ctrlfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ae1701ebeea69d48d0e1e1de3759a4c12">say_date</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a392867bc0764adafb721835663dbec4a">say_date_with_format</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang, const char *<a class="el" href="chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const char *tzone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ac420adeb9078de529048f5770187c3d1">say_datetime</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a24f03c61981a21ba6ea1d19de28c75da">say_datetime_from_now</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a315074228d9a507cf937510e06d6d356">say_digit_str_full</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, const char *<a class="el" href="evt_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, const char *ints, const char *lang, int audiofd, int ctrlfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#af2a892d8550c4e6333d5e305f7689ec6">say_enumeration_full</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_enumeration_full: call language-specific functions  <a href="#af2a892d8550c4e6333d5e305f7689ec6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#ae3cb498050c17bd7d8c6d2a516dccafe">say_number_full</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, int <a class="el" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, const char *ints, const char *<a class="el" href="chan__phone_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, const char *options, int audiofd, int ctrlfd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ast_say_number_full: call language-specific functions  <a href="#ae3cb498050c17bd7d8c6d2a516dccafe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a359f06f26a33e5cde0df7f979b14078a">say_phonetic_str_full</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, const char *<a class="el" href="evt_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, const char *ints, const char *lang, int audiofd, int ctrlfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a2679ac199e3858d447f6b0dc998e7263">say_time</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, time_t t, const char *ints, const char *lang)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#a322af389d034b8f1282da0a853ffb921">chan</a>, const char *ints, const char *file, const char *lang)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Say numbers and dates (maybe words one day too). </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Mark Spencer &lt;<a href="mailto:markster@digium.com">markster@digium.com</a>&gt;</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>12-16-2004 : Support for Greek added by InAccess Networks (work funded by HOL, www.hol.gr) George Konstantoulakis &lt;<a href="mailto:gkon@inaccessnetworks.com">gkon@inaccessnetworks.com</a>&gt;</dd>
<dd>
2007-02-08 : Support for Georgian added by Alexander Shaduri &lt;<a href="mailto:ashaduri@gmail.com">ashaduri@gmail.com</a>&gt;, Next Generation Networks (NGN). </dd>
<dd>
2007-03-20 : Support for Thai added by Dome C. &lt;<a href="mailto:dome@tel.co.th">dome@tel.co.th</a>&gt;, IP Crossing Co., Ltd. </dd></dl>

<p>Definition in file <a class="el" href="say_8c_source.html">say.c</a>.</p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a0b99cf67059d2eb20698b97e9d497f7c"></a><!-- doxytag: member="say.c::IL_DATE_STR" ref="a0b99cf67059d2eb20698b97e9d497f7c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IL_DATE_STR&nbsp;&nbsp;&nbsp;&quot;AdBY&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>ast_say_date_with_format_he Say formatted date in Hebrew</p>
<p><a class="el" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a> for the details of the options</p>
<p>Changes from the English version:</p>
<p>* don't replicate in here the logic of ast_say_number_full_he</p>
<p>* year is always 4-digit (because it's simpler)</p>
<p>* added c, x, and X. Mainly for my tests</p>
<p>* The standard "long" format used in Hebrew is AdBY, rather than ABdY</p>
<p>TODO: * A "ha" is missing in the standard date format, before the 'd'. * The numbers of 3000--19000 are not handled well </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l04319">4319</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l04322">ast_say_date_with_format_he()</a>.</p>

</div>
</div>
<a class="anchor" id="a4090a3c05b11cb894e84742a16f74338"></a><!-- doxytag: member="say.c::IL_DATE_STR_FULL" ref="a4090a3c05b11cb894e84742a16f74338" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IL_DATE_STR_FULL&nbsp;&nbsp;&nbsp;IL_DATE_STR &quot; 'digits/at' &quot; IL_TIME_STR</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l04321">4321</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l04322">ast_say_date_with_format_he()</a>.</p>

</div>
</div>
<a class="anchor" id="a8c2f5a4fc79b2bd58e638be817baa9d8"></a><!-- doxytag: member="say.c::IL_TIME_STR" ref="a8c2f5a4fc79b2bd58e638be817baa9d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IL_TIME_STR&nbsp;&nbsp;&nbsp;&quot;HM&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l04320">4320</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l04322">ast_say_date_with_format_he()</a>.</p>

</div>
</div>
<a class="anchor" id="a7a03a2adba7f5a40aaa36b4244ba458b"></a><!-- doxytag: member="say.c::SAY_NUM_BUF_SIZE" ref="a7a03a2adba7f5a40aaa36b4244ba458b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAY_NUM_BUF_SIZE&nbsp;&nbsp;&nbsp;256</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l01216">1216</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l01217">ast_say_number_full_he()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a424142749552772ec268fa9e433f0ba7"></a><!-- doxytag: member="say.c::__say_init" ref="a424142749552772ec268fa9e433f0ba7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __say_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07937">7937</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="say_8h.html#ade1ca4dd1fef967c239d62fad0795332">ast_say_character_str_full</a>, <a class="el" href="say_8h.html#a521f1068d36ad21d7c67d28287d18aad">ast_say_date</a>, <a class="el" href="say_8h.html#aeb81fb9f912659f3e8de0d7d931eb372">ast_say_date_with_format</a>, <a class="el" href="say_8h.html#ab193ffdcb257340fa6ac29f90847fb0e">ast_say_datetime</a>, <a class="el" href="say_8h.html#a12cad12f2f7976bd156a5a1f469727db">ast_say_datetime_from_now</a>, <a class="el" href="say_8h.html#a921b263824a296812f264716e68ab129">ast_say_digit_str_full</a>, <a class="el" href="say_8h.html#a68b1108079b31db9dbac0a14f94c7a2c">ast_say_enumeration_full</a>, <a class="el" href="say_8h.html#af2f2a53bc36d82082a80daebac5d9d0f">ast_say_number_full</a>, <a class="el" href="say_8h.html#ae361dc17d977422a2fffcb661f8a9a09">ast_say_phonetic_str_full</a>, <a class="el" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>, <a class="el" href="say_8c_source.html#l00059">say_character_str_full()</a>, <a class="el" href="say_8c_source.html#l03082">say_date()</a>, <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>, <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>, <a class="el" href="say_8c_source.html#l06837">say_datetime_from_now()</a>, <a class="el" href="say_8c_source.html#l00221">say_digit_str_full()</a>, <a class="el" href="say_8c_source.html#l02553">say_enumeration_full()</a>, <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>, <a class="el" href="say_8c_source.html#l00141">say_phonetic_str_full()</a>, and <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07938"></a>07938 {
<a name="l07939"></a>07939    <a class="code" href="say_8h.html#af2f2a53bc36d82082a80daebac5d9d0f">ast_say_number_full</a> = <a class="code" href="say_8c.html#ae3cb498050c17bd7d8c6d2a516dccafe" title="ast_say_number_full: call language-specific functions">say_number_full</a>;
<a name="l07940"></a>07940    <a class="code" href="say_8h.html#a68b1108079b31db9dbac0a14f94c7a2c">ast_say_enumeration_full</a> = <a class="code" href="say_8c.html#af2a892d8550c4e6333d5e305f7689ec6" title="ast_say_enumeration_full: call language-specific functions">say_enumeration_full</a>;
<a name="l07941"></a>07941    <a class="code" href="say_8h.html#a921b263824a296812f264716e68ab129">ast_say_digit_str_full</a> = <a class="code" href="say_8c.html#a315074228d9a507cf937510e06d6d356">say_digit_str_full</a>;
<a name="l07942"></a>07942    <a class="code" href="say_8h.html#ade1ca4dd1fef967c239d62fad0795332">ast_say_character_str_full</a> = <a class="code" href="say_8c.html#a28a689ee86ec09fa0858691834d9383c">say_character_str_full</a>;
<a name="l07943"></a>07943    <a class="code" href="say_8h.html#ae361dc17d977422a2fffcb661f8a9a09">ast_say_phonetic_str_full</a> = <a class="code" href="say_8c.html#a359f06f26a33e5cde0df7f979b14078a">say_phonetic_str_full</a>;
<a name="l07944"></a>07944    <a class="code" href="say_8h.html#ab193ffdcb257340fa6ac29f90847fb0e">ast_say_datetime</a> = <a class="code" href="say_8c.html#ac420adeb9078de529048f5770187c3d1">say_datetime</a>;
<a name="l07945"></a>07945    <a class="code" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a> = <a class="code" href="say_8c.html#a2679ac199e3858d447f6b0dc998e7263">say_time</a>;
<a name="l07946"></a>07946    <a class="code" href="say_8h.html#a521f1068d36ad21d7c67d28287d18aad">ast_say_date</a> = <a class="code" href="say_8c.html#ae1701ebeea69d48d0e1e1de3759a4c12">say_date</a>;
<a name="l07947"></a>07947    <a class="code" href="say_8h.html#a12cad12f2f7976bd156a5a1f469727db">ast_say_datetime_from_now</a> = <a class="code" href="say_8c.html#a24f03c61981a21ba6ea1d19de28c75da">say_datetime_from_now</a>;
<a name="l07948"></a>07948    <a class="code" href="say_8h.html#aeb81fb9f912659f3e8de0d7d931eb372">ast_say_date_with_format</a> = <a class="code" href="say_8c.html#a392867bc0764adafb721835663dbec4a">say_date_with_format</a>;
<a name="l07949"></a>07949 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a74275337fb907d90a515b2908b219b0c"></a><!-- doxytag: member="say.c::ast_say_counted_adjective" ref="a74275337fb907d90a515b2908b219b0c" args="(struct ast_channel *chan, int num, const char adjective[], const char gender[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_counted_adjective </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>adjective</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>gender</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07913">7913</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="app_8c_source.html#l00634">ast_play_and_wait()</a>, and <a class="el" href="say_8c_source.html#l07897">counted_adjective_ending_ru()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07914"></a>07914 {
<a name="l07915"></a>07915    <span class="keywordtype">char</span> *temp;
<a name="l07916"></a>07916    <span class="keywordtype">int</span> temp_len;
<a name="l07917"></a>07917    <span class="keyword">const</span> <span class="keywordtype">char</span> *ending;
<a name="l07918"></a>07918    <span class="keywordflow">if</span> (!strncasecmp(chan-&gt;language, <span class="stringliteral">&quot;ru&quot;</span>, 2)) {           <span class="comment">/* Russian */</span>
<a name="l07919"></a>07919       ending = <a class="code" href="say_8c.html#a5d5b152e52948f96a43da4a15a6cc893">counted_adjective_ending_ru</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, gender);
<a name="l07920"></a>07920    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(chan-&gt;language, <span class="stringliteral">&quot;ua&quot;</span>, 2)) {    <span class="comment">/* Ukrainian */</span>
<a name="l07921"></a>07921       ending = <a class="code" href="say_8c.html#a5d5b152e52948f96a43da4a15a6cc893">counted_adjective_ending_ru</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, gender);
<a name="l07922"></a>07922    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(chan-&gt;language, <span class="stringliteral">&quot;pl&quot;</span>, 2)) {    <span class="comment">/* Polish */</span>
<a name="l07923"></a>07923       ending = <a class="code" href="say_8c.html#a5d5b152e52948f96a43da4a15a6cc893">counted_adjective_ending_ru</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, gender);
<a name="l07924"></a>07924    } <span class="keywordflow">else</span> {                                               <span class="comment">/* English and default */</span>
<a name="l07925"></a>07925       ending = <span class="stringliteral">&quot;&quot;</span>;
<a name="l07926"></a>07926    }
<a name="l07927"></a>07927    temp = alloca((temp_len = (strlen(adjective) + strlen(ending) + 1)));
<a name="l07928"></a>07928    snprintf(temp, temp_len, <span class="stringliteral">&quot;%s%s&quot;</span>, adjective, ending);
<a name="l07929"></a>07929    <span class="keywordflow">return</span> <a class="code" href="app_8h.html#abbbec6ab9a303e865a1d1a261152540d" title="Play a stream and wait for a digit, returning the digit that was pressed.">ast_play_and_wait</a>(chan, temp);
<a name="l07930"></a>07930 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ade8c296ab3c5662d167ef72ba01cafde"></a><!-- doxytag: member="say.c::ast_say_counted_noun" ref="ade8c296ab3c5662d167ef72ba01cafde" args="(struct ast_channel *chan, int num, const char noun[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_counted_noun </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>noun</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07871">7871</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="app_8c_source.html#l00634">ast_play_and_wait()</a>, <a class="el" href="say_8c_source.html#l07834">counted_noun_ending_en()</a>, and <a class="el" href="say_8c_source.html#l07852">counted_noun_ending_slavic()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07872"></a>07872 {
<a name="l07873"></a>07873    <span class="keywordtype">char</span> *temp;
<a name="l07874"></a>07874    <span class="keywordtype">int</span> temp_len;
<a name="l07875"></a>07875    <span class="keyword">const</span> <span class="keywordtype">char</span> *ending;
<a name="l07876"></a>07876    <span class="keywordflow">if</span> (!strncasecmp(chan-&gt;language, <span class="stringliteral">&quot;ru&quot;</span>, 2)) {        <span class="comment">/* Russian */</span>
<a name="l07877"></a>07877       ending = <a class="code" href="say_8c.html#a7bf341399850ee7e80584cacb05033e5">counted_noun_ending_slavic</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l07878"></a>07878    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(chan-&gt;language, <span class="stringliteral">&quot;ua&quot;</span>, 2)) { <span class="comment">/* Ukrainian */</span>
<a name="l07879"></a>07879       ending = <a class="code" href="say_8c.html#a7bf341399850ee7e80584cacb05033e5">counted_noun_ending_slavic</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l07880"></a>07880    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(chan-&gt;language, <span class="stringliteral">&quot;pl&quot;</span>, 2)) { <span class="comment">/* Polish */</span>
<a name="l07881"></a>07881       ending = <a class="code" href="say_8c.html#a7bf341399850ee7e80584cacb05033e5">counted_noun_ending_slavic</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l07882"></a>07882    } <span class="keywordflow">else</span> {                                            <span class="comment">/* English and default */</span>
<a name="l07883"></a>07883       ending = <a class="code" href="say_8c.html#a78aa7c1262499db13104f5c0e2443e03">counted_noun_ending_en</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l07884"></a>07884    }
<a name="l07885"></a>07885    temp = alloca((temp_len = (strlen(noun) + strlen(ending) + 1)));
<a name="l07886"></a>07886    snprintf(temp, temp_len, <span class="stringliteral">&quot;%s%s&quot;</span>, noun, ending);
<a name="l07887"></a>07887    <span class="keywordflow">return</span> <a class="code" href="app_8h.html#abbbec6ab9a303e865a1d1a261152540d" title="Play a stream and wait for a digit, returning the digit that was pressed.">ast_play_and_wait</a>(chan, temp);
<a name="l07888"></a>07888 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6e8374e9a7b5c82447477a3b5a442b80"></a><!-- doxytag: member="say.c::ast_say_date_da" ref="a6e8374e9a7b5c82447477a3b5a442b80" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_da </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03148">3148</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05821">ast_say_enumeration()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03082">say_date()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03149"></a>03149 {
<a name="l03150"></a>03150    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l03151"></a>03151    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l03152"></a>03152    <span class="keywordtype">char</span> fn[256];
<a name="l03153"></a>03153    <span class="keywordtype">int</span> res = 0;
<a name="l03154"></a>03154    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l03155"></a>03155    <span class="keywordflow">if</span> (!res) {
<a name="l03156"></a>03156       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l03157"></a>03157       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03158"></a>03158       <span class="keywordflow">if</span> (!res)
<a name="l03159"></a>03159          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03160"></a>03160    }
<a name="l03161"></a>03161    <span class="keywordflow">if</span> (!res)
<a name="l03162"></a>03162       res = <a class="code" href="say_8h.html#ab309c99a25580d4f8964756d2ec1f279" title="says an enumeration">ast_say_enumeration</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l03163"></a>03163    <span class="keywordflow">if</span> (!res)
<a name="l03164"></a>03164       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03165"></a>03165    <span class="keywordflow">if</span> (!res) {
<a name="l03166"></a>03166       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l03167"></a>03167       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03168"></a>03168       <span class="keywordflow">if</span> (!res)
<a name="l03169"></a>03169          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03170"></a>03170    }
<a name="l03171"></a>03171    <span class="keywordflow">if</span> (!res) {
<a name="l03172"></a>03172       <span class="comment">/* Year */</span>
<a name="l03173"></a>03173       <span class="keywordtype">int</span> year = tm.tm_year + 1900;
<a name="l03174"></a>03174       <span class="keywordflow">if</span> (year &gt; 1999) {   <span class="comment">/* year 2000 and later */</span>
<a name="l03175"></a>03175          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, year, ints, lang, (<span class="keywordtype">char</span> *) NULL);   
<a name="l03176"></a>03176       } <span class="keywordflow">else</span> {
<a name="l03177"></a>03177          <span class="keywordflow">if</span> (year &lt; 1100) {
<a name="l03178"></a>03178             <span class="comment">/* I&apos;m not going to handle 1100 and prior */</span>
<a name="l03179"></a>03179             <span class="comment">/* We&apos;ll just be silent on the year, instead of bombing out. */</span>
<a name="l03180"></a>03180          } <span class="keywordflow">else</span> {
<a name="l03181"></a>03181              <span class="comment">/* year 1100 to 1999. will anybody need this?!? */</span>
<a name="l03182"></a>03182             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (year / 100));
<a name="l03183"></a>03183             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, fn, lang);
<a name="l03184"></a>03184             <span class="keywordflow">if</span> (!res) {
<a name="l03185"></a>03185                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/hundred&quot;</span>, lang);
<a name="l03186"></a>03186                <span class="keywordflow">if</span> (!res &amp;&amp; year % 100 != 0) {
<a name="l03187"></a>03187                   res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, (year % 100), ints, lang, (<span class="keywordtype">char</span> *) NULL); 
<a name="l03188"></a>03188                }
<a name="l03189"></a>03189             }
<a name="l03190"></a>03190          }
<a name="l03191"></a>03191       }
<a name="l03192"></a>03192    }
<a name="l03193"></a>03193    <span class="keywordflow">return</span> res;
<a name="l03194"></a>03194 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6e866250f44614aabf009459a675f5cd"></a><!-- doxytag: member="say.c::ast_say_date_de" ref="a6e866250f44614aabf009459a675f5cd" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_de </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03197">3197</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05821">ast_say_enumeration()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03082">say_date()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03198"></a>03198 {
<a name="l03199"></a>03199    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l03200"></a>03200    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l03201"></a>03201    <span class="keywordtype">char</span> fn[256];
<a name="l03202"></a>03202    <span class="keywordtype">int</span> res = 0;
<a name="l03203"></a>03203    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l03204"></a>03204    <span class="keywordflow">if</span> (!res) {
<a name="l03205"></a>03205       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l03206"></a>03206       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03207"></a>03207       <span class="keywordflow">if</span> (!res)
<a name="l03208"></a>03208          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03209"></a>03209    }
<a name="l03210"></a>03210    <span class="keywordflow">if</span> (!res)
<a name="l03211"></a>03211       res = <a class="code" href="say_8h.html#ab309c99a25580d4f8964756d2ec1f279" title="says an enumeration">ast_say_enumeration</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l03212"></a>03212    <span class="keywordflow">if</span> (!res)
<a name="l03213"></a>03213       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03214"></a>03214    <span class="keywordflow">if</span> (!res) {
<a name="l03215"></a>03215       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l03216"></a>03216       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03217"></a>03217       <span class="keywordflow">if</span> (!res)
<a name="l03218"></a>03218          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03219"></a>03219    }
<a name="l03220"></a>03220    <span class="keywordflow">if</span> (!res) {
<a name="l03221"></a>03221       <span class="comment">/* Year */</span>
<a name="l03222"></a>03222       <span class="keywordtype">int</span> year = tm.tm_year + 1900;
<a name="l03223"></a>03223       <span class="keywordflow">if</span> (year &gt; 1999) {   <span class="comment">/* year 2000 and later */</span>
<a name="l03224"></a>03224          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, year, ints, lang, (<span class="keywordtype">char</span> *) NULL);   
<a name="l03225"></a>03225       } <span class="keywordflow">else</span> {
<a name="l03226"></a>03226          <span class="keywordflow">if</span> (year &lt; 1100) {
<a name="l03227"></a>03227             <span class="comment">/* I&apos;m not going to handle 1100 and prior */</span>
<a name="l03228"></a>03228             <span class="comment">/* We&apos;ll just be silent on the year, instead of bombing out. */</span>
<a name="l03229"></a>03229          } <span class="keywordflow">else</span> {
<a name="l03230"></a>03230              <span class="comment">/* year 1100 to 1999. will anybody need this?!? */</span>
<a name="l03231"></a>03231              <span class="comment">/* say 1967 as &apos;neunzehn hundert sieben und sechzig&apos; */</span>
<a name="l03232"></a>03232             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (year / 100) );
<a name="l03233"></a>03233             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, fn, lang);
<a name="l03234"></a>03234             <span class="keywordflow">if</span> (!res) {
<a name="l03235"></a>03235                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/hundred&quot;</span>, lang);
<a name="l03236"></a>03236                <span class="keywordflow">if</span> (!res &amp;&amp; year % 100 != 0) {
<a name="l03237"></a>03237                   res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, (year % 100), ints, lang, (<span class="keywordtype">char</span> *) NULL); 
<a name="l03238"></a>03238                }
<a name="l03239"></a>03239             }
<a name="l03240"></a>03240          }
<a name="l03241"></a>03241       }
<a name="l03242"></a>03242    }
<a name="l03243"></a>03243    <span class="keywordflow">return</span> res;
<a name="l03244"></a>03244 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a069a18b405b4f17b0b694f9fe2cb7141"></a><!-- doxytag: member="say.c::ast_say_date_en" ref="a069a18b405b4f17b0b694f9fe2cb7141" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_en </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03119">3119</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03082">say_date()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03120"></a>03120 {
<a name="l03121"></a>03121    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l03122"></a>03122    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l03123"></a>03123    <span class="keywordtype">char</span> fn[256];
<a name="l03124"></a>03124    <span class="keywordtype">int</span> res = 0;
<a name="l03125"></a>03125    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l03126"></a>03126    <span class="keywordflow">if</span> (!res) {
<a name="l03127"></a>03127       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l03128"></a>03128       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03129"></a>03129       <span class="keywordflow">if</span> (!res)
<a name="l03130"></a>03130          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03131"></a>03131    }
<a name="l03132"></a>03132    <span class="keywordflow">if</span> (!res) {
<a name="l03133"></a>03133       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l03134"></a>03134       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03135"></a>03135       <span class="keywordflow">if</span> (!res)
<a name="l03136"></a>03136          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03137"></a>03137    }
<a name="l03138"></a>03138    <span class="keywordflow">if</span> (!res)
<a name="l03139"></a>03139       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l03140"></a>03140    <span class="keywordflow">if</span> (!res)
<a name="l03141"></a>03141       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03142"></a>03142    <span class="keywordflow">if</span> (!res)
<a name="l03143"></a>03143       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03144"></a>03144    <span class="keywordflow">return</span> res;
<a name="l03145"></a>03145 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6ad066de3ff3dc730b43981ddd7be59d"></a><!-- doxytag: member="say.c::ast_say_date_fr" ref="a6ad066de3ff3dc730b43981ddd7be59d" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_fr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03279">3279</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03082">say_date()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03280"></a>03280 {
<a name="l03281"></a>03281    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l03282"></a>03282    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l03283"></a>03283    <span class="keywordtype">char</span> fn[256];
<a name="l03284"></a>03284    <span class="keywordtype">int</span> res = 0;
<a name="l03285"></a>03285    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l03286"></a>03286    <span class="keywordflow">if</span> (!res) {
<a name="l03287"></a>03287       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l03288"></a>03288       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03289"></a>03289       <span class="keywordflow">if</span> (!res)
<a name="l03290"></a>03290          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03291"></a>03291    }
<a name="l03292"></a>03292    <span class="keywordflow">if</span> (!res)
<a name="l03293"></a>03293       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l03294"></a>03294    <span class="keywordflow">if</span> (!res)
<a name="l03295"></a>03295       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03296"></a>03296    <span class="keywordflow">if</span> (!res) {
<a name="l03297"></a>03297       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l03298"></a>03298       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03299"></a>03299       <span class="keywordflow">if</span> (!res)
<a name="l03300"></a>03300          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03301"></a>03301    }
<a name="l03302"></a>03302    <span class="keywordflow">if</span> (!res)
<a name="l03303"></a>03303       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03304"></a>03304    <span class="keywordflow">return</span> res;
<a name="l03305"></a>03305 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a60123b2a06ece77ffbf3ed22592626f1"></a><!-- doxytag: member="say.c::ast_say_date_gr" ref="a60123b2a06ece77ffbf3ed22592626f1" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_date_gr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07159">7159</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="say_8c_source.html#l07033">gr_say_number_female()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03082">say_date()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07160"></a>07160 {
<a name="l07161"></a>07161    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l07162"></a>07162    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l07163"></a>07163    
<a name="l07164"></a>07164    <span class="keywordtype">char</span> fn[256];
<a name="l07165"></a>07165    <span class="keywordtype">int</span> res = 0;
<a name="l07166"></a>07166    
<a name="l07167"></a>07167 
<a name="l07168"></a>07168    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l07169"></a>07169    <span class="comment">/* W E E K - D A Y */</span>
<a name="l07170"></a>07170    <span class="keywordflow">if</span> (!res) {
<a name="l07171"></a>07171       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l07172"></a>07172       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l07173"></a>07173       <span class="keywordflow">if</span> (!res)
<a name="l07174"></a>07174          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07175"></a>07175    }
<a name="l07176"></a>07176    <span class="comment">/* D A Y */</span>
<a name="l07177"></a>07177    <span class="keywordflow">if</span> (!res) {
<a name="l07178"></a>07178       <a class="code" href="say_8c.html#a1ac32f4ca37eaea55e69c5189617da16">gr_say_number_female</a>(tm.tm_mday, chan, ints, lang);
<a name="l07179"></a>07179    }
<a name="l07180"></a>07180    <span class="comment">/* M O N T H */</span>
<a name="l07181"></a>07181    <span class="keywordflow">if</span> (!res) {
<a name="l07182"></a>07182       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l07183"></a>07183       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l07184"></a>07184       <span class="keywordflow">if</span> (!res)
<a name="l07185"></a>07185          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07186"></a>07186    }
<a name="l07187"></a>07187    <span class="comment">/* Y E A R */</span>
<a name="l07188"></a>07188    <span class="keywordflow">if</span> (!res)
<a name="l07189"></a>07189       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l07190"></a>07190    <span class="keywordflow">return</span> res; 
<a name="l07191"></a>07191 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad52e7050e59c13cd34f4763c298fbf6c"></a><!-- doxytag: member="say.c::ast_say_date_he" ref="ad52e7050e59c13cd34f4763c298fbf6c" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_he </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03400">3400</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03082">say_date()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03401"></a>03401 {
<a name="l03402"></a>03402    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l03403"></a>03403    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l03404"></a>03404    <span class="keywordtype">char</span> fn[256];
<a name="l03405"></a>03405    <span class="keywordtype">int</span> res = 0;
<a name="l03406"></a>03406    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l03407"></a>03407    <span class="keywordflow">if</span> (!res) {
<a name="l03408"></a>03408       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l03409"></a>03409       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03410"></a>03410       <span class="keywordflow">if</span> (!res) {
<a name="l03411"></a>03411          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03412"></a>03412       }
<a name="l03413"></a>03413    }
<a name="l03414"></a>03414    <span class="keywordflow">if</span> (!res) {
<a name="l03415"></a>03415       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l03416"></a>03416       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03417"></a>03417       <span class="keywordflow">if</span> (!res) {
<a name="l03418"></a>03418          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03419"></a>03419       }
<a name="l03420"></a>03420    }
<a name="l03421"></a>03421    <span class="keywordflow">if</span> (!res) {
<a name="l03422"></a>03422       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, <span class="stringliteral">&quot;m&quot;</span>);
<a name="l03423"></a>03423    }
<a name="l03424"></a>03424    <span class="keywordflow">if</span> (!res) {
<a name="l03425"></a>03425       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03426"></a>03426    }
<a name="l03427"></a>03427    <span class="keywordflow">if</span> (!res) {
<a name="l03428"></a>03428       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, <span class="stringliteral">&quot;m&quot;</span>);
<a name="l03429"></a>03429    }
<a name="l03430"></a>03430    <span class="keywordflow">return</span> res;
<a name="l03431"></a>03431 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abcdaae528aa25fbad39f0989a124d839"></a><!-- doxytag: member="say.c::ast_say_date_hu" ref="abcdaae528aa25fbad39f0989a124d839" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_hu </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03247">3247</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03082">say_date()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03248"></a>03248 {
<a name="l03249"></a>03249    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l03250"></a>03250    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l03251"></a>03251    <span class="keywordtype">char</span> fn[256];
<a name="l03252"></a>03252    <span class="keywordtype">int</span> res = 0;
<a name="l03253"></a>03253    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l03254"></a>03254 
<a name="l03255"></a>03255    <span class="keywordflow">if</span> (!res)
<a name="l03256"></a>03256       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03257"></a>03257    <span class="keywordflow">if</span> (!res)
<a name="l03258"></a>03258       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03259"></a>03259    <span class="keywordflow">if</span> (!res) {
<a name="l03260"></a>03260       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l03261"></a>03261       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03262"></a>03262       <span class="keywordflow">if</span> (!res)
<a name="l03263"></a>03263          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03264"></a>03264    }  
<a name="l03265"></a>03265    <span class="keywordflow">if</span> (!res)
<a name="l03266"></a>03266       <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday , ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03267"></a>03267    <span class="keywordflow">if</span> (!res)
<a name="l03268"></a>03268       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03269"></a>03269    <span class="keywordflow">if</span> (!res) {
<a name="l03270"></a>03270       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l03271"></a>03271       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03272"></a>03272       <span class="keywordflow">if</span> (!res)
<a name="l03273"></a>03273          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);      
<a name="l03274"></a>03274    }
<a name="l03275"></a>03275    <span class="keywordflow">return</span> res;
<a name="l03276"></a>03276 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afdcccc4ef35819f2ee23e8335c7865fd"></a><!-- doxytag: member="say.c::ast_say_date_ka" ref="afdcccc4ef35819f2ee23e8335c7865fd" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_date_ka </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07696">7696</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03082">say_date()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07697"></a>07697 {
<a name="l07698"></a>07698    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l07699"></a>07699    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l07700"></a>07700    <span class="keywordtype">char</span> fn[256];
<a name="l07701"></a>07701    <span class="keywordtype">int</span> res = 0;
<a name="l07702"></a>07702    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l07703"></a>07703 
<a name="l07704"></a>07704    <span class="keywordflow">if</span> (!res)
<a name="l07705"></a>07705       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l07706"></a>07706 
<a name="l07707"></a>07707    <span class="keywordflow">if</span> (!res) {
<a name="l07708"></a>07708       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/tslis %d&quot;</span>, tm.tm_wday);
<a name="l07709"></a>07709       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l07710"></a>07710       <span class="keywordflow">if</span> (!res)
<a name="l07711"></a>07711          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07712"></a>07712    }
<a name="l07713"></a>07713 
<a name="l07714"></a>07714    <span class="keywordflow">if</span> (!res) {
<a name="l07715"></a>07715       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l07716"></a>07716 <span class="comment">/*       if (!res)</span>
<a name="l07717"></a>07717 <span class="comment">         res = ast_waitstream(chan, ints);</span>
<a name="l07718"></a>07718 <span class="comment">*/</span>
<a name="l07719"></a>07719    }
<a name="l07720"></a>07720 
<a name="l07721"></a>07721    <span class="keywordflow">if</span> (!res) {
<a name="l07722"></a>07722       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l07723"></a>07723       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l07724"></a>07724       <span class="keywordflow">if</span> (!res)
<a name="l07725"></a>07725          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07726"></a>07726    }
<a name="l07727"></a>07727    <span class="keywordflow">return</span> res;
<a name="l07728"></a>07728 
<a name="l07729"></a>07729 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a822dba1d36a7a0a9e2fa14c592e54987"></a><!-- doxytag: member="say.c::ast_say_date_nl" ref="a822dba1d36a7a0a9e2fa14c592e54987" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_nl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03308">3308</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03082">say_date()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03309"></a>03309 {
<a name="l03310"></a>03310    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l03311"></a>03311    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l03312"></a>03312    <span class="keywordtype">char</span> fn[256];
<a name="l03313"></a>03313    <span class="keywordtype">int</span> res = 0;
<a name="l03314"></a>03314    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l03315"></a>03315    <span class="keywordflow">if</span> (!res) {
<a name="l03316"></a>03316       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l03317"></a>03317       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03318"></a>03318       <span class="keywordflow">if</span> (!res)
<a name="l03319"></a>03319          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03320"></a>03320    }
<a name="l03321"></a>03321    <span class="keywordflow">if</span> (!res)
<a name="l03322"></a>03322       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l03323"></a>03323    <span class="keywordflow">if</span> (!res) {
<a name="l03324"></a>03324       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l03325"></a>03325       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03326"></a>03326       <span class="keywordflow">if</span> (!res)
<a name="l03327"></a>03327          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03328"></a>03328    }
<a name="l03329"></a>03329    <span class="keywordflow">if</span> (!res)
<a name="l03330"></a>03330       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03331"></a>03331    <span class="keywordflow">if</span> (!res)
<a name="l03332"></a>03332       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03333"></a>03333    <span class="keywordflow">return</span> res;
<a name="l03334"></a>03334 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a63f449411fb6ca36bb528da40e411f5a"></a><!-- doxytag: member="say.c::ast_say_date_pt" ref="a63f449411fb6ca36bb528da40e411f5a" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_pt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03373">3373</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03082">say_date()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03374"></a>03374 {
<a name="l03375"></a>03375    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l03376"></a>03376    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l03377"></a>03377    <span class="keywordtype">char</span> fn[256];
<a name="l03378"></a>03378    <span class="keywordtype">int</span> res = 0;
<a name="l03379"></a>03379 
<a name="l03380"></a>03380    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l03381"></a>03381    snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l03382"></a>03382    <span class="keywordflow">if</span> (!res)
<a name="l03383"></a>03383       res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, fn, lang);
<a name="l03384"></a>03384    <span class="keywordflow">if</span> (!res)
<a name="l03385"></a>03385       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03386"></a>03386    <span class="keywordflow">if</span> (!res)
<a name="l03387"></a>03387       res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-de&quot;</span>, lang);
<a name="l03388"></a>03388    snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l03389"></a>03389    <span class="keywordflow">if</span> (!res)
<a name="l03390"></a>03390       res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, fn, lang);
<a name="l03391"></a>03391    <span class="keywordflow">if</span> (!res)
<a name="l03392"></a>03392       res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-de&quot;</span>, lang);
<a name="l03393"></a>03393    <span class="keywordflow">if</span> (!res)
<a name="l03394"></a>03394       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03395"></a>03395 
<a name="l03396"></a>03396    <span class="keywordflow">return</span> res;
<a name="l03397"></a>03397 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adbf3d46f5d912ff259174e80b3edad57"></a><!-- doxytag: member="say.c::ast_say_date_th" ref="adbf3d46f5d912ff259174e80b3edad57" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_th </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03337">3337</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03082">say_date()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03338"></a>03338 {
<a name="l03339"></a>03339    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l03340"></a>03340    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l03341"></a>03341    <span class="keywordtype">char</span> fn[256];
<a name="l03342"></a>03342    <span class="keywordtype">int</span> res = 0;
<a name="l03343"></a>03343    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l03344"></a>03344    <span class="keywordflow">if</span> (!res) {
<a name="l03345"></a>03345       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l03346"></a>03346       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03347"></a>03347       <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/tee&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l03348"></a>03348       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03349"></a>03349       <span class="keywordflow">if</span> (!res)
<a name="l03350"></a>03350          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03351"></a>03351    }
<a name="l03352"></a>03352    <span class="keywordflow">if</span> (!res)
<a name="l03353"></a>03353       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l03354"></a>03354    <span class="keywordflow">if</span> (!res)
<a name="l03355"></a>03355       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03356"></a>03356    <span class="keywordflow">if</span> (!res) {
<a name="l03357"></a>03357       <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/duan&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l03358"></a>03358       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03359"></a>03359       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l03360"></a>03360       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03361"></a>03361       <span class="keywordflow">if</span> (!res)
<a name="l03362"></a>03362          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03363"></a>03363    }
<a name="l03364"></a>03364    <span class="keywordflow">if</span> (!res){
<a name="l03365"></a>03365       <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/posor&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l03366"></a>03366       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l03367"></a>03367       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03368"></a>03368    }  
<a name="l03369"></a>03369    <span class="keywordflow">return</span> res;
<a name="l03370"></a>03370 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a857ff68a92ef5766188e533b3cc51f99"></a><!-- doxytag: member="say.c::ast_say_date_with_format_da" ref="a857ff68a92ef5766188e533b3cc51f99" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_with_format_da </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03727">3727</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="channel_8c_source.html#l05821">ast_say_enumeration()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="say_8c_source.html#l03720">next_item()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03728"></a>03728 {
<a name="l03729"></a>03729    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l03730"></a>03730    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l03731"></a>03731    <span class="keywordtype">int</span> res=0, offset, sndoffset;
<a name="l03732"></a>03732    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l03733"></a>03733 
<a name="l03734"></a>03734    <span class="keywordflow">if</span> (!<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>)
<a name="l03735"></a>03735       <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> = <span class="stringliteral">&quot;A dBY HMS&quot;</span>;
<a name="l03736"></a>03736 
<a name="l03737"></a>03737    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l03738"></a>03738 
<a name="l03739"></a>03739    <span class="keywordflow">for</span> (offset=0 ; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span> ; offset++) {
<a name="l03740"></a>03740       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l03741"></a>03741       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l03742"></a>03742          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l03743"></a>03743          <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l03744"></a>03744             <span class="comment">/* Literal name of a sound file */</span>
<a name="l03745"></a>03745             <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l03746"></a>03746                sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l03747"></a>03747             }
<a name="l03748"></a>03748             sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l03749"></a>03749             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, sndfile, lang);
<a name="l03750"></a>03750             <span class="keywordflow">break</span>;
<a name="l03751"></a>03751          <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l03752"></a>03752          <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l03753"></a>03753             <span class="comment">/* Sunday - Saturday */</span>
<a name="l03754"></a>03754             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l03755"></a>03755             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03756"></a>03756             <span class="keywordflow">break</span>;
<a name="l03757"></a>03757          <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l03758"></a>03758          <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l03759"></a>03759          <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l03760"></a>03760             <span class="comment">/* January - December */</span>
<a name="l03761"></a>03761             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l03762"></a>03762             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03763"></a>03763             <span class="keywordflow">break</span>;
<a name="l03764"></a>03764          <span class="keywordflow">case</span> <span class="charliteral">&apos;m&apos;</span>:
<a name="l03765"></a>03765             <span class="comment">/* Month enumerated */</span>
<a name="l03766"></a>03766             res = <a class="code" href="say_8h.html#ab309c99a25580d4f8964756d2ec1f279" title="says an enumeration">ast_say_enumeration</a>(chan, (tm.tm_mon + 1), ints, lang, <span class="stringliteral">&quot;m&quot;</span>);   
<a name="l03767"></a>03767             <span class="keywordflow">break</span>;
<a name="l03768"></a>03768          <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l03769"></a>03769          <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l03770"></a>03770             <span class="comment">/* First - Thirtyfirst */</span>
<a name="l03771"></a>03771             res = <a class="code" href="say_8h.html#ab309c99a25580d4f8964756d2ec1f279" title="says an enumeration">ast_say_enumeration</a>(chan, tm.tm_mday, ints, lang, <span class="stringliteral">&quot;m&quot;</span>);  
<a name="l03772"></a>03772             <span class="keywordflow">break</span>;
<a name="l03773"></a>03773          <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>:
<a name="l03774"></a>03774             <span class="comment">/* Year */</span>
<a name="l03775"></a>03775             {
<a name="l03776"></a>03776                <span class="keywordtype">int</span> year = tm.tm_year + 1900;
<a name="l03777"></a>03777                <span class="keywordflow">if</span> (year &gt; 1999) {   <span class="comment">/* year 2000 and later */</span>
<a name="l03778"></a>03778                   res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, year, ints, lang, (<span class="keywordtype">char</span> *) NULL);   
<a name="l03779"></a>03779                } <span class="keywordflow">else</span> {
<a name="l03780"></a>03780                   <span class="keywordflow">if</span> (year &lt; 1100) {
<a name="l03781"></a>03781                      <span class="comment">/* I&apos;m not going to handle 1100 and prior */</span>
<a name="l03782"></a>03782                      <span class="comment">/* We&apos;ll just be silent on the year, instead of bombing out. */</span>
<a name="l03783"></a>03783                   } <span class="keywordflow">else</span> {
<a name="l03784"></a>03784                       <span class="comment">/* year 1100 to 1999. will anybody need this?!? */</span>
<a name="l03785"></a>03785                       <span class="comment">/* say 1967 as &apos;nineteen hundred seven and sixty&apos; */</span>
<a name="l03786"></a>03786                      snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, (year / 100) );
<a name="l03787"></a>03787                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03788"></a>03788                      <span class="keywordflow">if</span> (!res) {
<a name="l03789"></a>03789                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/hundred&quot;</span>, lang);
<a name="l03790"></a>03790                         <span class="keywordflow">if</span> (!res &amp;&amp; year % 100 != 0) {
<a name="l03791"></a>03791                            res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, (year % 100), ints, lang, (<span class="keywordtype">char</span> *) NULL); 
<a name="l03792"></a>03792                         }
<a name="l03793"></a>03793                      }
<a name="l03794"></a>03794                   }
<a name="l03795"></a>03795                }
<a name="l03796"></a>03796             }
<a name="l03797"></a>03797             <span class="keywordflow">break</span>;
<a name="l03798"></a>03798          <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l03799"></a>03799          <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>:
<a name="l03800"></a>03800             <span class="comment">/* 12-Hour */</span>
<a name="l03801"></a>03801             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l03802"></a>03802             <span class="keywordflow">if</span> (tm.tm_hour == 0)
<a name="l03803"></a>03803                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/12&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l03804"></a>03804             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour &gt; 12)
<a name="l03805"></a>03805                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour - 12);
<a name="l03806"></a>03806             <span class="keywordflow">else</span>
<a name="l03807"></a>03807                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour);
<a name="l03808"></a>03808             <span class="keywordflow">if</span> (!res) {
<a name="l03809"></a>03809                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03810"></a>03810             }
<a name="l03811"></a>03811             <span class="keywordflow">break</span>;
<a name="l03812"></a>03812          <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l03813"></a>03813             <span class="comment">/* 24-Hour, single digit hours preceeded by &quot;oh&quot; (0) */</span>
<a name="l03814"></a>03814             <span class="keywordflow">if</span> (tm.tm_hour &lt; 10 &amp;&amp; tm.tm_hour &gt; 0) {
<a name="l03815"></a>03815                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/0&quot;</span>, lang);
<a name="l03816"></a>03816             }
<a name="l03817"></a>03817             <span class="comment">/* FALLTRHU */</span>
<a name="l03818"></a>03818          <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>:
<a name="l03819"></a>03819             <span class="comment">/* 24-Hour */</span>
<a name="l03820"></a>03820             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03821"></a>03821             <span class="keywordflow">break</span>;
<a name="l03822"></a>03822          <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l03823"></a>03823             <span class="comment">/* Minute */</span>
<a name="l03824"></a>03824             <span class="keywordflow">if</span> (tm.tm_min &gt; 0 || <a class="code" href="say_8c.html#ada19aba234cf58e125365b608e4f6555">next_item</a>(&amp;<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset + 1]) == <span class="charliteral">&apos;S&apos;</span>) { <span class="comment">/* zero &apos;digits/0&apos; only if seconds follow */</span>
<a name="l03825"></a>03825                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l03826"></a>03826             }
<a name="l03827"></a>03827             <span class="keywordflow">if</span> (!res &amp;&amp; <a class="code" href="say_8c.html#ada19aba234cf58e125365b608e4f6555">next_item</a>(&amp;<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset + 1]) == <span class="charliteral">&apos;S&apos;</span>) { <span class="comment">/* minutes only if seconds follow */</span>
<a name="l03828"></a>03828                <span class="keywordflow">if</span> (tm.tm_min == 1) {
<a name="l03829"></a>03829                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/minute&quot;</span>, lang);
<a name="l03830"></a>03830                } <span class="keywordflow">else</span> {
<a name="l03831"></a>03831                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/minutes&quot;</span>, lang);
<a name="l03832"></a>03832                }
<a name="l03833"></a>03833             }
<a name="l03834"></a>03834             <span class="keywordflow">break</span>;
<a name="l03835"></a>03835          <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l03836"></a>03836          <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l03837"></a>03837             <span class="comment">/* AM/PM */</span>
<a name="l03838"></a>03838             <span class="keywordflow">if</span> (tm.tm_hour &gt; 11)
<a name="l03839"></a>03839                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/p-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l03840"></a>03840             <span class="keywordflow">else</span>
<a name="l03841"></a>03841                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/a-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l03842"></a>03842             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03843"></a>03843             <span class="keywordflow">break</span>;
<a name="l03844"></a>03844          <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l03845"></a>03845             <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or AdBY */</span>
<a name="l03846"></a>03846             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l03847"></a>03847 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l03848"></a>03848 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l03849"></a>03849             {
<a name="l03850"></a>03850                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l03851"></a>03851                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l03852"></a>03852                time_t beg_today;
<a name="l03853"></a>03853 
<a name="l03854"></a>03854                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l03855"></a>03855                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l03856"></a>03856                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l03857"></a>03857                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l03858"></a>03858                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l03859"></a>03859                   <span class="comment">/* Today */</span>
<a name="l03860"></a>03860                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l03861"></a>03861                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; t) {
<a name="l03862"></a>03862                   <span class="comment">/* Yesterday */</span>
<a name="l03863"></a>03863                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l03864"></a>03864                } <span class="keywordflow">else</span> {
<a name="l03865"></a>03865                   res = <a class="code" href="say_8c.html#a857ff68a92ef5766188e533b3cc51f99">ast_say_date_with_format_da</a>(chan, t, ints, lang, <span class="stringliteral">&quot;AdBY&quot;</span>, tzone);
<a name="l03866"></a>03866                }
<a name="l03867"></a>03867             }
<a name="l03868"></a>03868             <span class="keywordflow">break</span>;
<a name="l03869"></a>03869          <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l03870"></a>03870             <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A (weekday), or AdBY */</span>
<a name="l03871"></a>03871             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l03872"></a>03872 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l03873"></a>03873 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l03874"></a>03874             {
<a name="l03875"></a>03875                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l03876"></a>03876                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l03877"></a>03877                time_t beg_today;
<a name="l03878"></a>03878 
<a name="l03879"></a>03879                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l03880"></a>03880                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l03881"></a>03881                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l03882"></a>03882                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l03883"></a>03883                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l03884"></a>03884                   <span class="comment">/* Today */</span>
<a name="l03885"></a>03885                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((beg_today - 86400) &lt; t) {
<a name="l03886"></a>03886                   <span class="comment">/* Yesterday */</span>
<a name="l03887"></a>03887                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l03888"></a>03888                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l03889"></a>03889                   <span class="comment">/* Within the last week */</span>
<a name="l03890"></a>03890                   res = <a class="code" href="say_8c.html#a857ff68a92ef5766188e533b3cc51f99">ast_say_date_with_format_da</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l03891"></a>03891                } <span class="keywordflow">else</span> {
<a name="l03892"></a>03892                   res = <a class="code" href="say_8c.html#a857ff68a92ef5766188e533b3cc51f99">ast_say_date_with_format_da</a>(chan, t, ints, lang, <span class="stringliteral">&quot;AdBY&quot;</span>, tzone);
<a name="l03893"></a>03893                }
<a name="l03894"></a>03894             }
<a name="l03895"></a>03895             <span class="keywordflow">break</span>;
<a name="l03896"></a>03896          <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l03897"></a>03897             res = <a class="code" href="say_8c.html#a857ff68a92ef5766188e533b3cc51f99">ast_say_date_with_format_da</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HM&quot;</span>, tzone);
<a name="l03898"></a>03898             <span class="keywordflow">break</span>;
<a name="l03899"></a>03899          <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>:
<a name="l03900"></a>03900             <span class="comment">/* Seconds */</span>
<a name="l03901"></a>03901             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/and&quot;</span>, lang);
<a name="l03902"></a>03902             <span class="keywordflow">if</span> (!res) {
<a name="l03903"></a>03903                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_sec, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);  
<a name="l03904"></a>03904                <span class="keywordflow">if</span> (!res) {
<a name="l03905"></a>03905                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/seconds&quot;</span>, lang);
<a name="l03906"></a>03906                }
<a name="l03907"></a>03907             }
<a name="l03908"></a>03908             <span class="keywordflow">break</span>;
<a name="l03909"></a>03909          <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l03910"></a>03910             res = <a class="code" href="say_8c.html#a857ff68a92ef5766188e533b3cc51f99">ast_say_date_with_format_da</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l03911"></a>03911             <span class="keywordflow">break</span>;
<a name="l03912"></a>03912          <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l03913"></a>03913          <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l03914"></a>03914             <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l03915"></a>03915             <span class="keywordflow">break</span>;
<a name="l03916"></a>03916          <span class="keywordflow">default</span>:
<a name="l03917"></a>03917             <span class="comment">/* Unknown character */</span>
<a name="l03918"></a>03918             <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l03919"></a>03919       }
<a name="l03920"></a>03920       <span class="comment">/* Jump out on DTMF */</span>
<a name="l03921"></a>03921       <span class="keywordflow">if</span> (res) {
<a name="l03922"></a>03922          <span class="keywordflow">break</span>;
<a name="l03923"></a>03923       }
<a name="l03924"></a>03924    }
<a name="l03925"></a>03925    <span class="keywordflow">return</span> res;
<a name="l03926"></a>03926 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9197bf1dc303f38a93b46eec6c30375d"></a><!-- doxytag: member="say.c::ast_say_date_with_format_de" ref="a9197bf1dc303f38a93b46eec6c30375d" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_with_format_de </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03929">3929</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="channel_8c_source.html#l05821">ast_say_enumeration()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="say_8c_source.html#l03720">next_item()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03930"></a>03930 {
<a name="l03931"></a>03931    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l03932"></a>03932    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l03933"></a>03933    <span class="keywordtype">int</span> res=0, offset, sndoffset;
<a name="l03934"></a>03934    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l03935"></a>03935 
<a name="l03936"></a>03936    <span class="keywordflow">if</span> (!<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>)
<a name="l03937"></a>03937       <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> = <span class="stringliteral">&quot;A dBY HMS&quot;</span>;
<a name="l03938"></a>03938 
<a name="l03939"></a>03939    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l03940"></a>03940 
<a name="l03941"></a>03941    <span class="keywordflow">for</span> (offset=0 ; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span> ; offset++) {
<a name="l03942"></a>03942       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l03943"></a>03943       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l03944"></a>03944          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l03945"></a>03945          <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l03946"></a>03946             <span class="comment">/* Literal name of a sound file */</span>
<a name="l03947"></a>03947             <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l03948"></a>03948                sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l03949"></a>03949             }
<a name="l03950"></a>03950             sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l03951"></a>03951             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, sndfile, lang);
<a name="l03952"></a>03952             <span class="keywordflow">break</span>;
<a name="l03953"></a>03953          <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l03954"></a>03954          <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l03955"></a>03955             <span class="comment">/* Sunday - Saturday */</span>
<a name="l03956"></a>03956             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l03957"></a>03957             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03958"></a>03958             <span class="keywordflow">break</span>;
<a name="l03959"></a>03959          <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l03960"></a>03960          <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l03961"></a>03961          <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l03962"></a>03962             <span class="comment">/* January - December */</span>
<a name="l03963"></a>03963             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l03964"></a>03964             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03965"></a>03965             <span class="keywordflow">break</span>;
<a name="l03966"></a>03966          <span class="keywordflow">case</span> <span class="charliteral">&apos;m&apos;</span>:
<a name="l03967"></a>03967             <span class="comment">/* Month enumerated */</span>
<a name="l03968"></a>03968             res = <a class="code" href="say_8h.html#ab309c99a25580d4f8964756d2ec1f279" title="says an enumeration">ast_say_enumeration</a>(chan, (tm.tm_mon + 1), ints, lang, <span class="stringliteral">&quot;m&quot;</span>);   
<a name="l03969"></a>03969             <span class="keywordflow">break</span>;
<a name="l03970"></a>03970          <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l03971"></a>03971          <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l03972"></a>03972             <span class="comment">/* First - Thirtyfirst */</span>
<a name="l03973"></a>03973             res = <a class="code" href="say_8h.html#ab309c99a25580d4f8964756d2ec1f279" title="says an enumeration">ast_say_enumeration</a>(chan, tm.tm_mday, ints, lang, <span class="stringliteral">&quot;m&quot;</span>);  
<a name="l03974"></a>03974             <span class="keywordflow">break</span>;
<a name="l03975"></a>03975          <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>:
<a name="l03976"></a>03976             <span class="comment">/* Year */</span>
<a name="l03977"></a>03977             {
<a name="l03978"></a>03978                <span class="keywordtype">int</span> year = tm.tm_year + 1900;
<a name="l03979"></a>03979                <span class="keywordflow">if</span> (year &gt; 1999) {   <span class="comment">/* year 2000 and later */</span>
<a name="l03980"></a>03980                   res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, year, ints, lang, (<span class="keywordtype">char</span> *) NULL);   
<a name="l03981"></a>03981                } <span class="keywordflow">else</span> {
<a name="l03982"></a>03982                   <span class="keywordflow">if</span> (year &lt; 1100) {
<a name="l03983"></a>03983                      <span class="comment">/* I&apos;m not going to handle 1100 and prior */</span>
<a name="l03984"></a>03984                      <span class="comment">/* We&apos;ll just be silent on the year, instead of bombing out. */</span>
<a name="l03985"></a>03985                   } <span class="keywordflow">else</span> {
<a name="l03986"></a>03986                       <span class="comment">/* year 1100 to 1999. will anybody need this?!? */</span>
<a name="l03987"></a>03987                       <span class="comment">/* say 1967 as &apos;neunzehn hundert sieben und sechzig&apos; */</span>
<a name="l03988"></a>03988                      snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, (year / 100) );
<a name="l03989"></a>03989                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03990"></a>03990                      <span class="keywordflow">if</span> (!res) {
<a name="l03991"></a>03991                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/hundred&quot;</span>, lang);
<a name="l03992"></a>03992                         <span class="keywordflow">if</span> (!res &amp;&amp; year % 100 != 0) {
<a name="l03993"></a>03993                            res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, (year % 100), ints, lang, (<span class="keywordtype">char</span> *) NULL); 
<a name="l03994"></a>03994                         }
<a name="l03995"></a>03995                      }
<a name="l03996"></a>03996                   }
<a name="l03997"></a>03997                }
<a name="l03998"></a>03998             }
<a name="l03999"></a>03999             <span class="keywordflow">break</span>;
<a name="l04000"></a>04000          <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l04001"></a>04001          <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>:
<a name="l04002"></a>04002             <span class="comment">/* 12-Hour */</span>
<a name="l04003"></a>04003             <span class="keywordflow">if</span> (tm.tm_hour == 0)
<a name="l04004"></a>04004                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/12&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l04005"></a>04005             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour &gt; 12)
<a name="l04006"></a>04006                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour - 12);
<a name="l04007"></a>04007             <span class="keywordflow">else</span>
<a name="l04008"></a>04008                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour);
<a name="l04009"></a>04009             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04010"></a>04010             <span class="keywordflow">if</span> (!res) {
<a name="l04011"></a>04011                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l04012"></a>04012             }
<a name="l04013"></a>04013             <span class="keywordflow">break</span>;
<a name="l04014"></a>04014          <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l04015"></a>04015          <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>:
<a name="l04016"></a>04016             <span class="comment">/* 24-Hour */</span>
<a name="l04017"></a>04017             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);   
<a name="l04018"></a>04018             <span class="keywordflow">if</span> (!res) {
<a name="l04019"></a>04019                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l04020"></a>04020             }
<a name="l04021"></a>04021             <span class="keywordflow">break</span>;
<a name="l04022"></a>04022          <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l04023"></a>04023             <span class="comment">/* Minute */</span>
<a name="l04024"></a>04024             <span class="keywordflow">if</span> (<a class="code" href="say_8c.html#ada19aba234cf58e125365b608e4f6555">next_item</a>(&amp;<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset + 1]) == <span class="charliteral">&apos;S&apos;</span>) { <span class="comment">/* zero &apos;digits/0&apos; only if seconds follow */</span>
<a name="l04025"></a>04025                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, <span class="stringliteral">&quot;f&quot;</span>); <span class="comment">/* female only if we say digits/minutes */</span>
<a name="l04026"></a>04026             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_min &gt; 0) {
<a name="l04027"></a>04027                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l04028"></a>04028             }
<a name="l04029"></a>04029 
<a name="l04030"></a>04030             <span class="keywordflow">if</span> (!res &amp;&amp; <a class="code" href="say_8c.html#ada19aba234cf58e125365b608e4f6555">next_item</a>(&amp;<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset + 1]) == <span class="charliteral">&apos;S&apos;</span>) { <span class="comment">/* minutes only if seconds follow */</span>
<a name="l04031"></a>04031                <span class="keywordflow">if</span> (tm.tm_min == 1) {
<a name="l04032"></a>04032                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/minute&quot;</span>, lang);
<a name="l04033"></a>04033                } <span class="keywordflow">else</span> {
<a name="l04034"></a>04034                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/minutes&quot;</span>, lang);
<a name="l04035"></a>04035                }
<a name="l04036"></a>04036             }
<a name="l04037"></a>04037             <span class="keywordflow">break</span>;
<a name="l04038"></a>04038          <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l04039"></a>04039          <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l04040"></a>04040             <span class="comment">/* AM/PM */</span>
<a name="l04041"></a>04041             <span class="keywordflow">if</span> (tm.tm_hour &gt; 11)
<a name="l04042"></a>04042                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/p-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l04043"></a>04043             <span class="keywordflow">else</span>
<a name="l04044"></a>04044                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/a-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l04045"></a>04045             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04046"></a>04046             <span class="keywordflow">break</span>;
<a name="l04047"></a>04047          <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l04048"></a>04048             <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or AdBY */</span>
<a name="l04049"></a>04049             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l04050"></a>04050 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l04051"></a>04051 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l04052"></a>04052             {
<a name="l04053"></a>04053                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l04054"></a>04054                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l04055"></a>04055                time_t beg_today;
<a name="l04056"></a>04056 
<a name="l04057"></a>04057                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l04058"></a>04058                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l04059"></a>04059                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l04060"></a>04060                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l04061"></a>04061                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l04062"></a>04062                   <span class="comment">/* Today */</span>
<a name="l04063"></a>04063                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l04064"></a>04064                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; t) {
<a name="l04065"></a>04065                   <span class="comment">/* Yesterday */</span>
<a name="l04066"></a>04066                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l04067"></a>04067                } <span class="keywordflow">else</span> {
<a name="l04068"></a>04068                   res = <a class="code" href="say_8c.html#a9197bf1dc303f38a93b46eec6c30375d">ast_say_date_with_format_de</a>(chan, t, ints, lang, <span class="stringliteral">&quot;AdBY&quot;</span>, tzone);
<a name="l04069"></a>04069                }
<a name="l04070"></a>04070             }
<a name="l04071"></a>04071             <span class="keywordflow">break</span>;
<a name="l04072"></a>04072          <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l04073"></a>04073             <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A (weekday), or AdBY */</span>
<a name="l04074"></a>04074             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l04075"></a>04075 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l04076"></a>04076 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l04077"></a>04077             {
<a name="l04078"></a>04078                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l04079"></a>04079                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l04080"></a>04080                time_t beg_today;
<a name="l04081"></a>04081 
<a name="l04082"></a>04082                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l04083"></a>04083                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l04084"></a>04084                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l04085"></a>04085                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l04086"></a>04086                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l04087"></a>04087                   <span class="comment">/* Today */</span>
<a name="l04088"></a>04088                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((beg_today - 86400) &lt; t) {
<a name="l04089"></a>04089                   <span class="comment">/* Yesterday */</span>
<a name="l04090"></a>04090                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l04091"></a>04091                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l04092"></a>04092                   <span class="comment">/* Within the last week */</span>
<a name="l04093"></a>04093                   res = <a class="code" href="say_8c.html#a9197bf1dc303f38a93b46eec6c30375d">ast_say_date_with_format_de</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l04094"></a>04094                } <span class="keywordflow">else</span> {
<a name="l04095"></a>04095                   res = <a class="code" href="say_8c.html#a9197bf1dc303f38a93b46eec6c30375d">ast_say_date_with_format_de</a>(chan, t, ints, lang, <span class="stringliteral">&quot;AdBY&quot;</span>, tzone);
<a name="l04096"></a>04096                }
<a name="l04097"></a>04097             }
<a name="l04098"></a>04098             <span class="keywordflow">break</span>;
<a name="l04099"></a>04099          <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l04100"></a>04100             res = <a class="code" href="say_8c.html#a9197bf1dc303f38a93b46eec6c30375d">ast_say_date_with_format_de</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HM&quot;</span>, tzone);
<a name="l04101"></a>04101             <span class="keywordflow">break</span>;
<a name="l04102"></a>04102          <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>:
<a name="l04103"></a>04103             <span class="comment">/* Seconds */</span>
<a name="l04104"></a>04104             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/and&quot;</span>, lang);
<a name="l04105"></a>04105             <span class="keywordflow">if</span> (!res) {
<a name="l04106"></a>04106                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_sec, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);  
<a name="l04107"></a>04107                <span class="keywordflow">if</span> (!res) {
<a name="l04108"></a>04108                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, tm.tm_sec == 1 ? <span class="stringliteral">&quot;digits/second&quot;</span> : <span class="stringliteral">&quot;digits/seconds&quot;</span>, lang);
<a name="l04109"></a>04109                }
<a name="l04110"></a>04110             }
<a name="l04111"></a>04111             <span class="keywordflow">break</span>;
<a name="l04112"></a>04112          <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l04113"></a>04113             res = <a class="code" href="say_8c.html#a9197bf1dc303f38a93b46eec6c30375d">ast_say_date_with_format_de</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l04114"></a>04114             <span class="keywordflow">break</span>;
<a name="l04115"></a>04115          <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l04116"></a>04116          <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l04117"></a>04117             <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l04118"></a>04118             <span class="keywordflow">break</span>;
<a name="l04119"></a>04119          <span class="keywordflow">default</span>:
<a name="l04120"></a>04120             <span class="comment">/* Unknown character */</span>
<a name="l04121"></a>04121             <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l04122"></a>04122       }
<a name="l04123"></a>04123       <span class="comment">/* Jump out on DTMF */</span>
<a name="l04124"></a>04124       <span class="keywordflow">if</span> (res) {
<a name="l04125"></a>04125          <span class="keywordflow">break</span>;
<a name="l04126"></a>04126       }
<a name="l04127"></a>04127    }
<a name="l04128"></a>04128    <span class="keywordflow">return</span> res;
<a name="l04129"></a>04129 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aee9df79e6e3bc9df007cf6b252bc0d50"></a><!-- doxytag: member="say.c::ast_say_date_with_format_en" ref="aee9df79e6e3bc9df007cf6b252bc0d50" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_with_format_en </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03480">3480</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="channel_8c_source.html#l05821">ast_say_enumeration()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l04132">ast_say_date_with_format_th()</a>, and <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03481"></a>03481 {
<a name="l03482"></a>03482    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l03483"></a>03483    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l03484"></a>03484    <span class="keywordtype">int</span> res=0, offset, sndoffset;
<a name="l03485"></a>03485    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l03486"></a>03486 
<a name="l03487"></a>03487    <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> == NULL)
<a name="l03488"></a>03488       <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> = <span class="stringliteral">&quot;ABdY &apos;digits/at&apos; IMp&quot;</span>;
<a name="l03489"></a>03489 
<a name="l03490"></a>03490    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l03491"></a>03491 
<a name="l03492"></a>03492    <span class="keywordflow">for</span> (offset=0 ; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span> ; offset++) {
<a name="l03493"></a>03493       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l03494"></a>03494       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l03495"></a>03495          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l03496"></a>03496          <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l03497"></a>03497             <span class="comment">/* Literal name of a sound file */</span>
<a name="l03498"></a>03498             <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l03499"></a>03499                sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l03500"></a>03500             }
<a name="l03501"></a>03501             sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l03502"></a>03502             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, sndfile, lang);
<a name="l03503"></a>03503             <span class="keywordflow">break</span>;
<a name="l03504"></a>03504          <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l03505"></a>03505          <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l03506"></a>03506             <span class="comment">/* Sunday - Saturday */</span>
<a name="l03507"></a>03507             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l03508"></a>03508             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03509"></a>03509             <span class="keywordflow">break</span>;
<a name="l03510"></a>03510          <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l03511"></a>03511          <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l03512"></a>03512          <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l03513"></a>03513             <span class="comment">/* January - December */</span>
<a name="l03514"></a>03514             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l03515"></a>03515             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03516"></a>03516             <span class="keywordflow">break</span>;
<a name="l03517"></a>03517          <span class="keywordflow">case</span> <span class="charliteral">&apos;m&apos;</span>:
<a name="l03518"></a>03518             <span class="comment">/* Month enumerated */</span>
<a name="l03519"></a>03519             res = <a class="code" href="say_8h.html#ab309c99a25580d4f8964756d2ec1f279" title="says an enumeration">ast_say_enumeration</a>(chan, (tm.tm_mon + 1), ints, lang, (<span class="keywordtype">char</span> *) NULL);  
<a name="l03520"></a>03520             <span class="keywordflow">break</span>;
<a name="l03521"></a>03521          <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l03522"></a>03522          <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l03523"></a>03523             <span class="comment">/* First - Thirtyfirst */</span>
<a name="l03524"></a>03524             res = <a class="code" href="say_8h.html#ab309c99a25580d4f8964756d2ec1f279" title="says an enumeration">ast_say_enumeration</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL); 
<a name="l03525"></a>03525             <span class="keywordflow">break</span>;
<a name="l03526"></a>03526          <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>:
<a name="l03527"></a>03527             <span class="comment">/* Year */</span>
<a name="l03528"></a>03528             <span class="keywordflow">if</span> (tm.tm_year &gt; 99) {
<a name="l03529"></a>03529                     res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03530"></a>03530             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_year &lt; 1) {
<a name="l03531"></a>03531                <span class="comment">/* I&apos;m not going to handle 1900 and prior */</span>
<a name="l03532"></a>03532                <span class="comment">/* We&apos;ll just be silent on the year, instead of bombing out. */</span>
<a name="l03533"></a>03533             } <span class="keywordflow">else</span> {
<a name="l03534"></a>03534                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/19&quot;</span>, lang);
<a name="l03535"></a>03535                <span class="keywordflow">if</span> (!res) {
<a name="l03536"></a>03536                   <span class="keywordflow">if</span> (tm.tm_year &lt;= 9) {
<a name="l03537"></a>03537                      <span class="comment">/* 1901 - 1909 */</span>
<a name="l03538"></a>03538                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oh&quot;</span>, lang);
<a name="l03539"></a>03539                   }
<a name="l03540"></a>03540 
<a name="l03541"></a>03541                   res |= <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03542"></a>03542                }
<a name="l03543"></a>03543             }
<a name="l03544"></a>03544             <span class="keywordflow">break</span>;
<a name="l03545"></a>03545          <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l03546"></a>03546          <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>:
<a name="l03547"></a>03547             <span class="comment">/* 12-Hour */</span>
<a name="l03548"></a>03548             <span class="keywordflow">if</span> (tm.tm_hour == 0)
<a name="l03549"></a>03549                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/12&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l03550"></a>03550             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour &gt; 12)
<a name="l03551"></a>03551                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour - 12);
<a name="l03552"></a>03552             <span class="keywordflow">else</span>
<a name="l03553"></a>03553                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour);
<a name="l03554"></a>03554             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03555"></a>03555             <span class="keywordflow">break</span>;
<a name="l03556"></a>03556          <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l03557"></a>03557          <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>:
<a name="l03558"></a>03558             <span class="comment">/* 24-Hour */</span>
<a name="l03559"></a>03559             <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] == <span class="charliteral">&apos;H&apos;</span>) {
<a name="l03560"></a>03560                <span class="comment">/* e.g. oh-eight */</span>
<a name="l03561"></a>03561                <span class="keywordflow">if</span> (tm.tm_hour &lt; 10) {
<a name="l03562"></a>03562                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oh&quot;</span>, lang);
<a name="l03563"></a>03563                }
<a name="l03564"></a>03564             } <span class="keywordflow">else</span> {
<a name="l03565"></a>03565                <span class="comment">/* e.g. eight */</span>
<a name="l03566"></a>03566                <span class="keywordflow">if</span> (tm.tm_hour == 0) {
<a name="l03567"></a>03567                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oh&quot;</span>, lang);
<a name="l03568"></a>03568                }
<a name="l03569"></a>03569             }
<a name="l03570"></a>03570             <span class="keywordflow">if</span> (!res) {
<a name="l03571"></a>03571                <span class="keywordflow">if</span> (tm.tm_hour != 0) {
<a name="l03572"></a>03572                   <span class="keywordtype">int</span> remaining = tm.tm_hour;
<a name="l03573"></a>03573                   <span class="keywordflow">if</span> (tm.tm_hour &gt; 20) {
<a name="l03574"></a>03574                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/20&quot;</span>, lang);
<a name="l03575"></a>03575                      remaining -= 20;
<a name="l03576"></a>03576                   }
<a name="l03577"></a>03577                   <span class="keywordflow">if</span> (!res) {
<a name="l03578"></a>03578                      snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, remaining);
<a name="l03579"></a>03579                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03580"></a>03580                   }
<a name="l03581"></a>03581                }
<a name="l03582"></a>03582             }
<a name="l03583"></a>03583             <span class="keywordflow">break</span>;
<a name="l03584"></a>03584          <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l03585"></a>03585          <span class="keywordflow">case</span> <span class="charliteral">&apos;N&apos;</span>:
<a name="l03586"></a>03586             <span class="comment">/* Minute */</span>
<a name="l03587"></a>03587             <span class="keywordflow">if</span> (tm.tm_min == 0) {
<a name="l03588"></a>03588                <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] == <span class="charliteral">&apos;M&apos;</span>) {
<a name="l03589"></a>03589                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l03590"></a>03590                } <span class="keywordflow">else</span> {
<a name="l03591"></a>03591                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/hundred&quot;</span>, lang);
<a name="l03592"></a>03592                }
<a name="l03593"></a>03593             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_min &lt; 10) {
<a name="l03594"></a>03594                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oh&quot;</span>, lang);
<a name="l03595"></a>03595                <span class="keywordflow">if</span> (!res) {
<a name="l03596"></a>03596                   snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_min);
<a name="l03597"></a>03597                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03598"></a>03598                }
<a name="l03599"></a>03599             } <span class="keywordflow">else</span> {
<a name="l03600"></a>03600                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03601"></a>03601             }
<a name="l03602"></a>03602             <span class="keywordflow">break</span>;
<a name="l03603"></a>03603          <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l03604"></a>03604          <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l03605"></a>03605             <span class="comment">/* AM/PM */</span>
<a name="l03606"></a>03606             <span class="keywordflow">if</span> (tm.tm_hour &gt; 11)
<a name="l03607"></a>03607                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/p-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l03608"></a>03608             <span class="keywordflow">else</span>
<a name="l03609"></a>03609                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/a-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l03610"></a>03610             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03611"></a>03611             <span class="keywordflow">break</span>;
<a name="l03612"></a>03612          <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l03613"></a>03613             <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or ABdY */</span>
<a name="l03614"></a>03614             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l03615"></a>03615 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l03616"></a>03616 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l03617"></a>03617             {
<a name="l03618"></a>03618                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l03619"></a>03619                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l03620"></a>03620                time_t beg_today;
<a name="l03621"></a>03621 
<a name="l03622"></a>03622                gettimeofday(&amp;now, NULL);
<a name="l03623"></a>03623                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l03624"></a>03624                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l03625"></a>03625                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l03626"></a>03626                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l03627"></a>03627                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l03628"></a>03628                   <span class="comment">/* Today */</span>
<a name="l03629"></a>03629                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l03630"></a>03630                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; t) {
<a name="l03631"></a>03631                   <span class="comment">/* Yesterday */</span>
<a name="l03632"></a>03632                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l03633"></a>03633                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l03634"></a>03634                   <span class="comment">/* Within the last week */</span>
<a name="l03635"></a>03635                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l03636"></a>03636                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 2628000 &lt; t) {
<a name="l03637"></a>03637                   <span class="comment">/* Less than a month ago - &quot;Sunday, October third&quot; */</span>
<a name="l03638"></a>03638                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;ABd&quot;</span>, tzone);
<a name="l03639"></a>03639                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 15768000 &lt; t) {
<a name="l03640"></a>03640                   <span class="comment">/* Less than 6 months ago - &quot;August seventh&quot; */</span>
<a name="l03641"></a>03641                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;Bd&quot;</span>, tzone);
<a name="l03642"></a>03642                } <span class="keywordflow">else</span> {
<a name="l03643"></a>03643                   <span class="comment">/* More than 6 months ago - &quot;April nineteenth two thousand three&quot; */</span>
<a name="l03644"></a>03644                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;BdY&quot;</span>, tzone);
<a name="l03645"></a>03645                }
<a name="l03646"></a>03646             }
<a name="l03647"></a>03647             <span class="keywordflow">break</span>;
<a name="l03648"></a>03648          <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l03649"></a>03649             <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A (weekday), or ABdY */</span>
<a name="l03650"></a>03650             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l03651"></a>03651 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l03652"></a>03652 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l03653"></a>03653             {
<a name="l03654"></a>03654                <span class="keyword">struct </span>timeval now;
<a name="l03655"></a>03655                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l03656"></a>03656                time_t beg_today;
<a name="l03657"></a>03657 
<a name="l03658"></a>03658                now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l03659"></a>03659                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l03660"></a>03660                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l03661"></a>03661                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l03662"></a>03662                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l03663"></a>03663                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l03664"></a>03664                   <span class="comment">/* Today */</span>
<a name="l03665"></a>03665                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((beg_today - 86400) &lt; t) {
<a name="l03666"></a>03666                   <span class="comment">/* Yesterday */</span>
<a name="l03667"></a>03667                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l03668"></a>03668                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l03669"></a>03669                   <span class="comment">/* Within the last week */</span>
<a name="l03670"></a>03670                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l03671"></a>03671                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 2628000 &lt; t) {
<a name="l03672"></a>03672                   <span class="comment">/* Less than a month ago - &quot;Sunday, October third&quot; */</span>
<a name="l03673"></a>03673                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;ABd&quot;</span>, tzone);
<a name="l03674"></a>03674                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 15768000 &lt; t) {
<a name="l03675"></a>03675                   <span class="comment">/* Less than 6 months ago - &quot;August seventh&quot; */</span>
<a name="l03676"></a>03676                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;Bd&quot;</span>, tzone);
<a name="l03677"></a>03677                } <span class="keywordflow">else</span> {
<a name="l03678"></a>03678                   <span class="comment">/* More than 6 months ago - &quot;April nineteenth two thousand three&quot; */</span>
<a name="l03679"></a>03679                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;BdY&quot;</span>, tzone);
<a name="l03680"></a>03680                }
<a name="l03681"></a>03681             }
<a name="l03682"></a>03682             <span class="keywordflow">break</span>;
<a name="l03683"></a>03683          <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l03684"></a>03684             res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HM&quot;</span>, tzone);
<a name="l03685"></a>03685             <span class="keywordflow">break</span>;
<a name="l03686"></a>03686          <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>:
<a name="l03687"></a>03687             <span class="comment">/* Seconds */</span>
<a name="l03688"></a>03688             <span class="keywordflow">if</span> (tm.tm_sec == 0) {
<a name="l03689"></a>03689                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec);
<a name="l03690"></a>03690                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03691"></a>03691             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_sec &lt; 10) {
<a name="l03692"></a>03692                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oh&quot;</span>, lang);
<a name="l03693"></a>03693                <span class="keywordflow">if</span> (!res) {
<a name="l03694"></a>03694                   snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec);
<a name="l03695"></a>03695                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l03696"></a>03696                }
<a name="l03697"></a>03697             } <span class="keywordflow">else</span> {
<a name="l03698"></a>03698                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_sec, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l03699"></a>03699             }
<a name="l03700"></a>03700             <span class="keywordflow">break</span>;
<a name="l03701"></a>03701          <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l03702"></a>03702             res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l03703"></a>03703             <span class="keywordflow">break</span>;
<a name="l03704"></a>03704          <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l03705"></a>03705          <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l03706"></a>03706             <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l03707"></a>03707             <span class="keywordflow">break</span>;
<a name="l03708"></a>03708          <span class="keywordflow">default</span>:
<a name="l03709"></a>03709             <span class="comment">/* Unknown character */</span>
<a name="l03710"></a>03710             <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l03711"></a>03711       }
<a name="l03712"></a>03712       <span class="comment">/* Jump out on DTMF */</span>
<a name="l03713"></a>03713       <span class="keywordflow">if</span> (res) {
<a name="l03714"></a>03714          <span class="keywordflow">break</span>;
<a name="l03715"></a>03715       }
<a name="l03716"></a>03716    }
<a name="l03717"></a>03717    <span class="keywordflow">return</span> res;
<a name="l03718"></a>03718 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a100824ee16949d59a2d401d5ef36a4e8"></a><!-- doxytag: member="say.c::ast_say_date_with_format_es" ref="a100824ee16949d59a2d401d5ef36a4e8" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_with_format_es </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l04466">4466</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l04467"></a>04467 {
<a name="l04468"></a>04468    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l04469"></a>04469    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l04470"></a>04470    <span class="keywordtype">int</span> res=0, offset, sndoffset;
<a name="l04471"></a>04471    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l04472"></a>04472 
<a name="l04473"></a>04473    <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> == NULL)
<a name="l04474"></a>04474       <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> = <span class="stringliteral">&quot;&apos;digits/es-el&apos; Ad &apos;digits/es-de&apos; B &apos;digits/es-de&apos; Y &apos;digits/at&apos; IMp&quot;</span>;
<a name="l04475"></a>04475 
<a name="l04476"></a>04476    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l04477"></a>04477 
<a name="l04478"></a>04478    <span class="keywordflow">for</span> (offset=0 ; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span> ; offset++) {
<a name="l04479"></a>04479       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l04480"></a>04480       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l04481"></a>04481          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l04482"></a>04482          <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l04483"></a>04483             <span class="comment">/* Literal name of a sound file */</span>
<a name="l04484"></a>04484             <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l04485"></a>04485                sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l04486"></a>04486             }
<a name="l04487"></a>04487             sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l04488"></a>04488             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;%s&quot;</span>, sndfile);
<a name="l04489"></a>04489             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04490"></a>04490             <span class="keywordflow">break</span>;
<a name="l04491"></a>04491          <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l04492"></a>04492          <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l04493"></a>04493             <span class="comment">/* Sunday - Saturday */</span>
<a name="l04494"></a>04494             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l04495"></a>04495             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04496"></a>04496             <span class="keywordflow">break</span>;
<a name="l04497"></a>04497          <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l04498"></a>04498          <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l04499"></a>04499          <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l04500"></a>04500             <span class="comment">/* January - December */</span>
<a name="l04501"></a>04501             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l04502"></a>04502             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04503"></a>04503             <span class="keywordflow">break</span>;
<a name="l04504"></a>04504          <span class="keywordflow">case</span> <span class="charliteral">&apos;m&apos;</span>:
<a name="l04505"></a>04505             <span class="comment">/* First - Twelfth */</span>
<a name="l04506"></a>04506             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/h-%d&quot;</span>, tm.tm_mon +1);
<a name="l04507"></a>04507             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04508"></a>04508             <span class="keywordflow">break</span>;
<a name="l04509"></a>04509          <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l04510"></a>04510          <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l04511"></a>04511             <span class="comment">/* First - Thirtyfirst */</span>
<a name="l04512"></a>04512             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l04513"></a>04513             <span class="keywordflow">break</span>;
<a name="l04514"></a>04514          <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>:
<a name="l04515"></a>04515             <span class="comment">/* Year */</span>
<a name="l04516"></a>04516             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l04517"></a>04517             <span class="keywordflow">break</span>;
<a name="l04518"></a>04518          <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l04519"></a>04519          <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>:
<a name="l04520"></a>04520             <span class="comment">/* 12-Hour */</span>
<a name="l04521"></a>04521             <span class="keywordflow">if</span> (tm.tm_hour == 0)
<a name="l04522"></a>04522                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/12&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l04523"></a>04523             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour &gt; 12)
<a name="l04524"></a>04524                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour - 12);
<a name="l04525"></a>04525             <span class="keywordflow">else</span>
<a name="l04526"></a>04526                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour);
<a name="l04527"></a>04527             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04528"></a>04528             <span class="keywordflow">break</span>;
<a name="l04529"></a>04529          <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l04530"></a>04530          <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>:
<a name="l04531"></a>04531             <span class="comment">/* 24-Hour */</span>
<a name="l04532"></a>04532             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, NULL);
<a name="l04533"></a>04533             <span class="keywordflow">break</span>;
<a name="l04534"></a>04534          <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l04535"></a>04535             <span class="comment">/* Minute */</span>
<a name="l04536"></a>04536             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL); 
<a name="l04537"></a>04537             <span class="keywordflow">break</span>;
<a name="l04538"></a>04538          <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l04539"></a>04539          <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l04540"></a>04540             <span class="comment">/* AM/PM */</span>
<a name="l04541"></a>04541             <span class="keywordflow">if</span> (tm.tm_hour &gt; 18)
<a name="l04542"></a>04542                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/p-m&quot;</span>, lang);
<a name="l04543"></a>04543             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour &gt; 12)
<a name="l04544"></a>04544                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/afternoon&quot;</span>, lang);
<a name="l04545"></a>04545             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour)
<a name="l04546"></a>04546                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/a-m&quot;</span>, lang);
<a name="l04547"></a>04547             <span class="keywordflow">break</span>;
<a name="l04548"></a>04548          <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l04549"></a>04549             <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or ABdY */</span>
<a name="l04550"></a>04550             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l04551"></a>04551 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l04552"></a>04552 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l04553"></a>04553             {
<a name="l04554"></a>04554                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l04555"></a>04555                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l04556"></a>04556                time_t beg_today;
<a name="l04557"></a>04557 
<a name="l04558"></a>04558                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l04559"></a>04559                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l04560"></a>04560                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l04561"></a>04561                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l04562"></a>04562                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l04563"></a>04563                   <span class="comment">/* Today */</span>
<a name="l04564"></a>04564                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l04565"></a>04565                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; t) {
<a name="l04566"></a>04566                   <span class="comment">/* Yesterday */</span>
<a name="l04567"></a>04567                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l04568"></a>04568                } <span class="keywordflow">else</span> {
<a name="l04569"></a>04569                   res = <a class="code" href="say_8c.html#a100824ee16949d59a2d401d5ef36a4e8">ast_say_date_with_format_es</a>(chan, t, ints, lang, <span class="stringliteral">&quot;&apos;digits/es-el&apos; Ad &apos;digits/es-de&apos; B &apos;digits/es-de&apos; Y&quot;</span>, tzone);
<a name="l04570"></a>04570                }
<a name="l04571"></a>04571             }
<a name="l04572"></a>04572             <span class="keywordflow">break</span>;
<a name="l04573"></a>04573          <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l04574"></a>04574             <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A (weekday), or ABdY */</span>
<a name="l04575"></a>04575             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l04576"></a>04576 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l04577"></a>04577 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l04578"></a>04578             {
<a name="l04579"></a>04579                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l04580"></a>04580                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l04581"></a>04581                time_t beg_today;
<a name="l04582"></a>04582 
<a name="l04583"></a>04583                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l04584"></a>04584                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l04585"></a>04585                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l04586"></a>04586                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l04587"></a>04587                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l04588"></a>04588                   <span class="comment">/* Today */</span>
<a name="l04589"></a>04589                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l04590"></a>04590                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((beg_today - 86400) &lt; t) {
<a name="l04591"></a>04591                   <span class="comment">/* Yesterday */</span>
<a name="l04592"></a>04592                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l04593"></a>04593                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l04594"></a>04594                   <span class="comment">/* Within the last week */</span>
<a name="l04595"></a>04595                   res = <a class="code" href="say_8c.html#a100824ee16949d59a2d401d5ef36a4e8">ast_say_date_with_format_es</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l04596"></a>04596                } <span class="keywordflow">else</span> {
<a name="l04597"></a>04597                   res = <a class="code" href="say_8c.html#a100824ee16949d59a2d401d5ef36a4e8">ast_say_date_with_format_es</a>(chan, t, ints, lang, <span class="stringliteral">&quot;&apos;digits/es-el&apos; Ad &apos;digits/es-de&apos; B &apos;digits/es-de&apos; Y&quot;</span>, tzone);
<a name="l04598"></a>04598                }
<a name="l04599"></a>04599             }
<a name="l04600"></a>04600             <span class="keywordflow">break</span>;
<a name="l04601"></a>04601          <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l04602"></a>04602             res = <a class="code" href="say_8c.html#a100824ee16949d59a2d401d5ef36a4e8">ast_say_date_with_format_es</a>(chan, t, ints, lang, <span class="stringliteral">&quot;H &apos;digits/y&apos; M&quot;</span>, tzone);
<a name="l04603"></a>04603             <span class="keywordflow">break</span>;
<a name="l04604"></a>04604          <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>:
<a name="l04605"></a>04605             <span class="comment">/* Seconds */</span>
<a name="l04606"></a>04606             <span class="keywordflow">if</span> (tm.tm_sec == 0) {
<a name="l04607"></a>04607                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec);
<a name="l04608"></a>04608                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04609"></a>04609             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_sec &lt; 10) {
<a name="l04610"></a>04610                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oh&quot;</span>, lang);
<a name="l04611"></a>04611                <span class="keywordflow">if</span> (!res) {
<a name="l04612"></a>04612                   snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec);
<a name="l04613"></a>04613                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04614"></a>04614                }
<a name="l04615"></a>04615             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((tm.tm_sec &lt; 21) || (tm.tm_sec % 10 == 0)) {
<a name="l04616"></a>04616                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec);
<a name="l04617"></a>04617                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04618"></a>04618             } <span class="keywordflow">else</span> {
<a name="l04619"></a>04619                <span class="keywordtype">int</span> ten, one;
<a name="l04620"></a>04620                ten = (tm.tm_sec / 10) * 10;
<a name="l04621"></a>04621                one = (tm.tm_sec % 10);
<a name="l04622"></a>04622                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, ten);
<a name="l04623"></a>04623                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04624"></a>04624                <span class="keywordflow">if</span> (!res) {
<a name="l04625"></a>04625                   <span class="comment">/* Fifty, not fifty-zero */</span>
<a name="l04626"></a>04626                   <span class="keywordflow">if</span> (one != 0) {
<a name="l04627"></a>04627                      snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, one);
<a name="l04628"></a>04628                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04629"></a>04629                   }
<a name="l04630"></a>04630                }
<a name="l04631"></a>04631             }
<a name="l04632"></a>04632             <span class="keywordflow">break</span>;
<a name="l04633"></a>04633          <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l04634"></a>04634             res = <a class="code" href="say_8c.html#a100824ee16949d59a2d401d5ef36a4e8">ast_say_date_with_format_es</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l04635"></a>04635             <span class="keywordflow">break</span>;
<a name="l04636"></a>04636          <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l04637"></a>04637          <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l04638"></a>04638             <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l04639"></a>04639             <span class="keywordflow">break</span>;
<a name="l04640"></a>04640          <span class="keywordflow">default</span>:
<a name="l04641"></a>04641             <span class="comment">/* Unknown character */</span>
<a name="l04642"></a>04642             <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l04643"></a>04643       }
<a name="l04644"></a>04644       <span class="comment">/* Jump out on DTMF */</span>
<a name="l04645"></a>04645       <span class="keywordflow">if</span> (res) {
<a name="l04646"></a>04646          <span class="keywordflow">break</span>;
<a name="l04647"></a>04647       }
<a name="l04648"></a>04648    }
<a name="l04649"></a>04649    <span class="keywordflow">return</span> res;
<a name="l04650"></a>04650 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a08d7b66004fdb5bbd2f3dcce332a20e9"></a><!-- doxytag: member="say.c::ast_say_date_with_format_fr" ref="a08d7b66004fdb5bbd2f3dcce332a20e9" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_with_format_fr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l04655">4655</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l04656"></a>04656 {
<a name="l04657"></a>04657    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l04658"></a>04658    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l04659"></a>04659    <span class="keywordtype">int</span> res=0, offset, sndoffset;
<a name="l04660"></a>04660    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l04661"></a>04661 
<a name="l04662"></a>04662    <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> == NULL)
<a name="l04663"></a>04663       <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> = <span class="stringliteral">&quot;AdBY &apos;digits/at&apos; IMp&quot;</span>;
<a name="l04664"></a>04664 
<a name="l04665"></a>04665    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l04666"></a>04666 
<a name="l04667"></a>04667    <span class="keywordflow">for</span> (offset=0 ; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span> ; offset++) {
<a name="l04668"></a>04668       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l04669"></a>04669       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l04670"></a>04670          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l04671"></a>04671          <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l04672"></a>04672             <span class="comment">/* Literal name of a sound file */</span>
<a name="l04673"></a>04673             <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l04674"></a>04674                sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l04675"></a>04675             }
<a name="l04676"></a>04676             sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l04677"></a>04677             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, sndfile, lang);
<a name="l04678"></a>04678             <span class="keywordflow">break</span>;
<a name="l04679"></a>04679          <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l04680"></a>04680          <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l04681"></a>04681             <span class="comment">/* Sunday - Saturday */</span>
<a name="l04682"></a>04682             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l04683"></a>04683             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04684"></a>04684             <span class="keywordflow">break</span>;
<a name="l04685"></a>04685          <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l04686"></a>04686          <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l04687"></a>04687          <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l04688"></a>04688             <span class="comment">/* January - December */</span>
<a name="l04689"></a>04689             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l04690"></a>04690             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04691"></a>04691             <span class="keywordflow">break</span>;
<a name="l04692"></a>04692          <span class="keywordflow">case</span> <span class="charliteral">&apos;m&apos;</span>:
<a name="l04693"></a>04693             <span class="comment">/* First - Twelfth */</span>
<a name="l04694"></a>04694             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/h-%d&quot;</span>, tm.tm_mon +1);
<a name="l04695"></a>04695             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04696"></a>04696             <span class="keywordflow">break</span>;
<a name="l04697"></a>04697          <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l04698"></a>04698          <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l04699"></a>04699             <span class="comment">/* First */</span>
<a name="l04700"></a>04700             <span class="keywordflow">if</span> (tm.tm_mday == 1) {
<a name="l04701"></a>04701                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/h-%d&quot;</span>, tm.tm_mday);
<a name="l04702"></a>04702                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04703"></a>04703             } <span class="keywordflow">else</span> {
<a name="l04704"></a>04704                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l04705"></a>04705             }
<a name="l04706"></a>04706             <span class="keywordflow">break</span>;
<a name="l04707"></a>04707          <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>:
<a name="l04708"></a>04708             <span class="comment">/* Year */</span>
<a name="l04709"></a>04709             <span class="keywordflow">if</span> (tm.tm_year &gt; 99) {
<a name="l04710"></a>04710                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/2&quot;</span>, lang);
<a name="l04711"></a>04711                <span class="keywordflow">if</span> (!res) {
<a name="l04712"></a>04712                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/thousand&quot;</span>, lang);
<a name="l04713"></a>04713                }
<a name="l04714"></a>04714                <span class="keywordflow">if</span> (tm.tm_year &gt; 100) {
<a name="l04715"></a>04715                   <span class="keywordflow">if</span> (!res) {
<a name="l04716"></a>04716                      res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year - 100, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l04717"></a>04717                   }
<a name="l04718"></a>04718                }
<a name="l04719"></a>04719             } <span class="keywordflow">else</span> {
<a name="l04720"></a>04720                <span class="keywordflow">if</span> (tm.tm_year &lt; 1) {
<a name="l04721"></a>04721                   <span class="comment">/* I&apos;m not going to handle 1900 and prior */</span>
<a name="l04722"></a>04722                   <span class="comment">/* We&apos;ll just be silent on the year, instead of bombing out. */</span>
<a name="l04723"></a>04723                } <span class="keywordflow">else</span> {
<a name="l04724"></a>04724                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/thousand&quot;</span>, lang);
<a name="l04725"></a>04725                   <span class="keywordflow">if</span> (!res) {
<a name="l04726"></a>04726                      <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/9&quot;</span>, lang);
<a name="l04727"></a>04727                      <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/hundred&quot;</span>, lang);
<a name="l04728"></a>04728                      res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l04729"></a>04729                   }
<a name="l04730"></a>04730                }
<a name="l04731"></a>04731             }
<a name="l04732"></a>04732             <span class="keywordflow">break</span>;
<a name="l04733"></a>04733          <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l04734"></a>04734          <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>:
<a name="l04735"></a>04735             <span class="comment">/* 12-Hour */</span>
<a name="l04736"></a>04736             <span class="keywordflow">if</span> (tm.tm_hour == 0)
<a name="l04737"></a>04737                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/12&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l04738"></a>04738             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour &gt; 12)
<a name="l04739"></a>04739                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour - 12);
<a name="l04740"></a>04740             <span class="keywordflow">else</span>
<a name="l04741"></a>04741                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour);
<a name="l04742"></a>04742             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04743"></a>04743             <span class="keywordflow">if</span> (!res)
<a name="l04744"></a>04744                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l04745"></a>04745             <span class="keywordflow">break</span>;
<a name="l04746"></a>04746          <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l04747"></a>04747          <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>:
<a name="l04748"></a>04748             <span class="comment">/* 24-Hour */</span>
<a name="l04749"></a>04749             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l04750"></a>04750             <span class="keywordflow">if</span> (!res)
<a name="l04751"></a>04751                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l04752"></a>04752             <span class="keywordflow">break</span>;
<a name="l04753"></a>04753          <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l04754"></a>04754             <span class="comment">/* Minute */</span>
<a name="l04755"></a>04755             <span class="keywordflow">if</span> (tm.tm_min == 0) {
<a name="l04756"></a>04756                <span class="keywordflow">break</span>;
<a name="l04757"></a>04757             }
<a name="l04758"></a>04758             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l04759"></a>04759             <span class="keywordflow">break</span>;
<a name="l04760"></a>04760          <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l04761"></a>04761          <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l04762"></a>04762             <span class="comment">/* AM/PM */</span>
<a name="l04763"></a>04763             <span class="keywordflow">if</span> (tm.tm_hour &gt; 11)
<a name="l04764"></a>04764                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/p-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l04765"></a>04765             <span class="keywordflow">else</span>
<a name="l04766"></a>04766                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/a-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l04767"></a>04767             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04768"></a>04768             <span class="keywordflow">break</span>;
<a name="l04769"></a>04769          <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l04770"></a>04770             <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or AdBY */</span>
<a name="l04771"></a>04771             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l04772"></a>04772 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l04773"></a>04773 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l04774"></a>04774             {
<a name="l04775"></a>04775                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l04776"></a>04776                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l04777"></a>04777                time_t beg_today;
<a name="l04778"></a>04778 
<a name="l04779"></a>04779                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l04780"></a>04780                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l04781"></a>04781                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l04782"></a>04782                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l04783"></a>04783                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l04784"></a>04784                   <span class="comment">/* Today */</span>
<a name="l04785"></a>04785                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l04786"></a>04786                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; t) {
<a name="l04787"></a>04787                   <span class="comment">/* Yesterday */</span>
<a name="l04788"></a>04788                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l04789"></a>04789                } <span class="keywordflow">else</span> {
<a name="l04790"></a>04790                   res = <a class="code" href="say_8c.html#a08d7b66004fdb5bbd2f3dcce332a20e9">ast_say_date_with_format_fr</a>(chan, t, ints, lang, <span class="stringliteral">&quot;AdBY&quot;</span>, tzone);
<a name="l04791"></a>04791                }
<a name="l04792"></a>04792             }
<a name="l04793"></a>04793             <span class="keywordflow">break</span>;
<a name="l04794"></a>04794          <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l04795"></a>04795             <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A (weekday), or AdBY */</span>
<a name="l04796"></a>04796             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l04797"></a>04797 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l04798"></a>04798 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l04799"></a>04799             {
<a name="l04800"></a>04800                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l04801"></a>04801                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l04802"></a>04802                time_t beg_today;
<a name="l04803"></a>04803 
<a name="l04804"></a>04804                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l04805"></a>04805                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l04806"></a>04806                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l04807"></a>04807                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l04808"></a>04808                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l04809"></a>04809                   <span class="comment">/* Today */</span>
<a name="l04810"></a>04810                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((beg_today - 86400) &lt; t) {
<a name="l04811"></a>04811                   <span class="comment">/* Yesterday */</span>
<a name="l04812"></a>04812                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l04813"></a>04813                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l04814"></a>04814                   <span class="comment">/* Within the last week */</span>
<a name="l04815"></a>04815                   res = <a class="code" href="say_8c.html#a08d7b66004fdb5bbd2f3dcce332a20e9">ast_say_date_with_format_fr</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l04816"></a>04816                } <span class="keywordflow">else</span> {
<a name="l04817"></a>04817                   res = <a class="code" href="say_8c.html#a08d7b66004fdb5bbd2f3dcce332a20e9">ast_say_date_with_format_fr</a>(chan, t, ints, lang, <span class="stringliteral">&quot;AdBY&quot;</span>, tzone);
<a name="l04818"></a>04818                }
<a name="l04819"></a>04819             }
<a name="l04820"></a>04820             <span class="keywordflow">break</span>;
<a name="l04821"></a>04821          <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l04822"></a>04822             res = <a class="code" href="say_8c.html#a08d7b66004fdb5bbd2f3dcce332a20e9">ast_say_date_with_format_fr</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HM&quot;</span>, tzone);
<a name="l04823"></a>04823             <span class="keywordflow">break</span>;
<a name="l04824"></a>04824          <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>:
<a name="l04825"></a>04825             <span class="comment">/* Seconds */</span>
<a name="l04826"></a>04826             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_sec, ints, lang, (<span class="keywordtype">char</span> * ) NULL);
<a name="l04827"></a>04827             <span class="keywordflow">if</span> (!res) {
<a name="l04828"></a>04828                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/second&quot;</span>, lang);
<a name="l04829"></a>04829             }
<a name="l04830"></a>04830             <span class="keywordflow">break</span>;
<a name="l04831"></a>04831          <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l04832"></a>04832             res = <a class="code" href="say_8c.html#a08d7b66004fdb5bbd2f3dcce332a20e9">ast_say_date_with_format_fr</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l04833"></a>04833             <span class="keywordflow">break</span>;
<a name="l04834"></a>04834          <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l04835"></a>04835          <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l04836"></a>04836             <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l04837"></a>04837             <span class="keywordflow">break</span>;
<a name="l04838"></a>04838          <span class="keywordflow">default</span>:
<a name="l04839"></a>04839             <span class="comment">/* Unknown character */</span>
<a name="l04840"></a>04840             <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l04841"></a>04841       }
<a name="l04842"></a>04842       <span class="comment">/* Jump out on DTMF */</span>
<a name="l04843"></a>04843       <span class="keywordflow">if</span> (res) {
<a name="l04844"></a>04844          <span class="keywordflow">break</span>;
<a name="l04845"></a>04845       }
<a name="l04846"></a>04846    }
<a name="l04847"></a>04847    <span class="keywordflow">return</span> res;
<a name="l04848"></a>04848 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aad88a3dda8e3e4e1c49eaa4d675577fb"></a><!-- doxytag: member="say.c::ast_say_date_with_format_gr" ref="aad88a3dda8e3e4e1c49eaa4d675577fb" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_date_with_format_gr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07283">7283</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="say_8c_source.html#l07079">ast_say_number_full_gr()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="say_8c_source.html#l07033">gr_say_number_female()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07284"></a>07284 {
<a name="l07285"></a>07285    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l07286"></a>07286    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l07287"></a>07287    <span class="keywordtype">int</span> res=0, offset, sndoffset;
<a name="l07288"></a>07288    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l07289"></a>07289 
<a name="l07290"></a>07290    <span class="keywordflow">if</span> (!<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>)
<a name="l07291"></a>07291       <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> = <span class="stringliteral">&quot;AdBY &apos;digits/at&apos; IMp&quot;</span>;
<a name="l07292"></a>07292 
<a name="l07293"></a>07293    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l07294"></a>07294    
<a name="l07295"></a>07295    <span class="keywordflow">for</span> (offset=0 ; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span> ; offset++) {
<a name="l07296"></a>07296       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l07297"></a>07297       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l07298"></a>07298          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l07299"></a>07299       <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l07300"></a>07300          <span class="comment">/* Literal name of a sound file */</span>
<a name="l07301"></a>07301          <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l07302"></a>07302             sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l07303"></a>07303          }
<a name="l07304"></a>07304          sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l07305"></a>07305          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, sndfile, lang);
<a name="l07306"></a>07306          <span class="keywordflow">break</span>;
<a name="l07307"></a>07307       <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l07308"></a>07308       <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l07309"></a>07309          <span class="comment">/* Sunday - Saturday */</span>
<a name="l07310"></a>07310          snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l07311"></a>07311          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l07312"></a>07312          <span class="keywordflow">break</span>;
<a name="l07313"></a>07313       <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l07314"></a>07314       <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l07315"></a>07315       <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l07316"></a>07316          <span class="comment">/* January - December */</span>
<a name="l07317"></a>07317          snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l07318"></a>07318          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l07319"></a>07319          <span class="keywordflow">break</span>;
<a name="l07320"></a>07320       <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l07321"></a>07321       <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l07322"></a>07322          <span class="comment">/* first - thirtyfirst */</span>
<a name="l07323"></a>07323          <a class="code" href="say_8c.html#a1ac32f4ca37eaea55e69c5189617da16">gr_say_number_female</a>(tm.tm_mday, chan, ints, lang);
<a name="l07324"></a>07324          <span class="keywordflow">break</span>;
<a name="l07325"></a>07325       <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>:
<a name="l07326"></a>07326          <span class="comment">/* Year */</span>
<a name="l07327"></a>07327          
<a name="l07328"></a>07328          <a class="code" href="say_8c.html#ac16b9b35bdddf06b7fe0c347120adf37">ast_say_number_full_gr</a>(chan, 1900+tm.tm_year, ints, chan-&gt;language, -1, -1);
<a name="l07329"></a>07329          <span class="keywordflow">break</span>;
<a name="l07330"></a>07330       <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l07331"></a>07331       <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>:
<a name="l07332"></a>07332          <span class="comment">/* 12-Hour */</span>
<a name="l07333"></a>07333          <span class="keywordflow">if</span> (tm.tm_hour == 0)
<a name="l07334"></a>07334             <a class="code" href="say_8c.html#a1ac32f4ca37eaea55e69c5189617da16">gr_say_number_female</a>(12, chan, ints, lang);
<a name="l07335"></a>07335          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour &gt; 12)
<a name="l07336"></a>07336             <a class="code" href="say_8c.html#a1ac32f4ca37eaea55e69c5189617da16">gr_say_number_female</a>(tm.tm_hour - 12, chan, ints, lang);
<a name="l07337"></a>07337          <span class="keywordflow">else</span>
<a name="l07338"></a>07338             <a class="code" href="say_8c.html#a1ac32f4ca37eaea55e69c5189617da16">gr_say_number_female</a>(tm.tm_hour, chan, ints, lang);
<a name="l07339"></a>07339          <span class="keywordflow">break</span>;
<a name="l07340"></a>07340       <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l07341"></a>07341       <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>:
<a name="l07342"></a>07342          <span class="comment">/* 24-Hour */</span>
<a name="l07343"></a>07343          <a class="code" href="say_8c.html#a1ac32f4ca37eaea55e69c5189617da16">gr_say_number_female</a>(tm.tm_hour, chan, ints, lang);
<a name="l07344"></a>07344          <span class="keywordflow">break</span>;
<a name="l07345"></a>07345       <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l07346"></a>07346          <span class="comment">/* Minute */</span>
<a name="l07347"></a>07347          <span class="keywordflow">if</span> (tm.tm_min) {
<a name="l07348"></a>07348             <span class="keywordflow">if</span> (!res)
<a name="l07349"></a>07349                res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/kai&quot;</span>, lang);
<a name="l07350"></a>07350             <span class="keywordflow">if</span> (!res)
<a name="l07351"></a>07351                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07352"></a>07352             <span class="keywordflow">if</span> (!res)
<a name="l07353"></a>07353                res = <a class="code" href="say_8c.html#ac16b9b35bdddf06b7fe0c347120adf37">ast_say_number_full_gr</a>(chan, tm.tm_min, ints, lang, -1, -1);
<a name="l07354"></a>07354          } <span class="keywordflow">else</span> {
<a name="l07355"></a>07355             <span class="keywordflow">if</span> (!res)
<a name="l07356"></a>07356                res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l07357"></a>07357             <span class="keywordflow">if</span> (!res)
<a name="l07358"></a>07358                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07359"></a>07359          }
<a name="l07360"></a>07360          <span class="keywordflow">break</span>;
<a name="l07361"></a>07361       <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l07362"></a>07362       <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l07363"></a>07363          <span class="comment">/* AM/PM */</span>
<a name="l07364"></a>07364          <span class="keywordflow">if</span> (tm.tm_hour &gt; 11)
<a name="l07365"></a>07365             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/p-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l07366"></a>07366          <span class="keywordflow">else</span>
<a name="l07367"></a>07367             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/a-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l07368"></a>07368          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l07369"></a>07369          <span class="keywordflow">break</span>;
<a name="l07370"></a>07370       <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l07371"></a>07371          <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or ABdY */</span>
<a name="l07372"></a>07372             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l07373"></a>07373 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l07374"></a>07374 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l07375"></a>07375          {
<a name="l07376"></a>07376             <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l07377"></a>07377             <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l07378"></a>07378             time_t beg_today;
<a name="l07379"></a>07379             
<a name="l07380"></a>07380             <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l07381"></a>07381             <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l07382"></a>07382             <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l07383"></a>07383             beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l07384"></a>07384             <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l07385"></a>07385                <span class="comment">/* Today */</span>
<a name="l07386"></a>07386                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l07387"></a>07387             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; t) {
<a name="l07388"></a>07388                <span class="comment">/* Yesterday */</span>
<a name="l07389"></a>07389                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l07390"></a>07390             } <span class="keywordflow">else</span> {
<a name="l07391"></a>07391                res = <a class="code" href="say_8c.html#aad88a3dda8e3e4e1c49eaa4d675577fb">ast_say_date_with_format_gr</a>(chan, t, ints, lang, <span class="stringliteral">&quot;AdBY&quot;</span>, tzone);
<a name="l07392"></a>07392             }
<a name="l07393"></a>07393          }
<a name="l07394"></a>07394          <span class="keywordflow">break</span>;
<a name="l07395"></a>07395       <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l07396"></a>07396          <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A (weekday), or ABdY */</span>
<a name="l07397"></a>07397             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l07398"></a>07398 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l07399"></a>07399 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l07400"></a>07400          {
<a name="l07401"></a>07401             <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l07402"></a>07402             <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l07403"></a>07403             time_t beg_today;
<a name="l07404"></a>07404             
<a name="l07405"></a>07405             <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l07406"></a>07406             <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l07407"></a>07407             <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l07408"></a>07408             beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l07409"></a>07409             <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l07410"></a>07410                <span class="comment">/* Today */</span>
<a name="l07411"></a>07411             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((beg_today - 86400) &lt; t) {
<a name="l07412"></a>07412                <span class="comment">/* Yesterday */</span>
<a name="l07413"></a>07413                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l07414"></a>07414             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l07415"></a>07415                <span class="comment">/* Within the last week */</span>
<a name="l07416"></a>07416                res = <a class="code" href="say_8c.html#aad88a3dda8e3e4e1c49eaa4d675577fb">ast_say_date_with_format_gr</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l07417"></a>07417             } <span class="keywordflow">else</span> {
<a name="l07418"></a>07418                res = <a class="code" href="say_8c.html#aad88a3dda8e3e4e1c49eaa4d675577fb">ast_say_date_with_format_gr</a>(chan, t, ints, lang, <span class="stringliteral">&quot;AdBY&quot;</span>, tzone);
<a name="l07419"></a>07419             }
<a name="l07420"></a>07420          }
<a name="l07421"></a>07421          <span class="keywordflow">break</span>;
<a name="l07422"></a>07422       <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l07423"></a>07423          res = <a class="code" href="say_8c.html#aad88a3dda8e3e4e1c49eaa4d675577fb">ast_say_date_with_format_gr</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HM&quot;</span>, tzone);
<a name="l07424"></a>07424          <span class="keywordflow">break</span>;
<a name="l07425"></a>07425       <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>:
<a name="l07426"></a>07426          <span class="comment">/* Seconds */</span>
<a name="l07427"></a>07427          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/kai&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l07428"></a>07428          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l07429"></a>07429          <span class="keywordflow">if</span> (!res)
<a name="l07430"></a>07430             res = <a class="code" href="say_8c.html#ac16b9b35bdddf06b7fe0c347120adf37">ast_say_number_full_gr</a>(chan, tm.tm_sec, ints, lang, -1, -1);
<a name="l07431"></a>07431          <span class="keywordflow">if</span> (!res)
<a name="l07432"></a>07432             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/seconds&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l07433"></a>07433          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l07434"></a>07434          <span class="keywordflow">break</span>;
<a name="l07435"></a>07435       <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l07436"></a>07436          res = <a class="code" href="say_8c.html#aad88a3dda8e3e4e1c49eaa4d675577fb">ast_say_date_with_format_gr</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l07437"></a>07437          <span class="keywordflow">break</span>;
<a name="l07438"></a>07438       <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l07439"></a>07439       <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l07440"></a>07440          <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l07441"></a>07441          <span class="keywordflow">break</span>;
<a name="l07442"></a>07442       <span class="keywordflow">default</span>:
<a name="l07443"></a>07443          <span class="comment">/* Unknown character */</span>
<a name="l07444"></a>07444          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l07445"></a>07445       }
<a name="l07446"></a>07446       <span class="comment">/* Jump out on DTMF */</span>
<a name="l07447"></a>07447       <span class="keywordflow">if</span> (res) {
<a name="l07448"></a>07448          <span class="keywordflow">break</span>;
<a name="l07449"></a>07449       }
<a name="l07450"></a>07450    }
<a name="l07451"></a>07451    <span class="keywordflow">return</span> res;
<a name="l07452"></a>07452 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab05d072f242f91f3504cf17f1f0b877b"></a><!-- doxytag: member="say.c::ast_say_date_with_format_he" ref="ab05d072f242f91f3504cf17f1f0b877b" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_with_format_he </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l04322">4322</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="say_8c_source.html#l01217">ast_say_number_full_he()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="say_8c_source.html#l04319">IL_DATE_STR</a>, <a class="el" href="say_8c_source.html#l04321">IL_DATE_STR_FULL</a>, <a class="el" href="say_8c_source.html#l04320">IL_TIME_STR</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l04323"></a>04323 {
<a name="l04324"></a>04324    <span class="comment">/* TODO: This whole function is cut&amp;paste from </span>
<a name="l04325"></a>04325 <span class="comment">    * ast_say_date_with_format_en . Is that considered acceptable?</span>
<a name="l04326"></a>04326 <span class="comment">    **/</span>
<a name="l04327"></a>04327    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l04328"></a>04328    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l04329"></a>04329    <span class="keywordtype">int</span> res = 0, offset, sndoffset;
<a name="l04330"></a>04330    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l04331"></a>04331 
<a name="l04332"></a>04332    <span class="keywordflow">if</span> (!<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>) {
<a name="l04333"></a>04333       <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> = <a class="code" href="say_8c.html#a4090a3c05b11cb894e84742a16f74338">IL_DATE_STR_FULL</a>;
<a name="l04334"></a>04334    }
<a name="l04335"></a>04335 
<a name="l04336"></a>04336    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l04337"></a>04337 
<a name="l04338"></a>04338    <span class="keywordflow">for</span> (offset = 0; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span>; offset++) {
<a name="l04339"></a>04339       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l04340"></a>04340       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l04341"></a>04341          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l04342"></a>04342          <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l04343"></a>04343             <span class="comment">/* Literal name of a sound file */</span>
<a name="l04344"></a>04344             <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l04345"></a>04345                sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l04346"></a>04346             }
<a name="l04347"></a>04347             sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l04348"></a>04348             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, sndfile, lang);
<a name="l04349"></a>04349             <span class="keywordflow">break</span>;
<a name="l04350"></a>04350          <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l04351"></a>04351          <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l04352"></a>04352             <span class="comment">/* Sunday - Saturday */</span>
<a name="l04353"></a>04353             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l04354"></a>04354             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04355"></a>04355             <span class="keywordflow">break</span>;
<a name="l04356"></a>04356          <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l04357"></a>04357          <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l04358"></a>04358          <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l04359"></a>04359             <span class="comment">/* January - December */</span>
<a name="l04360"></a>04360             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l04361"></a>04361             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04362"></a>04362             <span class="keywordflow">break</span>;
<a name="l04363"></a>04363          <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l04364"></a>04364          <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>: <span class="comment">/* Day of the month */</span>
<a name="l04365"></a>04365                                 <span class="comment">/* I&apos;m not sure exactly what the parameters </span>
<a name="l04366"></a>04366 <span class="comment">                                 * audiofd and ctrlfd to </span>
<a name="l04367"></a>04367 <span class="comment">                                 * ast_say_number_full_he mean, but it seems</span>
<a name="l04368"></a>04368 <span class="comment">                                 * safe to pass -1 there. </span>
<a name="l04369"></a>04369 <span class="comment">                                 *</span>
<a name="l04370"></a>04370 <span class="comment">                                 * At least in one of the pathes :-( </span>
<a name="l04371"></a>04371 <span class="comment">                                 */</span>
<a name="l04372"></a>04372             res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, tm.tm_mday, ints, lang, <span class="stringliteral">&quot;m&quot;</span>, -1, -1);
<a name="l04373"></a>04373             <span class="keywordflow">break</span>;
<a name="l04374"></a>04374          <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>: <span class="comment">/* Year */</span>
<a name="l04375"></a>04375             res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, tm.tm_year + 1900, ints, lang, <span class="stringliteral">&quot;f&quot;</span>, -1, -1);
<a name="l04376"></a>04376             <span class="keywordflow">break</span>;
<a name="l04377"></a>04377          <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l04378"></a>04378          <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>: <span class="comment">/* 12-Hour -&gt; we do not support 12 hour based langauges in Hebrew */</span>
<a name="l04379"></a>04379          <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l04380"></a>04380          <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>: <span class="comment">/* 24-Hour */</span>
<a name="l04381"></a>04381             res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, tm.tm_hour, ints, lang, <span class="stringliteral">&quot;f&quot;</span>, -1, -1);
<a name="l04382"></a>04382             <span class="keywordflow">break</span>;
<a name="l04383"></a>04383          <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>: <span class="comment">/* Minute */</span>
<a name="l04384"></a>04384             <span class="keywordflow">if</span> (tm.tm_min &gt;= 0 &amp;&amp; tm.tm_min &lt;= 9)  <span class="comment">/* say a leading zero if needed */</span>
<a name="l04385"></a>04385                res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, 0, ints, lang, <span class="stringliteral">&quot;f&quot;</span>, -1, -1);
<a name="l04386"></a>04386             res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, tm.tm_min, ints, lang, <span class="stringliteral">&quot;f&quot;</span>, -1, -1);
<a name="l04387"></a>04387             <span class="keywordflow">break</span>;
<a name="l04388"></a>04388          <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l04389"></a>04389          <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l04390"></a>04390             <span class="comment">/* AM/PM - There is no AM/PM in Hebrew... */</span>
<a name="l04391"></a>04391             <span class="keywordflow">break</span>;
<a name="l04392"></a>04392          <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l04393"></a>04393             <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or &quot;date&quot; */</span>
<a name="l04394"></a>04394          <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l04395"></a>04395             <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A </span>
<a name="l04396"></a>04396 <span class="comment">             * (weekday), or &quot;date&quot; */</span>
<a name="l04397"></a>04397             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l04398"></a>04398 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l04399"></a>04399 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l04400"></a>04400             {
<a name="l04401"></a>04401                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l04402"></a>04402                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l04403"></a>04403                time_t beg_today;
<a name="l04404"></a>04404                <span class="keywordtype">char</span> todo = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]; <span class="comment">/* The letter to format*/</span>
<a name="l04405"></a>04405 
<a name="l04406"></a>04406                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l04407"></a>04407                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l04408"></a>04408                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l04409"></a>04409                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l04410"></a>04410                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l04411"></a>04411                   <span class="comment">/* Today */</span>
<a name="l04412"></a>04412                   <span class="keywordflow">if</span> (todo == <span class="charliteral">&apos;Q&apos;</span>) {
<a name="l04413"></a>04413                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l04414"></a>04414                   }
<a name="l04415"></a>04415                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; t) {
<a name="l04416"></a>04416                   <span class="comment">/* Yesterday */</span>
<a name="l04417"></a>04417                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l04418"></a>04418                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((todo != <span class="charliteral">&apos;Q&apos;</span>) &amp;&amp; (beg_today - 86400 * 6 &lt; t)) {
<a name="l04419"></a>04419                   <span class="comment">/* Within the last week */</span>
<a name="l04420"></a>04420                   res = <a class="code" href="say_8c.html#ab05d072f242f91f3504cf17f1f0b877b">ast_say_date_with_format_he</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l04421"></a>04421                } <span class="keywordflow">else</span> {
<a name="l04422"></a>04422                   res = <a class="code" href="say_8c.html#ab05d072f242f91f3504cf17f1f0b877b">ast_say_date_with_format_he</a>(chan, t, ints, lang, <a class="code" href="say_8c.html#a0b99cf67059d2eb20698b97e9d497f7c">IL_DATE_STR</a>, tzone);
<a name="l04423"></a>04423                }
<a name="l04424"></a>04424             }
<a name="l04425"></a>04425             <span class="keywordflow">break</span>;
<a name="l04426"></a>04426          <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l04427"></a>04427             res = <a class="code" href="say_8c.html#ab05d072f242f91f3504cf17f1f0b877b">ast_say_date_with_format_he</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HM&quot;</span>, tzone);
<a name="l04428"></a>04428             <span class="keywordflow">break</span>;
<a name="l04429"></a>04429          <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>: <span class="comment">/* Seconds */</span>
<a name="l04430"></a>04430             res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, tm.tm_sec,
<a name="l04431"></a>04431                ints, lang, <span class="stringliteral">&quot;f&quot;</span>, -1, -1
<a name="l04432"></a>04432             );
<a name="l04433"></a>04433             <span class="keywordflow">break</span>;
<a name="l04434"></a>04434          <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l04435"></a>04435             res = <a class="code" href="say_8c.html#ab05d072f242f91f3504cf17f1f0b877b">ast_say_date_with_format_he</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l04436"></a>04436             <span class="keywordflow">break</span>;
<a name="l04437"></a>04437          <span class="comment">/* c, x, and X seem useful for testing. Not sure</span>
<a name="l04438"></a>04438 <span class="comment">          * if they&apos;re good for the general public */</span>
<a name="l04439"></a>04439          <span class="keywordflow">case</span> <span class="charliteral">&apos;c&apos;</span>:
<a name="l04440"></a>04440             res = <a class="code" href="say_8c.html#ab05d072f242f91f3504cf17f1f0b877b">ast_say_date_with_format_he</a>(chan, t, ints, lang, <a class="code" href="say_8c.html#a4090a3c05b11cb894e84742a16f74338">IL_DATE_STR_FULL</a>, tzone);
<a name="l04441"></a>04441             <span class="keywordflow">break</span>;
<a name="l04442"></a>04442          <span class="keywordflow">case</span> <span class="charliteral">&apos;x&apos;</span>:
<a name="l04443"></a>04443             res = <a class="code" href="say_8c.html#ab05d072f242f91f3504cf17f1f0b877b">ast_say_date_with_format_he</a>(chan, t, ints, lang, <a class="code" href="say_8c.html#a0b99cf67059d2eb20698b97e9d497f7c">IL_DATE_STR</a>, tzone);
<a name="l04444"></a>04444             <span class="keywordflow">break</span>;
<a name="l04445"></a>04445          <span class="keywordflow">case</span> <span class="charliteral">&apos;X&apos;</span>: <span class="comment">/* Currently not locale-dependent...*/</span>
<a name="l04446"></a>04446             res = <a class="code" href="say_8c.html#ab05d072f242f91f3504cf17f1f0b877b">ast_say_date_with_format_he</a>(chan, t, ints, lang, <a class="code" href="say_8c.html#a8c2f5a4fc79b2bd58e638be817baa9d8">IL_TIME_STR</a>, tzone);
<a name="l04447"></a>04447             <span class="keywordflow">break</span>;
<a name="l04448"></a>04448          <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l04449"></a>04449          <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l04450"></a>04450             <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l04451"></a>04451             <span class="keywordflow">break</span>;
<a name="l04452"></a>04452          <span class="keywordflow">default</span>:
<a name="l04453"></a>04453             <span class="comment">/* Unknown character */</span>
<a name="l04454"></a>04454             <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l04455"></a>04455       }
<a name="l04456"></a>04456       <span class="comment">/* Jump out on DTMF */</span>
<a name="l04457"></a>04457       <span class="keywordflow">if</span> (res) {
<a name="l04458"></a>04458          <span class="keywordflow">break</span>;
<a name="l04459"></a>04459       }
<a name="l04460"></a>04460    }
<a name="l04461"></a>04461    <span class="keywordflow">return</span> res;
<a name="l04462"></a>04462 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa96c082ebfc847b6df805efa37b6063d"></a><!-- doxytag: member="say.c::ast_say_date_with_format_it" ref="aa96c082ebfc847b6df805efa37b6063d" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_with_format_it </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l04850">4850</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l04851"></a>04851 {
<a name="l04852"></a>04852    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l04853"></a>04853    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l04854"></a>04854    <span class="keywordtype">int</span> res=0, offset, sndoffset;
<a name="l04855"></a>04855    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l04856"></a>04856 
<a name="l04857"></a>04857    <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> == NULL)
<a name="l04858"></a>04858       <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> = <span class="stringliteral">&quot;AdB &apos;digits/at&apos; IMp&quot;</span>;
<a name="l04859"></a>04859 
<a name="l04860"></a>04860    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l04861"></a>04861 
<a name="l04862"></a>04862    <span class="keywordflow">for</span> (offset=0 ; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span> ; offset++) {
<a name="l04863"></a>04863       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l04864"></a>04864       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l04865"></a>04865          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l04866"></a>04866          <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l04867"></a>04867             <span class="comment">/* Literal name of a sound file */</span>
<a name="l04868"></a>04868             <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l04869"></a>04869                sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l04870"></a>04870             }
<a name="l04871"></a>04871             sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l04872"></a>04872             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, sndfile, lang);
<a name="l04873"></a>04873             <span class="keywordflow">break</span>;
<a name="l04874"></a>04874          <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l04875"></a>04875          <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l04876"></a>04876             <span class="comment">/* Sunday - Saturday */</span>
<a name="l04877"></a>04877             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l04878"></a>04878             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04879"></a>04879             <span class="keywordflow">break</span>;
<a name="l04880"></a>04880          <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l04881"></a>04881          <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l04882"></a>04882          <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l04883"></a>04883             <span class="comment">/* January - December */</span>
<a name="l04884"></a>04884             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l04885"></a>04885             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04886"></a>04886             <span class="keywordflow">break</span>;
<a name="l04887"></a>04887          <span class="keywordflow">case</span> <span class="charliteral">&apos;m&apos;</span>:
<a name="l04888"></a>04888             <span class="comment">/* First - Twelfth */</span>
<a name="l04889"></a>04889             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/h-%d&quot;</span>, tm.tm_mon +1);
<a name="l04890"></a>04890             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04891"></a>04891             <span class="keywordflow">break</span>;
<a name="l04892"></a>04892          <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l04893"></a>04893          <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l04894"></a>04894             <span class="comment">/* First day of the month is spelled as ordinal */</span>
<a name="l04895"></a>04895             <span class="keywordflow">if</span> (tm.tm_mday == 1) {
<a name="l04896"></a>04896                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/h-%d&quot;</span>, tm.tm_mday);
<a name="l04897"></a>04897                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04898"></a>04898             } <span class="keywordflow">else</span> {
<a name="l04899"></a>04899                <span class="keywordflow">if</span> (!res) {
<a name="l04900"></a>04900                   res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l04901"></a>04901                }
<a name="l04902"></a>04902             }
<a name="l04903"></a>04903             <span class="keywordflow">break</span>;
<a name="l04904"></a>04904          <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>:
<a name="l04905"></a>04905             <span class="comment">/* Year */</span>
<a name="l04906"></a>04906             <span class="keywordflow">if</span> (tm.tm_year &gt; 99) {
<a name="l04907"></a>04907                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/ore-2000&quot;</span>, lang);
<a name="l04908"></a>04908                <span class="keywordflow">if</span> (tm.tm_year &gt; 100) {
<a name="l04909"></a>04909                   <span class="keywordflow">if</span> (!res) {
<a name="l04910"></a>04910                   <span class="comment">/* This works until the end of 2021 */</span>
<a name="l04911"></a>04911                   snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_year - 100);
<a name="l04912"></a>04912                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04913"></a>04913                   }
<a name="l04914"></a>04914                }
<a name="l04915"></a>04915             } <span class="keywordflow">else</span> {
<a name="l04916"></a>04916                <span class="keywordflow">if</span> (tm.tm_year &lt; 1) {
<a name="l04917"></a>04917                   <span class="comment">/* I&apos;m not going to handle 1900 and prior */</span>
<a name="l04918"></a>04918                   <span class="comment">/* We&apos;ll just be silent on the year, instead of bombing out. */</span>
<a name="l04919"></a>04919                } <span class="keywordflow">else</span> {
<a name="l04920"></a>04920                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/ore-1900&quot;</span>, lang);
<a name="l04921"></a>04921                   <span class="keywordflow">if</span> ((!res) &amp;&amp; (tm.tm_year != 0)) {
<a name="l04922"></a>04922                      <span class="keywordflow">if</span> (tm.tm_year &lt;= 21) {
<a name="l04923"></a>04923                         <span class="comment">/* 1910 - 1921 */</span>
<a name="l04924"></a>04924                         snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_year);
<a name="l04925"></a>04925                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04926"></a>04926                      } <span class="keywordflow">else</span> {
<a name="l04927"></a>04927                         <span class="comment">/* 1922 - 1999, but sounds badly in 1928, 1931, 1938, etc... */</span>
<a name="l04928"></a>04928                         <span class="keywordtype">int</span> ten, one;
<a name="l04929"></a>04929                         ten = tm.tm_year / 10;
<a name="l04930"></a>04930                         one = tm.tm_year % 10;
<a name="l04931"></a>04931                         snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, ten * 10);
<a name="l04932"></a>04932                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04933"></a>04933                         <span class="keywordflow">if</span> (!res) {
<a name="l04934"></a>04934                            <span class="keywordflow">if</span> (one != 0) {
<a name="l04935"></a>04935                               snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, one);
<a name="l04936"></a>04936                               res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04937"></a>04937                            }
<a name="l04938"></a>04938                         }
<a name="l04939"></a>04939                      }
<a name="l04940"></a>04940                   }
<a name="l04941"></a>04941                }
<a name="l04942"></a>04942             }
<a name="l04943"></a>04943             <span class="keywordflow">break</span>;
<a name="l04944"></a>04944          <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l04945"></a>04945          <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>:
<a name="l04946"></a>04946             <span class="comment">/* 12-Hour */</span>
<a name="l04947"></a>04947             <span class="keywordflow">if</span> (tm.tm_hour == 0)
<a name="l04948"></a>04948                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/12&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l04949"></a>04949             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour &gt; 12)
<a name="l04950"></a>04950                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour - 12);
<a name="l04951"></a>04951             <span class="keywordflow">else</span>
<a name="l04952"></a>04952                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour);
<a name="l04953"></a>04953                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04954"></a>04954             <span class="keywordflow">break</span>;
<a name="l04955"></a>04955          <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l04956"></a>04956          <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>:
<a name="l04957"></a>04957             <span class="comment">/* 24-Hour */</span>
<a name="l04958"></a>04958             <span class="keywordflow">if</span> (tm.tm_hour == 0) {
<a name="l04959"></a>04959                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/ore-mezzanotte&quot;</span>, lang);
<a name="l04960"></a>04960             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour == 1) {
<a name="l04961"></a>04961                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/ore-una&quot;</span>, lang);
<a name="l04962"></a>04962             } <span class="keywordflow">else</span> {
<a name="l04963"></a>04963                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l04964"></a>04964             }
<a name="l04965"></a>04965             <span class="keywordflow">break</span>;
<a name="l04966"></a>04966          <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l04967"></a>04967             <span class="comment">/* Minute */</span>
<a name="l04968"></a>04968             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l04969"></a>04969             <span class="keywordflow">break</span>;
<a name="l04970"></a>04970          <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l04971"></a>04971          <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l04972"></a>04972             <span class="comment">/* AM/PM */</span>
<a name="l04973"></a>04973             <span class="keywordflow">if</span> (tm.tm_hour &gt; 11)
<a name="l04974"></a>04974                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/p-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l04975"></a>04975             <span class="keywordflow">else</span>
<a name="l04976"></a>04976                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/a-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l04977"></a>04977                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04978"></a>04978             <span class="keywordflow">break</span>;
<a name="l04979"></a>04979          <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l04980"></a>04980             <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or ABdY */</span>
<a name="l04981"></a>04981             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l04982"></a>04982 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l04983"></a>04983 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l04984"></a>04984             {
<a name="l04985"></a>04985                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l04986"></a>04986                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l04987"></a>04987                time_t beg_today;
<a name="l04988"></a>04988    
<a name="l04989"></a>04989                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l04990"></a>04990                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l04991"></a>04991                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l04992"></a>04992                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l04993"></a>04993                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l04994"></a>04994                   <span class="comment">/* Today */</span>
<a name="l04995"></a>04995                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l04996"></a>04996                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; t) {
<a name="l04997"></a>04997                   <span class="comment">/* Yesterday */</span>
<a name="l04998"></a>04998                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l04999"></a>04999                } <span class="keywordflow">else</span> {
<a name="l05000"></a>05000                   res = <a class="code" href="say_8c.html#aa96c082ebfc847b6df805efa37b6063d">ast_say_date_with_format_it</a>(chan, t, ints, lang, <span class="stringliteral">&quot;AdB&quot;</span>, tzone);
<a name="l05001"></a>05001                }
<a name="l05002"></a>05002             }
<a name="l05003"></a>05003             <span class="keywordflow">break</span>;
<a name="l05004"></a>05004          <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l05005"></a>05005             <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A (weekday), or ABdY */</span>
<a name="l05006"></a>05006             {
<a name="l05007"></a>05007                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l05008"></a>05008                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l05009"></a>05009                time_t beg_today;
<a name="l05010"></a>05010    
<a name="l05011"></a>05011                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l05012"></a>05012                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l05013"></a>05013                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l05014"></a>05014                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l05015"></a>05015                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l05016"></a>05016                   <span class="comment">/* Today */</span>
<a name="l05017"></a>05017                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((beg_today - 86400) &lt; t) {
<a name="l05018"></a>05018                   <span class="comment">/* Yesterday */</span>
<a name="l05019"></a>05019                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l05020"></a>05020                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l05021"></a>05021                   <span class="comment">/* Within the last week */</span>
<a name="l05022"></a>05022                   res = <a class="code" href="say_8c.html#aa96c082ebfc847b6df805efa37b6063d">ast_say_date_with_format_it</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l05023"></a>05023                } <span class="keywordflow">else</span> {
<a name="l05024"></a>05024                   res = <a class="code" href="say_8c.html#aa96c082ebfc847b6df805efa37b6063d">ast_say_date_with_format_it</a>(chan, t, ints, lang, <span class="stringliteral">&quot;AdB&quot;</span>, tzone);
<a name="l05025"></a>05025                }
<a name="l05026"></a>05026             }
<a name="l05027"></a>05027             <span class="keywordflow">break</span>;
<a name="l05028"></a>05028          <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l05029"></a>05029             res = <a class="code" href="say_8c.html#aa96c082ebfc847b6df805efa37b6063d">ast_say_date_with_format_it</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HM&quot;</span>, tzone);
<a name="l05030"></a>05030             <span class="keywordflow">break</span>;
<a name="l05031"></a>05031          <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>:
<a name="l05032"></a>05032             <span class="comment">/* Seconds */</span>
<a name="l05033"></a>05033             <span class="keywordflow">if</span> (tm.tm_sec == 0) {
<a name="l05034"></a>05034                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec);
<a name="l05035"></a>05035                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05036"></a>05036             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_sec &lt; 10) {
<a name="l05037"></a>05037                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oh&quot;</span>, lang);
<a name="l05038"></a>05038                <span class="keywordflow">if</span> (!res) {
<a name="l05039"></a>05039                   snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec);
<a name="l05040"></a>05040                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05041"></a>05041                }
<a name="l05042"></a>05042             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((tm.tm_sec &lt; 21) || (tm.tm_sec % 10 == 0)) {
<a name="l05043"></a>05043                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec);
<a name="l05044"></a>05044                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05045"></a>05045             } <span class="keywordflow">else</span> {
<a name="l05046"></a>05046                <span class="keywordtype">int</span> ten, one;
<a name="l05047"></a>05047                ten = (tm.tm_sec / 10) * 10;
<a name="l05048"></a>05048                one = (tm.tm_sec % 10);
<a name="l05049"></a>05049                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, ten);
<a name="l05050"></a>05050                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05051"></a>05051                <span class="keywordflow">if</span> (!res) {
<a name="l05052"></a>05052                   <span class="comment">/* Fifty, not fifty-zero */</span>
<a name="l05053"></a>05053                   <span class="keywordflow">if</span> (one != 0) {
<a name="l05054"></a>05054                      snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, one);
<a name="l05055"></a>05055                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05056"></a>05056                   }
<a name="l05057"></a>05057                }
<a name="l05058"></a>05058             }
<a name="l05059"></a>05059               <span class="keywordflow">break</span>;
<a name="l05060"></a>05060          <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l05061"></a>05061             res = <a class="code" href="say_8c.html#aa96c082ebfc847b6df805efa37b6063d">ast_say_date_with_format_it</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l05062"></a>05062             <span class="keywordflow">break</span>;
<a name="l05063"></a>05063          <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l05064"></a>05064          <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l05065"></a>05065             <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l05066"></a>05066             <span class="keywordflow">break</span>;
<a name="l05067"></a>05067          <span class="keywordflow">default</span>:
<a name="l05068"></a>05068             <span class="comment">/* Unknown character */</span>
<a name="l05069"></a>05069             <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l05070"></a>05070       }
<a name="l05071"></a>05071       <span class="comment">/* Jump out on DTMF */</span>
<a name="l05072"></a>05072       <span class="keywordflow">if</span> (res) {
<a name="l05073"></a>05073          <span class="keywordflow">break</span>;
<a name="l05074"></a>05074       }
<a name="l05075"></a>05075    }
<a name="l05076"></a>05076    <span class="keywordflow">return</span> res;
<a name="l05077"></a>05077 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a26c460c2765ec1c9b84e98f29833bb2c"></a><!-- doxytag: member="say.c::ast_say_date_with_format_nl" ref="a26c460c2765ec1c9b84e98f29833bb2c" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_with_format_nl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l05080">5080</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l05081"></a>05081 {
<a name="l05082"></a>05082    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l05083"></a>05083    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l05084"></a>05084    <span class="keywordtype">int</span> res=0, offset, sndoffset;
<a name="l05085"></a>05085    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l05086"></a>05086 
<a name="l05087"></a>05087    <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> == NULL)
<a name="l05088"></a>05088       <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> = <span class="stringliteral">&quot;ABdY &apos;digits/at&apos; IMp&quot;</span>;
<a name="l05089"></a>05089 
<a name="l05090"></a>05090    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l05091"></a>05091 
<a name="l05092"></a>05092    <span class="keywordflow">for</span> (offset=0 ; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span> ; offset++) {
<a name="l05093"></a>05093       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l05094"></a>05094       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l05095"></a>05095          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l05096"></a>05096          <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l05097"></a>05097             <span class="comment">/* Literal name of a sound file */</span>
<a name="l05098"></a>05098             <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l05099"></a>05099                sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l05100"></a>05100             }
<a name="l05101"></a>05101             sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l05102"></a>05102             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, sndfile, lang);
<a name="l05103"></a>05103             <span class="keywordflow">break</span>;
<a name="l05104"></a>05104          <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l05105"></a>05105          <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l05106"></a>05106             <span class="comment">/* Sunday - Saturday */</span>
<a name="l05107"></a>05107             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l05108"></a>05108             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05109"></a>05109             <span class="keywordflow">break</span>;
<a name="l05110"></a>05110          <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l05111"></a>05111          <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l05112"></a>05112          <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l05113"></a>05113             <span class="comment">/* January - December */</span>
<a name="l05114"></a>05114             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l05115"></a>05115             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05116"></a>05116             <span class="keywordflow">break</span>;
<a name="l05117"></a>05117          <span class="keywordflow">case</span> <span class="charliteral">&apos;m&apos;</span>:
<a name="l05118"></a>05118             <span class="comment">/* First - Twelfth */</span>
<a name="l05119"></a>05119             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/h-%d&quot;</span>, tm.tm_mon +1);
<a name="l05120"></a>05120             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05121"></a>05121             <span class="keywordflow">break</span>;
<a name="l05122"></a>05122          <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l05123"></a>05123          <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l05124"></a>05124             <span class="comment">/* First - Thirtyfirst */</span>
<a name="l05125"></a>05125             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, NULL);
<a name="l05126"></a>05126             <span class="keywordflow">break</span>;
<a name="l05127"></a>05127          <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>:
<a name="l05128"></a>05128             <span class="comment">/* Year */</span>
<a name="l05129"></a>05129             <span class="keywordflow">if</span> (tm.tm_year &gt; 99) {
<a name="l05130"></a>05130                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/2&quot;</span>, lang);
<a name="l05131"></a>05131                <span class="keywordflow">if</span> (!res) {
<a name="l05132"></a>05132                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/thousand&quot;</span>, lang);
<a name="l05133"></a>05133                }
<a name="l05134"></a>05134                <span class="keywordflow">if</span> (tm.tm_year &gt; 100) {
<a name="l05135"></a>05135                   <span class="keywordflow">if</span> (!res) {
<a name="l05136"></a>05136                      <span class="comment">/* This works until the end of 2020 */</span>
<a name="l05137"></a>05137                      snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_year - 100);
<a name="l05138"></a>05138                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05139"></a>05139                   }
<a name="l05140"></a>05140                }
<a name="l05141"></a>05141             } <span class="keywordflow">else</span> {
<a name="l05142"></a>05142                <span class="keywordflow">if</span> (tm.tm_year &lt; 1) {
<a name="l05143"></a>05143                   <span class="comment">/* I&apos;m not going to handle 1900 and prior */</span>
<a name="l05144"></a>05144                   <span class="comment">/* We&apos;ll just be silent on the year, instead of bombing out. */</span>
<a name="l05145"></a>05145                } <span class="keywordflow">else</span> {
<a name="l05146"></a>05146                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/19&quot;</span>, lang);
<a name="l05147"></a>05147                   <span class="keywordflow">if</span> (!res) {
<a name="l05148"></a>05148                      <span class="keywordflow">if</span> (tm.tm_year &lt;= 9) {
<a name="l05149"></a>05149                         <span class="comment">/* 1901 - 1909 */</span>
<a name="l05150"></a>05150                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oh&quot;</span>, lang);
<a name="l05151"></a>05151                         <span class="keywordflow">if</span> (!res) {
<a name="l05152"></a>05152                            snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_year);
<a name="l05153"></a>05153                            res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05154"></a>05154                         }
<a name="l05155"></a>05155                      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_year &lt;= 20) {
<a name="l05156"></a>05156                         <span class="comment">/* 1910 - 1920 */</span>
<a name="l05157"></a>05157                         snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_year);
<a name="l05158"></a>05158                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05159"></a>05159                      } <span class="keywordflow">else</span> {
<a name="l05160"></a>05160                         <span class="comment">/* 1921 - 1999 */</span>
<a name="l05161"></a>05161                         <span class="keywordtype">int</span> ten, one;
<a name="l05162"></a>05162                         ten = tm.tm_year / 10;
<a name="l05163"></a>05163                         one = tm.tm_year % 10;
<a name="l05164"></a>05164                         snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, ten * 10);
<a name="l05165"></a>05165                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05166"></a>05166                         <span class="keywordflow">if</span> (!res) {
<a name="l05167"></a>05167                            <span class="keywordflow">if</span> (one != 0) {
<a name="l05168"></a>05168                               snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, one);
<a name="l05169"></a>05169                               res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05170"></a>05170                            }
<a name="l05171"></a>05171                         }
<a name="l05172"></a>05172                      }
<a name="l05173"></a>05173                   }
<a name="l05174"></a>05174                }
<a name="l05175"></a>05175             }
<a name="l05176"></a>05176             <span class="keywordflow">break</span>;
<a name="l05177"></a>05177          <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l05178"></a>05178          <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>:
<a name="l05179"></a>05179             <span class="comment">/* 12-Hour */</span>
<a name="l05180"></a>05180             <span class="keywordflow">if</span> (tm.tm_hour == 0)
<a name="l05181"></a>05181                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/12&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l05182"></a>05182             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour &gt; 12)
<a name="l05183"></a>05183                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour - 12);
<a name="l05184"></a>05184             <span class="keywordflow">else</span>
<a name="l05185"></a>05185                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour);
<a name="l05186"></a>05186             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05187"></a>05187             <span class="keywordflow">break</span>;
<a name="l05188"></a>05188          <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l05189"></a>05189          <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>:
<a name="l05190"></a>05190             <span class="comment">/* 24-Hour */</span>
<a name="l05191"></a>05191             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l05192"></a>05192             <span class="keywordflow">if</span> (!res) {
<a name="l05193"></a>05193                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/nl-uur&quot;</span>, lang);
<a name="l05194"></a>05194             }
<a name="l05195"></a>05195             <span class="keywordflow">break</span>;
<a name="l05196"></a>05196          <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l05197"></a>05197             <span class="comment">/* Minute */</span>
<a name="l05198"></a>05198             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l05199"></a>05199             <span class="keywordflow">break</span>;
<a name="l05200"></a>05200          <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l05201"></a>05201          <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l05202"></a>05202             <span class="comment">/* AM/PM */</span>
<a name="l05203"></a>05203             <span class="keywordflow">if</span> (tm.tm_hour &gt; 11)
<a name="l05204"></a>05204                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/p-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l05205"></a>05205             <span class="keywordflow">else</span>
<a name="l05206"></a>05206                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/a-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l05207"></a>05207             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05208"></a>05208             <span class="keywordflow">break</span>;
<a name="l05209"></a>05209          <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l05210"></a>05210             <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or ABdY */</span>
<a name="l05211"></a>05211             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l05212"></a>05212 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l05213"></a>05213 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l05214"></a>05214             {
<a name="l05215"></a>05215                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l05216"></a>05216                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l05217"></a>05217                time_t beg_today;
<a name="l05218"></a>05218 
<a name="l05219"></a>05219                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l05220"></a>05220                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l05221"></a>05221                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l05222"></a>05222                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l05223"></a>05223                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l05224"></a>05224                   <span class="comment">/* Today */</span>
<a name="l05225"></a>05225                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l05226"></a>05226                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; t) {
<a name="l05227"></a>05227                   <span class="comment">/* Yesterday */</span>
<a name="l05228"></a>05228                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l05229"></a>05229                } <span class="keywordflow">else</span> {
<a name="l05230"></a>05230                   res = <a class="code" href="say_8c.html#a26c460c2765ec1c9b84e98f29833bb2c">ast_say_date_with_format_nl</a>(chan, t, ints, lang, <span class="stringliteral">&quot;ABdY&quot;</span>, tzone);
<a name="l05231"></a>05231                }
<a name="l05232"></a>05232             }
<a name="l05233"></a>05233             <span class="keywordflow">break</span>;
<a name="l05234"></a>05234          <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l05235"></a>05235             <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A (weekday), or ABdY */</span>
<a name="l05236"></a>05236             {
<a name="l05237"></a>05237                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l05238"></a>05238                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l05239"></a>05239                time_t beg_today;
<a name="l05240"></a>05240 
<a name="l05241"></a>05241                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l05242"></a>05242                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l05243"></a>05243                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l05244"></a>05244                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l05245"></a>05245                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l05246"></a>05246                   <span class="comment">/* Today */</span>
<a name="l05247"></a>05247                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((beg_today - 86400) &lt; t) {
<a name="l05248"></a>05248                   <span class="comment">/* Yesterday */</span>
<a name="l05249"></a>05249                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l05250"></a>05250                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l05251"></a>05251                   <span class="comment">/* Within the last week */</span>
<a name="l05252"></a>05252                   res = <a class="code" href="say_8c.html#a26c460c2765ec1c9b84e98f29833bb2c">ast_say_date_with_format_nl</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l05253"></a>05253                } <span class="keywordflow">else</span> {
<a name="l05254"></a>05254                   res = <a class="code" href="say_8c.html#a26c460c2765ec1c9b84e98f29833bb2c">ast_say_date_with_format_nl</a>(chan, t, ints, lang, <span class="stringliteral">&quot;ABdY&quot;</span>, tzone);
<a name="l05255"></a>05255                }
<a name="l05256"></a>05256             }
<a name="l05257"></a>05257             <span class="keywordflow">break</span>;
<a name="l05258"></a>05258          <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l05259"></a>05259             res = <a class="code" href="say_8c.html#a26c460c2765ec1c9b84e98f29833bb2c">ast_say_date_with_format_nl</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HM&quot;</span>, tzone);
<a name="l05260"></a>05260             <span class="keywordflow">break</span>;
<a name="l05261"></a>05261          <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>:
<a name="l05262"></a>05262             <span class="comment">/* Seconds */</span>
<a name="l05263"></a>05263             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_sec, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l05264"></a>05264             <span class="keywordflow">break</span>;
<a name="l05265"></a>05265          <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l05266"></a>05266             res = <a class="code" href="say_8c.html#a26c460c2765ec1c9b84e98f29833bb2c">ast_say_date_with_format_nl</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l05267"></a>05267             <span class="keywordflow">break</span>;
<a name="l05268"></a>05268          <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l05269"></a>05269          <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l05270"></a>05270             <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l05271"></a>05271             <span class="keywordflow">break</span>;
<a name="l05272"></a>05272          <span class="keywordflow">default</span>:
<a name="l05273"></a>05273             <span class="comment">/* Unknown character */</span>
<a name="l05274"></a>05274             <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l05275"></a>05275       }
<a name="l05276"></a>05276       <span class="comment">/* Jump out on DTMF */</span>
<a name="l05277"></a>05277       <span class="keywordflow">if</span> (res) {
<a name="l05278"></a>05278          <span class="keywordflow">break</span>;
<a name="l05279"></a>05279       }
<a name="l05280"></a>05280    }
<a name="l05281"></a>05281    <span class="keywordflow">return</span> res;
<a name="l05282"></a>05282 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0181ffcc431bd141412a0057d13f28b7"></a><!-- doxytag: member="say.c::ast_say_date_with_format_pl" ref="a0181ffcc431bd141412a0057d13f28b7" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_with_format_pl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l05285">5285</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="say_8h.html#aeb81fb9f912659f3e8de0d7d931eb372">ast_say_date_with_format</a>, <a class="el" href="channel_8c_source.html#l05821">ast_say_enumeration()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l05286"></a>05286 {
<a name="l05287"></a>05287    <span class="keyword">struct </span>timeval when = { thetime, 0 };
<a name="l05288"></a>05288    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l05289"></a>05289    <span class="keywordtype">int</span> res=0, offset, sndoffset;
<a name="l05290"></a>05290    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l05291"></a>05291 
<a name="l05292"></a>05292    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l05293"></a>05293 
<a name="l05294"></a>05294    <span class="keywordflow">for</span> (offset = 0 ; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span> ; offset++) {
<a name="l05295"></a>05295       <span class="keywordtype">int</span> remaining;
<a name="l05296"></a>05296       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l05297"></a>05297       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l05298"></a>05298          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l05299"></a>05299          <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l05300"></a>05300             <span class="comment">/* Literal name of a sound file */</span>
<a name="l05301"></a>05301             <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l05302"></a>05302                sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l05303"></a>05303             }
<a name="l05304"></a>05304             sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l05305"></a>05305             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, sndfile, lang);
<a name="l05306"></a>05306             <span class="keywordflow">break</span>;
<a name="l05307"></a>05307          <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l05308"></a>05308          <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l05309"></a>05309             <span class="comment">/* Sunday - Saturday */</span>
<a name="l05310"></a>05310             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l05311"></a>05311             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05312"></a>05312             <span class="keywordflow">break</span>;
<a name="l05313"></a>05313          <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l05314"></a>05314          <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l05315"></a>05315          <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l05316"></a>05316             <span class="comment">/* January - December */</span>
<a name="l05317"></a>05317             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l05318"></a>05318             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05319"></a>05319             <span class="keywordflow">break</span>;
<a name="l05320"></a>05320          <span class="keywordflow">case</span> <span class="charliteral">&apos;m&apos;</span>:
<a name="l05321"></a>05321             <span class="comment">/* Month enumerated */</span>
<a name="l05322"></a>05322             res = <a class="code" href="say_8h.html#ab309c99a25580d4f8964756d2ec1f279" title="says an enumeration">ast_say_enumeration</a>(chan, (tm.tm_mon + 1), ints, lang, NULL);
<a name="l05323"></a>05323             <span class="keywordflow">break</span>;
<a name="l05324"></a>05324          <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l05325"></a>05325          <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l05326"></a>05326             <span class="comment">/* First - Thirtyfirst */</span>
<a name="l05327"></a>05327             remaining = tm.tm_mday;
<a name="l05328"></a>05328             <span class="keywordflow">if</span> (tm.tm_mday &gt; 30) {
<a name="l05329"></a>05329                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/h-30&quot;</span>, lang);
<a name="l05330"></a>05330                remaining -= 30;
<a name="l05331"></a>05331             }
<a name="l05332"></a>05332             <span class="keywordflow">if</span> (tm.tm_mday &gt; 20 &amp;&amp; tm.tm_mday &lt; 30) {
<a name="l05333"></a>05333                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/h-20&quot;</span>, lang);
<a name="l05334"></a>05334                remaining -= 20;
<a name="l05335"></a>05335             }
<a name="l05336"></a>05336             <span class="keywordflow">if</span> (!res) {
<a name="l05337"></a>05337                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/h-%d&quot;</span>, remaining);
<a name="l05338"></a>05338                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05339"></a>05339             }
<a name="l05340"></a>05340             <span class="keywordflow">break</span>;
<a name="l05341"></a>05341          <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>:
<a name="l05342"></a>05342             <span class="comment">/* Year */</span>
<a name="l05343"></a>05343             <span class="keywordflow">if</span> (tm.tm_year &gt; 100) {
<a name="l05344"></a>05344                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/2&quot;</span>, lang);
<a name="l05345"></a>05345                <span class="keywordflow">if</span> (!res)
<a name="l05346"></a>05346                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/1000.2&quot;</span>, lang);
<a name="l05347"></a>05347                <span class="keywordflow">if</span> (tm.tm_year &gt; 100) {
<a name="l05348"></a>05348                   <span class="keywordflow">if</span> (!res)
<a name="l05349"></a>05349                      res = <a class="code" href="say_8h.html#ab309c99a25580d4f8964756d2ec1f279" title="says an enumeration">ast_say_enumeration</a>(chan, tm.tm_year - 100, ints, lang, NULL);
<a name="l05350"></a>05350                }
<a name="l05351"></a>05351             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_year == 100) {
<a name="l05352"></a>05352                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/h-2000&quot;</span>, lang);
<a name="l05353"></a>05353             } <span class="keywordflow">else</span> {
<a name="l05354"></a>05354                <span class="keywordflow">if</span> (tm.tm_year &lt; 1) {
<a name="l05355"></a>05355                   <span class="comment">/* I&apos;m not going to handle 1900 and prior */</span>
<a name="l05356"></a>05356                   <span class="comment">/* We&apos;ll just be silent on the year, instead of bombing out. */</span>
<a name="l05357"></a>05357                   <span class="keywordflow">break</span>;
<a name="l05358"></a>05358                } <span class="keywordflow">else</span> {
<a name="l05359"></a>05359                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/1000&quot;</span>, lang);
<a name="l05360"></a>05360                   <span class="keywordflow">if</span> (!res) {
<a name="l05361"></a>05361                      <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/900&quot;</span>, lang);
<a name="l05362"></a>05362                      res = <a class="code" href="say_8h.html#ab309c99a25580d4f8964756d2ec1f279" title="says an enumeration">ast_say_enumeration</a>(chan, tm.tm_year, ints, lang, NULL);
<a name="l05363"></a>05363                   }
<a name="l05364"></a>05364                }
<a name="l05365"></a>05365             }
<a name="l05366"></a>05366             <span class="keywordflow">if</span> (!res)
<a name="l05367"></a>05367                <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/year&quot;</span>, lang);
<a name="l05368"></a>05368             <span class="keywordflow">break</span>;
<a name="l05369"></a>05369          <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l05370"></a>05370          <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>:
<a name="l05371"></a>05371             <span class="comment">/* 12-Hour */</span>
<a name="l05372"></a>05372             <span class="keywordflow">if</span> (tm.tm_hour == 0)
<a name="l05373"></a>05373                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/t-12&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l05374"></a>05374             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour &gt; 12)
<a name="l05375"></a>05375                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/t-%d&quot;</span>, tm.tm_hour - 12);
<a name="l05376"></a>05376             <span class="keywordflow">else</span> 
<a name="l05377"></a>05377                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/t-%d&quot;</span>, tm.tm_hour);
<a name="l05378"></a>05378 
<a name="l05379"></a>05379             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05380"></a>05380             <span class="keywordflow">break</span>;
<a name="l05381"></a>05381          <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l05382"></a>05382          <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>:
<a name="l05383"></a>05383             <span class="comment">/* 24-Hour */</span>
<a name="l05384"></a>05384             <span class="keywordflow">if</span> (tm.tm_hour != 0) {
<a name="l05385"></a>05385                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/t-%d&quot;</span>, tm.tm_hour);
<a name="l05386"></a>05386                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05387"></a>05387             } <span class="keywordflow">else</span> 
<a name="l05388"></a>05388                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/t-24&quot;</span>, lang);
<a name="l05389"></a>05389             <span class="keywordflow">break</span>;
<a name="l05390"></a>05390          <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l05391"></a>05391          <span class="keywordflow">case</span> <span class="charliteral">&apos;N&apos;</span>:
<a name="l05392"></a>05392             <span class="comment">/* Minute */</span>
<a name="l05393"></a>05393             <span class="keywordflow">if</span> (tm.tm_min == 0) {
<a name="l05394"></a>05394                <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] == <span class="charliteral">&apos;M&apos;</span>) {
<a name="l05395"></a>05395                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l05396"></a>05396                } <span class="keywordflow">else</span> {
<a name="l05397"></a>05397                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/100&quot;</span>, lang);
<a name="l05398"></a>05398                }
<a name="l05399"></a>05399             } <span class="keywordflow">else</span>
<a name="l05400"></a>05400                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, <span class="stringliteral">&quot;f&quot;</span>); 
<a name="l05401"></a>05401             <span class="keywordflow">break</span>;
<a name="l05402"></a>05402          <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l05403"></a>05403          <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l05404"></a>05404             <span class="comment">/* AM/PM */</span>
<a name="l05405"></a>05405             <span class="keywordflow">if</span> (tm.tm_hour &gt; 11)
<a name="l05406"></a>05406                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/p-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l05407"></a>05407             <span class="keywordflow">else</span>
<a name="l05408"></a>05408                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/a-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l05409"></a>05409             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05410"></a>05410             <span class="keywordflow">break</span>;
<a name="l05411"></a>05411          <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l05412"></a>05412             <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or AdBY */</span>
<a name="l05413"></a>05413             {
<a name="l05414"></a>05414                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l05415"></a>05415                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l05416"></a>05416                time_t beg_today;
<a name="l05417"></a>05417 
<a name="l05418"></a>05418                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l05419"></a>05419                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l05420"></a>05420                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l05421"></a>05421                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l05422"></a>05422                <span class="keywordflow">if</span> (beg_today &lt; thetime) {
<a name="l05423"></a>05423                   <span class="comment">/* Today */</span>
<a name="l05424"></a>05424                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l05425"></a>05425                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; thetime) {
<a name="l05426"></a>05426                   <span class="comment">/* Yesterday */</span>
<a name="l05427"></a>05427                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l05428"></a>05428                } <span class="keywordflow">else</span> {
<a name="l05429"></a>05429                   res = <a class="code" href="say_8h.html#aeb81fb9f912659f3e8de0d7d931eb372">ast_say_date_with_format</a>(chan, thetime, ints, lang, <span class="stringliteral">&quot;AdBY&quot;</span>, tzone);
<a name="l05430"></a>05430                }
<a name="l05431"></a>05431             }
<a name="l05432"></a>05432             <span class="keywordflow">break</span>;
<a name="l05433"></a>05433          <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l05434"></a>05434             <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A (weekday), or AdBY */</span>
<a name="l05435"></a>05435             {
<a name="l05436"></a>05436                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l05437"></a>05437                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l05438"></a>05438                time_t beg_today;
<a name="l05439"></a>05439 
<a name="l05440"></a>05440                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l05441"></a>05441                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l05442"></a>05442                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l05443"></a>05443                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l05444"></a>05444                <span class="keywordflow">if</span> (beg_today &lt; thetime) {
<a name="l05445"></a>05445                   <span class="comment">/* Today */</span>
<a name="l05446"></a>05446                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((beg_today - 86400) &lt; thetime) {
<a name="l05447"></a>05447                   <span class="comment">/* Yesterday */</span>
<a name="l05448"></a>05448                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l05449"></a>05449                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; thetime) {
<a name="l05450"></a>05450                   <span class="comment">/* Within the last week */</span>
<a name="l05451"></a>05451                   res = <a class="code" href="say_8h.html#aeb81fb9f912659f3e8de0d7d931eb372">ast_say_date_with_format</a>(chan, thetime, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l05452"></a>05452                } <span class="keywordflow">else</span> {
<a name="l05453"></a>05453                   res = <a class="code" href="say_8h.html#aeb81fb9f912659f3e8de0d7d931eb372">ast_say_date_with_format</a>(chan, thetime, ints, lang, <span class="stringliteral">&quot;AdBY&quot;</span>, tzone);
<a name="l05454"></a>05454                }
<a name="l05455"></a>05455             }
<a name="l05456"></a>05456             <span class="keywordflow">break</span>;
<a name="l05457"></a>05457          <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l05458"></a>05458             res = <a class="code" href="say_8h.html#aeb81fb9f912659f3e8de0d7d931eb372">ast_say_date_with_format</a>(chan, thetime, ints, lang, <span class="stringliteral">&quot;HM&quot;</span>, tzone);
<a name="l05459"></a>05459             <span class="keywordflow">break</span>;
<a name="l05460"></a>05460          <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>:
<a name="l05461"></a>05461             <span class="comment">/* Seconds */</span>
<a name="l05462"></a>05462             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/and&quot;</span>, lang);
<a name="l05463"></a>05463             <span class="keywordflow">if</span> (!res) {
<a name="l05464"></a>05464                <span class="keywordflow">if</span> (tm.tm_sec == 1) {
<a name="l05465"></a>05465                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/1z&quot;</span>, lang);
<a name="l05466"></a>05466                   <span class="keywordflow">if</span> (!res)
<a name="l05467"></a>05467                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/second-a&quot;</span>, lang);
<a name="l05468"></a>05468                } <span class="keywordflow">else</span> {
<a name="l05469"></a>05469                   res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l05470"></a>05470                   <span class="keywordflow">if</span> (!res) {
<a name="l05471"></a>05471                      <span class="keywordtype">int</span> ten, one;
<a name="l05472"></a>05472                      ten = tm.tm_sec / 10;
<a name="l05473"></a>05473                      one = tm.tm_sec % 10;
<a name="l05474"></a>05474                      
<a name="l05475"></a>05475                      <span class="keywordflow">if</span> (one &gt; 1 &amp;&amp; one &lt; 5 &amp;&amp; ten != 1)
<a name="l05476"></a>05476                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/seconds&quot;</span>, lang);
<a name="l05477"></a>05477                      <span class="keywordflow">else</span>
<a name="l05478"></a>05478                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/second&quot;</span>, lang);
<a name="l05479"></a>05479                   }
<a name="l05480"></a>05480                }
<a name="l05481"></a>05481             }
<a name="l05482"></a>05482             <span class="keywordflow">break</span>;
<a name="l05483"></a>05483          <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l05484"></a>05484             res = <a class="code" href="say_8h.html#aeb81fb9f912659f3e8de0d7d931eb372">ast_say_date_with_format</a>(chan, thetime, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l05485"></a>05485             <span class="keywordflow">break</span>;
<a name="l05486"></a>05486          <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l05487"></a>05487          <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l05488"></a>05488             <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l05489"></a>05489             <span class="keywordflow">break</span>;
<a name="l05490"></a>05490          <span class="keywordflow">default</span>:
<a name="l05491"></a>05491             <span class="comment">/* Unknown character */</span>
<a name="l05492"></a>05492             <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l05493"></a>05493       }
<a name="l05494"></a>05494       <span class="comment">/* Jump out on DTMF */</span>
<a name="l05495"></a>05495       <span class="keywordflow">if</span> (res)
<a name="l05496"></a>05496          <span class="keywordflow">break</span>;
<a name="l05497"></a>05497    }
<a name="l05498"></a>05498    <span class="keywordflow">return</span> res;
<a name="l05499"></a>05499 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aee531482d70b9bc3de78394b28c20d18"></a><!-- doxytag: member="say.c::ast_say_date_with_format_pt" ref="aee531482d70b9bc3de78394b28c20d18" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_with_format_pt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l05502">5502</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l05503"></a>05503 {
<a name="l05504"></a>05504    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l05505"></a>05505    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l05506"></a>05506    <span class="keywordtype">int</span> res=0, offset, sndoffset;
<a name="l05507"></a>05507    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l05508"></a>05508 
<a name="l05509"></a>05509    <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> == NULL)
<a name="l05510"></a>05510       <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> = <span class="stringliteral">&quot;Ad &apos;digits/pt-de&apos; B &apos;digits/pt-de&apos; Y I &apos;digits/pt-e&apos; Mp&quot;</span>;
<a name="l05511"></a>05511 
<a name="l05512"></a>05512    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l05513"></a>05513 
<a name="l05514"></a>05514    <span class="keywordflow">for</span> (offset=0 ; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span> ; offset++) {
<a name="l05515"></a>05515       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l05516"></a>05516       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l05517"></a>05517          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l05518"></a>05518          <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l05519"></a>05519             <span class="comment">/* Literal name of a sound file */</span>
<a name="l05520"></a>05520             <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l05521"></a>05521                sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l05522"></a>05522             }
<a name="l05523"></a>05523             sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l05524"></a>05524             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;%s&quot;</span>, sndfile);
<a name="l05525"></a>05525             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05526"></a>05526             <span class="keywordflow">break</span>;
<a name="l05527"></a>05527          <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l05528"></a>05528          <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l05529"></a>05529             <span class="comment">/* Sunday - Saturday */</span>
<a name="l05530"></a>05530             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l05531"></a>05531             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05532"></a>05532             <span class="keywordflow">break</span>;
<a name="l05533"></a>05533          <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l05534"></a>05534          <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l05535"></a>05535          <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l05536"></a>05536             <span class="comment">/* January - December */</span>
<a name="l05537"></a>05537             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l05538"></a>05538             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05539"></a>05539             <span class="keywordflow">break</span>;
<a name="l05540"></a>05540          <span class="keywordflow">case</span> <span class="charliteral">&apos;m&apos;</span>:
<a name="l05541"></a>05541             <span class="comment">/* First - Twelfth */</span>
<a name="l05542"></a>05542             <span class="keywordflow">if</span> (!strcasecmp(lang, <span class="stringliteral">&quot;pt_BR&quot;</span>)) {
<a name="l05543"></a>05543                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mon+1, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l05544"></a>05544             } <span class="keywordflow">else</span> {
<a name="l05545"></a>05545                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/h-%d&quot;</span>, tm.tm_mon +1);
<a name="l05546"></a>05546                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05547"></a>05547             }
<a name="l05548"></a>05548             <span class="keywordflow">break</span>;
<a name="l05549"></a>05549          <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l05550"></a>05550          <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l05551"></a>05551             <span class="comment">/* First - Thirtyfirst */</span>
<a name="l05552"></a>05552             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l05553"></a>05553             <span class="keywordflow">break</span>;
<a name="l05554"></a>05554          <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>:
<a name="l05555"></a>05555             <span class="comment">/* Year */</span>
<a name="l05556"></a>05556             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l05557"></a>05557             <span class="keywordflow">break</span>;
<a name="l05558"></a>05558          <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l05559"></a>05559          <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>:
<a name="l05560"></a>05560             <span class="comment">/* 12-Hour */</span>
<a name="l05561"></a>05561             <span class="keywordflow">if</span> (!strcasecmp(lang, <span class="stringliteral">&quot;pt_BR&quot;</span>)) {
<a name="l05562"></a>05562                <span class="keywordflow">if</span> (tm.tm_hour == 0) {
<a name="l05563"></a>05563                   <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] == <span class="charliteral">&apos;I&apos;</span>)
<a name="l05564"></a>05564                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-a&quot;</span>, lang);
<a name="l05565"></a>05565                   <span class="keywordflow">if</span> (!res)
<a name="l05566"></a>05566                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-meianoite&quot;</span>, lang);
<a name="l05567"></a>05567                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour == 12) {
<a name="l05568"></a>05568                   <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] == <span class="charliteral">&apos;I&apos;</span>)
<a name="l05569"></a>05569                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-ao&quot;</span>, lang);
<a name="l05570"></a>05570                   <span class="keywordflow">if</span> (!res)
<a name="l05571"></a>05571                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-meiodia&quot;</span>, lang);
<a name="l05572"></a>05572                   } <span class="keywordflow">else</span> {
<a name="l05573"></a>05573                   <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] == <span class="charliteral">&apos;I&apos;</span>) {
<a name="l05574"></a>05574                      <span class="keywordflow">if</span> ((tm.tm_hour % 12) != 1)
<a name="l05575"></a>05575                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-as&quot;</span>, lang);
<a name="l05576"></a>05576                      <span class="keywordflow">else</span>
<a name="l05577"></a>05577                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-a&quot;</span>, lang);
<a name="l05578"></a>05578                   }
<a name="l05579"></a>05579                   <span class="keywordflow">if</span> (!res)
<a name="l05580"></a>05580                      res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, (tm.tm_hour % 12), ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l05581"></a>05581                }
<a name="l05582"></a>05582             } <span class="keywordflow">else</span> {
<a name="l05583"></a>05583                <span class="keywordflow">if</span> (tm.tm_hour == 0) {
<a name="l05584"></a>05584                   <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] == <span class="charliteral">&apos;I&apos;</span>)
<a name="l05585"></a>05585                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-ah&quot;</span>, lang);
<a name="l05586"></a>05586                   <span class="keywordflow">if</span> (!res)
<a name="l05587"></a>05587                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-meianoite&quot;</span>, lang);
<a name="l05588"></a>05588                   }
<a name="l05589"></a>05589                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour == 12) {
<a name="l05590"></a>05590                   <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] == <span class="charliteral">&apos;I&apos;</span>)
<a name="l05591"></a>05591                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-ao&quot;</span>, lang);
<a name="l05592"></a>05592                   <span class="keywordflow">if</span> (!res)
<a name="l05593"></a>05593                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-meiodia&quot;</span>, lang);
<a name="l05594"></a>05594                }
<a name="l05595"></a>05595                <span class="keywordflow">else</span> {
<a name="l05596"></a>05596                   <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] == <span class="charliteral">&apos;I&apos;</span>) {
<a name="l05597"></a>05597                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-ah&quot;</span>, lang);
<a name="l05598"></a>05598                      <span class="keywordflow">if</span> ((tm.tm_hour % 12) != 1)
<a name="l05599"></a>05599                         <span class="keywordflow">if</span> (!res)
<a name="l05600"></a>05600                            res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-sss&quot;</span>, lang);
<a name="l05601"></a>05601                   }
<a name="l05602"></a>05602                   <span class="keywordflow">if</span> (!res)
<a name="l05603"></a>05603                      res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, (tm.tm_hour % 12), ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l05604"></a>05604                }
<a name="l05605"></a>05605             }
<a name="l05606"></a>05606             <span class="keywordflow">break</span>;
<a name="l05607"></a>05607          <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l05608"></a>05608          <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>:
<a name="l05609"></a>05609             <span class="comment">/* 24-Hour */</span>
<a name="l05610"></a>05610             <span class="keywordflow">if</span> (!strcasecmp(lang, <span class="stringliteral">&quot;pt_BR&quot;</span>)) {
<a name="l05611"></a>05611                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l05612"></a>05612                <span class="keywordflow">if</span> ((!res) &amp;&amp; (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] == <span class="charliteral">&apos;H&apos;</span>)) {
<a name="l05613"></a>05613                   <span class="keywordflow">if</span> (tm.tm_hour &gt; 1) {
<a name="l05614"></a>05614                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/hours&quot;</span>, lang);
<a name="l05615"></a>05615                   } <span class="keywordflow">else</span> {
<a name="l05616"></a>05616                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/hour&quot;</span>, lang);
<a name="l05617"></a>05617                   }
<a name="l05618"></a>05618                }
<a name="l05619"></a>05619             } <span class="keywordflow">else</span> {
<a name="l05620"></a>05620                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, -tm.tm_hour, ints, lang, NULL);
<a name="l05621"></a>05621                <span class="keywordflow">if</span> (!res) {
<a name="l05622"></a>05622                   <span class="keywordflow">if</span> (tm.tm_hour != 0) {
<a name="l05623"></a>05623                      <span class="keywordtype">int</span> remaining = tm.tm_hour;
<a name="l05624"></a>05624                      <span class="keywordflow">if</span> (tm.tm_hour &gt; 20) {
<a name="l05625"></a>05625                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/20&quot;</span>, lang);
<a name="l05626"></a>05626                         remaining -= 20;
<a name="l05627"></a>05627                      }
<a name="l05628"></a>05628                      <span class="keywordflow">if</span> (!res) {
<a name="l05629"></a>05629                         snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, remaining);
<a name="l05630"></a>05630                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05631"></a>05631                      }
<a name="l05632"></a>05632                   }
<a name="l05633"></a>05633                }
<a name="l05634"></a>05634             }
<a name="l05635"></a>05635             <span class="keywordflow">break</span>;
<a name="l05636"></a>05636          <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l05637"></a>05637             <span class="comment">/* Minute */</span>
<a name="l05638"></a>05638             <span class="keywordflow">if</span> (!strcasecmp(lang, <span class="stringliteral">&quot;pt_BR&quot;</span>)) {
<a name="l05639"></a>05639                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, NULL);
<a name="l05640"></a>05640                <span class="keywordflow">if</span> (!res) {
<a name="l05641"></a>05641                   <span class="keywordflow">if</span> (tm.tm_min &gt; 1) {
<a name="l05642"></a>05642                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/minutes&quot;</span>, lang);
<a name="l05643"></a>05643                   } <span class="keywordflow">else</span> {
<a name="l05644"></a>05644                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/minute&quot;</span>, lang);
<a name="l05645"></a>05645                   }
<a name="l05646"></a>05646                }
<a name="l05647"></a>05647             } <span class="keywordflow">else</span> {
<a name="l05648"></a>05648                <span class="keywordflow">if</span> (tm.tm_min == 0) {
<a name="l05649"></a>05649                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-hora&quot;</span>, lang);
<a name="l05650"></a>05650                   <span class="keywordflow">if</span> (tm.tm_hour != 1)
<a name="l05651"></a>05651                      <span class="keywordflow">if</span> (!res)
<a name="l05652"></a>05652                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-sss&quot;</span>, lang);         
<a name="l05653"></a>05653                } <span class="keywordflow">else</span> {
<a name="l05654"></a>05654                   res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL); 
<a name="l05655"></a>05655                }
<a name="l05656"></a>05656             }
<a name="l05657"></a>05657             <span class="keywordflow">break</span>;
<a name="l05658"></a>05658          <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l05659"></a>05659          <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l05660"></a>05660             <span class="comment">/* AM/PM */</span>
<a name="l05661"></a>05661             <span class="keywordflow">if</span> (!strcasecmp(lang, <span class="stringliteral">&quot;pt_BR&quot;</span>)) {
<a name="l05662"></a>05662                <span class="keywordflow">if</span> ((tm.tm_hour != 0) &amp;&amp; (tm.tm_hour != 12)) {
<a name="l05663"></a>05663                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-da&quot;</span>, lang);
<a name="l05664"></a>05664                   <span class="keywordflow">if</span> (!res) {
<a name="l05665"></a>05665                      <span class="keywordflow">if</span> ((tm.tm_hour &gt;= 0) &amp;&amp; (tm.tm_hour &lt; 12))
<a name="l05666"></a>05666                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/morning&quot;</span>, lang);
<a name="l05667"></a>05667                      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((tm.tm_hour &gt;= 12) &amp;&amp; (tm.tm_hour &lt; 18))
<a name="l05668"></a>05668                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/afternoon&quot;</span>, lang);
<a name="l05669"></a>05669                      <span class="keywordflow">else</span> res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/night&quot;</span>, lang);
<a name="l05670"></a>05670                   }
<a name="l05671"></a>05671                }
<a name="l05672"></a>05672             } <span class="keywordflow">else</span> {
<a name="l05673"></a>05673                <span class="keywordflow">if</span> (tm.tm_hour &gt; 12)
<a name="l05674"></a>05674                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/p-m&quot;</span>, lang);
<a name="l05675"></a>05675                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour  &amp;&amp; tm.tm_hour &lt; 12)
<a name="l05676"></a>05676                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/a-m&quot;</span>, lang);
<a name="l05677"></a>05677             }
<a name="l05678"></a>05678             <span class="keywordflow">break</span>;
<a name="l05679"></a>05679          <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l05680"></a>05680             <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or ABdY */</span>
<a name="l05681"></a>05681             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l05682"></a>05682 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l05683"></a>05683 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l05684"></a>05684             {
<a name="l05685"></a>05685                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l05686"></a>05686                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l05687"></a>05687                time_t beg_today;
<a name="l05688"></a>05688 
<a name="l05689"></a>05689                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l05690"></a>05690                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l05691"></a>05691                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l05692"></a>05692                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l05693"></a>05693                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l05694"></a>05694                   <span class="comment">/* Today */</span>
<a name="l05695"></a>05695                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l05696"></a>05696                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; t) {
<a name="l05697"></a>05697                   <span class="comment">/* Yesterday */</span>
<a name="l05698"></a>05698                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l05699"></a>05699                } <span class="keywordflow">else</span> {
<a name="l05700"></a>05700                   res = <a class="code" href="say_8c.html#aee531482d70b9bc3de78394b28c20d18">ast_say_date_with_format_pt</a>(chan, t, ints, lang, <span class="stringliteral">&quot;Ad &apos;digits/pt-de&apos; B &apos;digits/pt-de&apos; Y&quot;</span>, tzone);
<a name="l05701"></a>05701                }
<a name="l05702"></a>05702             }
<a name="l05703"></a>05703             <span class="keywordflow">break</span>;
<a name="l05704"></a>05704          <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l05705"></a>05705             <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A (weekday), or ABdY */</span>
<a name="l05706"></a>05706             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l05707"></a>05707 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l05708"></a>05708 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l05709"></a>05709             {
<a name="l05710"></a>05710                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l05711"></a>05711                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l05712"></a>05712                time_t beg_today;
<a name="l05713"></a>05713 
<a name="l05714"></a>05714                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l05715"></a>05715                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l05716"></a>05716                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l05717"></a>05717                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l05718"></a>05718                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l05719"></a>05719                   <span class="comment">/* Today */</span>
<a name="l05720"></a>05720                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((beg_today - 86400) &lt; t) {
<a name="l05721"></a>05721                   <span class="comment">/* Yesterday */</span>
<a name="l05722"></a>05722                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l05723"></a>05723                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l05724"></a>05724                   <span class="comment">/* Within the last week */</span>
<a name="l05725"></a>05725                   res = <a class="code" href="say_8c.html#aee531482d70b9bc3de78394b28c20d18">ast_say_date_with_format_pt</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l05726"></a>05726                } <span class="keywordflow">else</span> {
<a name="l05727"></a>05727                   res = <a class="code" href="say_8c.html#aee531482d70b9bc3de78394b28c20d18">ast_say_date_with_format_pt</a>(chan, t, ints, lang, <span class="stringliteral">&quot;Ad &apos;digits/pt-de&apos; B &apos;digits/pt-de&apos; Y&quot;</span>, tzone);
<a name="l05728"></a>05728                }
<a name="l05729"></a>05729             }
<a name="l05730"></a>05730             <span class="keywordflow">break</span>;
<a name="l05731"></a>05731          <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l05732"></a>05732             res = <a class="code" href="say_8c.html#aee531482d70b9bc3de78394b28c20d18">ast_say_date_with_format_pt</a>(chan, t, ints, lang, <span class="stringliteral">&quot;H &apos;digits/pt-e&apos; M&quot;</span>, tzone);
<a name="l05733"></a>05733             <span class="keywordflow">break</span>;
<a name="l05734"></a>05734          <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>:
<a name="l05735"></a>05735             <span class="comment">/* Seconds */</span>
<a name="l05736"></a>05736             <span class="keywordflow">if</span> (!strcasecmp(lang, <span class="stringliteral">&quot;pt_BR&quot;</span>)) {
<a name="l05737"></a>05737                res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_sec, ints, lang, NULL);
<a name="l05738"></a>05738                <span class="keywordflow">if</span> (!res) {
<a name="l05739"></a>05739                   <span class="keywordflow">if</span> (tm.tm_sec &gt; 1) {
<a name="l05740"></a>05740                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/seconds&quot;</span>, lang);
<a name="l05741"></a>05741                   } <span class="keywordflow">else</span> {
<a name="l05742"></a>05742                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/second&quot;</span>, lang);
<a name="l05743"></a>05743                   }
<a name="l05744"></a>05744                }
<a name="l05745"></a>05745             } <span class="keywordflow">else</span> {
<a name="l05746"></a>05746                <span class="keywordflow">if</span> (tm.tm_sec == 0) {
<a name="l05747"></a>05747                   snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec);
<a name="l05748"></a>05748                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05749"></a>05749                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_sec &lt; 10) {
<a name="l05750"></a>05750                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oh&quot;</span>, lang);
<a name="l05751"></a>05751                   <span class="keywordflow">if</span> (!res) {
<a name="l05752"></a>05752                      snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec);
<a name="l05753"></a>05753                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05754"></a>05754                   }
<a name="l05755"></a>05755                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((tm.tm_sec &lt; 21) || (tm.tm_sec % 10 == 0)) {
<a name="l05756"></a>05756                   snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec);
<a name="l05757"></a>05757                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05758"></a>05758                } <span class="keywordflow">else</span> {
<a name="l05759"></a>05759                   <span class="keywordtype">int</span> ten, one;
<a name="l05760"></a>05760                   ten = (tm.tm_sec / 10) * 10;
<a name="l05761"></a>05761                   one = (tm.tm_sec % 10);
<a name="l05762"></a>05762                   snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, ten);
<a name="l05763"></a>05763                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05764"></a>05764                   <span class="keywordflow">if</span> (!res) {
<a name="l05765"></a>05765                      <span class="comment">/* Fifty, not fifty-zero */</span>
<a name="l05766"></a>05766                      <span class="keywordflow">if</span> (one != 0) {
<a name="l05767"></a>05767                         snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, one);
<a name="l05768"></a>05768                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05769"></a>05769                      }
<a name="l05770"></a>05770                   }
<a name="l05771"></a>05771                }
<a name="l05772"></a>05772             }
<a name="l05773"></a>05773             <span class="keywordflow">break</span>;
<a name="l05774"></a>05774          <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l05775"></a>05775             res = <a class="code" href="say_8c.html#aee531482d70b9bc3de78394b28c20d18">ast_say_date_with_format_pt</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l05776"></a>05776             <span class="keywordflow">break</span>;
<a name="l05777"></a>05777          <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l05778"></a>05778          <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l05779"></a>05779             <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l05780"></a>05780             <span class="keywordflow">break</span>;
<a name="l05781"></a>05781          <span class="keywordflow">default</span>:
<a name="l05782"></a>05782             <span class="comment">/* Unknown character */</span>
<a name="l05783"></a>05783             <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l05784"></a>05784       }
<a name="l05785"></a>05785       <span class="comment">/* Jump out on DTMF */</span>
<a name="l05786"></a>05786       <span class="keywordflow">if</span> (res) {
<a name="l05787"></a>05787          <span class="keywordflow">break</span>;
<a name="l05788"></a>05788       }
<a name="l05789"></a>05789    }
<a name="l05790"></a>05790    <span class="keywordflow">return</span> res;
<a name="l05791"></a>05791 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a756da2d5b06a162994055452f6c36f15"></a><!-- doxytag: member="say.c::ast_say_date_with_format_th" ref="a756da2d5b06a162994055452f6c36f15" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_with_format_th </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l04132">4132</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="say_8c_source.html#l03480">ast_say_date_with_format_en()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="logger_8h_source.html#l00119">LOG_DEBUG</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l04133"></a>04133 {
<a name="l04134"></a>04134    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l04135"></a>04135    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l04136"></a>04136    <span class="keywordtype">int</span> res=0, offset, sndoffset;
<a name="l04137"></a>04137    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l04138"></a>04138 
<a name="l04139"></a>04139    <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> == NULL)
<a name="l04140"></a>04140       <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> = <span class="stringliteral">&quot;a &apos;digits/tee&apos; e &apos;digits/duan&apos; hY  I &apos;digits/naliga&apos; M &apos;digits/natee&apos;&quot;</span>;
<a name="l04141"></a>04141 
<a name="l04142"></a>04142    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l04143"></a>04143 
<a name="l04144"></a>04144    <span class="keywordflow">for</span> (offset=0 ; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span> ; offset++) {
<a name="l04145"></a>04145       <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l04146"></a>04146       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l04147"></a>04147          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l04148"></a>04148          <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l04149"></a>04149             <span class="comment">/* Literal name of a sound file */</span>
<a name="l04150"></a>04150             <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l04151"></a>04151                sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l04152"></a>04152             }
<a name="l04153"></a>04153             sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l04154"></a>04154             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, sndfile, lang);
<a name="l04155"></a>04155             <span class="keywordflow">break</span>;
<a name="l04156"></a>04156          <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l04157"></a>04157          <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l04158"></a>04158             <span class="comment">/* Sunday - Saturday */</span>
<a name="l04159"></a>04159             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l04160"></a>04160             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04161"></a>04161             <span class="keywordflow">break</span>;
<a name="l04162"></a>04162          <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l04163"></a>04163          <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l04164"></a>04164          <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l04165"></a>04165             <span class="comment">/* January - December */</span>
<a name="l04166"></a>04166             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l04167"></a>04167             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04168"></a>04168             <span class="keywordflow">break</span>;
<a name="l04169"></a>04169          <span class="keywordflow">case</span> <span class="charliteral">&apos;m&apos;</span>:
<a name="l04170"></a>04170             <span class="comment">/* Month enumerated */</span>
<a name="l04171"></a>04171             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, (tm.tm_mon + 1), ints, lang, (<span class="keywordtype">char</span> *) NULL); 
<a name="l04172"></a>04172             <span class="keywordflow">break</span>;
<a name="l04173"></a>04173          <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l04174"></a>04174          <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l04175"></a>04175             <span class="comment">/* First - Thirtyfirst */</span>
<a name="l04176"></a>04176             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);   
<a name="l04177"></a>04177             <span class="keywordflow">break</span>;
<a name="l04178"></a>04178          <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>:
<a name="l04179"></a>04179             <span class="comment">/* Year */</span>
<a name="l04180"></a>04180             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900 + 543, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l04181"></a>04181             <span class="keywordflow">break</span>;
<a name="l04182"></a>04182          <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l04183"></a>04183          <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>:
<a name="l04184"></a>04184             <span class="comment">/* 12-Hour */</span>
<a name="l04185"></a>04185             <span class="keywordflow">if</span> (tm.tm_hour == 0)
<a name="l04186"></a>04186                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/24&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l04187"></a>04187             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour);
<a name="l04188"></a>04188             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04189"></a>04189             <span class="keywordflow">break</span>;
<a name="l04190"></a>04190          <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l04191"></a>04191          <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>:
<a name="l04192"></a>04192             <span class="comment">/* 24-Hour */</span>
<a name="l04193"></a>04193             <span class="keywordflow">if</span> (tm.tm_hour == 0)
<a name="l04194"></a>04194                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/24&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l04195"></a>04195             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour);
<a name="l04196"></a>04196             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l04197"></a>04197             <span class="keywordflow">break</span>;
<a name="l04198"></a>04198          <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l04199"></a>04199          <span class="keywordflow">case</span> <span class="charliteral">&apos;N&apos;</span>:
<a name="l04200"></a>04200             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l04201"></a>04201             <span class="keywordflow">break</span>;
<a name="l04202"></a>04202          <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l04203"></a>04203          <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l04204"></a>04204             <span class="keywordflow">break</span>;
<a name="l04205"></a>04205          <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l04206"></a>04206             <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or ABdY */</span>
<a name="l04207"></a>04207             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l04208"></a>04208 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l04209"></a>04209 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l04210"></a>04210             {
<a name="l04211"></a>04211                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l04212"></a>04212                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l04213"></a>04213                time_t beg_today;
<a name="l04214"></a>04214 
<a name="l04215"></a>04215                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l04216"></a>04216                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l04217"></a>04217                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l04218"></a>04218                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l04219"></a>04219                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l04220"></a>04220                   <span class="comment">/* Today */</span>
<a name="l04221"></a>04221                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l04222"></a>04222                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; t) {
<a name="l04223"></a>04223                   <span class="comment">/* Yesterday */</span>
<a name="l04224"></a>04224                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l04225"></a>04225                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l04226"></a>04226                   <span class="comment">/* Within the last week */</span>
<a name="l04227"></a>04227                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l04228"></a>04228                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 2628000 &lt; t) {
<a name="l04229"></a>04229                   <span class="comment">/* Less than a month ago - &quot;Sunday, October third&quot; */</span>
<a name="l04230"></a>04230                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;ABd&quot;</span>, tzone);
<a name="l04231"></a>04231                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 15768000 &lt; t) {
<a name="l04232"></a>04232                   <span class="comment">/* Less than 6 months ago - &quot;August seventh&quot; */</span>
<a name="l04233"></a>04233                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;Bd&quot;</span>, tzone);
<a name="l04234"></a>04234                } <span class="keywordflow">else</span> {
<a name="l04235"></a>04235                   <span class="comment">/* More than 6 months ago - &quot;April nineteenth two thousand three&quot; */</span>
<a name="l04236"></a>04236                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;BdY&quot;</span>, tzone);
<a name="l04237"></a>04237                }
<a name="l04238"></a>04238             }
<a name="l04239"></a>04239             <span class="keywordflow">break</span>;
<a name="l04240"></a>04240          <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l04241"></a>04241             <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A (weekday), or ABdY */</span>
<a name="l04242"></a>04242             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l04243"></a>04243 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l04244"></a>04244 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l04245"></a>04245             {
<a name="l04246"></a>04246                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l04247"></a>04247                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l04248"></a>04248                time_t beg_today;
<a name="l04249"></a>04249 
<a name="l04250"></a>04250                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l04251"></a>04251                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l04252"></a>04252                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l04253"></a>04253                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l04254"></a>04254                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l04255"></a>04255                   <span class="comment">/* Today */</span>
<a name="l04256"></a>04256                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((beg_today - 86400) &lt; t) {
<a name="l04257"></a>04257                   <span class="comment">/* Yesterday */</span>
<a name="l04258"></a>04258                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l04259"></a>04259                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l04260"></a>04260                   <span class="comment">/* Within the last week */</span>
<a name="l04261"></a>04261                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l04262"></a>04262                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 2628000 &lt; t) {
<a name="l04263"></a>04263                   <span class="comment">/* Less than a month ago - &quot;Sunday, October third&quot; */</span>
<a name="l04264"></a>04264                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;ABd&quot;</span>, tzone);
<a name="l04265"></a>04265                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 15768000 &lt; t) {
<a name="l04266"></a>04266                   <span class="comment">/* Less than 6 months ago - &quot;August seventh&quot; */</span>
<a name="l04267"></a>04267                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;Bd&quot;</span>, tzone);
<a name="l04268"></a>04268                } <span class="keywordflow">else</span> {
<a name="l04269"></a>04269                   <span class="comment">/* More than 6 months ago - &quot;April nineteenth two thousand three&quot; */</span>
<a name="l04270"></a>04270                   res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;BdY&quot;</span>, tzone);
<a name="l04271"></a>04271                }
<a name="l04272"></a>04272             }
<a name="l04273"></a>04273             <span class="keywordflow">break</span>;
<a name="l04274"></a>04274          <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l04275"></a>04275             res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HM&quot;</span>, tzone);
<a name="l04276"></a>04276             <span class="keywordflow">break</span>;
<a name="l04277"></a>04277          <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>:
<a name="l04278"></a>04278             res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_sec, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l04279"></a>04279             <span class="keywordflow">break</span>;
<a name="l04280"></a>04280          <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l04281"></a>04281             res = <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l04282"></a>04282             <span class="keywordflow">break</span>;
<a name="l04283"></a>04283          <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l04284"></a>04284          <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l04285"></a>04285             <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l04286"></a>04286             <span class="keywordflow">break</span>;
<a name="l04287"></a>04287          <span class="keywordflow">default</span>:
<a name="l04288"></a>04288             <span class="comment">/* Unknown character */</span>
<a name="l04289"></a>04289             <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l04290"></a>04290       }
<a name="l04291"></a>04291       <span class="comment">/* Jump out on DTMF */</span>
<a name="l04292"></a>04292       <span class="keywordflow">if</span> (res) {
<a name="l04293"></a>04293          <span class="keywordflow">break</span>;
<a name="l04294"></a>04294       }
<a name="l04295"></a>04295    }
<a name="l04296"></a>04296    <span class="keywordflow">return</span> res;
<a name="l04297"></a>04297 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acdffaf2715cd5ed1365c81d0a637a879"></a><!-- doxytag: member="say.c::ast_say_date_with_format_zh" ref="acdffaf2715cd5ed1365c81d0a637a879" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_date_with_format_zh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l05794">5794</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00028">ast_tm::tm_sec</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03433">say_date_with_format()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l05795"></a>05795 {
<a name="l05796"></a>05796    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l05797"></a>05797    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l05798"></a>05798    <span class="keywordtype">int</span> res=0, offset, sndoffset;
<a name="l05799"></a>05799    <span class="keywordtype">char</span> sndfile[256], nextmsg[256];
<a name="l05800"></a>05800 
<a name="l05801"></a>05801    <span class="keywordflow">if</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> == NULL)
<a name="l05802"></a>05802       <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a> = <span class="stringliteral">&quot;YBdAkM&quot;</span>;
<a name="l05803"></a>05803 
<a name="l05804"></a>05804    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, tzone);
<a name="l05805"></a>05805 
<a name="l05806"></a>05806    <span class="keywordflow">for</span> (offset=0 ; <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset] != <span class="charliteral">&apos;\0&apos;</span> ; offset++) {
<a name="l05807"></a>05807       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Parsing %c (offset %d) in %s\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l05808"></a>05808       <span class="keywordflow">switch</span> (<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset]) {
<a name="l05809"></a>05809          <span class="comment">/* NOTE:  if you add more options here, please try to be consistent with strftime(3) */</span>
<a name="l05810"></a>05810          <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l05811"></a>05811             <span class="comment">/* Literal name of a sound file */</span>
<a name="l05812"></a>05812             <span class="keywordflow">for</span> (sndoffset = 0; !strchr(<span class="stringliteral">&quot;\&apos;\0&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[++offset]) &amp;&amp; (sndoffset &lt; <span class="keyword">sizeof</span>(sndfile) - 1) ; sndoffset++) {
<a name="l05813"></a>05813                sndfile[sndoffset] = <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset];
<a name="l05814"></a>05814             }
<a name="l05815"></a>05815             sndfile[sndoffset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l05816"></a>05816             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, sndfile, lang);
<a name="l05817"></a>05817             <span class="keywordflow">break</span>;
<a name="l05818"></a>05818          <span class="keywordflow">case</span> <span class="charliteral">&apos;A&apos;</span>:
<a name="l05819"></a>05819          <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>:
<a name="l05820"></a>05820             <span class="comment">/* Sunday - Saturday */</span>
<a name="l05821"></a>05821             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l05822"></a>05822             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05823"></a>05823             <span class="keywordflow">break</span>;
<a name="l05824"></a>05824          <span class="keywordflow">case</span> <span class="charliteral">&apos;B&apos;</span>:
<a name="l05825"></a>05825          <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>:
<a name="l05826"></a>05826          <span class="keywordflow">case</span> <span class="charliteral">&apos;h&apos;</span>:
<a name="l05827"></a>05827          <span class="keywordflow">case</span> <span class="charliteral">&apos;m&apos;</span>:
<a name="l05828"></a>05828             <span class="comment">/* January - December */</span>
<a name="l05829"></a>05829             snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l05830"></a>05830             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05831"></a>05831             <span class="keywordflow">break</span>;
<a name="l05832"></a>05832          <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>:
<a name="l05833"></a>05833          <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l05834"></a>05834             <span class="comment">/* First - Thirtyfirst */</span>
<a name="l05835"></a>05835             <span class="keywordflow">if</span> (!(tm.tm_mday % 10) || (tm.tm_mday &lt; 10)) {
<a name="l05836"></a>05836                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_mday);
<a name="l05837"></a>05837                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05838"></a>05838             } <span class="keywordflow">else</span> {
<a name="l05839"></a>05839                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_mday - (tm.tm_mday % 10));
<a name="l05840"></a>05840                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05841"></a>05841                <span class="keywordflow">if</span> (!res) {
<a name="l05842"></a>05842                   snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_mday % 10);
<a name="l05843"></a>05843                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05844"></a>05844                }
<a name="l05845"></a>05845             }
<a name="l05846"></a>05846             <span class="keywordflow">if</span> (!res) res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/day&quot;</span>, lang);
<a name="l05847"></a>05847             <span class="keywordflow">break</span>;
<a name="l05848"></a>05848          <span class="keywordflow">case</span> <span class="charliteral">&apos;Y&apos;</span>:
<a name="l05849"></a>05849             <span class="comment">/* Year */</span>
<a name="l05850"></a>05850             <span class="keywordflow">if</span> (tm.tm_year &gt; 99) {
<a name="l05851"></a>05851                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/2&quot;</span>, lang);
<a name="l05852"></a>05852                <span class="keywordflow">if</span> (!res) {
<a name="l05853"></a>05853                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/thousand&quot;</span>, lang);
<a name="l05854"></a>05854                }
<a name="l05855"></a>05855                <span class="keywordflow">if</span> (tm.tm_year &gt; 100) {
<a name="l05856"></a>05856                   <span class="keywordflow">if</span> (!res) {
<a name="l05857"></a>05857                      snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, (tm.tm_year - 100) / 10);
<a name="l05858"></a>05858                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05859"></a>05859                      <span class="keywordflow">if</span> (!res) {
<a name="l05860"></a>05860                         snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, (tm.tm_year - 100) % 10);
<a name="l05861"></a>05861                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05862"></a>05862                      }
<a name="l05863"></a>05863                   }
<a name="l05864"></a>05864                }
<a name="l05865"></a>05865                <span class="keywordflow">if</span> (!res) {
<a name="l05866"></a>05866                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/year&quot;</span>, lang);
<a name="l05867"></a>05867                }
<a name="l05868"></a>05868             } <span class="keywordflow">else</span> {
<a name="l05869"></a>05869                <span class="keywordflow">if</span> (tm.tm_year &lt; 1) {
<a name="l05870"></a>05870                   <span class="comment">/* I&apos;m not going to handle 1900 and prior */</span>
<a name="l05871"></a>05871                   <span class="comment">/* We&apos;ll just be silent on the year, instead of bombing out. */</span>
<a name="l05872"></a>05872                } <span class="keywordflow">else</span> {
<a name="l05873"></a>05873                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/1&quot;</span>, lang);
<a name="l05874"></a>05874                   <span class="keywordflow">if</span> (!res) {
<a name="l05875"></a>05875                      res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/9&quot;</span>, lang);
<a name="l05876"></a>05876                   }
<a name="l05877"></a>05877                   <span class="keywordflow">if</span> (!res) {
<a name="l05878"></a>05878                      <span class="keywordflow">if</span> (tm.tm_year &lt;= 9) {
<a name="l05879"></a>05879                         <span class="comment">/* 1901 - 1909 */</span>
<a name="l05880"></a>05880                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/0&quot;</span>, lang);
<a name="l05881"></a>05881                         <span class="keywordflow">if</span> (!res) {
<a name="l05882"></a>05882                            snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_year);
<a name="l05883"></a>05883                            res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05884"></a>05884                         }
<a name="l05885"></a>05885                      } <span class="keywordflow">else</span> {
<a name="l05886"></a>05886                         <span class="comment">/* 1910 - 1999 */</span>
<a name="l05887"></a>05887                         snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_year / 10);
<a name="l05888"></a>05888                         res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05889"></a>05889                         <span class="keywordflow">if</span> (!res) {
<a name="l05890"></a>05890                            snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_year % 10);
<a name="l05891"></a>05891                            res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05892"></a>05892                         }
<a name="l05893"></a>05893                      }
<a name="l05894"></a>05894                   }
<a name="l05895"></a>05895                }
<a name="l05896"></a>05896                <span class="keywordflow">if</span> (!res) {
<a name="l05897"></a>05897                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/year&quot;</span>, lang);
<a name="l05898"></a>05898                }
<a name="l05899"></a>05899             }
<a name="l05900"></a>05900             <span class="keywordflow">break</span>;
<a name="l05901"></a>05901          <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>:
<a name="l05902"></a>05902          <span class="keywordflow">case</span> <span class="charliteral">&apos;l&apos;</span>:
<a name="l05903"></a>05903             <span class="comment">/* 12-Hour */</span>
<a name="l05904"></a>05904             <span class="keywordflow">if</span> (tm.tm_hour == 0)
<a name="l05905"></a>05905                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/12&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l05906"></a>05906             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_hour &gt; 12)
<a name="l05907"></a>05907                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour - 12);
<a name="l05908"></a>05908             <span class="keywordflow">else</span>
<a name="l05909"></a>05909                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour);
<a name="l05910"></a>05910             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05911"></a>05911             <span class="keywordflow">if</span> (!res) {
<a name="l05912"></a>05912                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l05913"></a>05913             }
<a name="l05914"></a>05914             <span class="keywordflow">break</span>;
<a name="l05915"></a>05915          <span class="keywordflow">case</span> <span class="charliteral">&apos;H&apos;</span>:
<a name="l05916"></a>05916             <span class="keywordflow">if</span> (tm.tm_hour &lt; 10) {
<a name="l05917"></a>05917                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/0&quot;</span>, lang);
<a name="l05918"></a>05918             }
<a name="l05919"></a>05919          <span class="keywordflow">case</span> <span class="charliteral">&apos;k&apos;</span>:
<a name="l05920"></a>05920             <span class="comment">/* 24-Hour */</span>
<a name="l05921"></a>05921             <span class="keywordflow">if</span> (!(tm.tm_hour % 10) || tm.tm_hour &lt; 10) {
<a name="l05922"></a>05922                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour);
<a name="l05923"></a>05923                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05924"></a>05924             } <span class="keywordflow">else</span> {
<a name="l05925"></a>05925                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour - (tm.tm_hour % 10));
<a name="l05926"></a>05926                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05927"></a>05927                <span class="keywordflow">if</span> (!res) {
<a name="l05928"></a>05928                   snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_hour % 10);
<a name="l05929"></a>05929                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05930"></a>05930                }
<a name="l05931"></a>05931             }
<a name="l05932"></a>05932             <span class="keywordflow">if</span> (!res) {
<a name="l05933"></a>05933                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l05934"></a>05934             }
<a name="l05935"></a>05935             <span class="keywordflow">break</span>;
<a name="l05936"></a>05936          <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l05937"></a>05937             <span class="comment">/* Minute */</span>
<a name="l05938"></a>05938             <span class="keywordflow">if</span> (!(tm.tm_min % 10) || tm.tm_min &lt; 10) {
<a name="l05939"></a>05939                <span class="keywordflow">if</span> (tm.tm_min &lt; 10) {
<a name="l05940"></a>05940                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/0&quot;</span>, lang);
<a name="l05941"></a>05941                }
<a name="l05942"></a>05942                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_min);
<a name="l05943"></a>05943                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05944"></a>05944             } <span class="keywordflow">else</span> {
<a name="l05945"></a>05945                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_min - (tm.tm_min % 10));
<a name="l05946"></a>05946                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05947"></a>05947                <span class="keywordflow">if</span> (!res) {
<a name="l05948"></a>05948                   snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_min % 10);
<a name="l05949"></a>05949                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05950"></a>05950                }
<a name="l05951"></a>05951             }
<a name="l05952"></a>05952             <span class="keywordflow">if</span> (!res) {
<a name="l05953"></a>05953                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/minute&quot;</span>, lang);
<a name="l05954"></a>05954             }
<a name="l05955"></a>05955             <span class="keywordflow">break</span>;
<a name="l05956"></a>05956          <span class="keywordflow">case</span> <span class="charliteral">&apos;P&apos;</span>:
<a name="l05957"></a>05957          <span class="keywordflow">case</span> <span class="charliteral">&apos;p&apos;</span>:
<a name="l05958"></a>05958             <span class="comment">/* AM/PM */</span>
<a name="l05959"></a>05959             <span class="keywordflow">if</span> (tm.tm_hour &gt; 11)
<a name="l05960"></a>05960                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/p-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l05961"></a>05961             <span class="keywordflow">else</span>
<a name="l05962"></a>05962                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(nextmsg, <span class="stringliteral">&quot;digits/a-m&quot;</span>, <span class="keyword">sizeof</span>(nextmsg));
<a name="l05963"></a>05963             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l05964"></a>05964             <span class="keywordflow">break</span>;
<a name="l05965"></a>05965          <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l05966"></a>05966             <span class="comment">/* Shorthand for &quot;Today&quot;, &quot;Yesterday&quot;, or ABdY */</span>
<a name="l05967"></a>05967             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l05968"></a>05968 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l05969"></a>05969 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l05970"></a>05970             {
<a name="l05971"></a>05971                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l05972"></a>05972                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l05973"></a>05973                time_t beg_today;
<a name="l05974"></a>05974 
<a name="l05975"></a>05975                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l05976"></a>05976                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l05977"></a>05977                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l05978"></a>05978                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l05979"></a>05979                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l05980"></a>05980                   <span class="comment">/* Today */</span>
<a name="l05981"></a>05981                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/today&quot;</span>, lang);
<a name="l05982"></a>05982                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 &lt; t) {
<a name="l05983"></a>05983                   <span class="comment">/* Yesterday */</span>
<a name="l05984"></a>05984                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l05985"></a>05985                } <span class="keywordflow">else</span> {
<a name="l05986"></a>05986                   res = <a class="code" href="say_8c.html#acdffaf2715cd5ed1365c81d0a637a879">ast_say_date_with_format_zh</a>(chan, t, ints, lang, <span class="stringliteral">&quot;YBdA&quot;</span>, tzone);
<a name="l05987"></a>05987                }
<a name="l05988"></a>05988             }
<a name="l05989"></a>05989             <span class="keywordflow">break</span>;
<a name="l05990"></a>05990          <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l05991"></a>05991             <span class="comment">/* Shorthand for &quot;&quot; (today), &quot;Yesterday&quot;, A (weekday), or ABdY */</span>
<a name="l05992"></a>05992             <span class="comment">/* XXX As emphasized elsewhere, this should the native way in your</span>
<a name="l05993"></a>05993 <span class="comment">             * language to say the date, with changes in what you say, depending</span>
<a name="l05994"></a>05994 <span class="comment">             * upon how recent the date is. XXX */</span>
<a name="l05995"></a>05995             {
<a name="l05996"></a>05996                <span class="keyword">struct </span>timeval now = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l05997"></a>05997                <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tmnow;
<a name="l05998"></a>05998                time_t beg_today;
<a name="l05999"></a>05999 
<a name="l06000"></a>06000                <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;now, &amp;tmnow, tzone);
<a name="l06001"></a>06001                <span class="comment">/* This might be slightly off, if we transcend a leap second, but never more off than 1 second */</span>
<a name="l06002"></a>06002                <span class="comment">/* In any case, it saves not having to do ast_mktime() */</span>
<a name="l06003"></a>06003                beg_today = now.tv_sec - (tmnow.tm_hour * 3600) - (tmnow.tm_min * 60) - (tmnow.tm_sec);
<a name="l06004"></a>06004                <span class="keywordflow">if</span> (beg_today &lt; t) {
<a name="l06005"></a>06005                   <span class="comment">/* Today */</span>
<a name="l06006"></a>06006                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((beg_today - 86400) &lt; t) {
<a name="l06007"></a>06007                   <span class="comment">/* Yesterday */</span>
<a name="l06008"></a>06008                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/yesterday&quot;</span>, lang);
<a name="l06009"></a>06009                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (beg_today - 86400 * 6 &lt; t) {
<a name="l06010"></a>06010                   <span class="comment">/* Within the last week */</span>
<a name="l06011"></a>06011                   res = <a class="code" href="say_8c.html#acdffaf2715cd5ed1365c81d0a637a879">ast_say_date_with_format_zh</a>(chan, t, ints, lang, <span class="stringliteral">&quot;A&quot;</span>, tzone);
<a name="l06012"></a>06012                } <span class="keywordflow">else</span> {
<a name="l06013"></a>06013                   res = <a class="code" href="say_8c.html#acdffaf2715cd5ed1365c81d0a637a879">ast_say_date_with_format_zh</a>(chan, t, ints, lang, <span class="stringliteral">&quot;YBdA&quot;</span>, tzone);
<a name="l06014"></a>06014                }
<a name="l06015"></a>06015             }
<a name="l06016"></a>06016             <span class="keywordflow">break</span>;
<a name="l06017"></a>06017          <span class="keywordflow">case</span> <span class="charliteral">&apos;R&apos;</span>:
<a name="l06018"></a>06018             res = <a class="code" href="say_8c.html#acdffaf2715cd5ed1365c81d0a637a879">ast_say_date_with_format_zh</a>(chan, t, ints, lang, <span class="stringliteral">&quot;kM&quot;</span>, tzone);
<a name="l06019"></a>06019             <span class="keywordflow">break</span>;
<a name="l06020"></a>06020          <span class="keywordflow">case</span> <span class="charliteral">&apos;S&apos;</span>:
<a name="l06021"></a>06021             <span class="comment">/* Seconds */</span>
<a name="l06022"></a>06022             <span class="keywordflow">if</span> (!(tm.tm_sec % 10) || tm.tm_sec &lt; 10) {
<a name="l06023"></a>06023                <span class="keywordflow">if</span> (tm.tm_sec &lt; 10) {
<a name="l06024"></a>06024                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/0&quot;</span>, lang);
<a name="l06025"></a>06025                }
<a name="l06026"></a>06026                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec);
<a name="l06027"></a>06027                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l06028"></a>06028             } <span class="keywordflow">else</span> {
<a name="l06029"></a>06029                snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec - (tm.tm_sec % 10));
<a name="l06030"></a>06030                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l06031"></a>06031                <span class="keywordflow">if</span> (!res) {
<a name="l06032"></a>06032                   snprintf(nextmsg, <span class="keyword">sizeof</span>(nextmsg), <span class="stringliteral">&quot;digits/%d&quot;</span>, tm.tm_sec % 10);
<a name="l06033"></a>06033                   res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, nextmsg, lang);
<a name="l06034"></a>06034                }
<a name="l06035"></a>06035             }
<a name="l06036"></a>06036             <span class="keywordflow">if</span> (!res) {
<a name="l06037"></a>06037                res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/second&quot;</span>, lang);
<a name="l06038"></a>06038             }
<a name="l06039"></a>06039             <span class="keywordflow">break</span>;
<a name="l06040"></a>06040          <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l06041"></a>06041             res = <a class="code" href="say_8c.html#acdffaf2715cd5ed1365c81d0a637a879">ast_say_date_with_format_zh</a>(chan, t, ints, lang, <span class="stringliteral">&quot;HMS&quot;</span>, tzone);
<a name="l06042"></a>06042             <span class="keywordflow">break</span>;
<a name="l06043"></a>06043          <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l06044"></a>06044          <span class="keywordflow">case</span> <span class="charliteral">&apos;   &apos;</span>:
<a name="l06045"></a>06045             <span class="comment">/* Just ignore spaces and tabs */</span>
<a name="l06046"></a>06046          <span class="keywordflow">break</span>;
<a name="l06047"></a>06047          <span class="keywordflow">default</span>:
<a name="l06048"></a>06048             <span class="comment">/* Unknown character */</span>
<a name="l06049"></a>06049             <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown character in datetime format %s: %c at pos %d\n&quot;</span>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>[offset], offset);
<a name="l06050"></a>06050       }
<a name="l06051"></a>06051       <span class="comment">/* Jump out on DTMF */</span>
<a name="l06052"></a>06052       <span class="keywordflow">if</span> (res) {
<a name="l06053"></a>06053          <span class="keywordflow">break</span>;
<a name="l06054"></a>06054       }
<a name="l06055"></a>06055    }
<a name="l06056"></a>06056    <span class="keywordflow">return</span> res;
<a name="l06057"></a>06057 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad2b3493567e92893e2c49982a62bb133"></a><!-- doxytag: member="say.c::ast_say_datetime_de" ref="ad2b3493567e92893e2c49982a62bb133" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_de </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06500">6500</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="say_8h.html#a521f1068d36ad21d7c67d28287d18aad">ast_say_date</a>, and <a class="el" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06501"></a>06501 {
<a name="l06502"></a>06502    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06503"></a>06503    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06504"></a>06504    <span class="keywordtype">int</span> res = 0;
<a name="l06505"></a>06505 
<a name="l06506"></a>06506    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06507"></a>06507    res = <a class="code" href="say_8h.html#a521f1068d36ad21d7c67d28287d18aad">ast_say_date</a>(chan, t, ints, lang);
<a name="l06508"></a>06508    <span class="keywordflow">if</span> (!res) 
<a name="l06509"></a>06509       <a class="code" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>(chan, t, ints, lang);
<a name="l06510"></a>06510    <span class="keywordflow">return</span> res;
<a name="l06511"></a>06511 
<a name="l06512"></a>06512 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a903a842c47304dcebf1029fdf9c391e6"></a><!-- doxytag: member="say.c::ast_say_datetime_en" ref="a903a842c47304dcebf1029fdf9c391e6" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_en </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06433">6433</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06434"></a>06434 {
<a name="l06435"></a>06435    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06436"></a>06436    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06437"></a>06437    <span class="keywordtype">char</span> fn[256];
<a name="l06438"></a>06438    <span class="keywordtype">int</span> res = 0;
<a name="l06439"></a>06439    <span class="keywordtype">int</span> hour, pm=0;
<a name="l06440"></a>06440 
<a name="l06441"></a>06441    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06442"></a>06442    <span class="keywordflow">if</span> (!res) {
<a name="l06443"></a>06443       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l06444"></a>06444       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06445"></a>06445       <span class="keywordflow">if</span> (!res)
<a name="l06446"></a>06446          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06447"></a>06447    }
<a name="l06448"></a>06448    <span class="keywordflow">if</span> (!res) {
<a name="l06449"></a>06449       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l06450"></a>06450       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06451"></a>06451       <span class="keywordflow">if</span> (!res)
<a name="l06452"></a>06452          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06453"></a>06453    }
<a name="l06454"></a>06454    <span class="keywordflow">if</span> (!res)
<a name="l06455"></a>06455       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06456"></a>06456 
<a name="l06457"></a>06457    hour = tm.tm_hour;
<a name="l06458"></a>06458    <span class="keywordflow">if</span> (!hour)
<a name="l06459"></a>06459       hour = 12;
<a name="l06460"></a>06460    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour == 12)
<a name="l06461"></a>06461       pm = 1;
<a name="l06462"></a>06462    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour &gt; 12) {
<a name="l06463"></a>06463       hour -= 12;
<a name="l06464"></a>06464       pm = 1;
<a name="l06465"></a>06465    }
<a name="l06466"></a>06466    <span class="keywordflow">if</span> (!res)
<a name="l06467"></a>06467       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06468"></a>06468 
<a name="l06469"></a>06469    <span class="keywordflow">if</span> (tm.tm_min &gt; 9) {
<a name="l06470"></a>06470       <span class="keywordflow">if</span> (!res)
<a name="l06471"></a>06471          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06472"></a>06472    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_min) {
<a name="l06473"></a>06473       <span class="keywordflow">if</span> (!res)
<a name="l06474"></a>06474          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oh&quot;</span>, lang);
<a name="l06475"></a>06475       <span class="keywordflow">if</span> (!res)
<a name="l06476"></a>06476          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06477"></a>06477       <span class="keywordflow">if</span> (!res)
<a name="l06478"></a>06478          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06479"></a>06479    } <span class="keywordflow">else</span> {
<a name="l06480"></a>06480       <span class="keywordflow">if</span> (!res)
<a name="l06481"></a>06481          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l06482"></a>06482       <span class="keywordflow">if</span> (!res)
<a name="l06483"></a>06483          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06484"></a>06484    }
<a name="l06485"></a>06485    <span class="keywordflow">if</span> (pm) {
<a name="l06486"></a>06486       <span class="keywordflow">if</span> (!res)
<a name="l06487"></a>06487          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/p-m&quot;</span>, lang);
<a name="l06488"></a>06488    } <span class="keywordflow">else</span> {
<a name="l06489"></a>06489       <span class="keywordflow">if</span> (!res)
<a name="l06490"></a>06490          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/a-m&quot;</span>, lang);
<a name="l06491"></a>06491    }
<a name="l06492"></a>06492    <span class="keywordflow">if</span> (!res)
<a name="l06493"></a>06493       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06494"></a>06494    <span class="keywordflow">if</span> (!res)
<a name="l06495"></a>06495       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06496"></a>06496    <span class="keywordflow">return</span> res;
<a name="l06497"></a>06497 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab8696b88027ae3520d11a1dcc13245b9"></a><!-- doxytag: member="say.c::ast_say_datetime_fr" ref="ab8696b88027ae3520d11a1dcc13245b9" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_fr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06529">6529</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06530"></a>06530 {
<a name="l06531"></a>06531    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06532"></a>06532    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06533"></a>06533    <span class="keywordtype">char</span> fn[256];
<a name="l06534"></a>06534    <span class="keywordtype">int</span> res = 0;
<a name="l06535"></a>06535 
<a name="l06536"></a>06536    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06537"></a>06537 
<a name="l06538"></a>06538    <span class="keywordflow">if</span> (!res)
<a name="l06539"></a>06539       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06540"></a>06540 
<a name="l06541"></a>06541    <span class="keywordflow">if</span> (!res) {
<a name="l06542"></a>06542       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l06543"></a>06543       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06544"></a>06544       <span class="keywordflow">if</span> (!res)
<a name="l06545"></a>06545          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06546"></a>06546    }
<a name="l06547"></a>06547    <span class="keywordflow">if</span> (!res) {
<a name="l06548"></a>06548       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l06549"></a>06549       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06550"></a>06550       <span class="keywordflow">if</span> (!res)
<a name="l06551"></a>06551          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06552"></a>06552    }
<a name="l06553"></a>06553 
<a name="l06554"></a>06554    <span class="keywordflow">if</span> (!res)
<a name="l06555"></a>06555       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l06556"></a>06556    <span class="keywordflow">if</span> (!res)
<a name="l06557"></a>06557          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l06558"></a>06558    <span class="keywordflow">if</span> (tm.tm_min &gt; 0) {
<a name="l06559"></a>06559       <span class="keywordflow">if</span> (!res)
<a name="l06560"></a>06560          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06561"></a>06561    } 
<a name="l06562"></a>06562    <span class="keywordflow">if</span> (!res)
<a name="l06563"></a>06563       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06564"></a>06564    <span class="keywordflow">if</span> (!res)
<a name="l06565"></a>06565       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06566"></a>06566    <span class="keywordflow">return</span> res;
<a name="l06567"></a>06567 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adea77ee3cd971d260a61f8354c438a38"></a><!-- doxytag: member="say.c::ast_say_datetime_from_now_en" ref="adea77ee3cd971d260a61f8354c438a38" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_from_now_en </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06862">6862</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00035">ast_tm::tm_yday</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06837">say_datetime_from_now()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06863"></a>06863 {
<a name="l06864"></a>06864    <span class="keywordtype">int</span> res=0;
<a name="l06865"></a>06865    <span class="keyword">struct </span>timeval nowtv = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>(), when = { t, 0 };
<a name="l06866"></a>06866    <span class="keywordtype">int</span> daydiff;
<a name="l06867"></a>06867    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06868"></a>06868    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> now;
<a name="l06869"></a>06869    <span class="keywordtype">char</span> fn[256];
<a name="l06870"></a>06870 
<a name="l06871"></a>06871    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06872"></a>06872    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;nowtv, &amp;now, NULL);
<a name="l06873"></a>06873    daydiff = now.tm_yday - tm.tm_yday;
<a name="l06874"></a>06874    <span class="keywordflow">if</span> ((daydiff &lt; 0) || (daydiff &gt; 6)) {
<a name="l06875"></a>06875       <span class="comment">/* Day of month and month */</span>
<a name="l06876"></a>06876       <span class="keywordflow">if</span> (!res) {
<a name="l06877"></a>06877          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l06878"></a>06878          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06879"></a>06879          <span class="keywordflow">if</span> (!res)
<a name="l06880"></a>06880             res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06881"></a>06881       }
<a name="l06882"></a>06882       <span class="keywordflow">if</span> (!res)
<a name="l06883"></a>06883          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06884"></a>06884 
<a name="l06885"></a>06885    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (daydiff) {
<a name="l06886"></a>06886       <span class="comment">/* Just what day of the week */</span>
<a name="l06887"></a>06887       <span class="keywordflow">if</span> (!res) {
<a name="l06888"></a>06888          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l06889"></a>06889          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06890"></a>06890          <span class="keywordflow">if</span> (!res)
<a name="l06891"></a>06891             res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06892"></a>06892       }
<a name="l06893"></a>06893    } <span class="comment">/* Otherwise, it was today */</span>
<a name="l06894"></a>06894    <span class="keywordflow">if</span> (!res)
<a name="l06895"></a>06895       res = <a class="code" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>(chan, t, ints, lang);
<a name="l06896"></a>06896    <span class="keywordflow">return</span> res;
<a name="l06897"></a>06897 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa64343f4ca63fbbb8db4fe04c63aa9e7"></a><!-- doxytag: member="say.c::ast_say_datetime_from_now_fr" ref="aa64343f4ca63fbbb8db4fe04c63aa9e7" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_from_now_fr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06900">6900</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00035">ast_tm::tm_yday</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06837">say_datetime_from_now()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06901"></a>06901 {
<a name="l06902"></a>06902    <span class="keywordtype">int</span> res=0;
<a name="l06903"></a>06903    <span class="keyword">struct </span>timeval nowtv = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>(), when = { t, 0 };
<a name="l06904"></a>06904    <span class="keywordtype">int</span> daydiff;
<a name="l06905"></a>06905    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06906"></a>06906    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> now;
<a name="l06907"></a>06907    <span class="keywordtype">char</span> fn[256];
<a name="l06908"></a>06908 
<a name="l06909"></a>06909    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06910"></a>06910    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;nowtv, &amp;now, NULL);
<a name="l06911"></a>06911    daydiff = now.tm_yday - tm.tm_yday;
<a name="l06912"></a>06912    <span class="keywordflow">if</span> ((daydiff &lt; 0) || (daydiff &gt; 6)) {
<a name="l06913"></a>06913       <span class="comment">/* Day of month and month */</span>
<a name="l06914"></a>06914       <span class="keywordflow">if</span> (!res) {
<a name="l06915"></a>06915          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l06916"></a>06916          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06917"></a>06917          <span class="keywordflow">if</span> (!res)
<a name="l06918"></a>06918             res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06919"></a>06919       }
<a name="l06920"></a>06920       <span class="keywordflow">if</span> (!res)
<a name="l06921"></a>06921          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06922"></a>06922 
<a name="l06923"></a>06923    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (daydiff) {
<a name="l06924"></a>06924       <span class="comment">/* Just what day of the week */</span>
<a name="l06925"></a>06925       <span class="keywordflow">if</span> (!res) {
<a name="l06926"></a>06926          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l06927"></a>06927          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06928"></a>06928          <span class="keywordflow">if</span> (!res)
<a name="l06929"></a>06929             res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06930"></a>06930       }
<a name="l06931"></a>06931    } <span class="comment">/* Otherwise, it was today */</span>
<a name="l06932"></a>06932    <span class="keywordflow">if</span> (!res)
<a name="l06933"></a>06933       res = <a class="code" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>(chan, t, ints, lang);
<a name="l06934"></a>06934    <span class="keywordflow">return</span> res;
<a name="l06935"></a>06935 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a48c6e490794bdfc3fc7a7c7118ec652b"></a><!-- doxytag: member="say.c::ast_say_datetime_from_now_he" ref="a48c6e490794bdfc3fc7a7c7118ec652b" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_from_now_he </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06988">6988</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00035">ast_tm::tm_yday</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06837">say_datetime_from_now()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06989"></a>06989 {
<a name="l06990"></a>06990    <span class="keywordtype">int</span> res = 0;
<a name="l06991"></a>06991    <span class="keyword">struct </span>timeval nowt = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>(), when = { t, 0 };
<a name="l06992"></a>06992    <span class="keywordtype">int</span> daydiff;
<a name="l06993"></a>06993    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06994"></a>06994    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> now;
<a name="l06995"></a>06995    <span class="keywordtype">char</span> fn[256];
<a name="l06996"></a>06996 
<a name="l06997"></a>06997    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06998"></a>06998    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;nowt, &amp;now, NULL);
<a name="l06999"></a>06999    daydiff = now.tm_yday - tm.tm_yday;
<a name="l07000"></a>07000    <span class="keywordflow">if</span> ((daydiff &lt; 0) || (daydiff &gt; 6)) {
<a name="l07001"></a>07001       <span class="comment">/* Day of month and month */</span>
<a name="l07002"></a>07002       <span class="keywordflow">if</span> (!res) {
<a name="l07003"></a>07003          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l07004"></a>07004          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l07005"></a>07005          <span class="keywordflow">if</span> (!res)
<a name="l07006"></a>07006             res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07007"></a>07007       }
<a name="l07008"></a>07008       <span class="keywordflow">if</span> (!res) {
<a name="l07009"></a>07009          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l07010"></a>07010       }
<a name="l07011"></a>07011    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (daydiff) {
<a name="l07012"></a>07012       <span class="comment">/* Just what day of the week */</span>
<a name="l07013"></a>07013       <span class="keywordflow">if</span> (!res) {
<a name="l07014"></a>07014          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l07015"></a>07015          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l07016"></a>07016          <span class="keywordflow">if</span> (!res) {
<a name="l07017"></a>07017             res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07018"></a>07018          }
<a name="l07019"></a>07019       }
<a name="l07020"></a>07020    }                    <span class="comment">/* Otherwise, it was today */</span>
<a name="l07021"></a>07021    <span class="keywordflow">if</span> (!res) {
<a name="l07022"></a>07022       res = <a class="code" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>(chan, t, ints, lang);
<a name="l07023"></a>07023    }
<a name="l07024"></a>07024    <span class="keywordflow">return</span> res;
<a name="l07025"></a>07025 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2fc8cdab06987ce2abbcd535365121b5"></a><!-- doxytag: member="say.c::ast_say_datetime_from_now_ka" ref="a2fc8cdab06987ce2abbcd535365121b5" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_datetime_from_now_ka </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07786">7786</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00035">ast_tm::tm_yday</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06837">say_datetime_from_now()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07787"></a>07787 {
<a name="l07788"></a>07788    <span class="keywordtype">int</span> res=0;
<a name="l07789"></a>07789    <span class="keywordtype">int</span> daydiff;
<a name="l07790"></a>07790    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l07791"></a>07791    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> now;
<a name="l07792"></a>07792    <span class="keyword">struct </span>timeval when = { t, 0 }, nowt = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>();
<a name="l07793"></a>07793    <span class="keywordtype">char</span> fn[256];
<a name="l07794"></a>07794 
<a name="l07795"></a>07795    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l07796"></a>07796    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;nowt, &amp;now, NULL);
<a name="l07797"></a>07797    daydiff = now.tm_yday - tm.tm_yday;
<a name="l07798"></a>07798    <span class="keywordflow">if</span> ((daydiff &lt; 0) || (daydiff &gt; 6)) {
<a name="l07799"></a>07799       <span class="comment">/* Day of month and month */</span>
<a name="l07800"></a>07800       <span class="keywordflow">if</span> (!res)
<a name="l07801"></a>07801          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l07802"></a>07802       <span class="keywordflow">if</span> (!res) {
<a name="l07803"></a>07803          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l07804"></a>07804          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l07805"></a>07805          <span class="keywordflow">if</span> (!res)
<a name="l07806"></a>07806             res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07807"></a>07807       }
<a name="l07808"></a>07808 
<a name="l07809"></a>07809    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (daydiff) {
<a name="l07810"></a>07810       <span class="comment">/* Just what day of the week */</span>
<a name="l07811"></a>07811       <span class="keywordflow">if</span> (!res) {
<a name="l07812"></a>07812          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l07813"></a>07813          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l07814"></a>07814          <span class="keywordflow">if</span> (!res)
<a name="l07815"></a>07815             res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07816"></a>07816       }
<a name="l07817"></a>07817    } <span class="comment">/* Otherwise, it was today */</span>
<a name="l07818"></a>07818    <span class="keywordflow">if</span> (!res)
<a name="l07819"></a>07819       res = <a class="code" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>(chan, t, ints, lang);
<a name="l07820"></a>07820 
<a name="l07821"></a>07821    <span class="keywordflow">return</span> res;
<a name="l07822"></a>07822 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2e50b0f8e92cfa56a1eda5967fd3f99f"></a><!-- doxytag: member="say.c::ast_say_datetime_from_now_pt" ref="a2e50b0f8e92cfa56a1eda5967fd3f99f" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_from_now_pt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06938">6938</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>, <a class="el" href="time_8h_source.html#l00141">ast_tvnow()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, <a class="el" href="localtime_8h_source.html#l00035">ast_tm::tm_yday</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06837">say_datetime_from_now()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06939"></a>06939 {
<a name="l06940"></a>06940    <span class="keywordtype">int</span> res=0;
<a name="l06941"></a>06941    <span class="keywordtype">int</span> daydiff;
<a name="l06942"></a>06942    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06943"></a>06943    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> now;
<a name="l06944"></a>06944    <span class="keyword">struct </span>timeval nowtv = <a class="code" href="time_8h.html#abd5ba75c20787bcc479809c53b58406e" title="Returns current timeval. Meant to replace calls to gettimeofday().">ast_tvnow</a>(), when = { t, 0 };
<a name="l06945"></a>06945    <span class="keywordtype">char</span> fn[256];
<a name="l06946"></a>06946 
<a name="l06947"></a>06947    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06948"></a>06948    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;nowtv, &amp;now, NULL);
<a name="l06949"></a>06949    daydiff = now.tm_yday - tm.tm_yday;
<a name="l06950"></a>06950    <span class="keywordflow">if</span> ((daydiff &lt; 0) || (daydiff &gt; 6)) {
<a name="l06951"></a>06951       <span class="comment">/* Day of month and month */</span>
<a name="l06952"></a>06952       <span class="keywordflow">if</span> (!res)
<a name="l06953"></a>06953          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06954"></a>06954       <span class="keywordflow">if</span> (!res)
<a name="l06955"></a>06955          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-de&quot;</span>, lang);
<a name="l06956"></a>06956       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l06957"></a>06957       <span class="keywordflow">if</span> (!res)
<a name="l06958"></a>06958          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, fn, lang);
<a name="l06959"></a>06959    
<a name="l06960"></a>06960    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (daydiff) {
<a name="l06961"></a>06961       <span class="comment">/* Just what day of the week */</span>
<a name="l06962"></a>06962       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l06963"></a>06963       <span class="keywordflow">if</span> (!res)
<a name="l06964"></a>06964          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, fn, lang);
<a name="l06965"></a>06965    }  <span class="comment">/* Otherwise, it was today */</span>
<a name="l06966"></a>06966    <span class="keywordflow">if</span> (!strcasecmp(lang, <span class="stringliteral">&quot;pt_BR&quot;</span>)) {
<a name="l06967"></a>06967       <span class="keywordflow">if</span> (tm.tm_hour &gt; 1) {
<a name="l06968"></a>06968          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/pt-as&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l06969"></a>06969       } <span class="keywordflow">else</span> {
<a name="l06970"></a>06970          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/pt-a&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l06971"></a>06971       }
<a name="l06972"></a>06972       <span class="keywordflow">if</span> (!res)
<a name="l06973"></a>06973          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, fn, lang);
<a name="l06974"></a>06974    } <span class="keywordflow">else</span> {
<a name="l06975"></a>06975       <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/pt-ah&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l06976"></a>06976       <span class="keywordflow">if</span> (!res)
<a name="l06977"></a>06977          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, fn, lang);
<a name="l06978"></a>06978       <span class="keywordflow">if</span> (tm.tm_hour != 1)
<a name="l06979"></a>06979       <span class="keywordflow">if</span> (!res)
<a name="l06980"></a>06980          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-sss&quot;</span>, lang);
<a name="l06981"></a>06981       <span class="keywordflow">if</span> (!res)
<a name="l06982"></a>06982          res = <a class="code" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>(chan, t, ints, lang);
<a name="l06983"></a>06983    }
<a name="l06984"></a>06984    <span class="keywordflow">return</span> res;
<a name="l06985"></a>06985 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a78a476fede4f60e45b0656ff85424981"></a><!-- doxytag: member="say.c::ast_say_datetime_gr" ref="a78a476fede4f60e45b0656ff85424981" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_datetime_gr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07251">7251</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="say_8c_source.html#l07203">ast_say_time_gr()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="say_8c_source.html#l07033">gr_say_number_female()</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, and <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07252"></a>07252 {
<a name="l07253"></a>07253    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l07254"></a>07254    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l07255"></a>07255    <span class="keywordtype">char</span> fn[256];
<a name="l07256"></a>07256    <span class="keywordtype">int</span> res = 0;
<a name="l07257"></a>07257 
<a name="l07258"></a>07258    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l07259"></a>07259 
<a name="l07260"></a>07260    <span class="comment">/* W E E K - D A Y */</span>
<a name="l07261"></a>07261    <span class="keywordflow">if</span> (!res) {
<a name="l07262"></a>07262       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l07263"></a>07263       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l07264"></a>07264       <span class="keywordflow">if</span> (!res)
<a name="l07265"></a>07265          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07266"></a>07266    }
<a name="l07267"></a>07267    <span class="comment">/* D A Y */</span>
<a name="l07268"></a>07268    <span class="keywordflow">if</span> (!res) {
<a name="l07269"></a>07269       <a class="code" href="say_8c.html#a1ac32f4ca37eaea55e69c5189617da16">gr_say_number_female</a>(tm.tm_mday, chan, ints, lang);
<a name="l07270"></a>07270    }
<a name="l07271"></a>07271    <span class="comment">/* M O N T H */</span>
<a name="l07272"></a>07272    <span class="keywordflow">if</span> (!res) {
<a name="l07273"></a>07273       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l07274"></a>07274       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l07275"></a>07275       <span class="keywordflow">if</span> (!res)
<a name="l07276"></a>07276          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07277"></a>07277    }
<a name="l07278"></a>07278 
<a name="l07279"></a>07279    res = <a class="code" href="say_8c.html#a9df5ed9ed2f58cd4b0f26c3bb506409d">ast_say_time_gr</a>(chan, t, ints, lang);
<a name="l07280"></a>07280    <span class="keywordflow">return</span> res;
<a name="l07281"></a>07281 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a85945136cf41f790db09a29850dedd25"></a><!-- doxytag: member="say.c::ast_say_datetime_he" ref="a85945136cf41f790db09a29850dedd25" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_he </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06773">6773</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06774"></a>06774 {
<a name="l06775"></a>06775    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06776"></a>06776    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06777"></a>06777    <span class="keywordtype">char</span> fn[256];
<a name="l06778"></a>06778    <span class="keywordtype">int</span> res = 0;
<a name="l06779"></a>06779    <span class="keywordtype">int</span> hour;
<a name="l06780"></a>06780 
<a name="l06781"></a>06781    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06782"></a>06782    <span class="keywordflow">if</span> (!res) {
<a name="l06783"></a>06783       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l06784"></a>06784       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06785"></a>06785       <span class="keywordflow">if</span> (!res) {
<a name="l06786"></a>06786          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06787"></a>06787       }
<a name="l06788"></a>06788    }
<a name="l06789"></a>06789    <span class="keywordflow">if</span> (!res) {
<a name="l06790"></a>06790       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l06791"></a>06791       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06792"></a>06792       <span class="keywordflow">if</span> (!res) {
<a name="l06793"></a>06793          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06794"></a>06794       }
<a name="l06795"></a>06795    }
<a name="l06796"></a>06796    <span class="keywordflow">if</span> (!res) {
<a name="l06797"></a>06797       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l06798"></a>06798    }
<a name="l06799"></a>06799 
<a name="l06800"></a>06800    hour = tm.tm_hour;
<a name="l06801"></a>06801    <span class="keywordflow">if</span> (!hour) {
<a name="l06802"></a>06802       hour = 12;
<a name="l06803"></a>06803    }
<a name="l06804"></a>06804 
<a name="l06805"></a>06805    <span class="keywordflow">if</span> (!res) {
<a name="l06806"></a>06806       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, hour, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l06807"></a>06807    }
<a name="l06808"></a>06808 
<a name="l06809"></a>06809    <span class="keywordflow">if</span> (tm.tm_min &gt; 9) {
<a name="l06810"></a>06810       <span class="keywordflow">if</span> (!res) {
<a name="l06811"></a>06811          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l06812"></a>06812       }
<a name="l06813"></a>06813    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_min) {
<a name="l06814"></a>06814       <span class="keywordflow">if</span> (!res) {
<a name="l06815"></a>06815          <span class="comment">/* say a leading zero if needed */</span>
<a name="l06816"></a>06816          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, 0, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l06817"></a>06817       }
<a name="l06818"></a>06818       <span class="keywordflow">if</span> (!res) {
<a name="l06819"></a>06819          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06820"></a>06820       }
<a name="l06821"></a>06821       <span class="keywordflow">if</span> (!res) {
<a name="l06822"></a>06822          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l06823"></a>06823       }
<a name="l06824"></a>06824    } <span class="keywordflow">else</span> {
<a name="l06825"></a>06825       <span class="keywordflow">if</span> (!res) {
<a name="l06826"></a>06826          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06827"></a>06827       }
<a name="l06828"></a>06828    }
<a name="l06829"></a>06829    <span class="keywordflow">if</span> (!res) {
<a name="l06830"></a>06830       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06831"></a>06831    }
<a name="l06832"></a>06832    <span class="keywordflow">if</span> (!res) {
<a name="l06833"></a>06833       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l06834"></a>06834    }
<a name="l06835"></a>06835    <span class="keywordflow">return</span> res;
<a name="l06836"></a>06836 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aaee931489d2eb92e130cda3ace16505f"></a><!-- doxytag: member="say.c::ast_say_datetime_hu" ref="aaee931489d2eb92e130cda3ace16505f" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_hu </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06515">6515</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="say_8h.html#a521f1068d36ad21d7c67d28287d18aad">ast_say_date</a>, and <a class="el" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06516"></a>06516 {
<a name="l06517"></a>06517    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06518"></a>06518    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06519"></a>06519    <span class="keywordtype">int</span> res = 0;
<a name="l06520"></a>06520 
<a name="l06521"></a>06521    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06522"></a>06522    res = <a class="code" href="say_8h.html#a521f1068d36ad21d7c67d28287d18aad">ast_say_date</a>(chan, t, ints, lang);
<a name="l06523"></a>06523    <span class="keywordflow">if</span> (!res) 
<a name="l06524"></a>06524       <a class="code" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>(chan, t, ints, lang);
<a name="l06525"></a>06525    <span class="keywordflow">return</span> res;
<a name="l06526"></a>06526 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3539aa9a04f8013a3b388a4540ab476a"></a><!-- doxytag: member="say.c::ast_say_datetime_ka" ref="a3539aa9a04f8013a3b388a4540ab476a" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_datetime_ka </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07768">7768</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="say_8h.html#a521f1068d36ad21d7c67d28287d18aad">ast_say_date</a>, and <a class="el" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07769"></a>07769 {
<a name="l07770"></a>07770    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l07771"></a>07771    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l07772"></a>07772    <span class="keywordtype">int</span> res = 0;
<a name="l07773"></a>07773 
<a name="l07774"></a>07774    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l07775"></a>07775    res = <a class="code" href="say_8h.html#a521f1068d36ad21d7c67d28287d18aad">ast_say_date</a>(chan, t, ints, lang);
<a name="l07776"></a>07776    <span class="keywordflow">if</span> (!res)
<a name="l07777"></a>07777       <a class="code" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>(chan, t, ints, lang);
<a name="l07778"></a>07778    <span class="keywordflow">return</span> res;
<a name="l07779"></a>07779 
<a name="l07780"></a>07780 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a26cb7541c29e2f861ab8832cd576e58c"></a><!-- doxytag: member="say.c::ast_say_datetime_nl" ref="a26cb7541c29e2f861ab8832cd576e58c" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_nl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06570">6570</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="say_8h.html#a521f1068d36ad21d7c67d28287d18aad">ast_say_date</a>, <a class="el" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, and <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06571"></a>06571 {
<a name="l06572"></a>06572    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06573"></a>06573    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06574"></a>06574    <span class="keywordtype">int</span> res = 0;
<a name="l06575"></a>06575 
<a name="l06576"></a>06576    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06577"></a>06577    res = <a class="code" href="say_8h.html#a521f1068d36ad21d7c67d28287d18aad">ast_say_date</a>(chan, t, ints, lang);
<a name="l06578"></a>06578    <span class="keywordflow">if</span> (!res) {
<a name="l06579"></a>06579       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/nl-om&quot;</span>, lang);
<a name="l06580"></a>06580       <span class="keywordflow">if</span> (!res)
<a name="l06581"></a>06581          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06582"></a>06582    }
<a name="l06583"></a>06583    <span class="keywordflow">if</span> (!res) 
<a name="l06584"></a>06584       <a class="code" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>(chan, t, ints, lang);
<a name="l06585"></a>06585    <span class="keywordflow">return</span> res;
<a name="l06586"></a>06586 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a30ce2ebb46bb411cfb4cfe721d75f850"></a><!-- doxytag: member="say.c::ast_say_datetime_pt" ref="a30ce2ebb46bb411cfb4cfe721d75f850" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_pt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06589">6589</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06590"></a>06590 {
<a name="l06591"></a>06591    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06592"></a>06592    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06593"></a>06593    <span class="keywordtype">char</span> fn[256];
<a name="l06594"></a>06594    <span class="keywordtype">int</span> res = 0;
<a name="l06595"></a>06595    <span class="keywordtype">int</span> hour, pm=0;
<a name="l06596"></a>06596 
<a name="l06597"></a>06597    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06598"></a>06598    <span class="keywordflow">if</span> (!res) {
<a name="l06599"></a>06599       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l06600"></a>06600       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06601"></a>06601       <span class="keywordflow">if</span> (!res)
<a name="l06602"></a>06602          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06603"></a>06603    }
<a name="l06604"></a>06604    <span class="keywordflow">if</span> (!res) {
<a name="l06605"></a>06605       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l06606"></a>06606       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06607"></a>06607       <span class="keywordflow">if</span> (!res)
<a name="l06608"></a>06608          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06609"></a>06609    }
<a name="l06610"></a>06610    <span class="keywordflow">if</span> (!res)
<a name="l06611"></a>06611       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06612"></a>06612 
<a name="l06613"></a>06613    hour = tm.tm_hour;
<a name="l06614"></a>06614    <span class="keywordflow">if</span> (!hour)
<a name="l06615"></a>06615       hour = 12;
<a name="l06616"></a>06616    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour == 12)
<a name="l06617"></a>06617       pm = 1;
<a name="l06618"></a>06618    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour &gt; 12) {
<a name="l06619"></a>06619       hour -= 12;
<a name="l06620"></a>06620       pm = 1;
<a name="l06621"></a>06621    }
<a name="l06622"></a>06622    <span class="keywordflow">if</span> (!res)
<a name="l06623"></a>06623       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06624"></a>06624 
<a name="l06625"></a>06625    <span class="keywordflow">if</span> (tm.tm_min &gt; 9) {
<a name="l06626"></a>06626       <span class="keywordflow">if</span> (!res)
<a name="l06627"></a>06627          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06628"></a>06628    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_min) {
<a name="l06629"></a>06629       <span class="keywordflow">if</span> (!res)
<a name="l06630"></a>06630          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oh&quot;</span>, lang);
<a name="l06631"></a>06631       <span class="keywordflow">if</span> (!res)
<a name="l06632"></a>06632          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06633"></a>06633       <span class="keywordflow">if</span> (!res)
<a name="l06634"></a>06634          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06635"></a>06635    } <span class="keywordflow">else</span> {
<a name="l06636"></a>06636       <span class="keywordflow">if</span> (!res)
<a name="l06637"></a>06637          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l06638"></a>06638       <span class="keywordflow">if</span> (!res)
<a name="l06639"></a>06639          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06640"></a>06640    }
<a name="l06641"></a>06641    <span class="keywordflow">if</span> (pm) {
<a name="l06642"></a>06642       <span class="keywordflow">if</span> (!res)
<a name="l06643"></a>06643          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/p-m&quot;</span>, lang);
<a name="l06644"></a>06644    } <span class="keywordflow">else</span> {
<a name="l06645"></a>06645       <span class="keywordflow">if</span> (!res)
<a name="l06646"></a>06646          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/a-m&quot;</span>, lang);
<a name="l06647"></a>06647    }
<a name="l06648"></a>06648    <span class="keywordflow">if</span> (!res)
<a name="l06649"></a>06649       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06650"></a>06650    <span class="keywordflow">if</span> (!res)
<a name="l06651"></a>06651       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06652"></a>06652    <span class="keywordflow">return</span> res;
<a name="l06653"></a>06653 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a25e7724f153b68b5414a967cc53c9d1d"></a><!-- doxytag: member="say.c::ast_say_datetime_pt_BR" ref="a25e7724f153b68b5414a967cc53c9d1d" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_pt_BR </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06656">6656</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="say_8h.html#a521f1068d36ad21d7c67d28287d18aad">ast_say_date</a>, and <a class="el" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06657"></a>06657 {
<a name="l06658"></a>06658    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06659"></a>06659    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06660"></a>06660    <span class="keywordtype">int</span> res = 0;
<a name="l06661"></a>06661 
<a name="l06662"></a>06662    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06663"></a>06663    res = <a class="code" href="say_8h.html#a521f1068d36ad21d7c67d28287d18aad">ast_say_date</a>(chan, t, ints, lang);
<a name="l06664"></a>06664    <span class="keywordflow">if</span> (!res)
<a name="l06665"></a>06665       res = <a class="code" href="say_8h.html#a8f8b5df12bf05242a5dfad6dd73065a7">ast_say_time</a>(chan, t, ints, lang);
<a name="l06666"></a>06666    <span class="keywordflow">return</span> res;
<a name="l06667"></a>06667 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af059b7c3e29c8b085b01b656eccc30a5"></a><!-- doxytag: member="say.c::ast_say_datetime_th" ref="af059b7c3e29c8b085b01b656eccc30a5" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_th </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06670">6670</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06671"></a>06671 {
<a name="l06672"></a>06672    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06673"></a>06673    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06674"></a>06674    <span class="keywordtype">char</span> fn[256];
<a name="l06675"></a>06675    <span class="keywordtype">int</span> res = 0;
<a name="l06676"></a>06676    <span class="keywordtype">int</span> hour;
<a name="l06677"></a>06677    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06678"></a>06678    <span class="keywordflow">if</span> (!res) {
<a name="l06679"></a>06679       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l06680"></a>06680       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06681"></a>06681       <span class="keywordflow">if</span> (!res)
<a name="l06682"></a>06682          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06683"></a>06683    }
<a name="l06684"></a>06684    <span class="keywordflow">if</span> (!res) {
<a name="l06685"></a>06685       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l06686"></a>06686       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06687"></a>06687       <span class="keywordflow">if</span> (!res)
<a name="l06688"></a>06688          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06689"></a>06689    }
<a name="l06690"></a>06690    <span class="keywordflow">if</span> (!res){
<a name="l06691"></a>06691       <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/posor&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l06692"></a>06692       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06693"></a>06693       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900 + 543, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06694"></a>06694    }  
<a name="l06695"></a>06695    <span class="keywordflow">if</span> (!res)
<a name="l06696"></a>06696       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06697"></a>06697 
<a name="l06698"></a>06698    hour = tm.tm_hour;
<a name="l06699"></a>06699    <span class="keywordflow">if</span> (!hour)
<a name="l06700"></a>06700       hour = 24;
<a name="l06701"></a>06701    <span class="keywordflow">if</span> (!res){
<a name="l06702"></a>06702       <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/wela&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l06703"></a>06703       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06704"></a>06704    }  
<a name="l06705"></a>06705    <span class="keywordflow">if</span> (!res)
<a name="l06706"></a>06706       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06707"></a>06707    <span class="keywordflow">if</span> (!res)
<a name="l06708"></a>06708       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06709"></a>06709    <span class="keywordflow">return</span> res;
<a name="l06710"></a>06710 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad8f59361f5238c163bcfe2f89b952ca7"></a><!-- doxytag: member="say.c::ast_say_datetime_zh" ref="ad8f59361f5238c163bcfe2f89b952ca7" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_datetime_zh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06713">6713</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00031">ast_tm::tm_mday</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, <a class="el" href="localtime_8h_source.html#l00032">ast_tm::tm_mon</a>, <a class="el" href="localtime_8h_source.html#l00034">ast_tm::tm_wday</a>, and <a class="el" href="localtime_8h_source.html#l00033">ast_tm::tm_year</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06388">say_datetime()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06714"></a>06714 {
<a name="l06715"></a>06715    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06716"></a>06716    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06717"></a>06717    <span class="keywordtype">char</span> fn[256];
<a name="l06718"></a>06718    <span class="keywordtype">int</span> res = 0;
<a name="l06719"></a>06719    <span class="keywordtype">int</span> hour, pm=0;
<a name="l06720"></a>06720 
<a name="l06721"></a>06721    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06722"></a>06722    <span class="keywordflow">if</span> (!res)
<a name="l06723"></a>06723       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_year + 1900, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06724"></a>06724    <span class="keywordflow">if</span> (!res) {
<a name="l06725"></a>06725       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/mon-%d&quot;</span>, tm.tm_mon);
<a name="l06726"></a>06726       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06727"></a>06727       <span class="keywordflow">if</span> (!res)
<a name="l06728"></a>06728          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06729"></a>06729    }
<a name="l06730"></a>06730    <span class="keywordflow">if</span> (!res)
<a name="l06731"></a>06731       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_mday, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06732"></a>06732    <span class="keywordflow">if</span> (!res) {
<a name="l06733"></a>06733       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/day-%d&quot;</span>, tm.tm_wday);
<a name="l06734"></a>06734       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l06735"></a>06735       <span class="keywordflow">if</span> (!res)
<a name="l06736"></a>06736          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06737"></a>06737    }
<a name="l06738"></a>06738 
<a name="l06739"></a>06739    hour = tm.tm_hour;
<a name="l06740"></a>06740    <span class="keywordflow">if</span> (!hour)
<a name="l06741"></a>06741       hour = 12;
<a name="l06742"></a>06742    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour == 12)
<a name="l06743"></a>06743       pm = 1;
<a name="l06744"></a>06744    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour &gt; 12) {
<a name="l06745"></a>06745       hour -= 12;
<a name="l06746"></a>06746       pm = 1;
<a name="l06747"></a>06747    }
<a name="l06748"></a>06748    <span class="keywordflow">if</span> (pm) {
<a name="l06749"></a>06749       <span class="keywordflow">if</span> (!res)
<a name="l06750"></a>06750          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/p-m&quot;</span>, lang);
<a name="l06751"></a>06751    } <span class="keywordflow">else</span> {
<a name="l06752"></a>06752       <span class="keywordflow">if</span> (!res)
<a name="l06753"></a>06753          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/a-m&quot;</span>, lang);
<a name="l06754"></a>06754    }
<a name="l06755"></a>06755    <span class="keywordflow">if</span> (!res)
<a name="l06756"></a>06756       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06757"></a>06757    <span class="keywordflow">if</span> (!res)
<a name="l06758"></a>06758       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06759"></a>06759    <span class="keywordflow">if</span> (!res)
<a name="l06760"></a>06760       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l06761"></a>06761    <span class="keywordflow">if</span> (!res)
<a name="l06762"></a>06762       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06763"></a>06763    <span class="keywordflow">if</span> (!res)
<a name="l06764"></a>06764       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06765"></a>06765    <span class="keywordflow">if</span> (!res)
<a name="l06766"></a>06766       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/minute&quot;</span>, lang);
<a name="l06767"></a>06767    <span class="keywordflow">if</span> (!res)
<a name="l06768"></a>06768       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06769"></a>06769    <span class="keywordflow">return</span> res;
<a name="l06770"></a>06770 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae60d6664e3b02ccf86e95df90039ea82"></a><!-- doxytag: member="say.c::ast_say_enumeration_full_da" ref="ae60d6664e3b02ccf86e95df90039ea82" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_enumeration_full_da </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_enumeration_full_da: Danish syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l02669">2669</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="say_8c_source.html#l00808">ast_say_number_full_de()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l02553">say_enumeration_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02670"></a>02670 {
<a name="l02671"></a>02671    <span class="comment">/* options can be: &apos;&apos; or &apos;m&apos; male gender; &apos;f&apos; female gender; &apos;n&apos; neuter gender; &apos;p&apos; plural */</span>
<a name="l02672"></a>02672    <span class="keywordtype">int</span> res = 0, t = 0;
<a name="l02673"></a>02673    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>, fna[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02674"></a>02674    <span class="keywordtype">char</span> *gender;
<a name="l02675"></a>02675 
<a name="l02676"></a>02676    <span class="keywordflow">if</span> (options &amp;&amp; !strncasecmp(options, <span class="stringliteral">&quot;f&quot;</span>, 1)) {
<a name="l02677"></a>02677       gender = <span class="stringliteral">&quot;F&quot;</span>;
<a name="l02678"></a>02678    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (options &amp;&amp; !strncasecmp(options, <span class="stringliteral">&quot;n&quot;</span>, 1)) {
<a name="l02679"></a>02679       gender = <span class="stringliteral">&quot;N&quot;</span>;
<a name="l02680"></a>02680    } <span class="keywordflow">else</span> {
<a name="l02681"></a>02681       gender = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02682"></a>02682    }
<a name="l02683"></a>02683 
<a name="l02684"></a>02684    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l02685"></a>02685       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02686"></a>02686 
<a name="l02687"></a>02687    <span class="keywordflow">while</span> (!res &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {
<a name="l02688"></a>02688       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l02689"></a>02689          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn)); <span class="comment">/* kind of senseless for enumerations, but our best effort for error checking */</span>
<a name="l02690"></a>02690          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l02691"></a>02691             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l02692"></a>02692          } <span class="keywordflow">else</span> {
<a name="l02693"></a>02693             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02694"></a>02694          }  
<a name="l02695"></a>02695       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100 &amp;&amp; t) {
<a name="l02696"></a>02696          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/and&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02697"></a>02697          t = 0;
<a name="l02698"></a>02698       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l02699"></a>02699          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-%d%s&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, gender);
<a name="l02700"></a>02700          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02701"></a>02701       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l02702"></a>02702          <span class="keywordtype">int</span> ones = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10;
<a name="l02703"></a>02703          <span class="keywordflow">if</span> (ones) {
<a name="l02704"></a>02704             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d-and&quot;</span>, ones);
<a name="l02705"></a>02705             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= ones;
<a name="l02706"></a>02706          } <span class="keywordflow">else</span> {
<a name="l02707"></a>02707             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-%d%s&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, gender);
<a name="l02708"></a>02708             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02709"></a>02709          }
<a name="l02710"></a>02710       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 100 &amp;&amp; t == 0) {
<a name="l02711"></a>02711          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-hundred%s&quot;</span>, gender);
<a name="l02712"></a>02712          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02713"></a>02713       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l02714"></a>02714          <span class="keywordtype">int</span> hundreds = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100;
<a name="l02715"></a>02715          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 100;
<a name="l02716"></a>02716          <span class="keywordflow">if</span> (hundreds == 1) {
<a name="l02717"></a>02717             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02718"></a>02718          } <span class="keywordflow">else</span> {
<a name="l02719"></a>02719             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, hundreds);
<a name="l02720"></a>02720          }
<a name="l02721"></a>02721          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02722"></a>02722             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fna, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l02723"></a>02723          } <span class="keywordflow">else</span> {
<a name="l02724"></a>02724             snprintf(fna, <span class="keyword">sizeof</span>(fna), <span class="stringliteral">&quot;digits/h-hundred%s&quot;</span>, gender);
<a name="l02725"></a>02725          }
<a name="l02726"></a>02726          t = 1;
<a name="l02727"></a>02727       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l02728"></a>02728          <span class="keywordtype">int</span> thousands = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000;
<a name="l02729"></a>02729          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000;
<a name="l02730"></a>02730          <span class="keywordflow">if</span> (thousands == 1) {
<a name="l02731"></a>02731             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02732"></a>02732                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02733"></a>02733                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fna, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l02734"></a>02734             } <span class="keywordflow">else</span> {
<a name="l02735"></a>02735                <span class="keywordflow">if</span> (t) {
<a name="l02736"></a>02736                   <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02737"></a>02737                   snprintf(fna, <span class="keyword">sizeof</span>(fna), <span class="stringliteral">&quot;digits/h-thousand%s&quot;</span>, gender);
<a name="l02738"></a>02738                } <span class="keywordflow">else</span> {
<a name="l02739"></a>02739                   snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-thousand%s&quot;</span>, gender);
<a name="l02740"></a>02740                }
<a name="l02741"></a>02741             }
<a name="l02742"></a>02742          } <span class="keywordflow">else</span> {
<a name="l02743"></a>02743             res = <a class="code" href="say_8c.html#a5ab1deb33c81966bd9269f860881f6df" title="ast_say_number_full_de: German syntax">ast_say_number_full_de</a>(chan, thousands, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l02744"></a>02744             <span class="keywordflow">if</span> (res) {
<a name="l02745"></a>02745                <span class="keywordflow">return</span> res;
<a name="l02746"></a>02746             }
<a name="l02747"></a>02747             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02748"></a>02748                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02749"></a>02749             } <span class="keywordflow">else</span> {
<a name="l02750"></a>02750                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-thousand%s&quot;</span>, gender);
<a name="l02751"></a>02751             }
<a name="l02752"></a>02752          }
<a name="l02753"></a>02753          t = 1;
<a name="l02754"></a>02754       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) {
<a name="l02755"></a>02755          <span class="keywordtype">int</span> millions = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000;
<a name="l02756"></a>02756          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000;
<a name="l02757"></a>02757          <span class="keywordflow">if</span> (millions == 1) {
<a name="l02758"></a>02758             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02759"></a>02759                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1F&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02760"></a>02760                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fna, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l02761"></a>02761             } <span class="keywordflow">else</span> {
<a name="l02762"></a>02762                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02763"></a>02763                snprintf(fna, <span class="keyword">sizeof</span>(fna), <span class="stringliteral">&quot;digits/h-million%s&quot;</span>, gender);
<a name="l02764"></a>02764             }
<a name="l02765"></a>02765          } <span class="keywordflow">else</span> {
<a name="l02766"></a>02766             res = <a class="code" href="say_8c.html#a5ab1deb33c81966bd9269f860881f6df" title="ast_say_number_full_de: German syntax">ast_say_number_full_de</a>(chan, millions, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l02767"></a>02767             <span class="keywordflow">if</span> (res) {
<a name="l02768"></a>02768                <span class="keywordflow">return</span> res;
<a name="l02769"></a>02769             }
<a name="l02770"></a>02770             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02771"></a>02771                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/millions&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02772"></a>02772             } <span class="keywordflow">else</span> {
<a name="l02773"></a>02773                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-million%s&quot;</span>, gender);
<a name="l02774"></a>02774             }
<a name="l02775"></a>02775          }
<a name="l02776"></a>02776          t = 1;
<a name="l02777"></a>02777       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; INT_MAX) {
<a name="l02778"></a>02778          <span class="keywordtype">int</span> billions = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000000;
<a name="l02779"></a>02779          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000000;
<a name="l02780"></a>02780          <span class="keywordflow">if</span> (billions == 1) {
<a name="l02781"></a>02781             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02782"></a>02782                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1F&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02783"></a>02783                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fna, <span class="stringliteral">&quot;digits/milliard&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l02784"></a>02784             } <span class="keywordflow">else</span> {
<a name="l02785"></a>02785                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02786"></a>02786                snprintf(fna, <span class="keyword">sizeof</span>(fna), <span class="stringliteral">&quot;digits/h-milliard%s&quot;</span>, gender);
<a name="l02787"></a>02787             }
<a name="l02788"></a>02788          } <span class="keywordflow">else</span> {
<a name="l02789"></a>02789             res = <a class="code" href="say_8c.html#a5ab1deb33c81966bd9269f860881f6df" title="ast_say_number_full_de: German syntax">ast_say_number_full_de</a>(chan, billions, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l02790"></a>02790             <span class="keywordflow">if</span> (res)
<a name="l02791"></a>02791                <span class="keywordflow">return</span> res;
<a name="l02792"></a>02792             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02793"></a>02793                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/milliards&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l02794"></a>02794             } <span class="keywordflow">else</span> {
<a name="l02795"></a>02795                snprintf(fn, <span class="keyword">sizeof</span>(fna), <span class="stringliteral">&quot;digits/h-milliard%s&quot;</span>, gender);
<a name="l02796"></a>02796             }
<a name="l02797"></a>02797          }
<a name="l02798"></a>02798          t = 1;
<a name="l02799"></a>02799       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == INT_MAX) {
<a name="l02800"></a>02800          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-last%s&quot;</span>, gender);
<a name="l02801"></a>02801          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02802"></a>02802       } <span class="keywordflow">else</span> {
<a name="l02803"></a>02803          <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02804"></a>02804          res = -1;
<a name="l02805"></a>02805       }
<a name="l02806"></a>02806 
<a name="l02807"></a>02807       <span class="keywordflow">if</span> (!res) {
<a name="l02808"></a>02808          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l02809"></a>02809             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1)) 
<a name="l02810"></a>02810                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l02811"></a>02811             <span class="keywordflow">else</span>  
<a name="l02812"></a>02812                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l02813"></a>02813          }
<a name="l02814"></a>02814          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l02815"></a>02815          <span class="keywordflow">if</span> (!res) {
<a name="l02816"></a>02816             <span class="keywordflow">if</span> (strlen(fna) != 0 &amp;&amp; !<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fna, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l02817"></a>02817                <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1)) {
<a name="l02818"></a>02818                   res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l02819"></a>02819                } <span class="keywordflow">else</span> {
<a name="l02820"></a>02820                   res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l02821"></a>02821                }
<a name="l02822"></a>02822             }
<a name="l02823"></a>02823             <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l02824"></a>02824             strcpy(fna, <span class="stringliteral">&quot;&quot;</span>);
<a name="l02825"></a>02825          }
<a name="l02826"></a>02826       }
<a name="l02827"></a>02827    }
<a name="l02828"></a>02828    <span class="keywordflow">return</span> res;
<a name="l02829"></a>02829 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af62cf96bd4eede73a25a8734f7cb1ee1"></a><!-- doxytag: member="say.c::ast_say_enumeration_full_de" ref="af62cf96bd4eede73a25a8734f7cb1ee1" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_enumeration_full_de </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_enumeration_full_de: German syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l02832">2832</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="say_8c_source.html#l00808">ast_say_number_full_de()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l02553">say_enumeration_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02833"></a>02833 {
<a name="l02834"></a>02834    <span class="comment">/* options can be: &apos;&apos; or &apos;m&apos; male gender; &apos;f&apos; female gender; &apos;n&apos; neuter gender; &apos;p&apos; plural */</span>
<a name="l02835"></a>02835    <span class="keywordtype">int</span> res = 0, t = 0;
<a name="l02836"></a>02836    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>, fna[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02837"></a>02837    <span class="keywordtype">char</span> *gender;
<a name="l02838"></a>02838 
<a name="l02839"></a>02839    <span class="keywordflow">if</span> (options &amp;&amp; !strncasecmp(options, <span class="stringliteral">&quot;f&quot;</span>, 1)) {
<a name="l02840"></a>02840       gender = <span class="stringliteral">&quot;F&quot;</span>;
<a name="l02841"></a>02841    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (options &amp;&amp; !strncasecmp(options, <span class="stringliteral">&quot;n&quot;</span>, 1)) {
<a name="l02842"></a>02842       gender = <span class="stringliteral">&quot;N&quot;</span>;
<a name="l02843"></a>02843    } <span class="keywordflow">else</span> {
<a name="l02844"></a>02844       gender = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02845"></a>02845    }
<a name="l02846"></a>02846 
<a name="l02847"></a>02847    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l02848"></a>02848       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02849"></a>02849 
<a name="l02850"></a>02850    <span class="keywordflow">while</span> (!res &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {
<a name="l02851"></a>02851       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l02852"></a>02852          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn)); <span class="comment">/* kind of senseless for enumerations, but our best effort for error checking */</span>
<a name="l02853"></a>02853          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l02854"></a>02854             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l02855"></a>02855          } <span class="keywordflow">else</span> {
<a name="l02856"></a>02856             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02857"></a>02857          }  
<a name="l02858"></a>02858       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100 &amp;&amp; t) {
<a name="l02859"></a>02859          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/and&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02860"></a>02860          t = 0;
<a name="l02861"></a>02861       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l02862"></a>02862          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-%d%s&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, gender);
<a name="l02863"></a>02863          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02864"></a>02864       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l02865"></a>02865          <span class="keywordtype">int</span> ones = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10;
<a name="l02866"></a>02866          <span class="keywordflow">if</span> (ones) {
<a name="l02867"></a>02867             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d-and&quot;</span>, ones);
<a name="l02868"></a>02868             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= ones;
<a name="l02869"></a>02869          } <span class="keywordflow">else</span> {
<a name="l02870"></a>02870             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-%d%s&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, gender);
<a name="l02871"></a>02871             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02872"></a>02872          }
<a name="l02873"></a>02873       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 100 &amp;&amp; t == 0) {
<a name="l02874"></a>02874          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-hundred%s&quot;</span>, gender);
<a name="l02875"></a>02875          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02876"></a>02876       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l02877"></a>02877          <span class="keywordtype">int</span> hundreds = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100;
<a name="l02878"></a>02878          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 100;
<a name="l02879"></a>02879          <span class="keywordflow">if</span> (hundreds == 1) {
<a name="l02880"></a>02880             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02881"></a>02881          } <span class="keywordflow">else</span> {
<a name="l02882"></a>02882             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, hundreds);
<a name="l02883"></a>02883          }
<a name="l02884"></a>02884          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02885"></a>02885             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fna, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l02886"></a>02886          } <span class="keywordflow">else</span> {
<a name="l02887"></a>02887             snprintf(fna, <span class="keyword">sizeof</span>(fna), <span class="stringliteral">&quot;digits/h-hundred%s&quot;</span>, gender);
<a name="l02888"></a>02888          }
<a name="l02889"></a>02889          t = 1;
<a name="l02890"></a>02890       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l02891"></a>02891          <span class="keywordtype">int</span> thousands = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000;
<a name="l02892"></a>02892          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000;
<a name="l02893"></a>02893          <span class="keywordflow">if</span> (thousands == 1) {
<a name="l02894"></a>02894             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02895"></a>02895                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02896"></a>02896                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fna, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l02897"></a>02897             } <span class="keywordflow">else</span> {
<a name="l02898"></a>02898                <span class="keywordflow">if</span> (t) {
<a name="l02899"></a>02899                   <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02900"></a>02900                   snprintf(fna, <span class="keyword">sizeof</span>(fna), <span class="stringliteral">&quot;digits/h-thousand%s&quot;</span>, gender);
<a name="l02901"></a>02901                } <span class="keywordflow">else</span> {
<a name="l02902"></a>02902                   snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-thousand%s&quot;</span>, gender);
<a name="l02903"></a>02903                }
<a name="l02904"></a>02904             }
<a name="l02905"></a>02905          } <span class="keywordflow">else</span> {
<a name="l02906"></a>02906             res = <a class="code" href="say_8c.html#a5ab1deb33c81966bd9269f860881f6df" title="ast_say_number_full_de: German syntax">ast_say_number_full_de</a>(chan, thousands, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l02907"></a>02907             <span class="keywordflow">if</span> (res) {
<a name="l02908"></a>02908                <span class="keywordflow">return</span> res;
<a name="l02909"></a>02909             }
<a name="l02910"></a>02910             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02911"></a>02911                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02912"></a>02912             } <span class="keywordflow">else</span> {
<a name="l02913"></a>02913                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-thousand%s&quot;</span>, gender);
<a name="l02914"></a>02914             }
<a name="l02915"></a>02915          }
<a name="l02916"></a>02916          t = 1;
<a name="l02917"></a>02917       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) {
<a name="l02918"></a>02918          <span class="keywordtype">int</span> millions = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000;
<a name="l02919"></a>02919          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000;
<a name="l02920"></a>02920          <span class="keywordflow">if</span> (millions == 1) {
<a name="l02921"></a>02921             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02922"></a>02922                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1F&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02923"></a>02923                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fna, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l02924"></a>02924             } <span class="keywordflow">else</span> {
<a name="l02925"></a>02925                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02926"></a>02926                snprintf(fna, <span class="keyword">sizeof</span>(fna), <span class="stringliteral">&quot;digits/h-million%s&quot;</span>, gender);
<a name="l02927"></a>02927             }
<a name="l02928"></a>02928          } <span class="keywordflow">else</span> {
<a name="l02929"></a>02929             res = <a class="code" href="say_8c.html#a5ab1deb33c81966bd9269f860881f6df" title="ast_say_number_full_de: German syntax">ast_say_number_full_de</a>(chan, millions, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l02930"></a>02930             <span class="keywordflow">if</span> (res) {
<a name="l02931"></a>02931                <span class="keywordflow">return</span> res;
<a name="l02932"></a>02932             }
<a name="l02933"></a>02933             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02934"></a>02934                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/millions&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02935"></a>02935             } <span class="keywordflow">else</span> {
<a name="l02936"></a>02936                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-million%s&quot;</span>, gender);
<a name="l02937"></a>02937             }
<a name="l02938"></a>02938          }
<a name="l02939"></a>02939          t = 1;
<a name="l02940"></a>02940       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; INT_MAX) {
<a name="l02941"></a>02941          <span class="keywordtype">int</span> billions = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000000;
<a name="l02942"></a>02942          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000000;
<a name="l02943"></a>02943          <span class="keywordflow">if</span> (billions == 1) {
<a name="l02944"></a>02944             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02945"></a>02945                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1F&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02946"></a>02946                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fna, <span class="stringliteral">&quot;digits/milliard&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l02947"></a>02947             } <span class="keywordflow">else</span> {
<a name="l02948"></a>02948                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02949"></a>02949                snprintf(fna, <span class="keyword">sizeof</span>(fna), <span class="stringliteral">&quot;digits/h-milliard%s&quot;</span>, gender);
<a name="l02950"></a>02950             }
<a name="l02951"></a>02951          } <span class="keywordflow">else</span> {
<a name="l02952"></a>02952             res = <a class="code" href="say_8c.html#a5ab1deb33c81966bd9269f860881f6df" title="ast_say_number_full_de: German syntax">ast_say_number_full_de</a>(chan, billions, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l02953"></a>02953             <span class="keywordflow">if</span> (res)
<a name="l02954"></a>02954                <span class="keywordflow">return</span> res;
<a name="l02955"></a>02955             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02956"></a>02956                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/milliards&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l02957"></a>02957             } <span class="keywordflow">else</span> {
<a name="l02958"></a>02958                snprintf(fn, <span class="keyword">sizeof</span>(fna), <span class="stringliteral">&quot;digits/h-milliard%s&quot;</span>, gender);
<a name="l02959"></a>02959             }
<a name="l02960"></a>02960          }
<a name="l02961"></a>02961          t = 1;
<a name="l02962"></a>02962       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == INT_MAX) {
<a name="l02963"></a>02963          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-last%s&quot;</span>, gender);
<a name="l02964"></a>02964          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02965"></a>02965       } <span class="keywordflow">else</span> {
<a name="l02966"></a>02966          <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02967"></a>02967          res = -1;
<a name="l02968"></a>02968       }
<a name="l02969"></a>02969 
<a name="l02970"></a>02970       <span class="keywordflow">if</span> (!res) {
<a name="l02971"></a>02971          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l02972"></a>02972             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1)) 
<a name="l02973"></a>02973                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l02974"></a>02974             <span class="keywordflow">else</span>  
<a name="l02975"></a>02975                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l02976"></a>02976          }
<a name="l02977"></a>02977          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l02978"></a>02978          <span class="keywordflow">if</span> (!res) {
<a name="l02979"></a>02979             <span class="keywordflow">if</span> (strlen(fna) != 0 &amp;&amp; !<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fna, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l02980"></a>02980                <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1)) {
<a name="l02981"></a>02981                   res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l02982"></a>02982                } <span class="keywordflow">else</span> {
<a name="l02983"></a>02983                   res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l02984"></a>02984                }
<a name="l02985"></a>02985             }
<a name="l02986"></a>02986             <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l02987"></a>02987             strcpy(fna, <span class="stringliteral">&quot;&quot;</span>);
<a name="l02988"></a>02988          }
<a name="l02989"></a>02989       }
<a name="l02990"></a>02990    }
<a name="l02991"></a>02991    <span class="keywordflow">return</span> res;
<a name="l02992"></a>02992 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0e5c6401d55a76947f9dbf5a425a077d"></a><!-- doxytag: member="say.c::ast_say_enumeration_full_en" ref="a0e5c6401d55a76947f9dbf5a425a077d" args="(struct ast_channel *chan, int num, const char *ints, const char *language, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_enumeration_full_en </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_enumeration_full_en: English syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l02571">2571</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="say_8c_source.html#l00504">ast_say_number_full_en()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l02553">say_enumeration_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02572"></a>02572 {
<a name="l02573"></a>02573    <span class="keywordtype">int</span> res = 0, t = 0;
<a name="l02574"></a>02574    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02575"></a>02575    
<a name="l02576"></a>02576    <span class="keywordflow">while</span> (!res &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {
<a name="l02577"></a>02577       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l02578"></a>02578          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn)); <span class="comment">/* kind of senseless for enumerations, but our best effort for error checking */</span>
<a name="l02579"></a>02579          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l02580"></a>02580             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l02581"></a>02581          } <span class="keywordflow">else</span> {
<a name="l02582"></a>02582             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02583"></a>02583          }  
<a name="l02584"></a>02584       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l02585"></a>02585          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02586"></a>02586          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02587"></a>02587       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) { 
<a name="l02588"></a>02588          <span class="keywordtype">int</span> tens = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 10;
<a name="l02589"></a>02589          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10;
<a name="l02590"></a>02590          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 0) {
<a name="l02591"></a>02591             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/h-%d&quot;</span>, (tens * 10));
<a name="l02592"></a>02592          } <span class="keywordflow">else</span> {
<a name="l02593"></a>02593             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (tens * 10));
<a name="l02594"></a>02594          }
<a name="l02595"></a>02595       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l02596"></a>02596          <span class="keywordtype">int</span> hundreds = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100;
<a name="l02597"></a>02597          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 100;
<a name="l02598"></a>02598          <span class="keywordflow">if</span> (hundreds &gt; 1 || t == 1) {
<a name="l02599"></a>02599             res = <a class="code" href="say_8c.html#ad44c88ef3d874e42ed56b7bcdf57cb85" title="ast_say_number_full_en: English syntax">ast_say_number_full_en</a>(chan, hundreds, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02600"></a>02600          }        
<a name="l02601"></a>02601          <span class="keywordflow">if</span> (res)
<a name="l02602"></a>02602             <span class="keywordflow">return</span> res;
<a name="l02603"></a>02603          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {
<a name="l02604"></a>02604             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02605"></a>02605          } <span class="keywordflow">else</span> {
<a name="l02606"></a>02606             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/h-hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02607"></a>02607          }
<a name="l02608"></a>02608       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l02609"></a>02609          <span class="keywordtype">int</span> thousands = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000;
<a name="l02610"></a>02610          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000;
<a name="l02611"></a>02611          <span class="keywordflow">if</span> (thousands &gt; 1 || t == 1) {
<a name="l02612"></a>02612             res = <a class="code" href="say_8c.html#ad44c88ef3d874e42ed56b7bcdf57cb85" title="ast_say_number_full_en: English syntax">ast_say_number_full_en</a>(chan, thousands, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02613"></a>02613          }
<a name="l02614"></a>02614          <span class="keywordflow">if</span> (res)
<a name="l02615"></a>02615             <span class="keywordflow">return</span> res;
<a name="l02616"></a>02616          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02617"></a>02617             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02618"></a>02618          } <span class="keywordflow">else</span> {
<a name="l02619"></a>02619             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/h-thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02620"></a>02620          }
<a name="l02621"></a>02621          t = 1;
<a name="l02622"></a>02622       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) {
<a name="l02623"></a>02623          <span class="keywordtype">int</span> millions = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000;
<a name="l02624"></a>02624          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000;
<a name="l02625"></a>02625          t = 1;
<a name="l02626"></a>02626          res = <a class="code" href="say_8c.html#ad44c88ef3d874e42ed56b7bcdf57cb85" title="ast_say_number_full_en: English syntax">ast_say_number_full_en</a>(chan, millions, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02627"></a>02627          <span class="keywordflow">if</span> (res)
<a name="l02628"></a>02628             <span class="keywordflow">return</span> res;
<a name="l02629"></a>02629          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02630"></a>02630             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02631"></a>02631          } <span class="keywordflow">else</span> {
<a name="l02632"></a>02632             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/h-million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02633"></a>02633          }
<a name="l02634"></a>02634       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; INT_MAX) {
<a name="l02635"></a>02635          <span class="keywordtype">int</span> billions = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000000;
<a name="l02636"></a>02636          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000000;
<a name="l02637"></a>02637          t = 1;
<a name="l02638"></a>02638          res = <a class="code" href="say_8c.html#ad44c88ef3d874e42ed56b7bcdf57cb85" title="ast_say_number_full_en: English syntax">ast_say_number_full_en</a>(chan, billions, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02639"></a>02639          <span class="keywordflow">if</span> (res)
<a name="l02640"></a>02640             <span class="keywordflow">return</span> res;
<a name="l02641"></a>02641          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {              
<a name="l02642"></a>02642             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/billion&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02643"></a>02643          } <span class="keywordflow">else</span> {
<a name="l02644"></a>02644             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/h-billion&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02645"></a>02645          }
<a name="l02646"></a>02646       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == INT_MAX) {
<a name="l02647"></a>02647          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/h-last&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02648"></a>02648          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02649"></a>02649       } <span class="keywordflow">else</span> {
<a name="l02650"></a>02650          <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02651"></a>02651          res = -1;
<a name="l02652"></a>02652       }
<a name="l02653"></a>02653 
<a name="l02654"></a>02654       <span class="keywordflow">if</span> (!res) {
<a name="l02655"></a>02655          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l02656"></a>02656             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1)) {
<a name="l02657"></a>02657                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l02658"></a>02658             } <span class="keywordflow">else</span> {
<a name="l02659"></a>02659                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l02660"></a>02660             }
<a name="l02661"></a>02661          }
<a name="l02662"></a>02662          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l02663"></a>02663       }
<a name="l02664"></a>02664    }
<a name="l02665"></a>02665    <span class="keywordflow">return</span> res;
<a name="l02666"></a>02666 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4fea2317fdf960edf9351980cf60cc8f"></a><!-- doxytag: member="say.c::ast_say_enumeration_full_he" ref="a4fea2317fdf960edf9351980cf60cc8f" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_enumeration_full_he </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l02994">2994</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="say_8c_source.html#l01217">ast_say_number_full_he()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="logger_8h_source.html#l00079">ast_verbose</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>, <a class="el" href="logger_8h_source.html#l00119">LOG_DEBUG</a>, and <a class="el" href="logger_8h_source.html#l00043">VERBOSE_PREFIX_3</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l02553">say_enumeration_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02995"></a>02995 {
<a name="l02996"></a>02996    <span class="keywordtype">int</span> res = 0;
<a name="l02997"></a>02997    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02998"></a>02998    <span class="keywordtype">int</span> mf = -1;            <span class="comment">/* +1 = Masculin; -1 = Feminin */</span>
<a name="l02999"></a>02999    <a class="code" href="logger_8h.html#afcd8b407dfb3f461488abf7d1ed70fb9">ast_verbose</a>(<a class="code" href="logger_8h.html#a24b0f46e22f4ea3226fa082e955dd4ef">VERBOSE_PREFIX_3</a> <span class="stringliteral">&quot;ast_say_digits_full: started. num: %d, options=\&quot;%s\&quot;\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, options);
<a name="l03000"></a>03000 
<a name="l03001"></a>03001    <span class="keywordflow">if</span> (options &amp;&amp; !strncasecmp(options, <span class="stringliteral">&quot;m&quot;</span>, 1)) {
<a name="l03002"></a>03002       mf = -1;
<a name="l03003"></a>03003    }
<a name="l03004"></a>03004 
<a name="l03005"></a>03005    <a class="code" href="logger_8h.html#afcd8b407dfb3f461488abf7d1ed70fb9">ast_verbose</a>(<a class="code" href="logger_8h.html#a24b0f46e22f4ea3226fa082e955dd4ef">VERBOSE_PREFIX_3</a> <span class="stringliteral">&quot;ast_say_digits_full: num: %d, options=\&quot;%s\&quot;, mf=%d\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, options, mf);
<a name="l03006"></a>03006 
<a name="l03007"></a>03007    <span class="keywordflow">while</span> (!res &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {
<a name="l03008"></a>03008       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l03009"></a>03009          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/minus&quot;</span>); <span class="comment">/* kind of senseless for enumerations, but our best effort for error checking */</span>
<a name="l03010"></a>03010          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN) {
<a name="l03011"></a>03011             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l03012"></a>03012          } <span class="keywordflow">else</span> {
<a name="l03013"></a>03013             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l03014"></a>03014          }
<a name="l03015"></a>03015       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 21) {
<a name="l03016"></a>03016          <span class="keywordflow">if</span> (mf &lt; 0) {
<a name="l03017"></a>03017             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 10) {
<a name="l03018"></a>03018                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/f-0%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l03019"></a>03019             } <span class="keywordflow">else</span> {
<a name="l03020"></a>03020                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/f-%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l03021"></a>03021             }
<a name="l03022"></a>03022          } <span class="keywordflow">else</span> {
<a name="l03023"></a>03023             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 10) {
<a name="l03024"></a>03024                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/m-0%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l03025"></a>03025             } <span class="keywordflow">else</span> {
<a name="l03026"></a>03026                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/m-%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l03027"></a>03027             }
<a name="l03028"></a>03028          }
<a name="l03029"></a>03029          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l03030"></a>03030       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt;= 20) {
<a name="l03031"></a>03031          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 10) * 10);
<a name="l03032"></a>03032          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10;
<a name="l03033"></a>03033       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt;= 100) &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000)) {
<a name="l03034"></a>03034          <span class="keywordtype">int</span> tmpnum = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100;
<a name="l03035"></a>03035          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d00&quot;</span>, tmpnum);
<a name="l03036"></a>03036          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - (tmpnum * 100);
<a name="l03037"></a>03037       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt;= 1000) &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 10000)) {
<a name="l03038"></a>03038          <span class="keywordtype">int</span> tmpnum = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000;
<a name="l03039"></a>03039          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%dk&quot;</span>, tmpnum);
<a name="l03040"></a>03040          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - (tmpnum * 1000);
<a name="l03041"></a>03041       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20000) {
<a name="l03042"></a>03042          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/m-%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000));
<a name="l03043"></a>03043          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000;
<a name="l03044"></a>03044       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l03045"></a>03045          res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;m&quot;</span>, audiofd, ctrlfd);
<a name="l03046"></a>03046          <span class="keywordflow">if</span> (res) {
<a name="l03047"></a>03047             <span class="keywordflow">return</span> res;
<a name="l03048"></a>03048          }
<a name="l03049"></a>03049          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/1k&quot;</span>);
<a name="l03050"></a>03050          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000;
<a name="l03051"></a>03051       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 2000000) {
<a name="l03052"></a>03052          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/1m&quot;</span>);
<a name="l03053"></a>03053          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000;
<a name="l03054"></a>03054       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 3000000) {
<a name="l03055"></a>03055          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/2m&quot;</span>);
<a name="l03056"></a>03056          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - 2000000;
<a name="l03057"></a>03057       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) {
<a name="l03058"></a>03058          res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;m&quot;</span>, audiofd, ctrlfd);
<a name="l03059"></a>03059          <span class="keywordflow">if</span> (res) {
<a name="l03060"></a>03060             <span class="keywordflow">return</span> res;
<a name="l03061"></a>03061          }
<a name="l03062"></a>03062          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/1m&quot;</span>);
<a name="l03063"></a>03063          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000;
<a name="l03064"></a>03064       } <span class="keywordflow">else</span> {
<a name="l03065"></a>03065          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l03066"></a>03066          res = -1;
<a name="l03067"></a>03067       }
<a name="l03068"></a>03068       <span class="keywordflow">if</span> (!res) {
<a name="l03069"></a>03069          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l03070"></a>03070             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1)) {
<a name="l03071"></a>03071                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l03072"></a>03072             } <span class="keywordflow">else</span> {
<a name="l03073"></a>03073                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l03074"></a>03074             }
<a name="l03075"></a>03075          }
<a name="l03076"></a>03076          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l03077"></a>03077       }
<a name="l03078"></a>03078    }
<a name="l03079"></a>03079    <span class="keywordflow">return</span> res;
<a name="l03080"></a>03080 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a49f831d39c9d7571cbbb30c4c5e11ee0"></a><!-- doxytag: member="say.c::ast_say_number_full_cs" ref="a49f831d39c9d7571cbbb30c4c5e11ee0" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_cs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_cs: Czech syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l00597">597</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>, and <a class="el" href="say_8c_source.html#l00568">exp10_int()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00598"></a>00598 {
<a name="l00599"></a>00599    <span class="keywordtype">int</span> res = 0;
<a name="l00600"></a>00600    <span class="keywordtype">int</span> playh = 0;
<a name="l00601"></a>00601    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00602"></a>00602    
<a name="l00603"></a>00603    <span class="keywordtype">int</span> hundered = 0;
<a name="l00604"></a>00604    <span class="keywordtype">int</span> left = 0;
<a name="l00605"></a>00605    <span class="keywordtype">int</span> length = 0;
<a name="l00606"></a>00606    
<a name="l00607"></a>00607    <span class="comment">/* options - w = woman, m = man, n = neutral. Defaultl is woman */</span>
<a name="l00608"></a>00608    <span class="keywordflow">if</span> (!options)
<a name="l00609"></a>00609       options = <span class="stringliteral">&quot;w&quot;</span>;
<a name="l00610"></a>00610    
<a name="l00611"></a>00611    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l00612"></a>00612       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00613"></a>00613    
<a name="l00614"></a>00614    <span class="keywordflow">while</span> (!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || playh)) {
<a name="l00615"></a>00615       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l00616"></a>00616          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00617"></a>00617          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l00618"></a>00618             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l00619"></a>00619          } <span class="keywordflow">else</span> {
<a name="l00620"></a>00620             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00621"></a>00621          }  
<a name="l00622"></a>00622       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 3 ) {
<a name="l00623"></a>00623          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d%c&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, options[0]);
<a name="l00624"></a>00624          playh = 0;
<a name="l00625"></a>00625          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00626"></a>00626       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l00627"></a>00627          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l00628"></a>00628          playh = 0;
<a name="l00629"></a>00629          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00630"></a>00630       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l00631"></a>00631          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> /10) * 10);
<a name="l00632"></a>00632          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l00633"></a>00633       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l00634"></a>00634          hundered = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100;
<a name="l00635"></a>00635          <span class="keywordflow">if</span> ( hundered == 1 ) {
<a name="l00636"></a>00636             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1sto&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00637"></a>00637          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( hundered == 2 ) {
<a name="l00638"></a>00638             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/2ste&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00639"></a>00639          } <span class="keywordflow">else</span> {
<a name="l00640"></a>00640             res = <a class="code" href="say_8c.html#a49f831d39c9d7571cbbb30c4c5e11ee0" title="ast_say_number_full_cs: Czech syntax">ast_say_number_full_cs</a>(chan, hundered, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00641"></a>00641             <span class="keywordflow">if</span> (res)
<a name="l00642"></a>00642                <span class="keywordflow">return</span> res;
<a name="l00643"></a>00643             <span class="keywordflow">if</span> (hundered == 3 || hundered == 4) {  
<a name="l00644"></a>00644                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/sta&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00645"></a>00645             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( hundered &gt; 4 ) {
<a name="l00646"></a>00646                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/set&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00647"></a>00647             }
<a name="l00648"></a>00648          }
<a name="l00649"></a>00649          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= (hundered * 100);
<a name="l00650"></a>00650       } <span class="keywordflow">else</span> { <span class="comment">/* num &gt; 1000 */</span>
<a name="l00651"></a>00651          length = (int)log10(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)+1;  
<a name="l00652"></a>00652          <span class="keywordflow">while</span> ( (length % 3 ) != 1 ) {
<a name="l00653"></a>00653             length--;      
<a name="l00654"></a>00654          }
<a name="l00655"></a>00655          left = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / (<a class="code" href="say_8c.html#a1f44a56c8bcc760fc4f0ebc95ad03a66">exp10_int</a>(length-1));
<a name="l00656"></a>00656          <span class="keywordflow">if</span> ( left == 2 ) {  
<a name="l00657"></a>00657             <span class="keywordflow">switch</span> (length-1) {
<a name="l00658"></a>00658                <span class="keywordflow">case</span> 9: options = <span class="stringliteral">&quot;w&quot;</span>;  <span class="comment">/* 1,000,000,000 gender female */</span>
<a name="l00659"></a>00659                   <span class="keywordflow">break</span>;
<a name="l00660"></a>00660                <span class="keywordflow">default</span> : options = <span class="stringliteral">&quot;m&quot;</span>; <span class="comment">/* others are male */</span>
<a name="l00661"></a>00661             }
<a name="l00662"></a>00662          }
<a name="l00663"></a>00663          <span class="keywordflow">if</span> ( left &gt; 1 )   { <span class="comment">/* we dont say &quot;one thousand&quot; but only thousand */</span>
<a name="l00664"></a>00664             res = <a class="code" href="say_8c.html#a49f831d39c9d7571cbbb30c4c5e11ee0" title="ast_say_number_full_cs: Czech syntax">ast_say_number_full_cs</a>(chan, left, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00665"></a>00665             <span class="keywordflow">if</span> (res) 
<a name="l00666"></a>00666                <span class="keywordflow">return</span> res;
<a name="l00667"></a>00667          }
<a name="l00668"></a>00668          <span class="keywordflow">if</span> ( left &gt;= 5 ) { <span class="comment">/* &gt;= 5 have the same declesion */</span>
<a name="l00669"></a>00669             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/5_E%d&quot;</span>, length - 1); 
<a name="l00670"></a>00670          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( left &gt;= 2 &amp;&amp; left &lt;= 4 ) {
<a name="l00671"></a>00671             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/2-4_E%d&quot;</span>, length - 1);
<a name="l00672"></a>00672          } <span class="keywordflow">else</span> { <span class="comment">/* left == 1 */</span>
<a name="l00673"></a>00673             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/1_E%d&quot;</span>, length - 1);
<a name="l00674"></a>00674          }
<a name="l00675"></a>00675          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= left * (<a class="code" href="say_8c.html#a1f44a56c8bcc760fc4f0ebc95ad03a66">exp10_int</a>(length-1));
<a name="l00676"></a>00676       }
<a name="l00677"></a>00677       <span class="keywordflow">if</span> (!res) {
<a name="l00678"></a>00678          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l00679"></a>00679             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1)) {
<a name="l00680"></a>00680                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l00681"></a>00681             } <span class="keywordflow">else</span> {
<a name="l00682"></a>00682                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l00683"></a>00683             }
<a name="l00684"></a>00684          }
<a name="l00685"></a>00685          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l00686"></a>00686       }
<a name="l00687"></a>00687    }
<a name="l00688"></a>00688    <span class="keywordflow">return</span> res; 
<a name="l00689"></a>00689 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad0ff1295c4031b4385391a40ce5d4d85"></a><!-- doxytag: member="say.c::ast_say_number_full_da" ref="ad0ff1295c4031b4385391a40ce5d4d85" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_da </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_da: Danish syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l00695">695</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00696"></a>00696 {
<a name="l00697"></a>00697    <span class="keywordtype">int</span> res = 0;
<a name="l00698"></a>00698    <span class="keywordtype">int</span> playh = 0;
<a name="l00699"></a>00699    <span class="keywordtype">int</span> playa = 0;
<a name="l00700"></a>00700    <span class="keywordtype">int</span> cn = 1;    <span class="comment">/* +1 = commune; -1 = neuter */</span>
<a name="l00701"></a>00701    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00702"></a>00702    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l00703"></a>00703       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00704"></a>00704 
<a name="l00705"></a>00705    <span class="keywordflow">if</span> (options &amp;&amp; !strncasecmp(options, <span class="stringliteral">&quot;n&quot;</span>, 1)) cn = -1;
<a name="l00706"></a>00706 
<a name="l00707"></a>00707    <span class="keywordflow">while</span> (!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || playh || playa )) {
<a name="l00708"></a>00708       <span class="comment">/* The grammar for Danish numbers is the same as for English except</span>
<a name="l00709"></a>00709 <span class="comment">      * for the following:</span>
<a name="l00710"></a>00710 <span class="comment">      * - 1 exists in both commune (&quot;en&quot;, file &quot;1N&quot;) and neuter (&quot;et&quot;, file &quot;1&quot;)</span>
<a name="l00711"></a>00711 <span class="comment">      * - numbers 20 through 99 are said in reverse order, i.e. 21 is</span>
<a name="l00712"></a>00712 <span class="comment">      *   &quot;one-and twenty&quot; and 68 is &quot;eight-and sixty&quot;.</span>
<a name="l00713"></a>00713 <span class="comment">      * - &quot;million&quot; is different in singular and plural form</span>
<a name="l00714"></a>00714 <span class="comment">      * - numbers &gt; 1000 with zero as the third digit from last have an</span>
<a name="l00715"></a>00715 <span class="comment">      *   &quot;and&quot; before the last two digits, i.e. 2034 is &quot;two thousand and</span>
<a name="l00716"></a>00716 <span class="comment">      *   four-and thirty&quot; and 1000012 is &quot;one million and twelve&quot;.</span>
<a name="l00717"></a>00717 <span class="comment">      */</span>
<a name="l00718"></a>00718       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l00719"></a>00719          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00720"></a>00720          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l00721"></a>00721             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l00722"></a>00722          } <span class="keywordflow">else</span> {
<a name="l00723"></a>00723             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00724"></a>00724          }  
<a name="l00725"></a>00725       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playh) {
<a name="l00726"></a>00726          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00727"></a>00727          playh = 0;
<a name="l00728"></a>00728       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playa) {
<a name="l00729"></a>00729          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/and&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00730"></a>00730          playa = 0;
<a name="l00731"></a>00731       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1 &amp;&amp; cn == -1) {
<a name="l00732"></a>00732          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00733"></a>00733          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00734"></a>00734       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l00735"></a>00735          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l00736"></a>00736          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00737"></a>00737       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l00738"></a>00738          <span class="keywordtype">int</span> ones = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10;
<a name="l00739"></a>00739          <span class="keywordflow">if</span> (ones) {
<a name="l00740"></a>00740             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d-and&quot;</span>, ones);
<a name="l00741"></a>00741             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= ones;
<a name="l00742"></a>00742          } <span class="keywordflow">else</span> {
<a name="l00743"></a>00743             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l00744"></a>00744             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00745"></a>00745          }
<a name="l00746"></a>00746       } <span class="keywordflow">else</span> {
<a name="l00747"></a>00747          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l00748"></a>00748             <span class="keywordtype">int</span> hundreds = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100;
<a name="l00749"></a>00749             <span class="keywordflow">if</span> (hundreds == 1)
<a name="l00750"></a>00750                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00751"></a>00751             <span class="keywordflow">else</span>
<a name="l00752"></a>00752                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100));
<a name="l00753"></a>00753 
<a name="l00754"></a>00754             playh++;
<a name="l00755"></a>00755             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= 100 * hundreds;
<a name="l00756"></a>00756             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)
<a name="l00757"></a>00757                playa++;
<a name="l00758"></a>00758 
<a name="l00759"></a>00759          } <span class="keywordflow">else</span> {
<a name="l00760"></a>00760             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l00761"></a>00761                res = <a class="code" href="say_8c.html#ad0ff1295c4031b4385391a40ce5d4d85" title="ast_say_number_full_da: Danish syntax">ast_say_number_full_da</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;n&quot;</span>, audiofd, ctrlfd);
<a name="l00762"></a>00762                <span class="keywordflow">if</span> (res)
<a name="l00763"></a>00763                   <span class="keywordflow">return</span> res;
<a name="l00764"></a>00764                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000;
<a name="l00765"></a>00765                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00766"></a>00766             } <span class="keywordflow">else</span> {
<a name="l00767"></a>00767                <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) {
<a name="l00768"></a>00768                   <span class="keywordtype">int</span> millions = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000;
<a name="l00769"></a>00769                   res = <a class="code" href="say_8c.html#ad0ff1295c4031b4385391a40ce5d4d85" title="ast_say_number_full_da: Danish syntax">ast_say_number_full_da</a>(chan, millions, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;c&quot;</span>, audiofd, ctrlfd);
<a name="l00770"></a>00770                   <span class="keywordflow">if</span> (res)
<a name="l00771"></a>00771                      <span class="keywordflow">return</span> res;
<a name="l00772"></a>00772                   <span class="keywordflow">if</span> (millions == 1)
<a name="l00773"></a>00773                      <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00774"></a>00774                   <span class="keywordflow">else</span>
<a name="l00775"></a>00775                      <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/millions&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00776"></a>00776                   <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000;
<a name="l00777"></a>00777                } <span class="keywordflow">else</span> {
<a name="l00778"></a>00778                   <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l00779"></a>00779                   res = -1;
<a name="l00780"></a>00780                }
<a name="l00781"></a>00781             }
<a name="l00782"></a>00782             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100)
<a name="l00783"></a>00783                playa++;
<a name="l00784"></a>00784          }
<a name="l00785"></a>00785       }
<a name="l00786"></a>00786       <span class="keywordflow">if</span> (!res) {
<a name="l00787"></a>00787          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l00788"></a>00788             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1)) 
<a name="l00789"></a>00789                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l00790"></a>00790             <span class="keywordflow">else</span>  
<a name="l00791"></a>00791                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l00792"></a>00792          }
<a name="l00793"></a>00793          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l00794"></a>00794       }
<a name="l00795"></a>00795    }
<a name="l00796"></a>00796    <span class="keywordflow">return</span> res;
<a name="l00797"></a>00797 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5ab1deb33c81966bd9269f860881f6df"></a><!-- doxytag: member="say.c::ast_say_number_full_de" ref="a5ab1deb33c81966bd9269f860881f6df" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_de </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_de: German syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l00808">808</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l02669">ast_say_enumeration_full_da()</a>, <a class="el" href="say_8c_source.html#l02832">ast_say_enumeration_full_de()</a>, and <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00809"></a>00809 {
<a name="l00810"></a>00810    <span class="keywordtype">int</span> res = 0, t = 0;
<a name="l00811"></a>00811    <span class="keywordtype">int</span> mf = 1;                            <span class="comment">/* +1 = male and neuter; -1 = female */</span>
<a name="l00812"></a>00812    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00813"></a>00813    <span class="keywordtype">char</span> fna[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00814"></a>00814    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l00815"></a>00815       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00816"></a>00816 
<a name="l00817"></a>00817    <span class="keywordflow">if</span> (options &amp;&amp; (!strncasecmp(options, <span class="stringliteral">&quot;f&quot;</span>, 1)))
<a name="l00818"></a>00818       mf = -1;
<a name="l00819"></a>00819 
<a name="l00820"></a>00820    <span class="keywordflow">while</span> (!res &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {
<a name="l00821"></a>00821       <span class="comment">/* The grammar for German numbers is the same as for English except</span>
<a name="l00822"></a>00822 <span class="comment">      * for the following:</span>
<a name="l00823"></a>00823 <span class="comment">      * - numbers 20 through 99 are said in reverse order, i.e. 21 is</span>
<a name="l00824"></a>00824 <span class="comment">      *   &quot;one-and twenty&quot; and 68 is &quot;eight-and sixty&quot;.</span>
<a name="l00825"></a>00825 <span class="comment">      * - &quot;one&quot; varies according to gender</span>
<a name="l00826"></a>00826 <span class="comment">      * - 100 is &apos;hundert&apos;, however all other instances are &apos;ein hundert&apos;</span>
<a name="l00827"></a>00827 <span class="comment">      * - 1000 is &apos;tausend&apos;, however all other instances are &apos;ein tausend&apos;</span>
<a name="l00828"></a>00828 <span class="comment">      * - 1000000 is always &apos;eine million&apos;</span>
<a name="l00829"></a>00829 <span class="comment">      * - &quot;million&quot; is different in singular and plural form</span>
<a name="l00830"></a>00830 <span class="comment">      */</span>
<a name="l00831"></a>00831       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l00832"></a>00832          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00833"></a>00833          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l00834"></a>00834             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l00835"></a>00835          } <span class="keywordflow">else</span> {
<a name="l00836"></a>00836             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00837"></a>00837          }  
<a name="l00838"></a>00838       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100 &amp;&amp; t) {
<a name="l00839"></a>00839          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/and&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00840"></a>00840          t = 0;
<a name="l00841"></a>00841       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1 &amp;&amp; mf == -1) {
<a name="l00842"></a>00842          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%dF&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l00843"></a>00843          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00844"></a>00844       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l00845"></a>00845          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l00846"></a>00846          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00847"></a>00847       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l00848"></a>00848          <span class="keywordtype">int</span> ones = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10;
<a name="l00849"></a>00849          <span class="keywordflow">if</span> (ones) {
<a name="l00850"></a>00850             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d-and&quot;</span>, ones);
<a name="l00851"></a>00851             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= ones;
<a name="l00852"></a>00852          } <span class="keywordflow">else</span> {
<a name="l00853"></a>00853             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l00854"></a>00854             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00855"></a>00855          }
<a name="l00856"></a>00856       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 100 &amp;&amp; t == 0) {
<a name="l00857"></a>00857          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00858"></a>00858          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00859"></a>00859       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l00860"></a>00860          <span class="keywordtype">int</span> hundreds = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100;
<a name="l00861"></a>00861          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 100;
<a name="l00862"></a>00862          <span class="keywordflow">if</span> (hundreds == 1) {
<a name="l00863"></a>00863             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00864"></a>00864          } <span class="keywordflow">else</span> {
<a name="l00865"></a>00865             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, hundreds);
<a name="l00866"></a>00866          }
<a name="l00867"></a>00867          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fna, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l00868"></a>00868          t = 1;
<a name="l00869"></a>00869       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1000 &amp;&amp; t == 0) {
<a name="l00870"></a>00870          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00871"></a>00871          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00872"></a>00872       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l00873"></a>00873          <span class="keywordtype">int</span> thousands = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000;
<a name="l00874"></a>00874          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000;
<a name="l00875"></a>00875          t = 1;
<a name="l00876"></a>00876          <span class="keywordflow">if</span> (thousands == 1) {
<a name="l00877"></a>00877             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00878"></a>00878             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fna, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l00879"></a>00879          } <span class="keywordflow">else</span> {
<a name="l00880"></a>00880             res = <a class="code" href="say_8c.html#a5ab1deb33c81966bd9269f860881f6df" title="ast_say_number_full_de: German syntax">ast_say_number_full_de</a>(chan, thousands, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00881"></a>00881             <span class="keywordflow">if</span> (res)
<a name="l00882"></a>00882                <span class="keywordflow">return</span> res;
<a name="l00883"></a>00883             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00884"></a>00884          }
<a name="l00885"></a>00885       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) {
<a name="l00886"></a>00886          <span class="keywordtype">int</span> millions = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000;
<a name="l00887"></a>00887          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000;
<a name="l00888"></a>00888          t = 1;
<a name="l00889"></a>00889          <span class="keywordflow">if</span> (millions == 1) {
<a name="l00890"></a>00890             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1F&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00891"></a>00891             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fna, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l00892"></a>00892          } <span class="keywordflow">else</span> {
<a name="l00893"></a>00893             res = <a class="code" href="say_8c.html#a5ab1deb33c81966bd9269f860881f6df" title="ast_say_number_full_de: German syntax">ast_say_number_full_de</a>(chan, millions, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00894"></a>00894             <span class="keywordflow">if</span> (res)
<a name="l00895"></a>00895                <span class="keywordflow">return</span> res;
<a name="l00896"></a>00896             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/millions&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00897"></a>00897          }
<a name="l00898"></a>00898       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt;= INT_MAX) {
<a name="l00899"></a>00899          <span class="keywordtype">int</span> billions = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000000;
<a name="l00900"></a>00900          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000000;
<a name="l00901"></a>00901          t = 1;
<a name="l00902"></a>00902          <span class="keywordflow">if</span> (billions == 1) {
<a name="l00903"></a>00903             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1F&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00904"></a>00904             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fna, <span class="stringliteral">&quot;digits/milliard&quot;</span>, <span class="keyword">sizeof</span>(fna));
<a name="l00905"></a>00905          } <span class="keywordflow">else</span> {
<a name="l00906"></a>00906             res = <a class="code" href="say_8c.html#a5ab1deb33c81966bd9269f860881f6df" title="ast_say_number_full_de: German syntax">ast_say_number_full_de</a>(chan, billions, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00907"></a>00907             <span class="keywordflow">if</span> (res) {
<a name="l00908"></a>00908                <span class="keywordflow">return</span> res;
<a name="l00909"></a>00909             }
<a name="l00910"></a>00910             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/milliards&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00911"></a>00911          }
<a name="l00912"></a>00912       } <span class="keywordflow">else</span> {
<a name="l00913"></a>00913          <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l00914"></a>00914          res = -1;
<a name="l00915"></a>00915       }
<a name="l00916"></a>00916       <span class="keywordflow">if</span> (!res) {
<a name="l00917"></a>00917          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l00918"></a>00918             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1)) 
<a name="l00919"></a>00919                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l00920"></a>00920             <span class="keywordflow">else</span>  
<a name="l00921"></a>00921                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l00922"></a>00922          }
<a name="l00923"></a>00923          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l00924"></a>00924          <span class="keywordflow">if</span> (!res) {
<a name="l00925"></a>00925             <span class="keywordflow">if</span> (strlen(fna) != 0 &amp;&amp; !<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fna, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l00926"></a>00926                <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l00927"></a>00927                   res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l00928"></a>00928                <span class="keywordflow">else</span>
<a name="l00929"></a>00929                   res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l00930"></a>00930             }
<a name="l00931"></a>00931             <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l00932"></a>00932             strcpy(fna, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00933"></a>00933          }
<a name="l00934"></a>00934       }
<a name="l00935"></a>00935    }
<a name="l00936"></a>00936    <span class="keywordflow">return</span> res;
<a name="l00937"></a>00937 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad44c88ef3d874e42ed56b7bcdf57cb85"></a><!-- doxytag: member="say.c::ast_say_number_full_en" ref="ad44c88ef3d874e42ed56b7bcdf57cb85" args="(struct ast_channel *chan, int num, const char *ints, const char *language, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_en </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_en: English syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l00504">504</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l02571">ast_say_enumeration_full_en()</a>, and <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00505"></a>00505 {
<a name="l00506"></a>00506    <span class="keywordtype">int</span> res = 0;
<a name="l00507"></a>00507    <span class="keywordtype">int</span> playh = 0;
<a name="l00508"></a>00508    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00509"></a>00509    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l00510"></a>00510       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00511"></a>00511 
<a name="l00512"></a>00512    <span class="keywordflow">while</span> (!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || playh)) {
<a name="l00513"></a>00513       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l00514"></a>00514          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00515"></a>00515          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l00516"></a>00516             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l00517"></a>00517          } <span class="keywordflow">else</span> {
<a name="l00518"></a>00518             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00519"></a>00519          }  
<a name="l00520"></a>00520       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playh) {
<a name="l00521"></a>00521          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00522"></a>00522          playh = 0;
<a name="l00523"></a>00523       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l00524"></a>00524          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l00525"></a>00525          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00526"></a>00526       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l00527"></a>00527          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> /10) * 10);
<a name="l00528"></a>00528          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l00529"></a>00529       } <span class="keywordflow">else</span> {
<a name="l00530"></a>00530          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000){
<a name="l00531"></a>00531             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/100));
<a name="l00532"></a>00532             playh++;
<a name="l00533"></a>00533             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;
<a name="l00534"></a>00534          } <span class="keywordflow">else</span> {
<a name="l00535"></a>00535             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) { <span class="comment">/* 1,000,000 */</span>
<a name="l00536"></a>00536                res = <a class="code" href="say_8c.html#ad44c88ef3d874e42ed56b7bcdf57cb85" title="ast_say_number_full_en: English syntax">ast_say_number_full_en</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00537"></a>00537                <span class="keywordflow">if</span> (res)
<a name="l00538"></a>00538                   <span class="keywordflow">return</span> res;
<a name="l00539"></a>00539                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l00540"></a>00540                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/thousand&quot;</span>);
<a name="l00541"></a>00541             } <span class="keywordflow">else</span> {
<a name="l00542"></a>00542                <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) { <span class="comment">/* 1,000,000,000 */</span>
<a name="l00543"></a>00543                   res = <a class="code" href="say_8c.html#ad44c88ef3d874e42ed56b7bcdf57cb85" title="ast_say_number_full_en: English syntax">ast_say_number_full_en</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00544"></a>00544                   <span class="keywordflow">if</span> (res)
<a name="l00545"></a>00545                      <span class="keywordflow">return</span> res;
<a name="l00546"></a>00546                   <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000000;
<a name="l00547"></a>00547                   <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00548"></a>00548                } <span class="keywordflow">else</span> {
<a name="l00549"></a>00549                   <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l00550"></a>00550                   res = -1;
<a name="l00551"></a>00551                }
<a name="l00552"></a>00552             }
<a name="l00553"></a>00553          }
<a name="l00554"></a>00554       }
<a name="l00555"></a>00555       <span class="keywordflow">if</span> (!res) {
<a name="l00556"></a>00556          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l00557"></a>00557             <span class="keywordflow">if</span> ((audiofd  &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l00558"></a>00558                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l00559"></a>00559             <span class="keywordflow">else</span>
<a name="l00560"></a>00560                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l00561"></a>00561          }
<a name="l00562"></a>00562          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l00563"></a>00563       }
<a name="l00564"></a>00564    }
<a name="l00565"></a>00565    <span class="keywordflow">return</span> res;
<a name="l00566"></a>00566 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a904d8ce61420f03ce0f20e525dcf7040"></a><!-- doxytag: member="say.c::ast_say_number_full_en_GB" ref="a904d8ce61420f03ce0f20e525dcf7040" args="(struct ast_channel *chan, int num, const char *ints, const char *language, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_en_GB </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_en_GB: British and Norwegian syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l00943">943</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00944"></a>00944 {
<a name="l00945"></a>00945    <span class="keywordtype">int</span> res = 0;
<a name="l00946"></a>00946    <span class="keywordtype">int</span> playh = 0;
<a name="l00947"></a>00947    <span class="keywordtype">int</span> playa = 0;
<a name="l00948"></a>00948    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00949"></a>00949    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l00950"></a>00950       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00951"></a>00951 
<a name="l00952"></a>00952    <span class="keywordflow">while</span> (!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || playh || playa )) {
<a name="l00953"></a>00953       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l00954"></a>00954          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00955"></a>00955          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l00956"></a>00956             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l00957"></a>00957          } <span class="keywordflow">else</span> {
<a name="l00958"></a>00958             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00959"></a>00959          }  
<a name="l00960"></a>00960       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playh) {
<a name="l00961"></a>00961          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00962"></a>00962          playh = 0;
<a name="l00963"></a>00963       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playa) {
<a name="l00964"></a>00964          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/and&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00965"></a>00965          playa = 0;
<a name="l00966"></a>00966       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l00967"></a>00967          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l00968"></a>00968          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00969"></a>00969       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l00970"></a>00970          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> /10) * 10);
<a name="l00971"></a>00971          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l00972"></a>00972       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l00973"></a>00973          <span class="keywordtype">int</span> hundreds = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100;
<a name="l00974"></a>00974          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100));
<a name="l00975"></a>00975 
<a name="l00976"></a>00976          playh++;
<a name="l00977"></a>00977          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= 100 * hundreds;
<a name="l00978"></a>00978          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)
<a name="l00979"></a>00979             playa++;
<a name="l00980"></a>00980       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l00981"></a>00981          res = <a class="code" href="say_8c.html#a904d8ce61420f03ce0f20e525dcf7040" title="ast_say_number_full_en_GB: British and Norwegian syntax">ast_say_number_full_en_GB</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00982"></a>00982          <span class="keywordflow">if</span> (res)
<a name="l00983"></a>00983             <span class="keywordflow">return</span> res;
<a name="l00984"></a>00984          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00985"></a>00985          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l00986"></a>00986          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100)
<a name="l00987"></a>00987             playa++;
<a name="l00988"></a>00988       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) {
<a name="l00989"></a>00989             <span class="keywordtype">int</span> millions = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000;
<a name="l00990"></a>00990             res = <a class="code" href="say_8c.html#a904d8ce61420f03ce0f20e525dcf7040" title="ast_say_number_full_en_GB: British and Norwegian syntax">ast_say_number_full_en_GB</a>(chan, millions, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00991"></a>00991             <span class="keywordflow">if</span> (res)
<a name="l00992"></a>00992                <span class="keywordflow">return</span> res;
<a name="l00993"></a>00993             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l00994"></a>00994             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000000;
<a name="l00995"></a>00995             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100)
<a name="l00996"></a>00996                playa++;
<a name="l00997"></a>00997       } <span class="keywordflow">else</span> {
<a name="l00998"></a>00998             <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l00999"></a>00999             res = -1;
<a name="l01000"></a>01000       }
<a name="l01001"></a>01001       
<a name="l01002"></a>01002       <span class="keywordflow">if</span> (!res) {
<a name="l01003"></a>01003          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l01004"></a>01004             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1)) 
<a name="l01005"></a>01005                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l01006"></a>01006             <span class="keywordflow">else</span>  
<a name="l01007"></a>01007                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l01008"></a>01008          }
<a name="l01009"></a>01009          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l01010"></a>01010       }
<a name="l01011"></a>01011    }
<a name="l01012"></a>01012    <span class="keywordflow">return</span> res;
<a name="l01013"></a>01013 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7e1aac3120524368ac2bb9a72da190fc"></a><!-- doxytag: member="say.c::ast_say_number_full_es" ref="a7e1aac3120524368ac2bb9a72da190fc" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_es </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_es: Spanish syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l01021">1021</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01022"></a>01022 {
<a name="l01023"></a>01023    <span class="keywordtype">int</span> res = 0;
<a name="l01024"></a>01024    <span class="keywordtype">int</span> playa = 0;
<a name="l01025"></a>01025    <span class="keywordtype">int</span> mf = 0;                            <span class="comment">/* +1 = male; -1 = female */</span>
<a name="l01026"></a>01026    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l01027"></a>01027    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l01028"></a>01028       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01029"></a>01029 
<a name="l01030"></a>01030    <span class="keywordflow">if</span> (options) {
<a name="l01031"></a>01031       <span class="keywordflow">if</span> (!strncasecmp(options, <span class="stringliteral">&quot;f&quot;</span>, 1))
<a name="l01032"></a>01032          mf = -1;
<a name="l01033"></a>01033       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(options, <span class="stringliteral">&quot;m&quot;</span>, 1))
<a name="l01034"></a>01034          mf = 1;
<a name="l01035"></a>01035    }
<a name="l01036"></a>01036 
<a name="l01037"></a>01037    <span class="keywordflow">while</span> (!res &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {
<a name="l01038"></a>01038       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l01039"></a>01039          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01040"></a>01040          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l01041"></a>01041             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l01042"></a>01042          } <span class="keywordflow">else</span> {
<a name="l01043"></a>01043             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01044"></a>01044          }  
<a name="l01045"></a>01045       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playa) {
<a name="l01046"></a>01046          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/and&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01047"></a>01047          playa = 0;
<a name="l01048"></a>01048       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1) {
<a name="l01049"></a>01049          <span class="keywordflow">if</span> (mf &lt; 0)
<a name="l01050"></a>01050             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%dF&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01051"></a>01051          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mf &gt; 0)
<a name="l01052"></a>01052             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%dM&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01053"></a>01053          <span class="keywordflow">else</span> 
<a name="l01054"></a>01054             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01055"></a>01055          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01056"></a>01056       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 31) {
<a name="l01057"></a>01057          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01058"></a>01058          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01059"></a>01059       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l01060"></a>01060          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/10)*10);
<a name="l01061"></a>01061          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l01062"></a>01062          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)
<a name="l01063"></a>01063             playa++;
<a name="l01064"></a>01064       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 100) {
<a name="l01065"></a>01065          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/100&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01066"></a>01066          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01067"></a>01067       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 200) {
<a name="l01068"></a>01068          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/100-and&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01069"></a>01069          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= 100;
<a name="l01070"></a>01070       } <span class="keywordflow">else</span> {
<a name="l01071"></a>01071          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l01072"></a>01072             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/100)*100);
<a name="l01073"></a>01073             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;
<a name="l01074"></a>01074          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 2000) {
<a name="l01075"></a>01075             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l01076"></a>01076             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01077"></a>01077          } <span class="keywordflow">else</span> {
<a name="l01078"></a>01078             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l01079"></a>01079                res = <a class="code" href="say_8c.html#a7e1aac3120524368ac2bb9a72da190fc" title="ast_say_number_full_es: Spanish syntax">ast_say_number_full_es</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l01080"></a>01080                <span class="keywordflow">if</span> (res)
<a name="l01081"></a>01081                   <span class="keywordflow">return</span> res;
<a name="l01082"></a>01082                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l01083"></a>01083                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01084"></a>01084             } <span class="keywordflow">else</span> {
<a name="l01085"></a>01085                <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 2147483640) {
<a name="l01086"></a>01086                   <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/1000000) == 1) {
<a name="l01087"></a>01087                      res = <a class="code" href="say_8c.html#a7e1aac3120524368ac2bb9a72da190fc" title="ast_say_number_full_es: Spanish syntax">ast_say_number_full_es</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;M&quot;</span>, audiofd, ctrlfd);
<a name="l01088"></a>01088                      <span class="keywordflow">if</span> (res)
<a name="l01089"></a>01089                         <span class="keywordflow">return</span> res;
<a name="l01090"></a>01090                      <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01091"></a>01091                   } <span class="keywordflow">else</span> {
<a name="l01092"></a>01092                      res = <a class="code" href="say_8c.html#a7e1aac3120524368ac2bb9a72da190fc" title="ast_say_number_full_es: Spanish syntax">ast_say_number_full_es</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l01093"></a>01093                      <span class="keywordflow">if</span> (res)
<a name="l01094"></a>01094                         <span class="keywordflow">return</span> res;
<a name="l01095"></a>01095                      <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/millions&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01096"></a>01096                   }
<a name="l01097"></a>01097                   <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000000;
<a name="l01098"></a>01098                } <span class="keywordflow">else</span> {
<a name="l01099"></a>01099                   <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01100"></a>01100                   res = -1;
<a name="l01101"></a>01101                }
<a name="l01102"></a>01102             }
<a name="l01103"></a>01103          }
<a name="l01104"></a>01104       }
<a name="l01105"></a>01105 
<a name="l01106"></a>01106       <span class="keywordflow">if</span> (!res) {
<a name="l01107"></a>01107          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l01108"></a>01108             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l01109"></a>01109                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l01110"></a>01110             <span class="keywordflow">else</span>
<a name="l01111"></a>01111                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l01112"></a>01112          }
<a name="l01113"></a>01113          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l01114"></a>01114 
<a name="l01115"></a>01115       }
<a name="l01116"></a>01116          
<a name="l01117"></a>01117    }
<a name="l01118"></a>01118    <span class="keywordflow">return</span> res;
<a name="l01119"></a>01119 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa525a58f2cd9090afe8adb150b14ef2f"></a><!-- doxytag: member="say.c::ast_say_number_full_fr" ref="aa525a58f2cd9090afe8adb150b14ef2f" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_fr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_fr: French syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l01125">1125</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01126"></a>01126 {
<a name="l01127"></a>01127    <span class="keywordtype">int</span> res = 0;
<a name="l01128"></a>01128    <span class="keywordtype">int</span> playh = 0;
<a name="l01129"></a>01129    <span class="keywordtype">int</span> playa = 0;
<a name="l01130"></a>01130    <span class="keywordtype">int</span> mf = 1;                            <span class="comment">/* +1 = male; -1 = female */</span>
<a name="l01131"></a>01131    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l01132"></a>01132    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l01133"></a>01133       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01134"></a>01134    
<a name="l01135"></a>01135    <span class="keywordflow">if</span> (options &amp;&amp; !strncasecmp(options, <span class="stringliteral">&quot;f&quot;</span>, 1))
<a name="l01136"></a>01136       mf = -1;
<a name="l01137"></a>01137 
<a name="l01138"></a>01138    <span class="keywordflow">while</span> (!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || playh || playa)) {
<a name="l01139"></a>01139       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l01140"></a>01140          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01141"></a>01141          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l01142"></a>01142             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l01143"></a>01143          } <span class="keywordflow">else</span> {
<a name="l01144"></a>01144             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01145"></a>01145          }  
<a name="l01146"></a>01146       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playh) {
<a name="l01147"></a>01147          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01148"></a>01148          playh = 0;
<a name="l01149"></a>01149       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playa) {
<a name="l01150"></a>01150          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/et&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01151"></a>01151          playa = 0;
<a name="l01152"></a>01152       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1) {
<a name="l01153"></a>01153          <span class="keywordflow">if</span> (mf &lt; 0)
<a name="l01154"></a>01154             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%dF&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01155"></a>01155          <span class="keywordflow">else</span>
<a name="l01156"></a>01156             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01157"></a>01157          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01158"></a>01158       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 21) {
<a name="l01159"></a>01159          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01160"></a>01160          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01161"></a>01161       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 70) {
<a name="l01162"></a>01162          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/10)*10);
<a name="l01163"></a>01163          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10) == 1) playa++;
<a name="l01164"></a>01164          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10;
<a name="l01165"></a>01165       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 80) {
<a name="l01166"></a>01166          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/60&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01167"></a>01167          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10) == 1) playa++;
<a name="l01168"></a>01168          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= 60;
<a name="l01169"></a>01169       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l01170"></a>01170          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/80&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01171"></a>01171          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - 80;
<a name="l01172"></a>01172       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 200) {
<a name="l01173"></a>01173          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01174"></a>01174          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - 100;
<a name="l01175"></a>01175       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l01176"></a>01176          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/100));
<a name="l01177"></a>01177          playh++;
<a name="l01178"></a>01178          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 100;
<a name="l01179"></a>01179       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 2000) {
<a name="l01180"></a>01180          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01181"></a>01181          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - 1000;
<a name="l01182"></a>01182       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l01183"></a>01183          res = <a class="code" href="say_8c.html#aa525a58f2cd9090afe8adb150b14ef2f" title="ast_say_number_full_fr: French syntax">ast_say_number_full_fr</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l01184"></a>01184          <span class="keywordflow">if</span> (res)
<a name="l01185"></a>01185             <span class="keywordflow">return</span> res;
<a name="l01186"></a>01186          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01187"></a>01187          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000;
<a name="l01188"></a>01188       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) {
<a name="l01189"></a>01189          res = <a class="code" href="say_8c.html#aa525a58f2cd9090afe8adb150b14ef2f" title="ast_say_number_full_fr: French syntax">ast_say_number_full_fr</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l01190"></a>01190          <span class="keywordflow">if</span> (res)
<a name="l01191"></a>01191             <span class="keywordflow">return</span> res;
<a name="l01192"></a>01192          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01193"></a>01193          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000;
<a name="l01194"></a>01194       } <span class="keywordflow">else</span> {
<a name="l01195"></a>01195          <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01196"></a>01196          res = -1;
<a name="l01197"></a>01197       }
<a name="l01198"></a>01198       <span class="keywordflow">if</span> (!res) {
<a name="l01199"></a>01199          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l01200"></a>01200             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l01201"></a>01201                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l01202"></a>01202             <span class="keywordflow">else</span>
<a name="l01203"></a>01203                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l01204"></a>01204          }
<a name="l01205"></a>01205          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l01206"></a>01206       }
<a name="l01207"></a>01207    }
<a name="l01208"></a>01208    <span class="keywordflow">return</span> res;
<a name="l01209"></a>01209 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac16b9b35bdddf06b7fe0c347120adf37"></a><!-- doxytag: member="say.c::ast_say_number_full_gr" ref="ac16b9b35bdddf06b7fe0c347120adf37" args="(struct ast_channel *chan, int num, const char *ints, const char *language, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_gr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07079">7079</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07283">ast_say_date_with_format_gr()</a>, and <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07080"></a>07080 {
<a name="l07081"></a>07081    <span class="keywordtype">int</span> res = 0;
<a name="l07082"></a>07082    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l07083"></a>07083    <span class="keywordtype">int</span> i=0;
<a name="l07084"></a>07084 
<a name="l07085"></a>07085  
<a name="l07086"></a>07086    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {
<a name="l07087"></a>07087       <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/0&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l07088"></a>07088       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, chan-&gt;language);
<a name="l07089"></a>07089       <span class="keywordflow">if</span> (!res)
<a name="l07090"></a>07090          <span class="keywordflow">return</span>  <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07091"></a>07091    }
<a name="l07092"></a>07092 
<a name="l07093"></a>07093    <span class="keywordflow">while</span> (!res &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> ) {
<a name="l07094"></a>07094       i++;
<a name="l07095"></a>07095       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 13) {
<a name="l07096"></a>07096          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l07097"></a>07097          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l07098"></a>07098       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt;= 100) {
<a name="l07099"></a>07099          <span class="comment">/* 13 &lt; num &lt;= 100  */</span>
<a name="l07100"></a>07100          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> /10) * 10);
<a name="l07101"></a>07101          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10; 
<a name="l07102"></a>07102       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 200) {
<a name="l07103"></a>07103          <span class="comment">/* 100 &lt; num &lt; 200 */</span>
<a name="l07104"></a>07104          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/hundred-100&quot;</span>);
<a name="l07105"></a>07105          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;
<a name="l07106"></a>07106       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l07107"></a>07107          <span class="comment">/* 200 &lt; num &lt; 1000 */</span>
<a name="l07108"></a>07108          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/hundred-%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/100)*100);
<a name="l07109"></a>07109          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;
<a name="l07110"></a>07110       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 2000){
<a name="l07111"></a>07111          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/xilia&quot;</span>);
<a name="l07112"></a>07112          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l07113"></a>07113       } <span class="keywordflow">else</span> {
<a name="l07114"></a>07114          <span class="comment">/* num &gt;  1000 */</span> 
<a name="l07115"></a>07115          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l07116"></a>07116             res = <a class="code" href="say_8c.html#ac16b9b35bdddf06b7fe0c347120adf37">ast_say_number_full_gr</a>(chan, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000), ints, chan-&gt;language, audiofd, ctrlfd);
<a name="l07117"></a>07117             <span class="keywordflow">if</span> (res)
<a name="l07118"></a>07118                <span class="keywordflow">return</span> res;
<a name="l07119"></a>07119             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l07120"></a>07120             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/thousands&quot;</span>);
<a name="l07121"></a>07121          }  <span class="keywordflow">else</span> {
<a name="l07122"></a>07122             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) { <span class="comment">/* 1,000,000,000 */</span>
<a name="l07123"></a>07123                res = <a class="code" href="say_8c.html#ac16b9b35bdddf06b7fe0c347120adf37">ast_say_number_full_gr</a>(chan, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000), ints, chan-&gt;language, audiofd, ctrlfd);
<a name="l07124"></a>07124                <span class="keywordflow">if</span> (res)
<a name="l07125"></a>07125                   <span class="keywordflow">return</span> res;
<a name="l07126"></a>07126                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000000;
<a name="l07127"></a>07127                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/millions&quot;</span>);
<a name="l07128"></a>07128             } <span class="keywordflow">else</span> {
<a name="l07129"></a>07129                <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l07130"></a>07130                res = -1;
<a name="l07131"></a>07131             }
<a name="l07132"></a>07132          }
<a name="l07133"></a>07133       } 
<a name="l07134"></a>07134       <span class="keywordflow">if</span> (!res) {
<a name="l07135"></a>07135          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l07136"></a>07136             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l07137"></a>07137                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l07138"></a>07138             <span class="keywordflow">else</span>
<a name="l07139"></a>07139                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07140"></a>07140          }
<a name="l07141"></a>07141          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l07142"></a>07142       }
<a name="l07143"></a>07143    }
<a name="l07144"></a>07144    <span class="keywordflow">return</span> res;
<a name="l07145"></a>07145 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a954b0be90c03b1c03eeae93b96d9e6e6"></a><!-- doxytag: member="say.c::ast_say_number_full_he" ref="a954b0be90c03b1c03eeae93b96d9e6e6" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_he </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l01217">1217</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="logger_8h_source.html#l00079">ast_verbose</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>, <a class="el" href="say_8c_source.html#l01216">SAY_NUM_BUF_SIZE</a>, and <a class="el" href="logger_8h_source.html#l00043">VERBOSE_PREFIX_3</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l04322">ast_say_date_with_format_he()</a>, <a class="el" href="say_8c_source.html#l02994">ast_say_enumeration_full_he()</a>, <a class="el" href="say_8c_source.html#l06354">ast_say_time_he()</a>, and <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01218"></a>01218 {
<a name="l01219"></a>01219    <span class="keywordtype">int</span> res = 0;
<a name="l01220"></a>01220    <span class="keywordtype">int</span> <a class="code" href="structstate.html">state</a> = 0;          <span class="comment">/* no need to save anything */</span>
<a name="l01221"></a>01221    <span class="keywordtype">int</span> mf = -1;            <span class="comment">/* +1 = Masculin; -1 = Feminin */</span>
<a name="l01222"></a>01222    <span class="keywordtype">int</span> tmpnum = 0;
<a name="l01223"></a>01223 
<a name="l01224"></a>01224    <span class="keywordtype">char</span> fn[<a class="code" href="say_8c.html#a7a03a2adba7f5a40aaa36b4244ba458b">SAY_NUM_BUF_SIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l01225"></a>01225 
<a name="l01226"></a>01226    <a class="code" href="logger_8h.html#afcd8b407dfb3f461488abf7d1ed70fb9">ast_verbose</a>(<a class="code" href="logger_8h.html#a24b0f46e22f4ea3226fa082e955dd4ef">VERBOSE_PREFIX_3</a> <span class="stringliteral">&quot;ast_say_digits_full: started. num: %d, options=\&quot;%s\&quot;\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, options);
<a name="l01227"></a>01227 
<a name="l01228"></a>01228    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {
<a name="l01229"></a>01229       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01230"></a>01230    }
<a name="l01231"></a>01231    <span class="keywordflow">if</span> (options &amp;&amp; !strncasecmp(options, <span class="stringliteral">&quot;m&quot;</span>, 1)) {
<a name="l01232"></a>01232       mf = 1;
<a name="l01233"></a>01233    }
<a name="l01234"></a>01234    <a class="code" href="logger_8h.html#afcd8b407dfb3f461488abf7d1ed70fb9">ast_verbose</a>(<a class="code" href="logger_8h.html#a24b0f46e22f4ea3226fa082e955dd4ef">VERBOSE_PREFIX_3</a> <span class="stringliteral">&quot;ast_say_digits_full: num: %d, state=%d, options=\&quot;%s\&quot;, mf=%d\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, state, options, mf);
<a name="l01235"></a>01235 
<a name="l01236"></a>01236    <span class="comment">/* Do we have work to do? */</span>
<a name="l01237"></a>01237    <span class="keywordflow">while</span> (!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || (state &gt; 0))) {
<a name="l01238"></a>01238       <span class="comment">/* first type of work: play a second sound. In this loop</span>
<a name="l01239"></a>01239 <span class="comment">       * we can only play one sound file at a time. Thus playing</span>
<a name="l01240"></a>01240 <span class="comment">       * a second one requires repeating the loop just for the</span>
<a name="l01241"></a>01241 <span class="comment">       * second file. The variable &apos;state&apos; remembers where we were.</span>
<a name="l01242"></a>01242 <span class="comment">       * state==0 is the normal mode and it means that we continue</span>
<a name="l01243"></a>01243 <span class="comment">       * to check if the number num has yet anything left.</span>
<a name="l01244"></a>01244 <span class="comment">       */</span>
<a name="l01245"></a>01245       <a class="code" href="logger_8h.html#afcd8b407dfb3f461488abf7d1ed70fb9">ast_verbose</a>(<a class="code" href="logger_8h.html#a24b0f46e22f4ea3226fa082e955dd4ef">VERBOSE_PREFIX_3</a> <span class="stringliteral">&quot;ast_say_digits_full: num: %d, state=%d, options=\&quot;%s\&quot;, mf=%d, tmpnum=%d\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, state, options, mf, tmpnum);
<a name="l01246"></a>01246 
<a name="l01247"></a>01247       <span class="keywordflow">if</span> (state == 1) {
<a name="l01248"></a>01248          state = 0;
<a name="l01249"></a>01249       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state == 2) {
<a name="l01250"></a>01250          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt;= 11) &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 21)) {
<a name="l01251"></a>01251             <span class="keywordflow">if</span> (mf &lt; 0) {
<a name="l01252"></a>01252                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/ve&quot;</span>);
<a name="l01253"></a>01253             } <span class="keywordflow">else</span> {
<a name="l01254"></a>01254                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/uu&quot;</span>);
<a name="l01255"></a>01255             }
<a name="l01256"></a>01256          } <span class="keywordflow">else</span> {
<a name="l01257"></a>01257             <span class="keywordflow">switch</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) {
<a name="l01258"></a>01258             <span class="keywordflow">case</span> 1:
<a name="l01259"></a>01259                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/ve&quot;</span>);
<a name="l01260"></a>01260                <span class="keywordflow">break</span>;
<a name="l01261"></a>01261             <span class="keywordflow">case</span> 2:
<a name="l01262"></a>01262                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/uu&quot;</span>);
<a name="l01263"></a>01263                <span class="keywordflow">break</span>;
<a name="l01264"></a>01264             <span class="keywordflow">case</span> 3:
<a name="l01265"></a>01265                <span class="keywordflow">if</span> (mf &lt; 0) {
<a name="l01266"></a>01266                   snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/ve&quot;</span>);
<a name="l01267"></a>01267                } <span class="keywordflow">else</span> {
<a name="l01268"></a>01268                   snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/uu&quot;</span>);
<a name="l01269"></a>01269                }
<a name="l01270"></a>01270                <span class="keywordflow">break</span>;
<a name="l01271"></a>01271             <span class="keywordflow">case</span> 4:
<a name="l01272"></a>01272                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/ve&quot;</span>);
<a name="l01273"></a>01273                <span class="keywordflow">break</span>;
<a name="l01274"></a>01274             <span class="keywordflow">case</span> 5:
<a name="l01275"></a>01275                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/ve&quot;</span>);
<a name="l01276"></a>01276                <span class="keywordflow">break</span>;
<a name="l01277"></a>01277             <span class="keywordflow">case</span> 6:
<a name="l01278"></a>01278                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/ve&quot;</span>);
<a name="l01279"></a>01279                <span class="keywordflow">break</span>;
<a name="l01280"></a>01280             <span class="keywordflow">case</span> 7:
<a name="l01281"></a>01281                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/ve&quot;</span>);
<a name="l01282"></a>01282                <span class="keywordflow">break</span>;
<a name="l01283"></a>01283             <span class="keywordflow">case</span> 8:
<a name="l01284"></a>01284                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/uu&quot;</span>);
<a name="l01285"></a>01285                <span class="keywordflow">break</span>;
<a name="l01286"></a>01286             <span class="keywordflow">case</span> 9:
<a name="l01287"></a>01287                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/ve&quot;</span>);
<a name="l01288"></a>01288                <span class="keywordflow">break</span>;
<a name="l01289"></a>01289             <span class="keywordflow">case</span> 10:
<a name="l01290"></a>01290                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/ve&quot;</span>);
<a name="l01291"></a>01291                <span class="keywordflow">break</span>;
<a name="l01292"></a>01292             }
<a name="l01293"></a>01293          }
<a name="l01294"></a>01294          state = 0;
<a name="l01295"></a>01295       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state == 3) {
<a name="l01296"></a>01296          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/1k&quot;</span>);
<a name="l01297"></a>01297          state = 0;
<a name="l01298"></a>01298       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l01299"></a>01299          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/minus&quot;</span>);
<a name="l01300"></a>01300          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = (-1) * <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l01301"></a>01301       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l01302"></a>01302          <span class="keywordflow">if</span> (mf &lt; 0) {
<a name="l01303"></a>01303             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01304"></a>01304          } <span class="keywordflow">else</span> {
<a name="l01305"></a>01305             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%dm&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01306"></a>01306          }
<a name="l01307"></a>01307          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01308"></a>01308       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt;= 20)) {
<a name="l01309"></a>01309          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 10) * 10);
<a name="l01310"></a>01310          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10;
<a name="l01311"></a>01311          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; 0) {
<a name="l01312"></a>01312             state = 2;
<a name="l01313"></a>01313          }
<a name="l01314"></a>01314       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt;= 100) &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000)) {
<a name="l01315"></a>01315          tmpnum = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100;
<a name="l01316"></a>01316          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d00&quot;</span>, tmpnum);
<a name="l01317"></a>01317          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - (tmpnum * 100);
<a name="l01318"></a>01318          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; 0) &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 11)) {
<a name="l01319"></a>01319             state = 2;
<a name="l01320"></a>01320          }
<a name="l01321"></a>01321       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt;= 1000) &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 10000)) {
<a name="l01322"></a>01322          tmpnum = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000;
<a name="l01323"></a>01323          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%dk&quot;</span>, tmpnum);
<a name="l01324"></a>01324          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - (tmpnum * 1000);
<a name="l01325"></a>01325          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; 0) &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 11)) {
<a name="l01326"></a>01326             state = 2;
<a name="l01327"></a>01327          }
<a name="l01328"></a>01328       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20000) {
<a name="l01329"></a>01329          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%dm&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000));
<a name="l01330"></a>01330          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000;
<a name="l01331"></a>01331          state = 3;
<a name="l01332"></a>01332       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l01333"></a>01333          res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;m&quot;</span>, audiofd, ctrlfd);
<a name="l01334"></a>01334          <span class="keywordflow">if</span> (res) {
<a name="l01335"></a>01335             <span class="keywordflow">return</span> res;
<a name="l01336"></a>01336          }
<a name="l01337"></a>01337          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/1k&quot;</span>);
<a name="l01338"></a>01338          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000;
<a name="l01339"></a>01339          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; 0) &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 11)) {
<a name="l01340"></a>01340             state = 2;
<a name="l01341"></a>01341          }
<a name="l01342"></a>01342       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 2000000) {
<a name="l01343"></a>01343          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/million&quot;</span>);
<a name="l01344"></a>01344          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000;
<a name="l01345"></a>01345          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; 0) &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 11)) {
<a name="l01346"></a>01346             state = 2;
<a name="l01347"></a>01347          }
<a name="l01348"></a>01348       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 3000000) {
<a name="l01349"></a>01349          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/twomillion&quot;</span>);
<a name="l01350"></a>01350          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - 2000000;
<a name="l01351"></a>01351          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; 0) &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 11)) {
<a name="l01352"></a>01352             state = 2;
<a name="l01353"></a>01353          }
<a name="l01354"></a>01354       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) {
<a name="l01355"></a>01355          res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;m&quot;</span>, audiofd, ctrlfd);
<a name="l01356"></a>01356          <span class="keywordflow">if</span> (res) {
<a name="l01357"></a>01357             <span class="keywordflow">return</span> res;
<a name="l01358"></a>01358          }
<a name="l01359"></a>01359          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/million&quot;</span>);
<a name="l01360"></a>01360          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000;
<a name="l01361"></a>01361          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; 0) &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 11)) {
<a name="l01362"></a>01362             state = 2;
<a name="l01363"></a>01363          }
<a name="l01364"></a>01364       } <span class="keywordflow">else</span> {
<a name="l01365"></a>01365          <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01366"></a>01366          res = -1;
<a name="l01367"></a>01367       }
<a name="l01368"></a>01368       tmpnum = 0;
<a name="l01369"></a>01369       <span class="keywordflow">if</span> (!res) {
<a name="l01370"></a>01370          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l01371"></a>01371             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1)) {
<a name="l01372"></a>01372                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l01373"></a>01373             } <span class="keywordflow">else</span> {
<a name="l01374"></a>01374                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l01375"></a>01375             }
<a name="l01376"></a>01376          }
<a name="l01377"></a>01377          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l01378"></a>01378       }
<a name="l01379"></a>01379    }
<a name="l01380"></a>01380    <span class="keywordflow">return</span> res;
<a name="l01381"></a>01381 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9a8df90a122f5b736f0a359c03804f5e"></a><!-- doxytag: member="say.c::ast_say_number_full_hu" ref="a9a8df90a122f5b736f0a359c03804f5e" args="(struct ast_channel *chan, int num, const char *ints, const char *language, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_hu </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_hu: Hungarian syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l01388">1388</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01389"></a>01389 {
<a name="l01390"></a>01390    <span class="keywordtype">int</span> res = 0;
<a name="l01391"></a>01391    <span class="keywordtype">int</span> playh = 0;
<a name="l01392"></a>01392    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l01393"></a>01393    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l01394"></a>01394       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01395"></a>01395 
<a name="l01396"></a>01396    <span class="comment">/*</span>
<a name="l01397"></a>01397 <span class="comment">   Hungarian support</span>
<a name="l01398"></a>01398 <span class="comment">   like english, except numbers up to 29 are from 2 words.</span>
<a name="l01399"></a>01399 <span class="comment">   10 and first word of 1[1-9] and 20 and first word of 2[1-9] are different.</span>
<a name="l01400"></a>01400 <span class="comment">   */</span>
<a name="l01401"></a>01401 
<a name="l01402"></a>01402    <span class="keywordflow">while</span>(!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || playh)) {
<a name="l01403"></a>01403       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l01404"></a>01404          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01405"></a>01405          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l01406"></a>01406             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l01407"></a>01407          } <span class="keywordflow">else</span> {
<a name="l01408"></a>01408             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01409"></a>01409          }  
<a name="l01410"></a>01410       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playh) {
<a name="l01411"></a>01411          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01412"></a>01412          playh = 0;
<a name="l01413"></a>01413       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 11 || <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 20) {
<a name="l01414"></a>01414          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01415"></a>01415          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01416"></a>01416       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l01417"></a>01417          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/10en&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01418"></a>01418          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= 10;
<a name="l01419"></a>01419       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 30) {
<a name="l01420"></a>01420          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/20on&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01421"></a>01421          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= 20;
<a name="l01422"></a>01422       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l01423"></a>01423          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> /10) * 10);
<a name="l01424"></a>01424          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l01425"></a>01425       } <span class="keywordflow">else</span> {
<a name="l01426"></a>01426          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000){
<a name="l01427"></a>01427             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/100));
<a name="l01428"></a>01428             playh++;
<a name="l01429"></a>01429             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;
<a name="l01430"></a>01430          } <span class="keywordflow">else</span> {
<a name="l01431"></a>01431             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) { <span class="comment">/* 1,000,000 */</span>
<a name="l01432"></a>01432                res = <a class="code" href="say_8c.html#a9a8df90a122f5b736f0a359c03804f5e" title="ast_say_number_full_hu: Hungarian syntax">ast_say_number_full_hu</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01433"></a>01433                <span class="keywordflow">if</span> (res)
<a name="l01434"></a>01434                   <span class="keywordflow">return</span> res;
<a name="l01435"></a>01435                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l01436"></a>01436                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01437"></a>01437             } <span class="keywordflow">else</span> {
<a name="l01438"></a>01438                <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) { <span class="comment">/* 1,000,000,000 */</span>
<a name="l01439"></a>01439                   res = <a class="code" href="say_8c.html#a9a8df90a122f5b736f0a359c03804f5e" title="ast_say_number_full_hu: Hungarian syntax">ast_say_number_full_hu</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01440"></a>01440                   <span class="keywordflow">if</span> (res)
<a name="l01441"></a>01441                      <span class="keywordflow">return</span> res;
<a name="l01442"></a>01442                   <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000000;
<a name="l01443"></a>01443                   <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01444"></a>01444                } <span class="keywordflow">else</span> {
<a name="l01445"></a>01445                   <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01446"></a>01446                   res = -1;
<a name="l01447"></a>01447                }
<a name="l01448"></a>01448             }
<a name="l01449"></a>01449          }
<a name="l01450"></a>01450       }
<a name="l01451"></a>01451       <span class="keywordflow">if</span> (!res) {
<a name="l01452"></a>01452          <span class="keywordflow">if</span>(!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l01453"></a>01453             <span class="keywordflow">if</span> ((audiofd  &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l01454"></a>01454                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l01455"></a>01455             <span class="keywordflow">else</span>
<a name="l01456"></a>01456                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l01457"></a>01457          }
<a name="l01458"></a>01458          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l01459"></a>01459       }
<a name="l01460"></a>01460    }
<a name="l01461"></a>01461    <span class="keywordflow">return</span> res;
<a name="l01462"></a>01462 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2230fadaf90551bdbbc5f33cfdba1d8c"></a><!-- doxytag: member="say.c::ast_say_number_full_it" ref="a2230fadaf90551bdbbc5f33cfdba1d8c" args="(struct ast_channel *chan, int num, const char *ints, const char *language, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_it </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_it: Italian </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l01465">1465</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01466"></a>01466 {
<a name="l01467"></a>01467    <span class="keywordtype">int</span> res = 0;
<a name="l01468"></a>01468    <span class="keywordtype">int</span> playh = 0;
<a name="l01469"></a>01469    <span class="keywordtype">int</span> tempnum = 0;
<a name="l01470"></a>01470    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l01471"></a>01471 
<a name="l01472"></a>01472    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)
<a name="l01473"></a>01473       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01474"></a>01474 
<a name="l01475"></a>01475       <span class="comment">/*</span>
<a name="l01476"></a>01476 <span class="comment">      Italian support</span>
<a name="l01477"></a>01477 <span class="comment"></span>
<a name="l01478"></a>01478 <span class="comment">      Like english, numbers up to 20 are a single &apos;word&apos;, and others</span>
<a name="l01479"></a>01479 <span class="comment">      compound, but with exceptions.</span>
<a name="l01480"></a>01480 <span class="comment">      For example 21 is not twenty-one, but there is a single word in &apos;it&apos;.</span>
<a name="l01481"></a>01481 <span class="comment">      Idem for 28 (ie when a the 2nd part of a compund number</span>
<a name="l01482"></a>01482 <span class="comment">      starts with a vowel)</span>
<a name="l01483"></a>01483 <span class="comment"></span>
<a name="l01484"></a>01484 <span class="comment">      There are exceptions also for hundred, thousand and million.</span>
<a name="l01485"></a>01485 <span class="comment">      In english 100 = one hundred, 200 is two hundred.</span>
<a name="l01486"></a>01486 <span class="comment">      In italian 100 = cento , like to say hundred (without one),</span>
<a name="l01487"></a>01487 <span class="comment">      200 and more are like english.</span>
<a name="l01488"></a>01488 <span class="comment">      </span>
<a name="l01489"></a>01489 <span class="comment">      Same applies for thousand:</span>
<a name="l01490"></a>01490 <span class="comment">      1000 is one thousand in en, 2000 is two thousand.</span>
<a name="l01491"></a>01491 <span class="comment">      In it we have 1000 = mille , 2000 = 2 mila </span>
<a name="l01492"></a>01492 <span class="comment"></span>
<a name="l01493"></a>01493 <span class="comment">      For million(s) we use the plural, if more than one</span>
<a name="l01494"></a>01494 <span class="comment">      Also, one million is abbreviated in it, like on-million,</span>
<a name="l01495"></a>01495 <span class="comment">      or &apos;un milione&apos;, not &apos;uno milione&apos;.</span>
<a name="l01496"></a>01496 <span class="comment">      So the right file is provided.</span>
<a name="l01497"></a>01497 <span class="comment">      */</span>
<a name="l01498"></a>01498 
<a name="l01499"></a>01499    <span class="keywordflow">while</span> (!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || playh)) {
<a name="l01500"></a>01500          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l01501"></a>01501             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01502"></a>01502             <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l01503"></a>01503                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l01504"></a>01504             } <span class="keywordflow">else</span> {
<a name="l01505"></a>01505                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01506"></a>01506             }  
<a name="l01507"></a>01507          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playh) {
<a name="l01508"></a>01508             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01509"></a>01509             playh = 0;
<a name="l01510"></a>01510          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l01511"></a>01511             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01512"></a>01512             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01513"></a>01513          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 21) {
<a name="l01514"></a>01514             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01515"></a>01515             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01516"></a>01516          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 28) {
<a name="l01517"></a>01517             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01518"></a>01518             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01519"></a>01519          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 31) {
<a name="l01520"></a>01520             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01521"></a>01521             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01522"></a>01522          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 38) {
<a name="l01523"></a>01523             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01524"></a>01524             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01525"></a>01525          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 41) {
<a name="l01526"></a>01526             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01527"></a>01527             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01528"></a>01528          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 48) {
<a name="l01529"></a>01529             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01530"></a>01530             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01531"></a>01531          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 51) {
<a name="l01532"></a>01532             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01533"></a>01533             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01534"></a>01534          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 58) {
<a name="l01535"></a>01535             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01536"></a>01536             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01537"></a>01537          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 61) {
<a name="l01538"></a>01538             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01539"></a>01539             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01540"></a>01540          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 68) {
<a name="l01541"></a>01541             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01542"></a>01542             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01543"></a>01543          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 71) {
<a name="l01544"></a>01544             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01545"></a>01545             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01546"></a>01546          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 78) {
<a name="l01547"></a>01547             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01548"></a>01548             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01549"></a>01549          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 81) {
<a name="l01550"></a>01550             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01551"></a>01551             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01552"></a>01552          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 88) {
<a name="l01553"></a>01553             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01554"></a>01554             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01555"></a>01555          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 91) {
<a name="l01556"></a>01556             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01557"></a>01557             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01558"></a>01558          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 98) {
<a name="l01559"></a>01559             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01560"></a>01560             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01561"></a>01561          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l01562"></a>01562             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> /10) * 10);
<a name="l01563"></a>01563             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l01564"></a>01564          } <span class="keywordflow">else</span> {
<a name="l01565"></a>01565             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l01566"></a>01566                <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100) &gt; 1) {
<a name="l01567"></a>01567                   snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/100));
<a name="l01568"></a>01568                   playh++;
<a name="l01569"></a>01569                } <span class="keywordflow">else</span> {
<a name="l01570"></a>01570                   <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01571"></a>01571                }
<a name="l01572"></a>01572                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;
<a name="l01573"></a>01573             } <span class="keywordflow">else</span> {
<a name="l01574"></a>01574                <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) { <span class="comment">/* 1,000,000 */</span>
<a name="l01575"></a>01575                   <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/1000) &gt; 1)
<a name="l01576"></a>01576                      res = <a class="code" href="say_8c.html#a2230fadaf90551bdbbc5f33cfdba1d8c" title="ast_say_number_full_it: Italian">ast_say_number_full_it</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01577"></a>01577                   <span class="keywordflow">if</span> (res)
<a name="l01578"></a>01578                      <span class="keywordflow">return</span> res;
<a name="l01579"></a>01579                   tempnum = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l01580"></a>01580                   <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l01581"></a>01581                   <span class="keywordflow">if</span> ((tempnum / 1000) &lt; 2)
<a name="l01582"></a>01582                      <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01583"></a>01583                   <span class="keywordflow">else</span> <span class="comment">/* for 1000 it says mille, for &gt;1000 (eg 2000) says mila */</span>
<a name="l01584"></a>01584                      <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousands&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01585"></a>01585                } <span class="keywordflow">else</span> {
<a name="l01586"></a>01586                   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) { <span class="comment">/* 1,000,000,000 */</span>
<a name="l01587"></a>01587                      <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000) &gt; 1)
<a name="l01588"></a>01588                         res = <a class="code" href="say_8c.html#a2230fadaf90551bdbbc5f33cfdba1d8c" title="ast_say_number_full_it: Italian">ast_say_number_full_it</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01589"></a>01589                      <span class="keywordflow">if</span> (res)
<a name="l01590"></a>01590                         <span class="keywordflow">return</span> res;
<a name="l01591"></a>01591                      tempnum = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l01592"></a>01592                      <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000000;
<a name="l01593"></a>01593                      <span class="keywordflow">if</span> ((tempnum / 1000000) &lt; 2)
<a name="l01594"></a>01594                         <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01595"></a>01595                      <span class="keywordflow">else</span>
<a name="l01596"></a>01596                         <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/millions&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01597"></a>01597                   } <span class="keywordflow">else</span> {
<a name="l01598"></a>01598                      <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01599"></a>01599                      res = -1;
<a name="l01600"></a>01600                   }
<a name="l01601"></a>01601                }
<a name="l01602"></a>01602             }
<a name="l01603"></a>01603          }
<a name="l01604"></a>01604          <span class="keywordflow">if</span> (!res) {
<a name="l01605"></a>01605             <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l01606"></a>01606                <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l01607"></a>01607                   res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l01608"></a>01608                <span class="keywordflow">else</span>
<a name="l01609"></a>01609                   res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l01610"></a>01610             }
<a name="l01611"></a>01611             <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l01612"></a>01612          }
<a name="l01613"></a>01613       }
<a name="l01614"></a>01614    <span class="keywordflow">return</span> res;
<a name="l01615"></a>01615 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a86cb2d32ea9a4d78b8534aa4ce3410f2"></a><!-- doxytag: member="say.c::ast_say_number_full_ka" ref="a86cb2d32ea9a4d78b8534aa4ce3410f2" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_ka </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_ka: Georgian syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l07619">7619</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="astmm_8h_source.html#l00081">ast_malloc</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="say_8c_source.html#l07480">ast_translate_number_ka()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>, <a class="el" href="func__strings_8c_source.html#l00821">len()</a>, and <a class="el" href="aesopt_8h_source.html#l00399">s</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07620"></a>07620 {
<a name="l07621"></a>07621    <span class="keywordtype">int</span> res = 0;
<a name="l07622"></a>07622    <span class="keywordtype">char</span> fn[512] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l07623"></a>07623    <span class="keywordtype">char</span>* <a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a> = 0;
<a name="l07624"></a>07624    <span class="keyword">const</span> <span class="keywordtype">char</span>* remaining = fn;
<a name="l07625"></a>07625 
<a name="l07626"></a>07626    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)
<a name="l07627"></a>07627       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l07628"></a>07628 
<a name="l07629"></a>07629 
<a name="l07630"></a>07630    <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, fn, 512);
<a name="l07631"></a>07631 
<a name="l07632"></a>07632 
<a name="l07633"></a>07633 
<a name="l07634"></a>07634    <span class="keywordflow">while</span> (res == 0 &amp;&amp; (s = strstr(remaining, <span class="stringliteral">&quot; &quot;</span>))) {
<a name="l07635"></a>07635       <span class="keywordtype">size_t</span> <a class="code" href="func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = s - remaining;
<a name="l07636"></a>07636       <span class="keywordtype">char</span>* new_string = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>(len + 1 + strlen(<span class="stringliteral">&quot;digits/&quot;</span>));
<a name="l07637"></a>07637 
<a name="l07638"></a>07638       sprintf(new_string, <span class="stringliteral">&quot;digits/&quot;</span>);
<a name="l07639"></a>07639       strncat(new_string, remaining, len);  <span class="comment">/* we can&apos;t sprintf() it, it&apos;s not null-terminated. */</span>
<a name="l07640"></a>07640 <span class="comment">/*       new_string[len + strlen(&quot;digits/&quot;)] = &apos;\0&apos;; */</span>
<a name="l07641"></a>07641 
<a name="l07642"></a>07642       <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, new_string, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l07643"></a>07643          <span class="keywordflow">if</span> ((audiofd  &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l07644"></a>07644             res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l07645"></a>07645          <span class="keywordflow">else</span>
<a name="l07646"></a>07646             res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07647"></a>07647       }
<a name="l07648"></a>07648       <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l07649"></a>07649 
<a name="l07650"></a>07650       <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(new_string);
<a name="l07651"></a>07651 
<a name="l07652"></a>07652       remaining = s + 1;  <span class="comment">/* position just after the found space char. */</span>
<a name="l07653"></a>07653       <span class="keywordflow">while</span> (*remaining == <span class="charliteral">&apos; &apos;</span>)  <span class="comment">/* skip multiple spaces */</span>
<a name="l07654"></a>07654          remaining++;
<a name="l07655"></a>07655    }
<a name="l07656"></a>07656 
<a name="l07657"></a>07657 
<a name="l07658"></a>07658    <span class="comment">/* the last chunk. */</span>
<a name="l07659"></a>07659    <span class="keywordflow">if</span> (res == 0 &amp;&amp; *remaining) {
<a name="l07660"></a>07660 
<a name="l07661"></a>07661       <span class="keywordtype">char</span>* new_string = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>(strlen(remaining) + 1 + strlen(<span class="stringliteral">&quot;digits/&quot;</span>));
<a name="l07662"></a>07662       sprintf(new_string, <span class="stringliteral">&quot;digits/%s&quot;</span>, remaining);
<a name="l07663"></a>07663 
<a name="l07664"></a>07664       <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, new_string, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l07665"></a>07665          <span class="keywordflow">if</span> ((audiofd  &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l07666"></a>07666             res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l07667"></a>07667          <span class="keywordflow">else</span>
<a name="l07668"></a>07668             res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07669"></a>07669       }
<a name="l07670"></a>07670       <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l07671"></a>07671 
<a name="l07672"></a>07672       <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(new_string);
<a name="l07673"></a>07673 
<a name="l07674"></a>07674    }
<a name="l07675"></a>07675 
<a name="l07676"></a>07676 
<a name="l07677"></a>07677    <span class="keywordflow">return</span> res;
<a name="l07678"></a>07678 
<a name="l07679"></a>07679 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a47ca4077ef4937c00d24c4f4ea47a809"></a><!-- doxytag: member="say.c::ast_say_number_full_nl" ref="a47ca4077ef4937c00d24c4f4ea47a809" args="(struct ast_channel *chan, int num, const char *ints, const char *language, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_nl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_nl: dutch syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l01620">1620</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01621"></a>01621 {
<a name="l01622"></a>01622    <span class="keywordtype">int</span> res = 0;
<a name="l01623"></a>01623    <span class="keywordtype">int</span> playh = 0;
<a name="l01624"></a>01624    <span class="keywordtype">int</span> units = 0;
<a name="l01625"></a>01625    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l01626"></a>01626    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l01627"></a>01627       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01628"></a>01628    <span class="keywordflow">while</span> (!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || playh )) {
<a name="l01629"></a>01629       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l01630"></a>01630          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01631"></a>01631          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l01632"></a>01632             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l01633"></a>01633          } <span class="keywordflow">else</span> {
<a name="l01634"></a>01634             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01635"></a>01635          }  
<a name="l01636"></a>01636       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playh) {
<a name="l01637"></a>01637          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01638"></a>01638          playh = 0;
<a name="l01639"></a>01639       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l01640"></a>01640          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01641"></a>01641          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01642"></a>01642       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l01643"></a>01643          units = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10;
<a name="l01644"></a>01644          <span class="keywordflow">if</span> (units &gt; 0) {
<a name="l01645"></a>01645             res = <a class="code" href="say_8c.html#a47ca4077ef4937c00d24c4f4ea47a809" title="ast_say_number_full_nl: dutch syntax">ast_say_number_full_nl</a>(chan, units, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01646"></a>01646             <span class="keywordflow">if</span> (res)
<a name="l01647"></a>01647                <span class="keywordflow">return</span> res;
<a name="l01648"></a>01648             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - units;
<a name="l01649"></a>01649             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/nl-en&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01650"></a>01650          } <span class="keywordflow">else</span> {
<a name="l01651"></a>01651             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - units);
<a name="l01652"></a>01652             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01653"></a>01653          }
<a name="l01654"></a>01654       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 200) {
<a name="l01655"></a>01655          <span class="comment">/* hundred, not one-hundred */</span>
<a name="l01656"></a>01656          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01657"></a>01657          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;
<a name="l01658"></a>01658       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l01659"></a>01659          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100);
<a name="l01660"></a>01660          playh++;
<a name="l01661"></a>01661          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;
<a name="l01662"></a>01662       } <span class="keywordflow">else</span> {
<a name="l01663"></a>01663          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1100) {
<a name="l01664"></a>01664             <span class="comment">/* thousand, not one-thousand */</span>
<a name="l01665"></a>01665             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l01666"></a>01666             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01667"></a>01667          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 10000) { <span class="comment">/* 1,100 to 9,9999 */</span>
<a name="l01668"></a>01668             res = <a class="code" href="say_8c.html#a47ca4077ef4937c00d24c4f4ea47a809" title="ast_say_number_full_nl: dutch syntax">ast_say_number_full_nl</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01669"></a>01669             <span class="keywordflow">if</span> (res)
<a name="l01670"></a>01670                <span class="keywordflow">return</span> res;
<a name="l01671"></a>01671             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;
<a name="l01672"></a>01672             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01673"></a>01673          } <span class="keywordflow">else</span> {
<a name="l01674"></a>01674             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) { <span class="comment">/* 1,000,000 */</span>
<a name="l01675"></a>01675                res = <a class="code" href="say_8c.html#a47ca4077ef4937c00d24c4f4ea47a809" title="ast_say_number_full_nl: dutch syntax">ast_say_number_full_nl</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01676"></a>01676                <span class="keywordflow">if</span> (res)
<a name="l01677"></a>01677                   <span class="keywordflow">return</span> res;
<a name="l01678"></a>01678                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l01679"></a>01679                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01680"></a>01680             } <span class="keywordflow">else</span> {
<a name="l01681"></a>01681                <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) { <span class="comment">/* 1,000,000,000 */</span>
<a name="l01682"></a>01682                   res = <a class="code" href="say_8c.html#a47ca4077ef4937c00d24c4f4ea47a809" title="ast_say_number_full_nl: dutch syntax">ast_say_number_full_nl</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01683"></a>01683                   <span class="keywordflow">if</span> (res)
<a name="l01684"></a>01684                      <span class="keywordflow">return</span> res;
<a name="l01685"></a>01685                   <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000000;
<a name="l01686"></a>01686                   <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01687"></a>01687                } <span class="keywordflow">else</span> {
<a name="l01688"></a>01688                   <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01689"></a>01689                   res = -1;
<a name="l01690"></a>01690                }
<a name="l01691"></a>01691             }
<a name="l01692"></a>01692          }
<a name="l01693"></a>01693       }
<a name="l01694"></a>01694 
<a name="l01695"></a>01695       <span class="keywordflow">if</span> (!res) {
<a name="l01696"></a>01696          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l01697"></a>01697             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l01698"></a>01698                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l01699"></a>01699             <span class="keywordflow">else</span>
<a name="l01700"></a>01700                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l01701"></a>01701          }
<a name="l01702"></a>01702          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l01703"></a>01703       }
<a name="l01704"></a>01704    }
<a name="l01705"></a>01705    <span class="keywordflow">return</span> res;
<a name="l01706"></a>01706 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9b2edaefe9c8e5a03a16d1809c56c5f7"></a><!-- doxytag: member="say.c::ast_say_number_full_no" ref="a9b2edaefe9c8e5a03a16d1809c56c5f7" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_no </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_no: Norwegian syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l01712">1712</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01713"></a>01713 {
<a name="l01714"></a>01714    <span class="keywordtype">int</span> res = 0;
<a name="l01715"></a>01715    <span class="keywordtype">int</span> playh = 0;
<a name="l01716"></a>01716    <span class="keywordtype">int</span> playa = 0;
<a name="l01717"></a>01717    <span class="keywordtype">int</span> cn = 1;    <span class="comment">/* +1 = commune; -1 = neuter */</span>
<a name="l01718"></a>01718    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l01719"></a>01719    
<a name="l01720"></a>01720    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l01721"></a>01721       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l01722"></a>01722    
<a name="l01723"></a>01723    <span class="keywordflow">if</span> (options &amp;&amp; !strncasecmp(options, <span class="stringliteral">&quot;n&quot;</span>, 1)) cn = -1;
<a name="l01724"></a>01724 
<a name="l01725"></a>01725    <span class="keywordflow">while</span> (!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || playh || playa )) {
<a name="l01726"></a>01726       <span class="comment">/* The grammar for Norwegian numbers is the same as for English except</span>
<a name="l01727"></a>01727 <span class="comment">      * for the following:</span>
<a name="l01728"></a>01728 <span class="comment">      * - 1 exists in both commune (&quot;en&quot;, file &quot;1&quot;) and neuter (&quot;ett&quot;, file &quot;1N&quot;)</span>
<a name="l01729"></a>01729 <span class="comment">      *   &quot;and&quot; before the last two digits, i.e. 2034 is &quot;two thousand and</span>
<a name="l01730"></a>01730 <span class="comment">      *   thirty-four&quot; and 1000012 is &quot;one million and twelve&quot;.</span>
<a name="l01731"></a>01731 <span class="comment">      */</span>
<a name="l01732"></a>01732       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l01733"></a>01733          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01734"></a>01734          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l01735"></a>01735             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l01736"></a>01736          } <span class="keywordflow">else</span> {
<a name="l01737"></a>01737             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01738"></a>01738          }  
<a name="l01739"></a>01739       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playh) {
<a name="l01740"></a>01740          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01741"></a>01741          playh = 0;
<a name="l01742"></a>01742       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playa) {
<a name="l01743"></a>01743          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/and&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01744"></a>01744          playa = 0;
<a name="l01745"></a>01745       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1 &amp;&amp; cn == -1) {
<a name="l01746"></a>01746          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01747"></a>01747          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01748"></a>01748       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l01749"></a>01749          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01750"></a>01750          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l01751"></a>01751       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l01752"></a>01752          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> /10) * 10);
<a name="l01753"></a>01753          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l01754"></a>01754       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l01755"></a>01755          <span class="keywordtype">int</span> hundreds = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100;
<a name="l01756"></a>01756          <span class="keywordflow">if</span> (hundreds == 1)
<a name="l01757"></a>01757             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01758"></a>01758          <span class="keywordflow">else</span>
<a name="l01759"></a>01759             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100));
<a name="l01760"></a>01760 
<a name="l01761"></a>01761          playh++;
<a name="l01762"></a>01762          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= 100 * hundreds;
<a name="l01763"></a>01763          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)
<a name="l01764"></a>01764             playa++;
<a name="l01765"></a>01765       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l01766"></a>01766          res = <a class="code" href="say_8c.html#a9b2edaefe9c8e5a03a16d1809c56c5f7" title="ast_say_number_full_no: Norwegian syntax">ast_say_number_full_no</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;n&quot;</span>, audiofd, ctrlfd);
<a name="l01767"></a>01767          <span class="keywordflow">if</span> (res)
<a name="l01768"></a>01768             <span class="keywordflow">return</span> res;
<a name="l01769"></a>01769          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01770"></a>01770          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l01771"></a>01771          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100)
<a name="l01772"></a>01772             playa++;
<a name="l01773"></a>01773       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) {
<a name="l01774"></a>01774             <span class="keywordtype">int</span> millions = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000;
<a name="l01775"></a>01775             res = <a class="code" href="say_8c.html#a9b2edaefe9c8e5a03a16d1809c56c5f7" title="ast_say_number_full_no: Norwegian syntax">ast_say_number_full_no</a>(chan, millions, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;c&quot;</span>, audiofd, ctrlfd);
<a name="l01776"></a>01776             <span class="keywordflow">if</span> (res)
<a name="l01777"></a>01777                <span class="keywordflow">return</span> res;
<a name="l01778"></a>01778             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l01779"></a>01779             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000000;
<a name="l01780"></a>01780             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100)
<a name="l01781"></a>01781                playa++;
<a name="l01782"></a>01782       } <span class="keywordflow">else</span> {
<a name="l01783"></a>01783             <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l01784"></a>01784             res = -1;
<a name="l01785"></a>01785       }
<a name="l01786"></a>01786       
<a name="l01787"></a>01787       <span class="keywordflow">if</span> (!res) {
<a name="l01788"></a>01788          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l01789"></a>01789             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1)) 
<a name="l01790"></a>01790                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l01791"></a>01791             <span class="keywordflow">else</span>  
<a name="l01792"></a>01792                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l01793"></a>01793          }
<a name="l01794"></a>01794          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l01795"></a>01795       }
<a name="l01796"></a>01796    }
<a name="l01797"></a>01797    <span class="keywordflow">return</span> res;
<a name="l01798"></a>01798 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae60374c49cb7d12e43fa96fc9153d814"></a><!-- doxytag: member="say.c::ast_say_number_full_pl" ref="ae60374c49cb7d12e43fa96fc9153d814" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_pl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l01914">1914</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00081">ast_malloc</a>, <a class="el" href="say_8c_source.html#l01802">odmiana::cyfry</a>, <a class="el" href="say_8c_source.html#l01803">odmiana::cyfry2</a>, <a class="el" href="say_8c_source.html#l01805">odmiana::dziesiatki</a>, <a class="el" href="say_8c_source.html#l01806">odmiana::nastki</a>, <a class="el" href="say_8c_source.html#l01844">powiedz()</a>, <a class="el" href="say_8c_source.html#l01807">odmiana::rzedy</a>, <a class="el" href="say_8c_source.html#l01801">odmiana::separator_dziesiatek</a>, and <a class="el" href="say_8c_source.html#l01804">odmiana::setki</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01916"></a>01916              :
<a name="l01917"></a>01917 0     zero
<a name="l01918"></a>01918 1     jeden
<a name="l01919"></a>01919 10    dziesiec
<a name="l01920"></a>01920 100      sto
<a name="l01921"></a>01921 1000     tysiac
<a name="l01922"></a>01922 1000000     milion
<a name="l01923"></a>01923 1000000000  miliard
<a name="l01924"></a>01924 1000000000.2   miliardy
<a name="l01925"></a>01925 1000000000.5   miliardow
<a name="l01926"></a>01926 1000000.2   miliony
<a name="l01927"></a>01927 1000000.5   milionow
<a name="l01928"></a>01928 1000.2      tysiace
<a name="l01929"></a>01929 1000.5      tysiecy
<a name="l01930"></a>01930 100m     stu
<a name="l01931"></a>01931 10m      dziesieciu
<a name="l01932"></a>01932 11    jedenascie
<a name="l01933"></a>01933 11m      jedenastu
<a name="l01934"></a>01934 12    dwanascie
<a name="l01935"></a>01935 12m      dwunastu
<a name="l01936"></a>01936 13    trzynascie
<a name="l01937"></a>01937 13m      trzynastu
<a name="l01938"></a>01938 14    czternascie
<a name="l01939"></a>01939 14m      czternastu
<a name="l01940"></a>01940 15    pietnascie
<a name="l01941"></a>01941 15m      pietnastu
<a name="l01942"></a>01942 16    szesnascie
<a name="l01943"></a>01943 16m      szesnastu
<a name="l01944"></a>01944 17    siedemnascie
<a name="l01945"></a>01945 17m      siedemnastu
<a name="l01946"></a>01946 18    osiemnascie
<a name="l01947"></a>01947 18m      osiemnastu
<a name="l01948"></a>01948 19    dziewietnascie
<a name="l01949"></a>01949 19m      dziewietnastu
<a name="l01950"></a>01950 1z    jedna
<a name="l01951"></a>01951 2     dwa
<a name="l01952"></a>01952 20    dwadziescia
<a name="l01953"></a>01953 200      dwiescie
<a name="l01954"></a>01954 200m     dwustu
<a name="l01955"></a>01955 20m      dwudziestu
<a name="l01956"></a>01956 2-1m     dwaj
<a name="l01957"></a>01957 2-2m     dwoch
<a name="l01958"></a>01958 2z    dwie
<a name="l01959"></a>01959 3     trzy
<a name="l01960"></a>01960 30    trzydziesci
<a name="l01961"></a>01961 300      trzysta
<a name="l01962"></a>01962 300m     trzystu
<a name="l01963"></a>01963 30m      trzydziestu
<a name="l01964"></a>01964 3-1m     trzej
<a name="l01965"></a>01965 3-2m     trzech
<a name="l01966"></a>01966 4     cztery
<a name="l01967"></a>01967 40    czterdziesci
<a name="l01968"></a>01968 400      czterysta
<a name="l01969"></a>01969 400m     czterystu
<a name="l01970"></a>01970 40m      czterdziestu
<a name="l01971"></a>01971 4-1m     czterej
<a name="l01972"></a>01972 4-2m     czterech
<a name="l01973"></a>01973 5     piec
<a name="l01974"></a>01974 50    piecdziesiat
<a name="l01975"></a>01975 500      piecset
<a name="l01976"></a>01976 500m     pieciuset
<a name="l01977"></a>01977 50m      piedziesieciu
<a name="l01978"></a>01978 5m    pieciu
<a name="l01979"></a>01979 6     szesc
<a name="l01980"></a>01980 60    szescdziesiat
<a name="l01981"></a>01981 600      szescset
<a name="l01982"></a>01982 600m     szesciuset
<a name="l01983"></a>01983 60m      szescdziesieciu
<a name="l01984"></a>01984 6m    szesciu
<a name="l01985"></a>01985 7     siedem
<a name="l01986"></a>01986 70    siedemdziesiat
<a name="l01987"></a>01987 700      siedemset
<a name="l01988"></a>01988 700m     siedmiuset
<a name="l01989"></a>01989 70m      siedemdziesieciu
<a name="l01990"></a>01990 7m    siedmiu
<a name="l01991"></a>01991 8     osiem
<a name="l01992"></a>01992 80    osiemdziesiat
<a name="l01993"></a>01993 800      osiemset
<a name="l01994"></a>01994 800m     osmiuset
<a name="l01995"></a>01995 80m      osiemdziesieciu
<a name="l01996"></a>01996 8m    osmiu
<a name="l01997"></a>01997 9     dziewiec
<a name="l01998"></a>01998 90    dziewiecdziesiat
<a name="l01999"></a>01999 900      dziewiecset
<a name="l02000"></a>02000 900m     dziewieciuset
<a name="l02001"></a>02001 90m      dziewiedziesieciu
<a name="l02002"></a>02002 9m    dziewieciu
<a name="l02003"></a>02003 and combinations of eg.: 20_1, 30m_3m, etc...
<a name="l02004"></a>02004 
<a name="l02005"></a>02005 */
<a name="l02006"></a>02006 {
<a name="l02007"></a>02007    <span class="keywordtype">char</span> *zenski_cyfry[] = {<span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;1z&quot;</span>, <span class="stringliteral">&quot;2z&quot;</span>, <span class="stringliteral">&quot;3&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>, <span class="stringliteral">&quot;5&quot;</span>, <span class="stringliteral">&quot;6&quot;</span>, <span class="stringliteral">&quot;7&quot;</span>, <span class="stringliteral">&quot;8&quot;</span>, <span class="stringliteral">&quot;9&quot;</span>};
<a name="l02008"></a>02008 
<a name="l02009"></a>02009    <span class="keywordtype">char</span> *zenski_cyfry2[] = {<span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;2z&quot;</span>, <span class="stringliteral">&quot;3&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>, <span class="stringliteral">&quot;5&quot;</span>, <span class="stringliteral">&quot;6&quot;</span>, <span class="stringliteral">&quot;7&quot;</span>, <span class="stringliteral">&quot;8&quot;</span>, <span class="stringliteral">&quot;9&quot;</span>};
<a name="l02010"></a>02010 
<a name="l02011"></a>02011    <span class="keywordtype">char</span> *meski_cyfry[] = {<span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;2-1m&quot;</span>, <span class="stringliteral">&quot;3-1m&quot;</span>, <span class="stringliteral">&quot;4-1m&quot;</span>, <span class="stringliteral">&quot;5m&quot;</span>,  <span class="comment">/*&quot;2-1mdwaj&quot;*/</span> <span class="stringliteral">&quot;6m&quot;</span>, <span class="stringliteral">&quot;7m&quot;</span>, <span class="stringliteral">&quot;8m&quot;</span>, <span class="stringliteral">&quot;9m&quot;</span>};
<a name="l02012"></a>02012 
<a name="l02013"></a>02013    <span class="keywordtype">char</span> *meski_cyfry2[] = {<span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;2-2m&quot;</span>, <span class="stringliteral">&quot;3-2m&quot;</span>, <span class="stringliteral">&quot;4-2m&quot;</span>, <span class="stringliteral">&quot;5m&quot;</span>, <span class="stringliteral">&quot;6m&quot;</span>, <span class="stringliteral">&quot;7m&quot;</span>, <span class="stringliteral">&quot;8m&quot;</span>, <span class="stringliteral">&quot;9m&quot;</span>};
<a name="l02014"></a>02014 
<a name="l02015"></a>02015    <span class="keywordtype">char</span> *meski_setki[] = {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;100m&quot;</span>, <span class="stringliteral">&quot;200m&quot;</span>, <span class="stringliteral">&quot;300m&quot;</span>, <span class="stringliteral">&quot;400m&quot;</span>, <span class="stringliteral">&quot;500m&quot;</span>, <span class="stringliteral">&quot;600m&quot;</span>, <span class="stringliteral">&quot;700m&quot;</span>, <span class="stringliteral">&quot;800m&quot;</span>, <span class="stringliteral">&quot;900m&quot;</span>};
<a name="l02016"></a>02016 
<a name="l02017"></a>02017    <span class="keywordtype">char</span> *meski_dziesiatki[] = {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;10m&quot;</span>, <span class="stringliteral">&quot;20m&quot;</span>, <span class="stringliteral">&quot;30m&quot;</span>, <span class="stringliteral">&quot;40m&quot;</span>, <span class="stringliteral">&quot;50m&quot;</span>, <span class="stringliteral">&quot;60m&quot;</span>, <span class="stringliteral">&quot;70m&quot;</span>, <span class="stringliteral">&quot;80m&quot;</span>, <span class="stringliteral">&quot;90m&quot;</span>};
<a name="l02018"></a>02018 
<a name="l02019"></a>02019    <span class="keywordtype">char</span> *meski_nastki[] = {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;11m&quot;</span>, <span class="stringliteral">&quot;12m&quot;</span>, <span class="stringliteral">&quot;13m&quot;</span>, <span class="stringliteral">&quot;14m&quot;</span>, <span class="stringliteral">&quot;15m&quot;</span>, <span class="stringliteral">&quot;16m&quot;</span>, <span class="stringliteral">&quot;17m&quot;</span>, <span class="stringliteral">&quot;18m&quot;</span>, <span class="stringliteral">&quot;19m&quot;</span>};
<a name="l02020"></a>02020 
<a name="l02021"></a>02021    <span class="keywordtype">char</span> *nijaki_cyfry[] = {<span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;3&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>, <span class="stringliteral">&quot;5&quot;</span>, <span class="stringliteral">&quot;6&quot;</span>, <span class="stringliteral">&quot;7&quot;</span>, <span class="stringliteral">&quot;8&quot;</span>, <span class="stringliteral">&quot;9&quot;</span>};
<a name="l02022"></a>02022 
<a name="l02023"></a>02023    <span class="keywordtype">char</span> *nijaki_cyfry2[] = {<span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;3&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>, <span class="stringliteral">&quot;5&quot;</span>, <span class="stringliteral">&quot;6&quot;</span>, <span class="stringliteral">&quot;7&quot;</span>, <span class="stringliteral">&quot;8&quot;</span>, <span class="stringliteral">&quot;9&quot;</span>};
<a name="l02024"></a>02024 
<a name="l02025"></a>02025    <span class="keywordtype">char</span> *nijaki_setki[] = {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;100&quot;</span>, <span class="stringliteral">&quot;200&quot;</span>, <span class="stringliteral">&quot;300&quot;</span>, <span class="stringliteral">&quot;400&quot;</span>, <span class="stringliteral">&quot;500&quot;</span>, <span class="stringliteral">&quot;600&quot;</span>, <span class="stringliteral">&quot;700&quot;</span>, <span class="stringliteral">&quot;800&quot;</span>, <span class="stringliteral">&quot;900&quot;</span>};
<a name="l02026"></a>02026 
<a name="l02027"></a>02027    <span class="keywordtype">char</span> *nijaki_dziesiatki[] = {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;10&quot;</span>, <span class="stringliteral">&quot;20&quot;</span>, <span class="stringliteral">&quot;30&quot;</span>, <span class="stringliteral">&quot;40&quot;</span>, <span class="stringliteral">&quot;50&quot;</span>, <span class="stringliteral">&quot;60&quot;</span>, <span class="stringliteral">&quot;70&quot;</span>, <span class="stringliteral">&quot;80&quot;</span>, <span class="stringliteral">&quot;90&quot;</span>};
<a name="l02028"></a>02028 
<a name="l02029"></a>02029    <span class="keywordtype">char</span> *nijaki_nastki[] = {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;11&quot;</span>, <span class="stringliteral">&quot;12&quot;</span>, <span class="stringliteral">&quot;13&quot;</span>, <span class="stringliteral">&quot;14&quot;</span>, <span class="stringliteral">&quot;15&quot;</span>, <span class="stringliteral">&quot;16&quot;</span>, <span class="stringliteral">&quot;17&quot;</span>, <span class="stringliteral">&quot;18&quot;</span>, <span class="stringliteral">&quot;19&quot;</span>};
<a name="l02030"></a>02030 
<a name="l02031"></a>02031    <span class="keywordtype">char</span> *rzedy[][3] = { {<span class="stringliteral">&quot;1000&quot;</span>, <span class="stringliteral">&quot;1000.2&quot;</span>, <span class="stringliteral">&quot;1000.5&quot;</span>}, {<span class="stringliteral">&quot;1000000&quot;</span>, <span class="stringliteral">&quot;1000000.2&quot;</span>, <span class="stringliteral">&quot;1000000.5&quot;</span>}, {<span class="stringliteral">&quot;1000000000&quot;</span>, <span class="stringliteral">&quot;1000000000.2&quot;</span>, <span class="stringliteral">&quot;1000000000.5&quot;</span>}}; 
<a name="l02032"></a>02032 
<a name="l02033"></a>02033    <span class="comment">/* Initialise variables to allow compilation on Debian-stable, etc */</span>
<a name="l02034"></a>02034    <a class="code" href="structodmiana.html">odmiana</a> *o;
<a name="l02035"></a>02035 
<a name="l02036"></a>02036    <span class="keyword">static</span> <a class="code" href="structodmiana.html">odmiana</a> *odmiana_nieosobowa = NULL; 
<a name="l02037"></a>02037    <span class="keyword">static</span> <a class="code" href="structodmiana.html">odmiana</a> *odmiana_meska = NULL; 
<a name="l02038"></a>02038    <span class="keyword">static</span> <a class="code" href="structodmiana.html">odmiana</a> *odmiana_zenska = NULL; 
<a name="l02039"></a>02039 
<a name="l02040"></a>02040    <span class="keywordflow">if</span> (odmiana_nieosobowa == NULL) {
<a name="l02041"></a>02041       odmiana_nieosobowa = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>(<span class="keyword">sizeof</span>(*odmiana_nieosobowa));
<a name="l02042"></a>02042 
<a name="l02043"></a>02043       odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#a3a4a6c9e8af196bdbf8179e1fcc857bd">separator_dziesiatek</a> = <span class="stringliteral">&quot; &quot;</span>;
<a name="l02044"></a>02044 
<a name="l02045"></a>02045       memcpy(odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#a774064f93d19a8550ea4bf25e3d5c529">cyfry</a>, nijaki_cyfry, <span class="keyword">sizeof</span>(odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#a774064f93d19a8550ea4bf25e3d5c529">cyfry</a>));
<a name="l02046"></a>02046       memcpy(odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#a3f298e20f4b4c06e1ab9e6e1dd8c30df">cyfry2</a>, nijaki_cyfry2, <span class="keyword">sizeof</span>(odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#a774064f93d19a8550ea4bf25e3d5c529">cyfry</a>));
<a name="l02047"></a>02047       memcpy(odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#adf57862bfbb7c5a612bf945fa47e6a72">setki</a>, nijaki_setki, <span class="keyword">sizeof</span>(odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#adf57862bfbb7c5a612bf945fa47e6a72">setki</a>));
<a name="l02048"></a>02048       memcpy(odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#af2e5ec8aead9546c54034855f9285502">dziesiatki</a>, nijaki_dziesiatki, <span class="keyword">sizeof</span>(odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#af2e5ec8aead9546c54034855f9285502">dziesiatki</a>));
<a name="l02049"></a>02049       memcpy(odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#abb85f41d549207d32eb74243929bc742">nastki</a>, nijaki_nastki, <span class="keyword">sizeof</span>(odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#abb85f41d549207d32eb74243929bc742">nastki</a>));
<a name="l02050"></a>02050       memcpy(odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#a80546137e881e5c34e282ab59c7f2106">rzedy</a>, rzedy, <span class="keyword">sizeof</span>(odmiana_nieosobowa-&gt;<a class="code" href="structodmiana.html#a80546137e881e5c34e282ab59c7f2106">rzedy</a>));
<a name="l02051"></a>02051    }
<a name="l02052"></a>02052 
<a name="l02053"></a>02053    <span class="keywordflow">if</span> (odmiana_zenska == NULL) {
<a name="l02054"></a>02054       odmiana_zenska = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>(<span class="keyword">sizeof</span>(*odmiana_zenska));
<a name="l02055"></a>02055 
<a name="l02056"></a>02056       odmiana_zenska-&gt;<a class="code" href="structodmiana.html#a3a4a6c9e8af196bdbf8179e1fcc857bd">separator_dziesiatek</a> = <span class="stringliteral">&quot; &quot;</span>;
<a name="l02057"></a>02057 
<a name="l02058"></a>02058       memcpy(odmiana_zenska-&gt;<a class="code" href="structodmiana.html#a774064f93d19a8550ea4bf25e3d5c529">cyfry</a>, zenski_cyfry, <span class="keyword">sizeof</span>(odmiana_zenska-&gt;<a class="code" href="structodmiana.html#a774064f93d19a8550ea4bf25e3d5c529">cyfry</a>));
<a name="l02059"></a>02059       memcpy(odmiana_zenska-&gt;<a class="code" href="structodmiana.html#a3f298e20f4b4c06e1ab9e6e1dd8c30df">cyfry2</a>, zenski_cyfry2, <span class="keyword">sizeof</span>(odmiana_zenska-&gt;<a class="code" href="structodmiana.html#a774064f93d19a8550ea4bf25e3d5c529">cyfry</a>));
<a name="l02060"></a>02060       memcpy(odmiana_zenska-&gt;<a class="code" href="structodmiana.html#adf57862bfbb7c5a612bf945fa47e6a72">setki</a>, nijaki_setki, <span class="keyword">sizeof</span>(odmiana_zenska-&gt;<a class="code" href="structodmiana.html#adf57862bfbb7c5a612bf945fa47e6a72">setki</a>));
<a name="l02061"></a>02061       memcpy(odmiana_zenska-&gt;<a class="code" href="structodmiana.html#af2e5ec8aead9546c54034855f9285502">dziesiatki</a>, nijaki_dziesiatki, <span class="keyword">sizeof</span>(odmiana_zenska-&gt;<a class="code" href="structodmiana.html#af2e5ec8aead9546c54034855f9285502">dziesiatki</a>));
<a name="l02062"></a>02062       memcpy(odmiana_zenska-&gt;<a class="code" href="structodmiana.html#abb85f41d549207d32eb74243929bc742">nastki</a>, nijaki_nastki, <span class="keyword">sizeof</span>(odmiana_zenska-&gt;<a class="code" href="structodmiana.html#abb85f41d549207d32eb74243929bc742">nastki</a>));
<a name="l02063"></a>02063       memcpy(odmiana_zenska-&gt;<a class="code" href="structodmiana.html#a80546137e881e5c34e282ab59c7f2106">rzedy</a>, rzedy, <span class="keyword">sizeof</span>(odmiana_zenska-&gt;<a class="code" href="structodmiana.html#a80546137e881e5c34e282ab59c7f2106">rzedy</a>));
<a name="l02064"></a>02064    }
<a name="l02065"></a>02065 
<a name="l02066"></a>02066    <span class="keywordflow">if</span> (odmiana_meska == NULL) {
<a name="l02067"></a>02067       odmiana_meska = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>(<span class="keyword">sizeof</span>(*odmiana_meska));
<a name="l02068"></a>02068 
<a name="l02069"></a>02069       odmiana_meska-&gt;<a class="code" href="structodmiana.html#a3a4a6c9e8af196bdbf8179e1fcc857bd">separator_dziesiatek</a> = <span class="stringliteral">&quot; &quot;</span>;
<a name="l02070"></a>02070 
<a name="l02071"></a>02071       memcpy(odmiana_meska-&gt;<a class="code" href="structodmiana.html#a774064f93d19a8550ea4bf25e3d5c529">cyfry</a>, meski_cyfry, <span class="keyword">sizeof</span>(odmiana_meska-&gt;<a class="code" href="structodmiana.html#a774064f93d19a8550ea4bf25e3d5c529">cyfry</a>));
<a name="l02072"></a>02072       memcpy(odmiana_meska-&gt;<a class="code" href="structodmiana.html#a3f298e20f4b4c06e1ab9e6e1dd8c30df">cyfry2</a>, meski_cyfry2, <span class="keyword">sizeof</span>(odmiana_meska-&gt;<a class="code" href="structodmiana.html#a774064f93d19a8550ea4bf25e3d5c529">cyfry</a>));
<a name="l02073"></a>02073       memcpy(odmiana_meska-&gt;<a class="code" href="structodmiana.html#adf57862bfbb7c5a612bf945fa47e6a72">setki</a>, meski_setki, <span class="keyword">sizeof</span>(odmiana_meska-&gt;<a class="code" href="structodmiana.html#adf57862bfbb7c5a612bf945fa47e6a72">setki</a>));
<a name="l02074"></a>02074       memcpy(odmiana_meska-&gt;<a class="code" href="structodmiana.html#af2e5ec8aead9546c54034855f9285502">dziesiatki</a>, meski_dziesiatki, <span class="keyword">sizeof</span>(odmiana_meska-&gt;<a class="code" href="structodmiana.html#af2e5ec8aead9546c54034855f9285502">dziesiatki</a>));
<a name="l02075"></a>02075       memcpy(odmiana_meska-&gt;<a class="code" href="structodmiana.html#abb85f41d549207d32eb74243929bc742">nastki</a>, meski_nastki, <span class="keyword">sizeof</span>(odmiana_meska-&gt;<a class="code" href="structodmiana.html#abb85f41d549207d32eb74243929bc742">nastki</a>));
<a name="l02076"></a>02076       memcpy(odmiana_meska-&gt;<a class="code" href="structodmiana.html#a80546137e881e5c34e282ab59c7f2106">rzedy</a>, rzedy, <span class="keyword">sizeof</span>(odmiana_meska-&gt;<a class="code" href="structodmiana.html#a80546137e881e5c34e282ab59c7f2106">rzedy</a>));
<a name="l02077"></a>02077    }
<a name="l02078"></a>02078 
<a name="l02079"></a>02079    <span class="keywordflow">if</span> (options) {
<a name="l02080"></a>02080       <span class="keywordflow">if</span> (strncasecmp(options, <span class="stringliteral">&quot;f&quot;</span>, 1) == 0)
<a name="l02081"></a>02081          o = odmiana_zenska;
<a name="l02082"></a>02082       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncasecmp(options, <span class="stringliteral">&quot;m&quot;</span>, 1) == 0)
<a name="l02083"></a>02083          o = odmiana_meska;
<a name="l02084"></a>02084       <span class="keywordflow">else</span>
<a name="l02085"></a>02085          o = odmiana_nieosobowa;
<a name="l02086"></a>02086    } <span class="keywordflow">else</span>
<a name="l02087"></a>02087       o = odmiana_nieosobowa;
<a name="l02088"></a>02088 
<a name="l02089"></a>02089    <a class="code" href="say_8c.html#ae7cfe5af00e53525309cb121d9b2f607">powiedz</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, o, 0, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02090"></a>02090    <span class="keywordflow">return</span> 0;
<a name="l02091"></a>02091 }

</pre></div></p>

</div>
</div>
<a class="anchor" id="a31997e60e00663fb65c4c875303f63e4"></a><!-- doxytag: member="say.c::ast_say_number_full_pt" ref="a31997e60e00663fb65c4c875303f63e4" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_pt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l02099">2099</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02100"></a>02100 {
<a name="l02101"></a>02101    <span class="keywordtype">int</span> res = 0;
<a name="l02102"></a>02102    <span class="keywordtype">int</span> playh = 0;
<a name="l02103"></a>02103    <span class="keywordtype">int</span> mf = 1;                            <span class="comment">/* +1 = male; -1 = female */</span>
<a name="l02104"></a>02104    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02105"></a>02105 
<a name="l02106"></a>02106    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l02107"></a>02107       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02108"></a>02108 
<a name="l02109"></a>02109    <span class="keywordflow">if</span> (options &amp;&amp; !strncasecmp(options, <span class="stringliteral">&quot;f&quot;</span>, 1))
<a name="l02110"></a>02110       mf = -1;
<a name="l02111"></a>02111 
<a name="l02112"></a>02112    <span class="keywordflow">while</span> (!res &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> ) {
<a name="l02113"></a>02113       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l02114"></a>02114          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02115"></a>02115          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l02116"></a>02116             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l02117"></a>02117          } <span class="keywordflow">else</span> {
<a name="l02118"></a>02118             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02119"></a>02119          }  
<a name="l02120"></a>02120       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l02121"></a>02121          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1 || <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 2) &amp;&amp; (mf &lt; 0))
<a name="l02122"></a>02122             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%dF&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02123"></a>02123          <span class="keywordflow">else</span>
<a name="l02124"></a>02124             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02125"></a>02125          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02126"></a>02126       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l02127"></a>02127          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 10) * 10);
<a name="l02128"></a>02128          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10)
<a name="l02129"></a>02129             playh = 1;
<a name="l02130"></a>02130          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10;
<a name="l02131"></a>02131       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l02132"></a>02132          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 100)
<a name="l02133"></a>02133             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/100&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02134"></a>02134          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 200)
<a name="l02135"></a>02135             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/100E&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02136"></a>02136          <span class="keywordflow">else</span> {
<a name="l02137"></a>02137             <span class="keywordflow">if</span> (mf &lt; 0 &amp;&amp; num &gt; 199)
<a name="l02138"></a>02138                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%dF&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100) * 100);
<a name="l02139"></a>02139             <span class="keywordflow">else</span>
<a name="l02140"></a>02140                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100) * 100);
<a name="l02141"></a>02141             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 100)
<a name="l02142"></a>02142                playh = 1;
<a name="l02143"></a>02143          }
<a name="l02144"></a>02144          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 100;
<a name="l02145"></a>02145       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l02146"></a>02146          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; 1999) {
<a name="l02147"></a>02147             res = <a class="code" href="say_8c.html#a31997e60e00663fb65c4c875303f63e4">ast_say_number_full_pt</a>(chan, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000) * mf, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l02148"></a>02148             <span class="keywordflow">if</span> (res)
<a name="l02149"></a>02149                <span class="keywordflow">return</span> res;
<a name="l02150"></a>02150          }
<a name="l02151"></a>02151          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1000&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02152"></a>02152          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000) &amp;&amp; ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000) &lt; 100  || !(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 100)))
<a name="l02153"></a>02153             playh = 1;
<a name="l02154"></a>02154          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000;
<a name="l02155"></a>02155       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) {
<a name="l02156"></a>02156          res = <a class="code" href="say_8c.html#a31997e60e00663fb65c4c875303f63e4">ast_say_number_full_pt</a>(chan, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000), ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd );
<a name="l02157"></a>02157          <span class="keywordflow">if</span> (res)
<a name="l02158"></a>02158             <span class="keywordflow">return</span> res;
<a name="l02159"></a>02159          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 2000000)
<a name="l02160"></a>02160             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1000000&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02161"></a>02161          <span class="keywordflow">else</span>
<a name="l02162"></a>02162             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1000000S&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02163"></a>02163  
<a name="l02164"></a>02164          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000) &amp;&amp;
<a name="l02165"></a>02165             <span class="comment">/* no thousands */</span>
<a name="l02166"></a>02166             ((!((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000) % 1000) &amp;&amp; ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000) &lt; 100 || !(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 100))) ||
<a name="l02167"></a>02167             <span class="comment">/* no hundreds and below */</span>
<a name="l02168"></a>02168             (!(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000) &amp;&amp; (((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000) % 1000) &lt; 100 || !((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000) % 100))) ) )
<a name="l02169"></a>02169             playh = 1;
<a name="l02170"></a>02170          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000;
<a name="l02171"></a>02171       } <span class="keywordflow">else</span> {
<a name="l02172"></a>02172          <span class="comment">/* number is too big */</span>
<a name="l02173"></a>02173          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big to say.&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02174"></a>02174          res = -1;
<a name="l02175"></a>02175       }
<a name="l02176"></a>02176       <span class="keywordflow">if</span> (!res) {
<a name="l02177"></a>02177          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l02178"></a>02178             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l02179"></a>02179                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);  
<a name="l02180"></a>02180             <span class="keywordflow">else</span>
<a name="l02181"></a>02181                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l02182"></a>02182          }
<a name="l02183"></a>02183          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l02184"></a>02184       }
<a name="l02185"></a>02185       <span class="keywordflow">if</span> (!res &amp;&amp; playh) {
<a name="l02186"></a>02186          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-e&quot;</span>, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>);
<a name="l02187"></a>02187          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l02188"></a>02188          playh = 0;
<a name="l02189"></a>02189       }
<a name="l02190"></a>02190    }
<a name="l02191"></a>02191    <span class="keywordflow">return</span> res;
<a name="l02192"></a>02192 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5318e736eefec1203eea76e14e3bda08"></a><!-- doxytag: member="say.c::ast_say_number_full_ru" ref="a5318e736eefec1203eea76e14e3bda08" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_ru </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_ru: Russian syntax </p>
<p>additional files: n00.gsm (one hundred, two hundred, ...) thousand.gsm million.gsm thousands-i.gsm (tisyachi) million-a.gsm (milliona) thousands.gsm millions.gsm 1f.gsm (odna) 2f.gsm (dve) where 'n' from 1 to 9 </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l02404">2404</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>, and <a class="el" href="say_8c_source.html#l02378">get_lastdigits_ru()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02405"></a>02405 {
<a name="l02406"></a>02406    <span class="keywordtype">int</span> res = 0;
<a name="l02407"></a>02407    <span class="keywordtype">int</span> lastdigits = 0;
<a name="l02408"></a>02408    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02409"></a>02409    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l02410"></a>02410       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02411"></a>02411 
<a name="l02412"></a>02412    <span class="keywordflow">while</span> (!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)) {
<a name="l02413"></a>02413       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l02414"></a>02414          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02415"></a>02415          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l02416"></a>02416             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l02417"></a>02417          } <span class="keywordflow">else</span> {
<a name="l02418"></a>02418             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02419"></a>02419          }  
<a name="l02420"></a>02420       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l02421"></a>02421          <span class="keywordflow">if</span> (options &amp;&amp; strlen(options) == 1 &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 3) {
<a name="l02422"></a>02422              snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d%s&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, options);
<a name="l02423"></a>02423          } <span class="keywordflow">else</span> {
<a name="l02424"></a>02424             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02425"></a>02425          }
<a name="l02426"></a>02426          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02427"></a>02427       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l02428"></a>02428          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10));
<a name="l02429"></a>02429          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l02430"></a>02430       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000){
<a name="l02431"></a>02431          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 100));
<a name="l02432"></a>02432          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;
<a name="l02433"></a>02433       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) { <span class="comment">/* 1,000,000 */</span>
<a name="l02434"></a>02434          lastdigits = <a class="code" href="say_8c.html#a2d19a0df8b737872d1032d9c58f8d35f" title="determine last digits for thousands/millions (ru)">get_lastdigits_ru</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000);
<a name="l02435"></a>02435          <span class="comment">/* say thousands */</span>
<a name="l02436"></a>02436          <span class="keywordflow">if</span> (lastdigits &lt; 3) {
<a name="l02437"></a>02437             res = <a class="code" href="say_8c.html#a5318e736eefec1203eea76e14e3bda08" title="ast_say_number_full_ru: Russian syntax">ast_say_number_full_ru</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;f&quot;</span>, audiofd, ctrlfd);
<a name="l02438"></a>02438          } <span class="keywordflow">else</span> {
<a name="l02439"></a>02439             res = <a class="code" href="say_8c.html#a5318e736eefec1203eea76e14e3bda08" title="ast_say_number_full_ru: Russian syntax">ast_say_number_full_ru</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, NULL, audiofd, ctrlfd);
<a name="l02440"></a>02440          }
<a name="l02441"></a>02441          <span class="keywordflow">if</span> (res)
<a name="l02442"></a>02442             <span class="keywordflow">return</span> res;
<a name="l02443"></a>02443          <span class="keywordflow">if</span> (lastdigits == 1) {
<a name="l02444"></a>02444             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02445"></a>02445          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lastdigits &gt; 1 &amp;&amp; lastdigits &lt; 5) {
<a name="l02446"></a>02446             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousands-i&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02447"></a>02447          } <span class="keywordflow">else</span> {
<a name="l02448"></a>02448             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousands&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02449"></a>02449          }
<a name="l02450"></a>02450          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l02451"></a>02451       } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) { <span class="comment">/* 1,000,000,000 */</span>
<a name="l02452"></a>02452          lastdigits = <a class="code" href="say_8c.html#a2d19a0df8b737872d1032d9c58f8d35f" title="determine last digits for thousands/millions (ru)">get_lastdigits_ru</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000);
<a name="l02453"></a>02453          <span class="comment">/* say millions */</span>
<a name="l02454"></a>02454          res = <a class="code" href="say_8c.html#a5318e736eefec1203eea76e14e3bda08" title="ast_say_number_full_ru: Russian syntax">ast_say_number_full_ru</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, NULL, audiofd, ctrlfd);
<a name="l02455"></a>02455          <span class="keywordflow">if</span> (res)
<a name="l02456"></a>02456             <span class="keywordflow">return</span> res;
<a name="l02457"></a>02457          <span class="keywordflow">if</span> (lastdigits == 1) {
<a name="l02458"></a>02458             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02459"></a>02459          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lastdigits &gt; 1 &amp;&amp; lastdigits &lt; 5) {
<a name="l02460"></a>02460             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million-a&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02461"></a>02461          } <span class="keywordflow">else</span> {
<a name="l02462"></a>02462             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/millions&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02463"></a>02463          }
<a name="l02464"></a>02464          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000000;
<a name="l02465"></a>02465       } <span class="keywordflow">else</span> {
<a name="l02466"></a>02466          <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02467"></a>02467          res = -1;
<a name="l02468"></a>02468       }
<a name="l02469"></a>02469       <span class="keywordflow">if</span> (!res) {
<a name="l02470"></a>02470          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l02471"></a>02471             <span class="keywordflow">if</span> ((audiofd  &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l02472"></a>02472                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l02473"></a>02473             <span class="keywordflow">else</span>
<a name="l02474"></a>02474                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l02475"></a>02475          }
<a name="l02476"></a>02476          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l02477"></a>02477       }
<a name="l02478"></a>02478    }
<a name="l02479"></a>02479    <span class="keywordflow">return</span> res;
<a name="l02480"></a>02480 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acdcc3b9113521b1537d27b7a7b2dd3e5"></a><!-- doxytag: member="say.c::ast_say_number_full_se" ref="acdcc3b9113521b1537d27b7a7b2dd3e5" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_se </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_se: Swedish syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l02195">2195</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02196"></a>02196 {
<a name="l02197"></a>02197    <span class="keywordtype">int</span> res = 0;
<a name="l02198"></a>02198    <span class="keywordtype">int</span> playh = 0;
<a name="l02199"></a>02199    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02200"></a>02200    <span class="keywordtype">int</span> cn = 1;    <span class="comment">/* +1 = commune; -1 = neuter */</span>
<a name="l02201"></a>02201    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l02202"></a>02202       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02203"></a>02203    <span class="keywordflow">if</span> (options &amp;&amp; !strncasecmp(options, <span class="stringliteral">&quot;n&quot;</span>, 1)) cn = -1;
<a name="l02204"></a>02204 
<a name="l02205"></a>02205    <span class="keywordflow">while</span> (!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || playh)) {
<a name="l02206"></a>02206       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l02207"></a>02207          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02208"></a>02208          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l02209"></a>02209             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l02210"></a>02210          } <span class="keywordflow">else</span> {
<a name="l02211"></a>02211             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02212"></a>02212          }  
<a name="l02213"></a>02213       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playh) {
<a name="l02214"></a>02214          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02215"></a>02215          playh = 0;
<a name="l02216"></a>02216       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l02217"></a>02217          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02218"></a>02218          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02219"></a>02219       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l02220"></a>02220          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> /10) * 10);
<a name="l02221"></a>02221          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l02222"></a>02222       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1 &amp;&amp; cn == -1) {  <span class="comment">/* En eller ett? */</span>
<a name="l02223"></a>02223          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/1N&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02224"></a>02224          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02225"></a>02225       } <span class="keywordflow">else</span> {
<a name="l02226"></a>02226          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000){
<a name="l02227"></a>02227             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/100));
<a name="l02228"></a>02228             playh++;
<a name="l02229"></a>02229             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;
<a name="l02230"></a>02230          } <span class="keywordflow">else</span> {
<a name="l02231"></a>02231             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) { <span class="comment">/* 1,000,000 */</span>
<a name="l02232"></a>02232                res = <a class="code" href="say_8c.html#acdcc3b9113521b1537d27b7a7b2dd3e5" title="ast_say_number_full_se: Swedish syntax">ast_say_number_full_se</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l02233"></a>02233                <span class="keywordflow">if</span> (res) {
<a name="l02234"></a>02234                   <span class="keywordflow">return</span> res;
<a name="l02235"></a>02235                }
<a name="l02236"></a>02236                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l02237"></a>02237                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/thousand&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02238"></a>02238             } <span class="keywordflow">else</span> {
<a name="l02239"></a>02239                <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) { <span class="comment">/* 1,000,000,000 */</span>
<a name="l02240"></a>02240                   res = <a class="code" href="say_8c.html#acdcc3b9113521b1537d27b7a7b2dd3e5" title="ast_say_number_full_se: Swedish syntax">ast_say_number_full_se</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l02241"></a>02241                   <span class="keywordflow">if</span> (res) {
<a name="l02242"></a>02242                      <span class="keywordflow">return</span> res;
<a name="l02243"></a>02243                   }
<a name="l02244"></a>02244                   <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000000;
<a name="l02245"></a>02245                   <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/million&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02246"></a>02246                } <span class="keywordflow">else</span> {
<a name="l02247"></a>02247                   <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02248"></a>02248                   res = -1;
<a name="l02249"></a>02249                }
<a name="l02250"></a>02250             }
<a name="l02251"></a>02251          }
<a name="l02252"></a>02252       }
<a name="l02253"></a>02253       <span class="keywordflow">if</span> (!res) {
<a name="l02254"></a>02254          <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l02255"></a>02255             <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l02256"></a>02256                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l02257"></a>02257             <span class="keywordflow">else</span>
<a name="l02258"></a>02258                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l02259"></a>02259             <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l02260"></a>02260          }
<a name="l02261"></a>02261       }
<a name="l02262"></a>02262    }
<a name="l02263"></a>02263    <span class="keywordflow">return</span> res;
<a name="l02264"></a>02264 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab741ec8f1012e4aff2a7e4bd8df2efb3"></a><!-- doxytag: member="say.c::ast_say_number_full_th" ref="ab741ec8f1012e4aff2a7e4bd8df2efb3" args="(struct ast_channel *chan, int num, const char *ints, const char *language, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_th </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l02482">2482</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02483"></a>02483 {
<a name="l02484"></a>02484    <span class="keywordtype">int</span> res = 0;
<a name="l02485"></a>02485    <span class="keywordtype">int</span> playh = 0;
<a name="l02486"></a>02486    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02487"></a>02487    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>) 
<a name="l02488"></a>02488       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02489"></a>02489 
<a name="l02490"></a>02490    <span class="keywordflow">while</span>(!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || playh)) {
<a name="l02491"></a>02491       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l02492"></a>02492          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/lop&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02493"></a>02493          <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l02494"></a>02494             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l02495"></a>02495          } <span class="keywordflow">else</span> {
<a name="l02496"></a>02496             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02497"></a>02497          }  
<a name="l02498"></a>02498       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playh) {
<a name="l02499"></a>02499          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/roi&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02500"></a>02500          playh = 0;
<a name="l02501"></a>02501       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l02502"></a>02502          <span class="keywordflow">if</span> ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt;= 20) || ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10) == 1)) {
<a name="l02503"></a>02503             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02504"></a>02504             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02505"></a>02505          } <span class="keywordflow">else</span> {
<a name="l02506"></a>02506             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 10) * 10);
<a name="l02507"></a>02507             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l02508"></a>02508          }
<a name="l02509"></a>02509       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l02510"></a>02510          snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/100));
<a name="l02511"></a>02511          playh++;
<a name="l02512"></a>02512          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;
<a name="l02513"></a>02513       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 10000) { <span class="comment">/* 10,000 */</span>
<a name="l02514"></a>02514          res = <a class="code" href="say_8c.html#ab741ec8f1012e4aff2a7e4bd8df2efb3">ast_say_number_full_th</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02515"></a>02515          <span class="keywordflow">if</span> (res)
<a name="l02516"></a>02516             <span class="keywordflow">return</span> res;
<a name="l02517"></a>02517          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000;
<a name="l02518"></a>02518          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/pan&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02519"></a>02519       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100000) { <span class="comment">/* 100,000 */</span>
<a name="l02520"></a>02520          res = <a class="code" href="say_8c.html#ab741ec8f1012e4aff2a7e4bd8df2efb3">ast_say_number_full_th</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 10000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02521"></a>02521          <span class="keywordflow">if</span> (res)
<a name="l02522"></a>02522             <span class="keywordflow">return</span> res;
<a name="l02523"></a>02523          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10000;
<a name="l02524"></a>02524          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/muan&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02525"></a>02525       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) { <span class="comment">/* 1,000,000 */</span>
<a name="l02526"></a>02526          res = <a class="code" href="say_8c.html#ab741ec8f1012e4aff2a7e4bd8df2efb3">ast_say_number_full_th</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02527"></a>02527          <span class="keywordflow">if</span> (res)
<a name="l02528"></a>02528             <span class="keywordflow">return</span> res;
<a name="l02529"></a>02529          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100000;
<a name="l02530"></a>02530          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/san&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02531"></a>02531       } <span class="keywordflow">else</span> {
<a name="l02532"></a>02532          res = <a class="code" href="say_8c.html#ab741ec8f1012e4aff2a7e4bd8df2efb3">ast_say_number_full_th</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02533"></a>02533          <span class="keywordflow">if</span> (res)
<a name="l02534"></a>02534             <span class="keywordflow">return</span> res;
<a name="l02535"></a>02535          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 1000000;
<a name="l02536"></a>02536          <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/larn&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02537"></a>02537       }
<a name="l02538"></a>02538       <span class="keywordflow">if</span> (!res) {
<a name="l02539"></a>02539          <span class="keywordflow">if</span>(!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l02540"></a>02540             <span class="keywordflow">if</span> ((audiofd  &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l02541"></a>02541                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l02542"></a>02542             <span class="keywordflow">else</span>
<a name="l02543"></a>02543                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l02544"></a>02544          }
<a name="l02545"></a>02545          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l02546"></a>02546       }
<a name="l02547"></a>02547    }
<a name="l02548"></a>02548    <span class="keywordflow">return</span> res;
<a name="l02549"></a>02549 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aad53034af1449eeffe92422447968224"></a><!-- doxytag: member="say.c::ast_say_number_full_zh" ref="aad53034af1449eeffe92422447968224" args="(struct ast_channel *chan, int num, const char *ints, const char *language, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_number_full_zh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full_zh: Taiwanese / Chinese syntax </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l02267">2267</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="channel_8c_source.html#l05851">ast_say_digits_full()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>, <a class="el" href="adsistub_8c_source.html#l00059">buf</a>, and <a class="el" href="logger_8h_source.html#l00119">LOG_DEBUG</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00430">say_number_full()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02268"></a>02268 {
<a name="l02269"></a>02269    <span class="keywordtype">int</span> res = 0;
<a name="l02270"></a>02270    <span class="keywordtype">int</span> playh = 0;
<a name="l02271"></a>02271    <span class="keywordtype">int</span> playt = 0;
<a name="l02272"></a>02272    <span class="keywordtype">int</span> playz = 0;
<a name="l02273"></a>02273    <span class="keywordtype">int</span> last_length = 0;
<a name="l02274"></a>02274    <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>[20] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02275"></a>02275    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02276"></a>02276    <span class="keywordflow">if</span> (!<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)
<a name="l02277"></a>02277       <span class="keywordflow">return</span> <a class="code" href="say_8h.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, 0, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02278"></a>02278 
<a name="l02279"></a>02279    <span class="keywordflow">while</span> (!res &amp;&amp; (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> || playh || playt || playz)) {
<a name="l02280"></a>02280          <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l02281"></a>02281             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/minus&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02282"></a>02282             <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l02283"></a>02283                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l02284"></a>02284             } <span class="keywordflow">else</span> {
<a name="l02285"></a>02285                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02286"></a>02286             }  
<a name="l02287"></a>02287          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playz) {
<a name="l02288"></a>02288             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/0&quot;</span>);
<a name="l02289"></a>02289             last_length = 0;
<a name="l02290"></a>02290             playz = 0;
<a name="l02291"></a>02291          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playh) {
<a name="l02292"></a>02292             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(fn, <span class="stringliteral">&quot;digits/hundred&quot;</span>, <span class="keyword">sizeof</span>(fn));
<a name="l02293"></a>02293             playh = 0;
<a name="l02294"></a>02294          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (playt) {
<a name="l02295"></a>02295             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/thousand&quot;</span>);
<a name="l02296"></a>02296             playt = 0;
<a name="l02297"></a>02297          } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 10) {
<a name="l02298"></a>02298             snprintf(buf, 10, <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02299"></a>02299             <span class="keywordflow">if</span> (last_length - strlen(buf) &gt; 1 &amp;&amp; last_length != 0) {
<a name="l02300"></a>02300                last_length = strlen(buf);
<a name="l02301"></a>02301                playz++;
<a name="l02302"></a>02302                <span class="keywordflow">continue</span>;
<a name="l02303"></a>02303             }
<a name="l02304"></a>02304             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02305"></a>02305             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l02306"></a>02306          } <span class="keywordflow">else</span>   <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l02307"></a>02307             snprintf(buf, 10, <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02308"></a>02308             <span class="keywordflow">if</span> (last_length - strlen(buf) &gt; 1 &amp;&amp; last_length != 0) {
<a name="l02309"></a>02309                last_length = strlen(buf);
<a name="l02310"></a>02310                playz++;
<a name="l02311"></a>02311                <span class="keywordflow">continue</span>;
<a name="l02312"></a>02312             }
<a name="l02313"></a>02313             last_length = strlen(buf);
<a name="l02314"></a>02314             snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 10) * 10);
<a name="l02315"></a>02315             <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l02316"></a>02316          } <span class="keywordflow">else</span> {
<a name="l02317"></a>02317             <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000){
<a name="l02318"></a>02318                snprintf(buf, 10, <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02319"></a>02319                <span class="keywordflow">if</span> (last_length - strlen(buf) &gt; 1 &amp;&amp; last_length != 0) {
<a name="l02320"></a>02320                   last_length = strlen(buf);
<a name="l02321"></a>02321                   playz++;
<a name="l02322"></a>02322                   <span class="keywordflow">continue</span>;
<a name="l02323"></a>02323                }
<a name="l02324"></a>02324                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100));
<a name="l02325"></a>02325                playh++;
<a name="l02326"></a>02326                snprintf(buf, 10, <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02327"></a>02327                <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Number &apos;%d&apos; %d %d\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, (<span class="keywordtype">int</span>)strlen(buf), last_length);
<a name="l02328"></a>02328                last_length = strlen(buf);
<a name="l02329"></a>02329                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100) * 100);
<a name="l02330"></a>02330             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 10000){
<a name="l02331"></a>02331                snprintf(buf, 10, <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02332"></a>02332                snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000));
<a name="l02333"></a>02333                playt++;
<a name="l02334"></a>02334                snprintf(buf, 10, <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02335"></a>02335                <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Number &apos;%d&apos; %d %d\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, (<span class="keywordtype">int</span>)strlen(buf), last_length);
<a name="l02336"></a>02336                last_length = strlen(buf);
<a name="l02337"></a>02337                <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 1000) * 1000);
<a name="l02338"></a>02338             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100000000) { <span class="comment">/* 100,000,000 */</span>
<a name="l02339"></a>02339                   res = <a class="code" href="say_8c.html#aad53034af1449eeffe92422447968224" title="ast_say_number_full_zh: Taiwanese / Chinese syntax">ast_say_number_full_zh</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 10000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02340"></a>02340                   <span class="keywordflow">if</span> (res)
<a name="l02341"></a>02341                      <span class="keywordflow">return</span> res;
<a name="l02342"></a>02342                   snprintf(buf, 10, <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02343"></a>02343                   <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Number &apos;%d&apos; %d %d\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, (<span class="keywordtype">int</span>)strlen(buf), last_length);
<a name="l02344"></a>02344                   <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 10000) * 10000);
<a name="l02345"></a>02345                   last_length = strlen(buf);
<a name="l02346"></a>02346                   snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/wan&quot;</span>);
<a name="l02347"></a>02347             } <span class="keywordflow">else</span> {
<a name="l02348"></a>02348                <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) { <span class="comment">/* 1,000,000,000 */</span>
<a name="l02349"></a>02349                   res = <a class="code" href="say_8c.html#aad53034af1449eeffe92422447968224" title="ast_say_number_full_zh: Taiwanese / Chinese syntax">ast_say_number_full_zh</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100000000, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02350"></a>02350                   <span class="keywordflow">if</span> (res)
<a name="l02351"></a>02351                      <span class="keywordflow">return</span> res;
<a name="l02352"></a>02352                   snprintf(buf, 10, <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02353"></a>02353                   <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Number &apos;%d&apos; %d %d\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, (<span class="keywordtype">int</span>)strlen(buf), last_length);
<a name="l02354"></a>02354                   last_length = strlen(buf);
<a name="l02355"></a>02355                   <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> -= ((<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> / 100000000) * 100000000);
<a name="l02356"></a>02356                   snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/yi&quot;</span>);
<a name="l02357"></a>02357                } <span class="keywordflow">else</span> {
<a name="l02358"></a>02358                   <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Number &apos;%d&apos; is too big for me\n&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l02359"></a>02359                   res = -1;
<a name="l02360"></a>02360                }
<a name="l02361"></a>02361             }
<a name="l02362"></a>02362          }
<a name="l02363"></a>02363          <span class="keywordflow">if</span> (!res) {
<a name="l02364"></a>02364             <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l02365"></a>02365                <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l02366"></a>02366                   res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l02367"></a>02367                <span class="keywordflow">else</span>
<a name="l02368"></a>02368                   res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l02369"></a>02369             }
<a name="l02370"></a>02370             <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l02371"></a>02371          }
<a name="l02372"></a>02372    }
<a name="l02373"></a>02373    <span class="keywordflow">return</span> res;
<a name="l02374"></a>02374 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2f96f38cfd786e2037474bf885499713"></a><!-- doxytag: member="say.c::ast_say_time_de" ref="a2f96f38cfd786e2037474bf885499713" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_time_de </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06153">6153</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, and <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06154"></a>06154 {
<a name="l06155"></a>06155    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06156"></a>06156    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06157"></a>06157    <span class="keywordtype">int</span> res = 0;
<a name="l06158"></a>06158 
<a name="l06159"></a>06159    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06160"></a>06160    <span class="keywordflow">if</span> (!res)
<a name="l06161"></a>06161       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, <span class="stringliteral">&quot;n&quot;</span>);
<a name="l06162"></a>06162    <span class="keywordflow">if</span> (!res)
<a name="l06163"></a>06163       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l06164"></a>06164    <span class="keywordflow">if</span> (!res)
<a name="l06165"></a>06165       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06166"></a>06166    <span class="keywordflow">if</span> (!res)
<a name="l06167"></a>06167        <span class="keywordflow">if</span> (tm.tm_min &gt; 0) 
<a name="l06168"></a>06168       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l06169"></a>06169    <span class="keywordflow">return</span> res;
<a name="l06170"></a>06170 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa6e079dc99911282bcfca18b87dbe18e"></a><!-- doxytag: member="say.c::ast_say_time_en" ref="aa6e079dc99911282bcfca18b87dbe18e" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_time_en </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06104">6104</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, and <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06105"></a>06105 {
<a name="l06106"></a>06106    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06107"></a>06107    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06108"></a>06108    <span class="keywordtype">int</span> res = 0;
<a name="l06109"></a>06109    <span class="keywordtype">int</span> hour, pm=0;
<a name="l06110"></a>06110 
<a name="l06111"></a>06111    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06112"></a>06112    hour = tm.tm_hour;
<a name="l06113"></a>06113    <span class="keywordflow">if</span> (!hour)
<a name="l06114"></a>06114       hour = 12;
<a name="l06115"></a>06115    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour == 12)
<a name="l06116"></a>06116       pm = 1;
<a name="l06117"></a>06117    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour &gt; 12) {
<a name="l06118"></a>06118       hour -= 12;
<a name="l06119"></a>06119       pm = 1;
<a name="l06120"></a>06120    }
<a name="l06121"></a>06121    <span class="keywordflow">if</span> (!res)
<a name="l06122"></a>06122       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06123"></a>06123 
<a name="l06124"></a>06124    <span class="keywordflow">if</span> (tm.tm_min &gt; 9) {
<a name="l06125"></a>06125       <span class="keywordflow">if</span> (!res)
<a name="l06126"></a>06126          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06127"></a>06127    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_min) {
<a name="l06128"></a>06128       <span class="keywordflow">if</span> (!res)
<a name="l06129"></a>06129          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oh&quot;</span>, lang);
<a name="l06130"></a>06130       <span class="keywordflow">if</span> (!res)
<a name="l06131"></a>06131          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06132"></a>06132       <span class="keywordflow">if</span> (!res)
<a name="l06133"></a>06133          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06134"></a>06134    } <span class="keywordflow">else</span> {
<a name="l06135"></a>06135       <span class="keywordflow">if</span> (!res)
<a name="l06136"></a>06136          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l06137"></a>06137       <span class="keywordflow">if</span> (!res)
<a name="l06138"></a>06138          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06139"></a>06139    }
<a name="l06140"></a>06140    <span class="keywordflow">if</span> (pm) {
<a name="l06141"></a>06141       <span class="keywordflow">if</span> (!res)
<a name="l06142"></a>06142          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/p-m&quot;</span>, lang);
<a name="l06143"></a>06143    } <span class="keywordflow">else</span> {
<a name="l06144"></a>06144       <span class="keywordflow">if</span> (!res)
<a name="l06145"></a>06145          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/a-m&quot;</span>, lang);
<a name="l06146"></a>06146    }
<a name="l06147"></a>06147    <span class="keywordflow">if</span> (!res)
<a name="l06148"></a>06148       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06149"></a>06149    <span class="keywordflow">return</span> res;
<a name="l06150"></a>06150 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abaf1d38a580a6676b6c369b273bb110a"></a><!-- doxytag: member="say.c::ast_say_time_fr" ref="abaf1d38a580a6676b6c369b273bb110a" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_time_fr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06196">6196</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, and <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06197"></a>06197 {
<a name="l06198"></a>06198    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06199"></a>06199    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06200"></a>06200    <span class="keywordtype">int</span> res = 0;
<a name="l06201"></a>06201 
<a name="l06202"></a>06202    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06203"></a>06203 
<a name="l06204"></a>06204    res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l06205"></a>06205    <span class="keywordflow">if</span> (!res)
<a name="l06206"></a>06206       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l06207"></a>06207    <span class="keywordflow">if</span> (tm.tm_min) {
<a name="l06208"></a>06208       <span class="keywordflow">if</span> (!res)
<a name="l06209"></a>06209       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06210"></a>06210    }
<a name="l06211"></a>06211    <span class="keywordflow">return</span> res;
<a name="l06212"></a>06212 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9df5ed9ed2f58cd4b0f26c3bb506409d"></a><!-- doxytag: member="say.c::ast_say_time_gr" ref="a9df5ed9ed2f58cd4b0f26c3bb506409d" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_time_gr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07203">7203</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="say_8c_source.html#l07033">gr_say_number_female()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, and <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07251">ast_say_datetime_gr()</a>, and <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07204"></a>07204 {
<a name="l07205"></a>07205 
<a name="l07206"></a>07206    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l07207"></a>07207    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l07208"></a>07208    <span class="keywordtype">int</span> res = 0;
<a name="l07209"></a>07209    <span class="keywordtype">int</span> hour, pm=0;
<a name="l07210"></a>07210 
<a name="l07211"></a>07211    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l07212"></a>07212    hour = tm.tm_hour;
<a name="l07213"></a>07213 
<a name="l07214"></a>07214    <span class="keywordflow">if</span> (!hour)
<a name="l07215"></a>07215       hour = 12;
<a name="l07216"></a>07216    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour == 12)
<a name="l07217"></a>07217       pm = 1;
<a name="l07218"></a>07218    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour &gt; 12) {
<a name="l07219"></a>07219       hour -= 12;
<a name="l07220"></a>07220       pm = 1;
<a name="l07221"></a>07221    }
<a name="l07222"></a>07222  
<a name="l07223"></a>07223    res = <a class="code" href="say_8c.html#a1ac32f4ca37eaea55e69c5189617da16">gr_say_number_female</a>(hour, chan, ints, lang);
<a name="l07224"></a>07224    <span class="keywordflow">if</span> (tm.tm_min) {
<a name="l07225"></a>07225       <span class="keywordflow">if</span> (!res)
<a name="l07226"></a>07226          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/kai&quot;</span>, lang);
<a name="l07227"></a>07227       <span class="keywordflow">if</span> (!res)
<a name="l07228"></a>07228          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07229"></a>07229       <span class="keywordflow">if</span> (!res)
<a name="l07230"></a>07230          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l07231"></a>07231    } <span class="keywordflow">else</span> {
<a name="l07232"></a>07232       <span class="keywordflow">if</span> (!res)
<a name="l07233"></a>07233          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/hwra&quot;</span>, lang);
<a name="l07234"></a>07234       <span class="keywordflow">if</span> (!res)
<a name="l07235"></a>07235          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07236"></a>07236    }
<a name="l07237"></a>07237    <span class="keywordflow">if</span> (pm) {
<a name="l07238"></a>07238       <span class="keywordflow">if</span> (!res)
<a name="l07239"></a>07239          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/p-m&quot;</span>, lang);
<a name="l07240"></a>07240    } <span class="keywordflow">else</span> {
<a name="l07241"></a>07241       <span class="keywordflow">if</span> (!res)
<a name="l07242"></a>07242          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/a-m&quot;</span>, lang);
<a name="l07243"></a>07243    }
<a name="l07244"></a>07244    <span class="keywordflow">if</span> (!res)
<a name="l07245"></a>07245       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07246"></a>07246    <span class="keywordflow">return</span> res;
<a name="l07247"></a>07247 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4fa30770543cf1238ad95aeb855778aa"></a><!-- doxytag: member="say.c::ast_say_time_he" ref="a4fa30770543cf1238ad95aeb855778aa" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_time_he </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06354">6354</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="say_8c_source.html#l01217">ast_say_number_full_he()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, and <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06355"></a>06355 {
<a name="l06356"></a>06356    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06357"></a>06357    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06358"></a>06358    <span class="keywordtype">int</span> res = 0;
<a name="l06359"></a>06359    <span class="keywordtype">int</span> hour;
<a name="l06360"></a>06360 
<a name="l06361"></a>06361    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06362"></a>06362    hour = tm.tm_hour;
<a name="l06363"></a>06363    <span class="keywordflow">if</span> (!hour)
<a name="l06364"></a>06364       hour = 12;
<a name="l06365"></a>06365 
<a name="l06366"></a>06366    <span class="keywordflow">if</span> (!res)
<a name="l06367"></a>06367       res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, hour, ints, lang, <span class="stringliteral">&quot;f&quot;</span>, -1, -1);
<a name="l06368"></a>06368 
<a name="l06369"></a>06369    <span class="keywordflow">if</span> (tm.tm_min &gt; 9) {
<a name="l06370"></a>06370       <span class="keywordflow">if</span> (!res)
<a name="l06371"></a>06371          res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, tm.tm_min, ints, lang, <span class="stringliteral">&quot;f&quot;</span>, -1, -1);
<a name="l06372"></a>06372    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tm.tm_min) {
<a name="l06373"></a>06373       <span class="keywordflow">if</span> (!res) {          <span class="comment">/* say a leading zero if needed */</span>
<a name="l06374"></a>06374          res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, 0, ints, lang, <span class="stringliteral">&quot;f&quot;</span>, -1, -1);
<a name="l06375"></a>06375       }
<a name="l06376"></a>06376       <span class="keywordflow">if</span> (!res)
<a name="l06377"></a>06377          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06378"></a>06378       <span class="keywordflow">if</span> (!res)
<a name="l06379"></a>06379          res = <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, tm.tm_min, ints, lang, <span class="stringliteral">&quot;f&quot;</span>, -1, -1);
<a name="l06380"></a>06380    } <span class="keywordflow">else</span> {
<a name="l06381"></a>06381       <span class="keywordflow">if</span> (!res)
<a name="l06382"></a>06382          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06383"></a>06383    }
<a name="l06384"></a>06384    <span class="keywordflow">if</span> (!res)
<a name="l06385"></a>06385       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06386"></a>06386    <span class="keywordflow">return</span> res;
<a name="l06387"></a>06387 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9ffe4a620c3103ccc73cf12395c3bc85"></a><!-- doxytag: member="say.c::ast_say_time_hu" ref="a9ffe4a620c3103ccc73cf12395c3bc85" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_time_hu </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06173">6173</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, and <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06174"></a>06174 {
<a name="l06175"></a>06175    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06176"></a>06176    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06177"></a>06177    <span class="keywordtype">int</span> res = 0;
<a name="l06178"></a>06178 
<a name="l06179"></a>06179    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06180"></a>06180    <span class="keywordflow">if</span> (!res)
<a name="l06181"></a>06181       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, <span class="stringliteral">&quot;n&quot;</span>);
<a name="l06182"></a>06182    <span class="keywordflow">if</span> (!res)
<a name="l06183"></a>06183       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l06184"></a>06184    <span class="keywordflow">if</span> (!res)
<a name="l06185"></a>06185       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06186"></a>06186    <span class="keywordflow">if</span> (!res)
<a name="l06187"></a>06187        <span class="keywordflow">if</span> (tm.tm_min &gt; 0) { 
<a name="l06188"></a>06188          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l06189"></a>06189          <span class="keywordflow">if</span> (!res)
<a name="l06190"></a>06190             res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/minute&quot;</span>, lang);
<a name="l06191"></a>06191       }
<a name="l06192"></a>06192    <span class="keywordflow">return</span> res;
<a name="l06193"></a>06193 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad961c5f8bcfad964dc48985bc21fa164"></a><!-- doxytag: member="say.c::ast_say_time_ka" ref="ad961c5f8bcfad964dc48985bc21fa164" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_say_time_ka </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07736">7736</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, and <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07737"></a>07737 {
<a name="l07738"></a>07738    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l07739"></a>07739    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l07740"></a>07740    <span class="keywordtype">int</span> res = 0;
<a name="l07741"></a>07741 
<a name="l07742"></a>07742    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l07743"></a>07743 
<a name="l07744"></a>07744    res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, (<span class="keywordtype">char</span>*)NULL);
<a name="l07745"></a>07745    <span class="keywordflow">if</span> (!res) {
<a name="l07746"></a>07746       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/saati_da&quot;</span>, lang);
<a name="l07747"></a>07747       <span class="keywordflow">if</span> (!res)
<a name="l07748"></a>07748          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07749"></a>07749    }
<a name="l07750"></a>07750 
<a name="l07751"></a>07751    <span class="keywordflow">if</span> (tm.tm_min) {
<a name="l07752"></a>07752       <span class="keywordflow">if</span> (!res) {
<a name="l07753"></a>07753          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span>*)NULL);
<a name="l07754"></a>07754 
<a name="l07755"></a>07755          <span class="keywordflow">if</span> (!res) {
<a name="l07756"></a>07756             res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/tsuti&quot;</span>, lang);
<a name="l07757"></a>07757             <span class="keywordflow">if</span> (!res)
<a name="l07758"></a>07758                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07759"></a>07759          }
<a name="l07760"></a>07760       }
<a name="l07761"></a>07761    }
<a name="l07762"></a>07762    <span class="keywordflow">return</span> res;
<a name="l07763"></a>07763 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a86fd5f2bc784f22fb979fa27a23d39bf"></a><!-- doxytag: member="say.c::ast_say_time_nl" ref="a86fd5f2bc784f22fb979fa27a23d39bf" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_time_nl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06215">6215</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, and <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06216"></a>06216 {
<a name="l06217"></a>06217    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06218"></a>06218    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06219"></a>06219    <span class="keywordtype">int</span> res = 0;
<a name="l06220"></a>06220 
<a name="l06221"></a>06221    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06222"></a>06222    <span class="keywordflow">if</span> (!res)
<a name="l06223"></a>06223       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06224"></a>06224    <span class="keywordflow">if</span> (!res)
<a name="l06225"></a>06225       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/nl-uur&quot;</span>, lang);
<a name="l06226"></a>06226    <span class="keywordflow">if</span> (!res)
<a name="l06227"></a>06227       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06228"></a>06228    <span class="keywordflow">if</span> (!res)
<a name="l06229"></a>06229        <span class="keywordflow">if</span> (tm.tm_min &gt; 0) 
<a name="l06230"></a>06230       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, NULL);
<a name="l06231"></a>06231    <span class="keywordflow">return</span> res;
<a name="l06232"></a>06232 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad35c6b6c9c03292fc3c2662c231d27d6"></a><!-- doxytag: member="say.c::ast_say_time_pt" ref="ad35c6b6c9c03292fc3c2662c231d27d6" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_time_pt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06235">6235</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06236"></a>06236 {
<a name="l06237"></a>06237    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06238"></a>06238    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06239"></a>06239    <span class="keywordtype">int</span> res = 0;
<a name="l06240"></a>06240    <span class="keywordtype">int</span> hour;
<a name="l06241"></a>06241 
<a name="l06242"></a>06242    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06243"></a>06243    hour = tm.tm_hour;
<a name="l06244"></a>06244    <span class="keywordflow">if</span> (!res)
<a name="l06245"></a>06245       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, hour, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l06246"></a>06246    <span class="keywordflow">if</span> (tm.tm_min) {
<a name="l06247"></a>06247       <span class="keywordflow">if</span> (!res)
<a name="l06248"></a>06248          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-e&quot;</span>, lang);
<a name="l06249"></a>06249       <span class="keywordflow">if</span> (!res)
<a name="l06250"></a>06250          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06251"></a>06251    } <span class="keywordflow">else</span> {
<a name="l06252"></a>06252       <span class="keywordflow">if</span> (!res)
<a name="l06253"></a>06253          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-hora&quot;</span>, lang);
<a name="l06254"></a>06254       <span class="keywordflow">if</span> (tm.tm_hour != 1)
<a name="l06255"></a>06255          <span class="keywordflow">if</span> (!res)
<a name="l06256"></a>06256             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-sss&quot;</span>, lang);
<a name="l06257"></a>06257    }
<a name="l06258"></a>06258    <span class="keywordflow">if</span> (!res)
<a name="l06259"></a>06259       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06260"></a>06260    <span class="keywordflow">return</span> res;
<a name="l06261"></a>06261 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae7eeb1cfa8f6ae609d70b6a54ab70011"></a><!-- doxytag: member="say.c::ast_say_time_pt_BR" ref="ae7eeb1cfa8f6ae609d70b6a54ab70011" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_time_pt_BR </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06264">6264</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06265"></a>06265 {
<a name="l06266"></a>06266    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06267"></a>06267    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06268"></a>06268    <span class="keywordtype">int</span> res = 0;
<a name="l06269"></a>06269 
<a name="l06270"></a>06270    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06271"></a>06271 
<a name="l06272"></a>06272    res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_hour, ints, lang, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l06273"></a>06273    <span class="keywordflow">if</span> (!res) {
<a name="l06274"></a>06274       <span class="keywordflow">if</span> (tm.tm_hour &gt; 1)
<a name="l06275"></a>06275          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/hours&quot;</span>, lang);
<a name="l06276"></a>06276       <span class="keywordflow">else</span>
<a name="l06277"></a>06277          res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/hour&quot;</span>, lang);
<a name="l06278"></a>06278    }
<a name="l06279"></a>06279    <span class="keywordflow">if</span> ((!res) &amp;&amp; (tm.tm_min)) {
<a name="l06280"></a>06280       res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/pt-e&quot;</span>, lang);
<a name="l06281"></a>06281       <span class="keywordflow">if</span> (!res)
<a name="l06282"></a>06282          res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06283"></a>06283       <span class="keywordflow">if</span> (!res) {
<a name="l06284"></a>06284          <span class="keywordflow">if</span> (tm.tm_min &gt; 1)
<a name="l06285"></a>06285             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/minutes&quot;</span>, lang);
<a name="l06286"></a>06286          <span class="keywordflow">else</span>
<a name="l06287"></a>06287             res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, <span class="stringliteral">&quot;digits/minute&quot;</span>, lang);
<a name="l06288"></a>06288       }
<a name="l06289"></a>06289    }
<a name="l06290"></a>06290    <span class="keywordflow">return</span> res;
<a name="l06291"></a>06291 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2719111a35bea21d5a87f46c6c84ed63"></a><!-- doxytag: member="say.c::ast_say_time_th" ref="a2719111a35bea21d5a87f46c6c84ed63" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_time_th </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06294">6294</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, and <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06295"></a>06295 {
<a name="l06296"></a>06296    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06297"></a>06297    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06298"></a>06298    <span class="keywordtype">int</span> res = 0;
<a name="l06299"></a>06299    <span class="keywordtype">int</span> hour;
<a name="l06300"></a>06300    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06301"></a>06301    hour = tm.tm_hour;
<a name="l06302"></a>06302    <span class="keywordflow">if</span> (!hour)
<a name="l06303"></a>06303       hour = 24;
<a name="l06304"></a>06304    <span class="keywordflow">if</span> (!res)
<a name="l06305"></a>06305       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06306"></a>06306    <span class="keywordflow">if</span> (!res)
<a name="l06307"></a>06307       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06308"></a>06308    <span class="keywordflow">return</span> res;
<a name="l06309"></a>06309 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab8c68a104324a10f6e65daf995e7bbdc"></a><!-- doxytag: member="say.c::ast_say_time_zh" ref="ab8c68a104324a10f6e65daf995e7bbdc" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_say_time_zh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06312">6312</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="localtime_8c_source.html#l01305">ast_localtime()</a>, <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="localtime_8h_source.html#l00030">ast_tm::tm_hour</a>, and <a class="el" href="localtime_8h_source.html#l00029">ast_tm::tm_min</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l06059">say_time()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06313"></a>06313 {
<a name="l06314"></a>06314    <span class="keyword">struct </span>timeval when = { t, 0 };
<a name="l06315"></a>06315    <span class="keyword">struct </span><a class="code" href="structast__tm.html">ast_tm</a> tm;
<a name="l06316"></a>06316    <span class="keywordtype">int</span> res = 0;
<a name="l06317"></a>06317    <span class="keywordtype">int</span> hour, pm=0;
<a name="l06318"></a>06318 
<a name="l06319"></a>06319    <a class="code" href="localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e" title="Timezone-independent version of localtime_r(3).">ast_localtime</a>(&amp;when, &amp;tm, NULL);
<a name="l06320"></a>06320    hour = tm.tm_hour;
<a name="l06321"></a>06321    <span class="keywordflow">if</span> (!hour)
<a name="l06322"></a>06322       hour = 12;
<a name="l06323"></a>06323    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour == 12)
<a name="l06324"></a>06324       pm = 1;
<a name="l06325"></a>06325    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour &gt; 12) {
<a name="l06326"></a>06326       hour -= 12;
<a name="l06327"></a>06327       pm = 1;
<a name="l06328"></a>06328    }
<a name="l06329"></a>06329    <span class="keywordflow">if</span> (pm) {
<a name="l06330"></a>06330       <span class="keywordflow">if</span> (!res)
<a name="l06331"></a>06331          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/p-m&quot;</span>, lang);
<a name="l06332"></a>06332    } <span class="keywordflow">else</span> {
<a name="l06333"></a>06333       <span class="keywordflow">if</span> (!res)
<a name="l06334"></a>06334          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/a-m&quot;</span>, lang);
<a name="l06335"></a>06335    }
<a name="l06336"></a>06336    <span class="keywordflow">if</span> (!res)
<a name="l06337"></a>06337       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06338"></a>06338    <span class="keywordflow">if</span> (!res)
<a name="l06339"></a>06339       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, hour, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06340"></a>06340    <span class="keywordflow">if</span> (!res)
<a name="l06341"></a>06341       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/oclock&quot;</span>, lang);
<a name="l06342"></a>06342    <span class="keywordflow">if</span> (!res)
<a name="l06343"></a>06343       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06344"></a>06344    <span class="keywordflow">if</span> (!res)
<a name="l06345"></a>06345       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, tm.tm_min, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l06346"></a>06346    <span class="keywordflow">if</span> (!res)
<a name="l06347"></a>06347       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, <span class="stringliteral">&quot;digits/minute&quot;</span>, lang);
<a name="l06348"></a>06348    <span class="keywordflow">if</span> (!res)
<a name="l06349"></a>06349       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l06350"></a>06350    <span class="keywordflow">return</span> res;
<a name="l06351"></a>06351 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5482c7450b3a5089e2ffd6e34f91698f"></a><!-- doxytag: member="say.c::ast_translate_number_ka" ref="a5482c7450b3a5089e2ffd6e34f91698f" args="(int num, char *res, int res_len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* ast_translate_number_ka </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>res_len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07480">7480</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="adsistub_8c_source.html#l00059">buf</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07619">ast_say_number_full_ka()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07481"></a>07481 {
<a name="l07482"></a>07482    <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>[256];
<a name="l07483"></a>07483    <span class="keywordtype">int</span> digit = 0;
<a name="l07484"></a>07484    <span class="keywordtype">int</span> remaining = 0;
<a name="l07485"></a>07485 
<a name="l07486"></a>07486 
<a name="l07487"></a>07487    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l07488"></a>07488       strncat(res, <span class="stringliteral">&quot;minus &quot;</span>, res_len - strlen(res) - 1);
<a name="l07489"></a>07489       <span class="keywordflow">if</span> ( <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; INT_MIN ) {
<a name="l07490"></a>07490          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = -<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l07491"></a>07491       } <span class="keywordflow">else</span> {
<a name="l07492"></a>07492          <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l07493"></a>07493       }
<a name="l07494"></a>07494    }
<a name="l07495"></a>07495 
<a name="l07496"></a>07496 
<a name="l07497"></a>07497    <span class="comment">/* directly read the numbers */</span>
<a name="l07498"></a>07498    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt;= 20 || <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 40 || <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 60 || <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 80 || <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 100) {
<a name="l07499"></a>07499       snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l07500"></a>07500       strncat(res, buf, res_len - strlen(res) - 1);
<a name="l07501"></a>07501       <span class="keywordflow">return</span> res;
<a name="l07502"></a>07502    }
<a name="l07503"></a>07503 
<a name="l07504"></a>07504 
<a name="l07505"></a>07505    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 40) {  <span class="comment">/* ocda... */</span>
<a name="l07506"></a>07506       strncat(res, <span class="stringliteral">&quot;20_ &quot;</span>, res_len - strlen(res) - 1);
<a name="l07507"></a>07507       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - 20, res, res_len);
<a name="l07508"></a>07508    }
<a name="l07509"></a>07509 
<a name="l07510"></a>07510    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 60) {  <span class="comment">/* ormocda... */</span>
<a name="l07511"></a>07511       strncat(res, <span class="stringliteral">&quot;40_ &quot;</span>, res_len - strlen(res) - 1);
<a name="l07512"></a>07512       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - 40, res, res_len);
<a name="l07513"></a>07513    }
<a name="l07514"></a>07514 
<a name="l07515"></a>07515    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 80) {  <span class="comment">/* samocda... */</span>
<a name="l07516"></a>07516       strncat(res, <span class="stringliteral">&quot;60_ &quot;</span>, res_len - strlen(res) - 1);
<a name="l07517"></a>07517       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - 60, res, res_len);
<a name="l07518"></a>07518    }
<a name="l07519"></a>07519 
<a name="l07520"></a>07520    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {  <span class="comment">/* otxmocda... */</span>
<a name="l07521"></a>07521       strncat(res, <span class="stringliteral">&quot;80_ &quot;</span>, res_len - strlen(res) - 1);
<a name="l07522"></a>07522       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - 80, res, res_len);
<a name="l07523"></a>07523    }
<a name="l07524"></a>07524 
<a name="l07525"></a>07525 
<a name="l07526"></a>07526    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {  <span class="comment">/*  as, oras, samas, ..., cxraas. asi, orasi, ..., cxraasi. */</span>
<a name="l07527"></a>07527       remaining = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 100;
<a name="l07528"></a>07528       digit = (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - remaining) / 100;
<a name="l07529"></a>07529 
<a name="l07530"></a>07530       <span class="keywordflow">if</span> (remaining == 0) {
<a name="l07531"></a>07531          snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l07532"></a>07532          strncat(res, buf, res_len - strlen(res) - 1);
<a name="l07533"></a>07533          <span class="keywordflow">return</span> res;
<a name="l07534"></a>07534       } <span class="keywordflow">else</span> {
<a name="l07535"></a>07535          snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%d_ &quot;</span>, digit*100);
<a name="l07536"></a>07536          strncat(res, buf, res_len - strlen(res) - 1);
<a name="l07537"></a>07537          <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(remaining, res, res_len);
<a name="l07538"></a>07538       }
<a name="l07539"></a>07539    }
<a name="l07540"></a>07540 
<a name="l07541"></a>07541 
<a name="l07542"></a>07542    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1000) {
<a name="l07543"></a>07543       strncat(res, <span class="stringliteral">&quot;1000&quot;</span>, res_len - strlen(res) - 1);
<a name="l07544"></a>07544       <span class="keywordflow">return</span> res;
<a name="l07545"></a>07545    }
<a name="l07546"></a>07546 
<a name="l07547"></a>07547 
<a name="l07548"></a>07548    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000) {
<a name="l07549"></a>07549       remaining = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000;
<a name="l07550"></a>07550       digit = (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - remaining) / 1000;
<a name="l07551"></a>07551 
<a name="l07552"></a>07552       <span class="keywordflow">if</span> (remaining == 0) {
<a name="l07553"></a>07553          <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(digit, res, res_len);
<a name="l07554"></a>07554          strncat(res, <span class="stringliteral">&quot; 1000&quot;</span>, res_len - strlen(res) - 1);
<a name="l07555"></a>07555          <span class="keywordflow">return</span> res;
<a name="l07556"></a>07556       }
<a name="l07557"></a>07557 
<a name="l07558"></a>07558       <span class="keywordflow">if</span> (digit == 1) {
<a name="l07559"></a>07559          strncat(res, <span class="stringliteral">&quot;1000_ &quot;</span>, res_len - strlen(res) - 1);
<a name="l07560"></a>07560          <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(remaining, res, res_len);
<a name="l07561"></a>07561       }
<a name="l07562"></a>07562 
<a name="l07563"></a>07563       <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(digit, res, res_len);
<a name="l07564"></a>07564       strncat(res, <span class="stringliteral">&quot; 1000_ &quot;</span>, res_len - strlen(res) - 1);
<a name="l07565"></a>07565       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(remaining, res, res_len);
<a name="l07566"></a>07566    }
<a name="l07567"></a>07567 
<a name="l07568"></a>07568 
<a name="l07569"></a>07569    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1000000) {
<a name="l07570"></a>07570       strncat(res, <span class="stringliteral">&quot;1 1000000&quot;</span>, res_len - strlen(res) - 1);
<a name="l07571"></a>07571       <span class="keywordflow">return</span> res;
<a name="l07572"></a>07572    }
<a name="l07573"></a>07573 
<a name="l07574"></a>07574 
<a name="l07575"></a>07575    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000000000) {
<a name="l07576"></a>07576       remaining = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000;
<a name="l07577"></a>07577       digit = (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - remaining) / 1000000;
<a name="l07578"></a>07578 
<a name="l07579"></a>07579       <span class="keywordflow">if</span> (remaining == 0) {
<a name="l07580"></a>07580          <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(digit, res, res_len);
<a name="l07581"></a>07581          strncat(res, <span class="stringliteral">&quot; 1000000&quot;</span>, res_len - strlen(res) - 1);
<a name="l07582"></a>07582          <span class="keywordflow">return</span> res;
<a name="l07583"></a>07583       }
<a name="l07584"></a>07584 
<a name="l07585"></a>07585       <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(digit, res, res_len);
<a name="l07586"></a>07586       strncat(res, <span class="stringliteral">&quot; 1000000_ &quot;</span>, res_len - strlen(res) - 1);
<a name="l07587"></a>07587       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(remaining, res, res_len);
<a name="l07588"></a>07588    }
<a name="l07589"></a>07589 
<a name="l07590"></a>07590 
<a name="l07591"></a>07591    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1000000000) {
<a name="l07592"></a>07592       strncat(res, <span class="stringliteral">&quot;1 1000000000&quot;</span>, res_len - strlen(res) - 1);
<a name="l07593"></a>07593       <span class="keywordflow">return</span> res;
<a name="l07594"></a>07594    }
<a name="l07595"></a>07595 
<a name="l07596"></a>07596 
<a name="l07597"></a>07597    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; 1000000000) {
<a name="l07598"></a>07598       remaining = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 1000000000;
<a name="l07599"></a>07599       digit = (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - remaining) / 1000000000;
<a name="l07600"></a>07600 
<a name="l07601"></a>07601       <span class="keywordflow">if</span> (remaining == 0) {
<a name="l07602"></a>07602          <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(digit, res, res_len);
<a name="l07603"></a>07603          strncat(res, <span class="stringliteral">&quot; 1000000000&quot;</span>, res_len - strlen(res) - 1);
<a name="l07604"></a>07604          <span class="keywordflow">return</span> res;
<a name="l07605"></a>07605       }
<a name="l07606"></a>07606 
<a name="l07607"></a>07607       <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(digit, res, res_len);
<a name="l07608"></a>07608       strncat(res, <span class="stringliteral">&quot; 1000000000_ &quot;</span>, res_len - strlen(res) - 1);
<a name="l07609"></a>07609       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a5482c7450b3a5089e2ffd6e34f91698f">ast_translate_number_ka</a>(remaining, res, res_len);
<a name="l07610"></a>07610    }
<a name="l07611"></a>07611 
<a name="l07612"></a>07612    <span class="keywordflow">return</span> res;
<a name="l07613"></a>07613 
<a name="l07614"></a>07614 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5d5b152e52948f96a43da4a15a6cc893"></a><!-- doxytag: member="say.c::counted_adjective_ending_ru" ref="a5d5b152e52948f96a43da4a15a6cc893" args="(int num, const char gender[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static const char* counted_adjective_ending_ru </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>gender</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07897">7897</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07913">ast_say_counted_adjective()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07898"></a>07898 {
<a name="l07899"></a>07899    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l07900"></a>07900        <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> *= -1;
<a name="l07901"></a>07901    }
<a name="l07902"></a>07902    <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;    <span class="comment">/* never pay attention to more than two digits */</span>
<a name="l07903"></a>07903    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt;= 20) {  <span class="comment">/* at 20 and beyond only the last digit matters */</span>
<a name="l07904"></a>07904        <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l07905"></a>07905    }
<a name="l07906"></a>07906    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1) {
<a name="l07907"></a>07907        <span class="keywordflow">return</span> gender ? gender : <span class="stringliteral">&quot;&quot;</span>;
<a name="l07908"></a>07908    } <span class="keywordflow">else</span> {    <span class="comment">/* all other numbers get the genative plural */</span>
<a name="l07909"></a>07909        <span class="keywordflow">return</span> <span class="stringliteral">&quot;x&quot;</span>;
<a name="l07910"></a>07910    }
<a name="l07911"></a>07911 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a78aa7c1262499db13104f5c0e2443e03"></a><!-- doxytag: member="say.c::counted_noun_ending_en" ref="a78aa7c1262499db13104f5c0e2443e03" args="(int num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static const char* counted_noun_ending_en </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07834">7834</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07871">ast_say_counted_noun()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07835"></a>07835 {
<a name="l07836"></a>07836    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1 || <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == -1) {
<a name="l07837"></a>07837       <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l07838"></a>07838    } <span class="keywordflow">else</span> {
<a name="l07839"></a>07839       <span class="keywordflow">return</span> <span class="stringliteral">&quot;s&quot;</span>;
<a name="l07840"></a>07840    }
<a name="l07841"></a>07841 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7bf341399850ee7e80584cacb05033e5"></a><!-- doxytag: member="say.c::counted_noun_ending_slavic" ref="a7bf341399850ee7e80584cacb05033e5" args="(int num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static const char* counted_noun_ending_slavic </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07852">7852</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07871">ast_say_counted_noun()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07853"></a>07853 {
<a name="l07854"></a>07854       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 0) {
<a name="l07855"></a>07855        <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> *= -1;
<a name="l07856"></a>07856    }
<a name="l07857"></a>07857    <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 100;       <span class="comment">/* never pay attention to more than two digits */</span>
<a name="l07858"></a>07858    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt;= 20) {     <span class="comment">/* for numbers 20 and above, pay attention to only last digit */</span>
<a name="l07859"></a>07859        <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> %= 10;
<a name="l07860"></a>07860    }
<a name="l07861"></a>07861    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> == 1) {         <span class="comment">/* singular */</span>
<a name="l07862"></a>07862        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l07863"></a>07863    }
<a name="l07864"></a>07864    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &gt; 0 &amp;&amp; <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 5) {  <span class="comment">/* 2--4 get genative singular */</span>
<a name="l07865"></a>07865        <span class="keywordflow">return</span> <span class="stringliteral">&quot;x1&quot;</span>;
<a name="l07866"></a>07866    } <span class="keywordflow">else</span> {       <span class="comment">/* 5--19 get genative plural */</span>
<a name="l07867"></a>07867        <span class="keywordflow">return</span> <span class="stringliteral">&quot;x2&quot;</span>;
<a name="l07868"></a>07868    }
<a name="l07869"></a>07869 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1f44a56c8bcc760fc4f0ebc95ad03a66"></a><!-- doxytag: member="say.c::exp10_int" ref="a1f44a56c8bcc760fc4f0ebc95ad03a66" args="(int power)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int exp10_int </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>power</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l00568">568</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l00597">ast_say_number_full_cs()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00569"></a>00569 {
<a name="l00570"></a>00570    <span class="keywordtype">int</span> x, res= 1;
<a name="l00571"></a>00571    <span class="keywordflow">for</span> (x=0;x&lt;power;x++)
<a name="l00572"></a>00572       res *= 10;
<a name="l00573"></a>00573    <span class="keywordflow">return</span> res;
<a name="l00574"></a>00574 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2d19a0df8b737872d1032d9c58f8d35f"></a><!-- doxytag: member="say.c::get_lastdigits_ru" ref="a2d19a0df8b737872d1032d9c58f8d35f" args="(int num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int get_lastdigits_ru </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>determine last digits for thousands/millions (ru) </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l02378">2378</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l02404">ast_say_number_full_ru()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02378"></a>02378                                       {
<a name="l02379"></a>02379    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 20) {
<a name="l02380"></a>02380       <span class="keywordflow">return</span> <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>;
<a name="l02381"></a>02381    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 100) {
<a name="l02382"></a>02382       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a2d19a0df8b737872d1032d9c58f8d35f" title="determine last digits for thousands/millions (ru)">get_lastdigits_ru</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 10);
<a name="l02383"></a>02383    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 1000) {
<a name="l02384"></a>02384       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a2d19a0df8b737872d1032d9c58f8d35f" title="determine last digits for thousands/millions (ru)">get_lastdigits_ru</a>(<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> % 100);
<a name="l02385"></a>02385    }
<a name="l02386"></a>02386    <span class="keywordflow">return</span> 0;   <span class="comment">/* number too big */</span>
<a name="l02387"></a>02387 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1ac32f4ca37eaea55e69c5189617da16"></a><!-- doxytag: member="say.c::gr_say_number_female" ref="a1ac32f4ca37eaea55e69c5189617da16" args="(int num, struct ast_channel *chan, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int gr_say_number_female </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l07033">7033</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="channel_8c_source.html#l05815">ast_say_number()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="say_8c_source.html#l00418">wait_file()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07159">ast_say_date_gr()</a>, <a class="el" href="say_8c_source.html#l07283">ast_say_date_with_format_gr()</a>, <a class="el" href="say_8c_source.html#l07251">ast_say_datetime_gr()</a>, and <a class="el" href="say_8c_source.html#l07203">ast_say_time_gr()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l07033"></a>07033                                                                                                       {
<a name="l07034"></a>07034    <span class="keywordtype">int</span> tmp;
<a name="l07035"></a>07035    <span class="keywordtype">int</span> left;
<a name="l07036"></a>07036    <span class="keywordtype">int</span> res;
<a name="l07037"></a>07037    <span class="keywordtype">char</span> fn[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l07038"></a>07038 
<a name="l07039"></a>07039    <span class="comment">/* ast_debug(1, &quot;\n\n Saying number female %s %d \n\n&quot;, lang, num); */</span>
<a name="l07040"></a>07040    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 5) {
<a name="l07041"></a>07041       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/female-%d&quot;</span>, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>);
<a name="l07042"></a>07042       res = <a class="code" href="say_8c.html#a6b3dbe040a5eed932a68728b55195cf7">wait_file</a>(chan, ints, fn, lang);
<a name="l07043"></a>07043    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt; 13) {
<a name="l07044"></a>07044       res = <a class="code" href="say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12" title="says a number">ast_say_number</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, lang, (<span class="keywordtype">char</span> *) NULL);
<a name="l07045"></a>07045    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> &lt;100 ) { 
<a name="l07046"></a>07046       tmp = (<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>/10) * 10;
<a name="l07047"></a>07047       left = <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> - tmp;
<a name="l07048"></a>07048       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;digits/%d&quot;</span>, tmp);
<a name="l07049"></a>07049       res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l07050"></a>07050       <span class="keywordflow">if</span> (!res)
<a name="l07051"></a>07051          res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l07052"></a>07052       <span class="keywordflow">if</span> (left)
<a name="l07053"></a>07053          <a class="code" href="say_8c.html#a1ac32f4ca37eaea55e69c5189617da16">gr_say_number_female</a>(left, chan, ints, lang);
<a name="l07054"></a>07054          
<a name="l07055"></a>07055    } <span class="keywordflow">else</span> {
<a name="l07056"></a>07056       <span class="keywordflow">return</span> -1;
<a name="l07057"></a>07057    }
<a name="l07058"></a>07058    <span class="keywordflow">return</span> res;
<a name="l07059"></a>07059 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ada19aba234cf58e125365b608e4f6555"></a><!-- doxytag: member="say.c::next_item" ref="ada19aba234cf58e125365b608e4f6555" args="(const char *format)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char next_item </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03720">3720</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00092">ast_skip_blanks()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03727">ast_say_date_with_format_da()</a>, and <a class="el" href="say_8c_source.html#l03929">ast_say_date_with_format_de()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03721"></a>03721 {
<a name="l03722"></a>03722    <span class="keyword">const</span> <span class="keywordtype">char</span> *next = <a class="code" href="strings_8h.html#aba29020090d7b4238027c5746e7ad722" title="Gets a pointer to the first non-whitespace character in a string.">ast_skip_blanks</a>(<a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l03723"></a>03723    <span class="keywordflow">return</span> *next;
<a name="l03724"></a>03724 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aba72db3a0a460c4d2707f1b37661a72f"></a><!-- doxytag: member="say.c::pl_append" ref="aba72db3a0a460c4d2707f1b37661a72f" args="(char *buffer, char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* pl_append </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>str</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l01823">1823</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l01844">powiedz()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01824"></a>01824 {
<a name="l01825"></a>01825    strcpy(buffer, <a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);
<a name="l01826"></a>01826    buffer += strlen(<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>); 
<a name="l01827"></a>01827    <span class="keywordflow">return</span> buffer;
<a name="l01828"></a>01828 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad7bca11f9e43421cf5b5a04da4cb60a5"></a><!-- doxytag: member="say.c::pl_odtworz_plik" ref="ad7bca11f9e43421cf5b5a04da4cb60a5" args="(struct ast_channel *chan, const char *language, int audiofd, int ctrlfd, const char *ints, char *fn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void pl_odtworz_plik </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l01830">1830</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l01844">powiedz()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01831"></a>01831 {    
<a name="l01832"></a>01832    <span class="keywordtype">char</span> file_name[255] = <span class="stringliteral">&quot;digits/&quot;</span>;
<a name="l01833"></a>01833    strcat(file_name, fn);
<a name="l01834"></a>01834    <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Trying to play: %s\n&quot;</span>, file_name);
<a name="l01835"></a>01835    <span class="keywordflow">if</span> (!<a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, file_name, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>)) {
<a name="l01836"></a>01836       <span class="keywordflow">if</span> ((audiofd &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l01837"></a>01837          <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l01838"></a>01838       <span class="keywordflow">else</span>
<a name="l01839"></a>01839          <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l01840"></a>01840    }
<a name="l01841"></a>01841    <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l01842"></a>01842 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a618360d137cd7b34c454e13fe827f2ca"></a><!-- doxytag: member="say.c::pl_rzad_na_tekst" ref="a618360d137cd7b34c454e13fe827f2ca" args="(odmiana *odm, int i, int rzad)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* pl_rzad_na_tekst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structodmiana.html">odmiana</a> *&nbsp;</td>
          <td class="paramname"> <em>odm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rzad</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l01810">1810</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="say_8c_source.html#l01807">odmiana::rzedy</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l01844">powiedz()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01811"></a>01811 {
<a name="l01812"></a>01812    <span class="keywordflow">if</span> (rzad==0)
<a name="l01813"></a>01813       <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l01814"></a>01814  
<a name="l01815"></a>01815    <span class="keywordflow">if</span> (i==1)
<a name="l01816"></a>01816       <span class="keywordflow">return</span> odm-&gt;<a class="code" href="structodmiana.html#a80546137e881e5c34e282ab59c7f2106">rzedy</a>[rzad - 1][0];
<a name="l01817"></a>01817    <span class="keywordflow">if</span> ((i &gt; 21 || i &lt; 11) &amp;&amp;  i%10 &gt; 1 &amp;&amp; i%10 &lt; 5)
<a name="l01818"></a>01818       <span class="keywordflow">return</span> odm-&gt;<a class="code" href="structodmiana.html#a80546137e881e5c34e282ab59c7f2106">rzedy</a>[rzad - 1][1];
<a name="l01819"></a>01819    <span class="keywordflow">else</span>
<a name="l01820"></a>01820       <span class="keywordflow">return</span> odm-&gt;<a class="code" href="structodmiana.html#a80546137e881e5c34e282ab59c7f2106">rzedy</a>[rzad - 1][2];
<a name="l01821"></a>01821 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae7cfe5af00e53525309cb121d9b2f607"></a><!-- doxytag: member="say.c::powiedz" ref="ae7cfe5af00e53525309cb121d9b2f607" args="(struct ast_channel *chan, const char *language, int audiofd, int ctrlfd, const char *ints, odmiana *odm, int rzad, int i)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void powiedz </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structodmiana.html">odmiana</a> *&nbsp;</td>
          <td class="paramname"> <em>odm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rzad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l01844">1844</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="adsistub_8c_source.html#l00059">buf</a>, <a class="el" href="say_8c_source.html#l01802">odmiana::cyfry</a>, <a class="el" href="say_8c_source.html#l01803">odmiana::cyfry2</a>, <a class="el" href="say_8c_source.html#l01805">odmiana::dziesiatki</a>, <a class="el" href="say_8c_source.html#l01806">odmiana::nastki</a>, <a class="el" href="say_8c_source.html#l01823">pl_append()</a>, <a class="el" href="say_8c_source.html#l01830">pl_odtworz_plik()</a>, <a class="el" href="say_8c_source.html#l01810">pl_rzad_na_tekst()</a>, <a class="el" href="say_8c_source.html#l01801">odmiana::separator_dziesiatek</a>, and <a class="el" href="say_8c_source.html#l01804">odmiana::setki</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l01914">ast_say_number_full_pl()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01845"></a>01845 {
<a name="l01846"></a>01846    <span class="comment">/* Initialise variables to allow compilation on Debian-stable, etc */</span>
<a name="l01847"></a>01847    <span class="keywordtype">int</span> m1000E6 = 0;
<a name="l01848"></a>01848    <span class="keywordtype">int</span> i1000E6 = 0;
<a name="l01849"></a>01849    <span class="keywordtype">int</span> m1000E3 = 0;
<a name="l01850"></a>01850    <span class="keywordtype">int</span> i1000E3 = 0;
<a name="l01851"></a>01851    <span class="keywordtype">int</span> m1000 = 0;
<a name="l01852"></a>01852    <span class="keywordtype">int</span> i1000 = 0;
<a name="l01853"></a>01853    <span class="keywordtype">int</span> m100 = 0;
<a name="l01854"></a>01854    <span class="keywordtype">int</span> i100 = 0;
<a name="l01855"></a>01855    
<a name="l01856"></a>01856    <span class="keywordflow">if</span> (i == 0 &amp;&amp; rzad &gt; 0) { 
<a name="l01857"></a>01857       <span class="keywordflow">return</span>;
<a name="l01858"></a>01858    }
<a name="l01859"></a>01859    <span class="keywordflow">if</span> (i == 0) {
<a name="l01860"></a>01860       <a class="code" href="say_8c.html#ad7bca11f9e43421cf5b5a04da4cb60a5">pl_odtworz_plik</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, odm-&gt;<a class="code" href="structodmiana.html#a774064f93d19a8550ea4bf25e3d5c529">cyfry</a>[0]);
<a name="l01861"></a>01861       <span class="keywordflow">return</span>;
<a name="l01862"></a>01862    }
<a name="l01863"></a>01863 
<a name="l01864"></a>01864    m1000E6 = i % 1000000000;
<a name="l01865"></a>01865    i1000E6 = i / 1000000000;
<a name="l01866"></a>01866 
<a name="l01867"></a>01867    <a class="code" href="say_8c.html#ae7cfe5af00e53525309cb121d9b2f607">powiedz</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, odm, rzad+3, i1000E6);
<a name="l01868"></a>01868 
<a name="l01869"></a>01869    m1000E3 = m1000E6 % 1000000;
<a name="l01870"></a>01870    i1000E3 = m1000E6 / 1000000;
<a name="l01871"></a>01871 
<a name="l01872"></a>01872    <a class="code" href="say_8c.html#ae7cfe5af00e53525309cb121d9b2f607">powiedz</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, odm, rzad+2, i1000E3);
<a name="l01873"></a>01873 
<a name="l01874"></a>01874    m1000 = m1000E3 % 1000;
<a name="l01875"></a>01875    i1000 = m1000E3 / 1000;
<a name="l01876"></a>01876 
<a name="l01877"></a>01877    <a class="code" href="say_8c.html#ae7cfe5af00e53525309cb121d9b2f607">powiedz</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, odm, rzad+1, i1000);
<a name="l01878"></a>01878 
<a name="l01879"></a>01879    m100 = m1000 % 100;
<a name="l01880"></a>01880    i100 = m1000 / 100;
<a name="l01881"></a>01881    
<a name="l01882"></a>01882    <span class="keywordflow">if</span> (i100&gt;0)
<a name="l01883"></a>01883       <a class="code" href="say_8c.html#ad7bca11f9e43421cf5b5a04da4cb60a5">pl_odtworz_plik</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, odm-&gt;<a class="code" href="structodmiana.html#adf57862bfbb7c5a612bf945fa47e6a72">setki</a>[i100]);
<a name="l01884"></a>01884 
<a name="l01885"></a>01885    <span class="keywordflow">if</span> ( m100 &gt; 0 &amp;&amp; m100 &lt;=9 ) {
<a name="l01886"></a>01886       <span class="keywordflow">if</span> (m1000&gt;0)
<a name="l01887"></a>01887          <a class="code" href="say_8c.html#ad7bca11f9e43421cf5b5a04da4cb60a5">pl_odtworz_plik</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, odm-&gt;<a class="code" href="structodmiana.html#a3f298e20f4b4c06e1ab9e6e1dd8c30df">cyfry2</a>[m100]);
<a name="l01888"></a>01888       <span class="keywordflow">else</span>
<a name="l01889"></a>01889          <a class="code" href="say_8c.html#ad7bca11f9e43421cf5b5a04da4cb60a5">pl_odtworz_plik</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, odm-&gt;<a class="code" href="structodmiana.html#a774064f93d19a8550ea4bf25e3d5c529">cyfry</a>[m100]);
<a name="l01890"></a>01890    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m100 % 10 == 0) {
<a name="l01891"></a>01891       <a class="code" href="say_8c.html#ad7bca11f9e43421cf5b5a04da4cb60a5">pl_odtworz_plik</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, odm-&gt;<a class="code" href="structodmiana.html#af2e5ec8aead9546c54034855f9285502">dziesiatki</a>[m100 / 10]);
<a name="l01892"></a>01892    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m100 &lt;= 19 ) {
<a name="l01893"></a>01893       <a class="code" href="say_8c.html#ad7bca11f9e43421cf5b5a04da4cb60a5">pl_odtworz_plik</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, odm-&gt;<a class="code" href="structodmiana.html#abb85f41d549207d32eb74243929bc742">nastki</a>[m100 % 10]);
<a name="l01894"></a>01894    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m100 != 0) {
<a name="l01895"></a>01895       <span class="keywordflow">if</span> (odm-&gt;<a class="code" href="structodmiana.html#a3a4a6c9e8af196bdbf8179e1fcc857bd">separator_dziesiatek</a>[0]==<span class="charliteral">&apos; &apos;</span>) {
<a name="l01896"></a>01896          <a class="code" href="say_8c.html#ad7bca11f9e43421cf5b5a04da4cb60a5">pl_odtworz_plik</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, odm-&gt;<a class="code" href="structodmiana.html#af2e5ec8aead9546c54034855f9285502">dziesiatki</a>[m100 / 10]);
<a name="l01897"></a>01897          <a class="code" href="say_8c.html#ad7bca11f9e43421cf5b5a04da4cb60a5">pl_odtworz_plik</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, odm-&gt;<a class="code" href="structodmiana.html#a3f298e20f4b4c06e1ab9e6e1dd8c30df">cyfry2</a>[m100 % 10]);
<a name="l01898"></a>01898       } <span class="keywordflow">else</span> {
<a name="l01899"></a>01899          <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>[10];
<a name="l01900"></a>01900          <span class="keywordtype">char</span> *b = buf;
<a name="l01901"></a>01901          b = <a class="code" href="say_8c.html#aba72db3a0a460c4d2707f1b37661a72f">pl_append</a>(b, odm-&gt;<a class="code" href="structodmiana.html#af2e5ec8aead9546c54034855f9285502">dziesiatki</a>[m100 / 10]);  
<a name="l01902"></a>01902          b = <a class="code" href="say_8c.html#aba72db3a0a460c4d2707f1b37661a72f">pl_append</a>(b, odm-&gt;<a class="code" href="structodmiana.html#a3a4a6c9e8af196bdbf8179e1fcc857bd">separator_dziesiatek</a>);  
<a name="l01903"></a>01903          b = <a class="code" href="say_8c.html#aba72db3a0a460c4d2707f1b37661a72f">pl_append</a>(b, odm-&gt;<a class="code" href="structodmiana.html#a3f298e20f4b4c06e1ab9e6e1dd8c30df">cyfry2</a>[m100 % 10]); 
<a name="l01904"></a>01904          <a class="code" href="say_8c.html#ad7bca11f9e43421cf5b5a04da4cb60a5">pl_odtworz_plik</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, buf);
<a name="l01905"></a>01905       }
<a name="l01906"></a>01906    } 
<a name="l01907"></a>01907 
<a name="l01908"></a>01908    <span class="keywordflow">if</span> (rzad &gt; 0) {
<a name="l01909"></a>01909       <a class="code" href="say_8c.html#ad7bca11f9e43421cf5b5a04da4cb60a5">pl_odtworz_plik</a>(chan, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd, ints, <a class="code" href="say_8c.html#a618360d137cd7b34c454e13fe827f2ca">pl_rzad_na_tekst</a>(odm, i, rzad));
<a name="l01910"></a>01910    }
<a name="l01911"></a>01911 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a28a689ee86ec09fa0858691834d9383c"></a><!-- doxytag: member="say.c::say_character_str_full" ref="a28a689ee86ec09fa0858691834d9383c" args="(struct ast_channel *chan, const char *str, const char *ints, const char *lang, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int say_character_str_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l00059">59</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="file_8c_source.html#l00914">ast_fileexists()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>, and <a class="el" href="adsistub_8c_source.html#l00077">num</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07937">__say_init()</a>, and <a class="el" href="app__playback_8c_source.html#l00349">say_init_mode()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00060"></a>00060 {
<a name="l00061"></a>00061    <span class="keyword">const</span> <span class="keywordtype">char</span> *fn;
<a name="l00062"></a>00062    <span class="keywordtype">char</span> fnbuf[10], asciibuf[20] = <span class="stringliteral">&quot;letters/ascii&quot;</span>;
<a name="l00063"></a>00063    <span class="keywordtype">char</span> ltr;
<a name="l00064"></a>00064    <span class="keywordtype">int</span> <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00065"></a>00065    <span class="keywordtype">int</span> res = 0;
<a name="l00066"></a>00066 
<a name="l00067"></a>00067    <span class="keywordflow">while</span> (<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[num] &amp;&amp; !res) {
<a name="l00068"></a>00068       fn = NULL;
<a name="l00069"></a>00069       <span class="keywordflow">switch</span> (<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[num]) {
<a name="l00070"></a>00070       <span class="keywordflow">case</span> (<span class="charliteral">&apos;*&apos;</span>):
<a name="l00071"></a>00071          fn = <span class="stringliteral">&quot;digits/star&quot;</span>;
<a name="l00072"></a>00072          <span class="keywordflow">break</span>;
<a name="l00073"></a>00073       <span class="keywordflow">case</span> (<span class="charliteral">&apos;#&apos;</span>):
<a name="l00074"></a>00074          fn = <span class="stringliteral">&quot;digits/pound&quot;</span>;
<a name="l00075"></a>00075          <span class="keywordflow">break</span>;
<a name="l00076"></a>00076       <span class="keywordflow">case</span> (<span class="charliteral">&apos;!&apos;</span>):
<a name="l00077"></a>00077          fn = <span class="stringliteral">&quot;letters/exclaimation-point&quot;</span>;
<a name="l00078"></a>00078          <span class="keywordflow">break</span>;
<a name="l00079"></a>00079       <span class="keywordflow">case</span> (<span class="charliteral">&apos;@&apos;</span>):
<a name="l00080"></a>00080          fn = <span class="stringliteral">&quot;letters/at&quot;</span>;
<a name="l00081"></a>00081          <span class="keywordflow">break</span>;
<a name="l00082"></a>00082       <span class="keywordflow">case</span> (<span class="charliteral">&apos;$&apos;</span>):
<a name="l00083"></a>00083          fn = <span class="stringliteral">&quot;letters/dollar&quot;</span>;
<a name="l00084"></a>00084          <span class="keywordflow">break</span>;
<a name="l00085"></a>00085       <span class="keywordflow">case</span> (<span class="charliteral">&apos;-&apos;</span>):
<a name="l00086"></a>00086          fn = <span class="stringliteral">&quot;letters/dash&quot;</span>;
<a name="l00087"></a>00087          <span class="keywordflow">break</span>;
<a name="l00088"></a>00088       <span class="keywordflow">case</span> (<span class="charliteral">&apos;.&apos;</span>):
<a name="l00089"></a>00089          fn = <span class="stringliteral">&quot;letters/dot&quot;</span>;
<a name="l00090"></a>00090          <span class="keywordflow">break</span>;
<a name="l00091"></a>00091       <span class="keywordflow">case</span> (<span class="charliteral">&apos;=&apos;</span>):
<a name="l00092"></a>00092          fn = <span class="stringliteral">&quot;letters/equals&quot;</span>;
<a name="l00093"></a>00093          <span class="keywordflow">break</span>;
<a name="l00094"></a>00094       <span class="keywordflow">case</span> (<span class="charliteral">&apos;+&apos;</span>):
<a name="l00095"></a>00095          fn = <span class="stringliteral">&quot;letters/plus&quot;</span>;
<a name="l00096"></a>00096          <span class="keywordflow">break</span>;
<a name="l00097"></a>00097       <span class="keywordflow">case</span> (<span class="charliteral">&apos;/&apos;</span>):
<a name="l00098"></a>00098          fn = <span class="stringliteral">&quot;letters/slash&quot;</span>;
<a name="l00099"></a>00099          <span class="keywordflow">break</span>;
<a name="l00100"></a>00100       <span class="keywordflow">case</span> (<span class="charliteral">&apos; &apos;</span>):
<a name="l00101"></a>00101          fn = <span class="stringliteral">&quot;letters/space&quot;</span>;
<a name="l00102"></a>00102          <span class="keywordflow">break</span>;
<a name="l00103"></a>00103       <span class="keywordflow">case</span> (<span class="charliteral">&apos;0&apos;</span>):
<a name="l00104"></a>00104       <span class="keywordflow">case</span> (<span class="charliteral">&apos;1&apos;</span>):
<a name="l00105"></a>00105       <span class="keywordflow">case</span> (<span class="charliteral">&apos;2&apos;</span>):
<a name="l00106"></a>00106       <span class="keywordflow">case</span> (<span class="charliteral">&apos;3&apos;</span>):
<a name="l00107"></a>00107       <span class="keywordflow">case</span> (<span class="charliteral">&apos;4&apos;</span>):
<a name="l00108"></a>00108       <span class="keywordflow">case</span> (<span class="charliteral">&apos;5&apos;</span>):
<a name="l00109"></a>00109       <span class="keywordflow">case</span> (<span class="charliteral">&apos;6&apos;</span>):
<a name="l00110"></a>00110       <span class="keywordflow">case</span> (<span class="charliteral">&apos;7&apos;</span>):
<a name="l00111"></a>00111       <span class="keywordflow">case</span> (<span class="charliteral">&apos;8&apos;</span>):
<a name="l00112"></a>00112       <span class="keywordflow">case</span> (<span class="charliteral">&apos;9&apos;</span>):
<a name="l00113"></a>00113          strcpy(fnbuf, <span class="stringliteral">&quot;digits/X&quot;</span>);
<a name="l00114"></a>00114          fnbuf[7] = <a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[num];
<a name="l00115"></a>00115          fn = fnbuf;
<a name="l00116"></a>00116          <span class="keywordflow">break</span>;
<a name="l00117"></a>00117       <span class="keywordflow">default</span>:
<a name="l00118"></a>00118          ltr = <a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[num];
<a name="l00119"></a>00119          <span class="keywordflow">if</span> (<span class="charliteral">&apos;A&apos;</span> &lt;= ltr &amp;&amp; ltr &lt;= <span class="charliteral">&apos;Z&apos;</span>) ltr += <span class="charliteral">&apos;a&apos;</span> - <span class="charliteral">&apos;A&apos;</span>;    <span class="comment">/* file names are all lower-case */</span>
<a name="l00120"></a>00120          strcpy(fnbuf, <span class="stringliteral">&quot;letters/X&quot;</span>);
<a name="l00121"></a>00121          fnbuf[8] = ltr;
<a name="l00122"></a>00122          fn = fnbuf;
<a name="l00123"></a>00123       }
<a name="l00124"></a>00124       <span class="keywordflow">if</span> ((fn &amp;&amp; <a class="code" href="file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde" title="Checks for the existence of a given file.">ast_fileexists</a>(fn, NULL, lang) &gt; 0) ||
<a name="l00125"></a>00125          (snprintf(asciibuf + 13, <span class="keyword">sizeof</span>(asciibuf) - 13, <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[num]) &gt; 0 &amp;&amp; <a class="code" href="file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde" title="Checks for the existence of a given file.">ast_fileexists</a>(asciibuf, NULL, lang) &gt; 0 &amp;&amp; (fn = asciibuf))) {
<a name="l00126"></a>00126          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l00127"></a>00127          <span class="keywordflow">if</span> (!res) {
<a name="l00128"></a>00128             <span class="keywordflow">if</span> ((audiofd  &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l00129"></a>00129                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l00130"></a>00130             <span class="keywordflow">else</span>
<a name="l00131"></a>00131                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l00132"></a>00132          }
<a name="l00133"></a>00133          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l00134"></a>00134       }
<a name="l00135"></a>00135       num++;
<a name="l00136"></a>00136    }
<a name="l00137"></a>00137 
<a name="l00138"></a>00138    <span class="keywordflow">return</span> res;
<a name="l00139"></a>00139 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae1701ebeea69d48d0e1e1de3759a4c12"></a><!-- doxytag: member="say.c::say_date" ref="ae1701ebeea69d48d0e1e1de3759a4c12" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int say_date </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03082">3082</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="say_8c_source.html#l03148">ast_say_date_da()</a>, <a class="el" href="say_8c_source.html#l03197">ast_say_date_de()</a>, <a class="el" href="say_8c_source.html#l03119">ast_say_date_en()</a>, <a class="el" href="say_8c_source.html#l03279">ast_say_date_fr()</a>, <a class="el" href="say_8c_source.html#l07159">ast_say_date_gr()</a>, <a class="el" href="say_8c_source.html#l03400">ast_say_date_he()</a>, <a class="el" href="say_8c_source.html#l03247">ast_say_date_hu()</a>, <a class="el" href="say_8c_source.html#l07696">ast_say_date_ka()</a>, <a class="el" href="say_8c_source.html#l03308">ast_say_date_nl()</a>, <a class="el" href="say_8c_source.html#l03373">ast_say_date_pt()</a>, <a class="el" href="say_8c_source.html#l03337">ast_say_date_th()</a>, and <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07937">__say_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03083"></a>03083 {
<a name="l03084"></a>03084    <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;en&quot;</span>, 2)) {        <span class="comment">/* English syntax */</span>
<a name="l03085"></a>03085       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a069a18b405b4f17b0b694f9fe2cb7141">ast_say_date_en</a>(chan, t, ints, lang);
<a name="l03086"></a>03086    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;da&quot;</span>, 2)) { <span class="comment">/* Danish syntax */</span>
<a name="l03087"></a>03087       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a6e8374e9a7b5c82447477a3b5a442b80">ast_say_date_da</a>(chan, t, ints, lang);
<a name="l03088"></a>03088    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;de&quot;</span>, 2)) { <span class="comment">/* German syntax */</span>
<a name="l03089"></a>03089       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a6e866250f44614aabf009459a675f5cd">ast_say_date_de</a>(chan, t, ints, lang);
<a name="l03090"></a>03090    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;fr&quot;</span>, 2)) { <span class="comment">/* French syntax */</span>
<a name="l03091"></a>03091       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a6ad066de3ff3dc730b43981ddd7be59d">ast_say_date_fr</a>(chan, t, ints, lang);
<a name="l03092"></a>03092    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;ge&quot;</span>, 2)) { <span class="comment">/* deprecated Georgian syntax */</span>
<a name="l03093"></a>03093       <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;
<a name="l03094"></a>03094       <span class="keywordflow">if</span> (deprecation_warning++ % 10 == 0) {
<a name="l03095"></a>03095          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ge is not a standard language code.  Please switch to using ka instead.\n&quot;</span>);
<a name="l03096"></a>03096       }
<a name="l03097"></a>03097       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#afdcccc4ef35819f2ee23e8335c7865fd">ast_say_date_ka</a>(chan, t, ints, lang);
<a name="l03098"></a>03098    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;gr&quot;</span>, 2)) { <span class="comment">/* Greek syntax */</span>
<a name="l03099"></a>03099       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a60123b2a06ece77ffbf3ed22592626f1">ast_say_date_gr</a>(chan, t, ints, lang);
<a name="l03100"></a>03100    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;he&quot;</span>, 2)) { <span class="comment">/* Hebrew syntax */</span>
<a name="l03101"></a>03101       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ad52e7050e59c13cd34f4763c298fbf6c">ast_say_date_he</a>(chan, t, ints, lang);
<a name="l03102"></a>03102    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;hu&quot;</span>, 2)) { <span class="comment">/* Hungarian syntax */</span>
<a name="l03103"></a>03103       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#abcdaae528aa25fbad39f0989a124d839">ast_say_date_hu</a>(chan, t, ints, lang);
<a name="l03104"></a>03104    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;ka&quot;</span>, 2)) { <span class="comment">/* Georgian syntax */</span>
<a name="l03105"></a>03105       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#afdcccc4ef35819f2ee23e8335c7865fd">ast_say_date_ka</a>(chan, t, ints, lang);
<a name="l03106"></a>03106    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;nl&quot;</span>, 2)) { <span class="comment">/* Dutch syntax */</span>
<a name="l03107"></a>03107       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a822dba1d36a7a0a9e2fa14c592e54987">ast_say_date_nl</a>(chan, t, ints, lang);
<a name="l03108"></a>03108    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;pt&quot;</span>, 2)) { <span class="comment">/* Portuguese syntax */</span>
<a name="l03109"></a>03109       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a63f449411fb6ca36bb528da40e411f5a">ast_say_date_pt</a>(chan, t, ints, lang);
<a name="l03110"></a>03110    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;th&quot;</span>, 2)) { <span class="comment">/* Thai syntax */</span>
<a name="l03111"></a>03111       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#adbf3d46f5d912ff259174e80b3edad57">ast_say_date_th</a>(chan, t, ints, lang);
<a name="l03112"></a>03112    }
<a name="l03113"></a>03113 
<a name="l03114"></a>03114    <span class="comment">/* Default to English */</span>
<a name="l03115"></a>03115    <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a069a18b405b4f17b0b694f9fe2cb7141">ast_say_date_en</a>(chan, t, ints, lang);
<a name="l03116"></a>03116 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a392867bc0764adafb721835663dbec4a"></a><!-- doxytag: member="say.c::say_date_with_format" ref="a392867bc0764adafb721835663dbec4a" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *tzone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int say_date_with_format </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tzone</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l03433">3433</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="say_8c_source.html#l03727">ast_say_date_with_format_da()</a>, <a class="el" href="say_8c_source.html#l03929">ast_say_date_with_format_de()</a>, <a class="el" href="say_8c_source.html#l03480">ast_say_date_with_format_en()</a>, <a class="el" href="say_8c_source.html#l04466">ast_say_date_with_format_es()</a>, <a class="el" href="say_8c_source.html#l04655">ast_say_date_with_format_fr()</a>, <a class="el" href="say_8c_source.html#l07283">ast_say_date_with_format_gr()</a>, <a class="el" href="say_8c_source.html#l04322">ast_say_date_with_format_he()</a>, <a class="el" href="say_8c_source.html#l04850">ast_say_date_with_format_it()</a>, <a class="el" href="say_8c_source.html#l05080">ast_say_date_with_format_nl()</a>, <a class="el" href="say_8c_source.html#l05285">ast_say_date_with_format_pl()</a>, <a class="el" href="say_8c_source.html#l05502">ast_say_date_with_format_pt()</a>, <a class="el" href="say_8c_source.html#l04132">ast_say_date_with_format_th()</a>, <a class="el" href="say_8c_source.html#l05794">ast_say_date_with_format_zh()</a>, and <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07937">__say_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03434"></a>03434 {
<a name="l03435"></a>03435    <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;en&quot;</span>, 2)) {      <span class="comment">/* English syntax */</span>
<a name="l03436"></a>03436       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03437"></a>03437    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;da&quot;</span>, 2)) { <span class="comment">/* Danish syntax */</span>
<a name="l03438"></a>03438       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a857ff68a92ef5766188e533b3cc51f99">ast_say_date_with_format_da</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03439"></a>03439    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;de&quot;</span>, 2)) { <span class="comment">/* German syntax */</span>
<a name="l03440"></a>03440       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a9197bf1dc303f38a93b46eec6c30375d">ast_say_date_with_format_de</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03441"></a>03441    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;es&quot;</span>, 2)) { <span class="comment">/* Spanish syntax */</span>
<a name="l03442"></a>03442       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a100824ee16949d59a2d401d5ef36a4e8">ast_say_date_with_format_es</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03443"></a>03443    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;he&quot;</span>, 2)) { <span class="comment">/* Hebrew syntax */</span>
<a name="l03444"></a>03444       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ab05d072f242f91f3504cf17f1f0b877b">ast_say_date_with_format_he</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03445"></a>03445    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;fr&quot;</span>, 2)) { <span class="comment">/* French syntax */</span>
<a name="l03446"></a>03446       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a08d7b66004fdb5bbd2f3dcce332a20e9">ast_say_date_with_format_fr</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03447"></a>03447    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;gr&quot;</span>, 2)) { <span class="comment">/* Greek syntax */</span>
<a name="l03448"></a>03448       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#aad88a3dda8e3e4e1c49eaa4d675577fb">ast_say_date_with_format_gr</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03449"></a>03449    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;it&quot;</span>, 2)) { <span class="comment">/* Italian syntax */</span>
<a name="l03450"></a>03450       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#aa96c082ebfc847b6df805efa37b6063d">ast_say_date_with_format_it</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03451"></a>03451    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;mx&quot;</span>, 2)) { <span class="comment">/* deprecated Mexican syntax */</span>
<a name="l03452"></a>03452       <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;
<a name="l03453"></a>03453       <span class="keywordflow">if</span> (deprecation_warning++ % 10 == 0) {
<a name="l03454"></a>03454          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;mx is not a standard language code.  Please switch to using es_MX instead.\n&quot;</span>);
<a name="l03455"></a>03455       }
<a name="l03456"></a>03456       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a100824ee16949d59a2d401d5ef36a4e8">ast_say_date_with_format_es</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03457"></a>03457    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;nl&quot;</span>, 2)) { <span class="comment">/* Dutch syntax */</span>
<a name="l03458"></a>03458       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a26c460c2765ec1c9b84e98f29833bb2c">ast_say_date_with_format_nl</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03459"></a>03459    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;pl&quot;</span>, 2)) { <span class="comment">/* Polish syntax */</span>
<a name="l03460"></a>03460       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a0181ffcc431bd141412a0057d13f28b7">ast_say_date_with_format_pl</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03461"></a>03461    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;pt&quot;</span>, 2)) { <span class="comment">/* Portuguese syntax */</span>
<a name="l03462"></a>03462       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#aee531482d70b9bc3de78394b28c20d18">ast_say_date_with_format_pt</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03463"></a>03463    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;th&quot;</span>, 2)) { <span class="comment">/* Thai syntax */</span>
<a name="l03464"></a>03464       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a756da2d5b06a162994055452f6c36f15">ast_say_date_with_format_th</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03465"></a>03465    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;tw&quot;</span>, 2)) { <span class="comment">/* deprecated Taiwanese syntax */</span>
<a name="l03466"></a>03466       <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;
<a name="l03467"></a>03467       <span class="keywordflow">if</span> (deprecation_warning++ % 10 == 0) {
<a name="l03468"></a>03468          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;tw is a standard language code for Twi, not Taiwanese.  Please switch to using zh_TW instead.\n&quot;</span>);
<a name="l03469"></a>03469       }
<a name="l03470"></a>03470       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#acdffaf2715cd5ed1365c81d0a637a879">ast_say_date_with_format_zh</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03471"></a>03471    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;zh&quot;</span>, 2)) { <span class="comment">/* Taiwanese / Chinese syntax */</span>
<a name="l03472"></a>03472       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#acdffaf2715cd5ed1365c81d0a637a879">ast_say_date_with_format_zh</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03473"></a>03473    }
<a name="l03474"></a>03474 
<a name="l03475"></a>03475    <span class="comment">/* Default to English */</span>
<a name="l03476"></a>03476    <span class="keywordflow">return</span> <a class="code" href="say_8c.html#aee9df79e6e3bc9df007cf6b252bc0d50">ast_say_date_with_format_en</a>(chan, t, ints, lang, <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, tzone);
<a name="l03477"></a>03477 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac420adeb9078de529048f5770187c3d1"></a><!-- doxytag: member="say.c::say_datetime" ref="ac420adeb9078de529048f5770187c3d1" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int say_datetime </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06388">6388</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="say_8c_source.html#l06500">ast_say_datetime_de()</a>, <a class="el" href="say_8c_source.html#l06433">ast_say_datetime_en()</a>, <a class="el" href="say_8c_source.html#l06529">ast_say_datetime_fr()</a>, <a class="el" href="say_8c_source.html#l07251">ast_say_datetime_gr()</a>, <a class="el" href="say_8c_source.html#l06773">ast_say_datetime_he()</a>, <a class="el" href="say_8c_source.html#l06515">ast_say_datetime_hu()</a>, <a class="el" href="say_8c_source.html#l07768">ast_say_datetime_ka()</a>, <a class="el" href="say_8c_source.html#l06570">ast_say_datetime_nl()</a>, <a class="el" href="say_8c_source.html#l06589">ast_say_datetime_pt()</a>, <a class="el" href="say_8c_source.html#l06656">ast_say_datetime_pt_BR()</a>, <a class="el" href="say_8c_source.html#l06670">ast_say_datetime_th()</a>, <a class="el" href="say_8c_source.html#l06713">ast_say_datetime_zh()</a>, and <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07937">__say_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06389"></a>06389 {
<a name="l06390"></a>06390    <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;en&quot;</span>, 2)) {        <span class="comment">/* English syntax */</span>
<a name="l06391"></a>06391       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a903a842c47304dcebf1029fdf9c391e6">ast_say_datetime_en</a>(chan, t, ints, lang);
<a name="l06392"></a>06392    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;de&quot;</span>, 2)) { <span class="comment">/* German syntax */</span>
<a name="l06393"></a>06393       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ad2b3493567e92893e2c49982a62bb133">ast_say_datetime_de</a>(chan, t, ints, lang);
<a name="l06394"></a>06394    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;fr&quot;</span>, 2)) { <span class="comment">/* French syntax */</span>
<a name="l06395"></a>06395       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ab8696b88027ae3520d11a1dcc13245b9">ast_say_datetime_fr</a>(chan, t, ints, lang);
<a name="l06396"></a>06396    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;ge&quot;</span>, 2)) { <span class="comment">/* deprecated Georgian syntax */</span>
<a name="l06397"></a>06397       <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;
<a name="l06398"></a>06398       <span class="keywordflow">if</span> (deprecation_warning++ % 10 == 0) {
<a name="l06399"></a>06399          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ge is not a standard language code.  Please switch to using ka instead.\n&quot;</span>);
<a name="l06400"></a>06400       }
<a name="l06401"></a>06401       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a3539aa9a04f8013a3b388a4540ab476a">ast_say_datetime_ka</a>(chan, t, ints, lang);
<a name="l06402"></a>06402    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;gr&quot;</span>, 2)) { <span class="comment">/* Greek syntax */</span>
<a name="l06403"></a>06403       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a78a476fede4f60e45b0656ff85424981">ast_say_datetime_gr</a>(chan, t, ints, lang);
<a name="l06404"></a>06404    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;he&quot;</span>, 2)) { <span class="comment">/* Hebrew syntax */</span>
<a name="l06405"></a>06405       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a85945136cf41f790db09a29850dedd25">ast_say_datetime_he</a>(chan, t, ints, lang);
<a name="l06406"></a>06406    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;hu&quot;</span>, 2)) { <span class="comment">/* Hungarian syntax */</span>
<a name="l06407"></a>06407       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#aaee931489d2eb92e130cda3ace16505f">ast_say_datetime_hu</a>(chan, t, ints, lang);
<a name="l06408"></a>06408    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;ka&quot;</span>, 2)) { <span class="comment">/* Georgian syntax */</span>
<a name="l06409"></a>06409       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a3539aa9a04f8013a3b388a4540ab476a">ast_say_datetime_ka</a>(chan, t, ints, lang);
<a name="l06410"></a>06410    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;nl&quot;</span>, 2)) { <span class="comment">/* Dutch syntax */</span>
<a name="l06411"></a>06411       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a26cb7541c29e2f861ab8832cd576e58c">ast_say_datetime_nl</a>(chan, t, ints, lang);
<a name="l06412"></a>06412    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;pt_BR&quot;</span>, 5)) { <span class="comment">/* Brazilian Portuguese syntax */</span>
<a name="l06413"></a>06413       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a25e7724f153b68b5414a967cc53c9d1d">ast_say_datetime_pt_BR</a>(chan, t, ints, lang);
<a name="l06414"></a>06414    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;pt&quot;</span>, 2)) { <span class="comment">/* Portuguese syntax */</span>
<a name="l06415"></a>06415       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a30ce2ebb46bb411cfb4cfe721d75f850">ast_say_datetime_pt</a>(chan, t, ints, lang);
<a name="l06416"></a>06416    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;th&quot;</span>, 2)) { <span class="comment">/* Thai syntax */</span>
<a name="l06417"></a>06417       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#af059b7c3e29c8b085b01b656eccc30a5">ast_say_datetime_th</a>(chan, t, ints, lang);
<a name="l06418"></a>06418    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;tw&quot;</span>, 2)) { <span class="comment">/* deprecated Taiwanese syntax */</span>
<a name="l06419"></a>06419       <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;
<a name="l06420"></a>06420       <span class="keywordflow">if</span> (deprecation_warning++ % 10 == 0) {
<a name="l06421"></a>06421          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;tw is a standard language code for Twi, not Taiwanese.  Please switch to using zh_TW instead.\n&quot;</span>);
<a name="l06422"></a>06422       }
<a name="l06423"></a>06423       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ad8f59361f5238c163bcfe2f89b952ca7">ast_say_datetime_zh</a>(chan, t, ints, lang);
<a name="l06424"></a>06424    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;zh&quot;</span>, 2)) { <span class="comment">/* Taiwanese / Chinese syntax */</span>
<a name="l06425"></a>06425       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ad8f59361f5238c163bcfe2f89b952ca7">ast_say_datetime_zh</a>(chan, t, ints, lang);
<a name="l06426"></a>06426    }
<a name="l06427"></a>06427 
<a name="l06428"></a>06428    <span class="comment">/* Default to English */</span>
<a name="l06429"></a>06429    <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a903a842c47304dcebf1029fdf9c391e6">ast_say_datetime_en</a>(chan, t, ints, lang);
<a name="l06430"></a>06430 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a24f03c61981a21ba6ea1d19de28c75da"></a><!-- doxytag: member="say.c::say_datetime_from_now" ref="a24f03c61981a21ba6ea1d19de28c75da" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int say_datetime_from_now </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06837">6837</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="say_8c_source.html#l06862">ast_say_datetime_from_now_en()</a>, <a class="el" href="say_8c_source.html#l06900">ast_say_datetime_from_now_fr()</a>, <a class="el" href="say_8c_source.html#l06988">ast_say_datetime_from_now_he()</a>, <a class="el" href="say_8c_source.html#l07786">ast_say_datetime_from_now_ka()</a>, <a class="el" href="say_8c_source.html#l06938">ast_say_datetime_from_now_pt()</a>, and <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07937">__say_init()</a>, and <a class="el" href="app__playback_8c_source.html#l00349">say_init_mode()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06838"></a>06838 {
<a name="l06839"></a>06839    <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;en&quot;</span>, 2)) {        <span class="comment">/* English syntax */</span>
<a name="l06840"></a>06840       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#adea77ee3cd971d260a61f8354c438a38">ast_say_datetime_from_now_en</a>(chan, t, ints, lang);
<a name="l06841"></a>06841    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;fr&quot;</span>, 2)) { <span class="comment">/* French syntax */</span>
<a name="l06842"></a>06842       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#aa64343f4ca63fbbb8db4fe04c63aa9e7">ast_say_datetime_from_now_fr</a>(chan, t, ints, lang);
<a name="l06843"></a>06843    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;ge&quot;</span>, 2)) { <span class="comment">/* deprecated Georgian syntax */</span>
<a name="l06844"></a>06844       <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;
<a name="l06845"></a>06845       <span class="keywordflow">if</span> (deprecation_warning++ % 10 == 0) {
<a name="l06846"></a>06846          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ge is not a standard language code.  Please switch to using ka instead.\n&quot;</span>);
<a name="l06847"></a>06847       }
<a name="l06848"></a>06848       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a2fc8cdab06987ce2abbcd535365121b5">ast_say_datetime_from_now_ka</a>(chan, t, ints, lang);
<a name="l06849"></a>06849    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;he&quot;</span>, 2)) { <span class="comment">/* Hebrew syntax */</span>
<a name="l06850"></a>06850       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a48c6e490794bdfc3fc7a7c7118ec652b">ast_say_datetime_from_now_he</a>(chan, t, ints, lang);
<a name="l06851"></a>06851    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;ka&quot;</span>, 2)) { <span class="comment">/* Georgian syntax */</span>
<a name="l06852"></a>06852       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a2fc8cdab06987ce2abbcd535365121b5">ast_say_datetime_from_now_ka</a>(chan, t, ints, lang);
<a name="l06853"></a>06853    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;pt&quot;</span>, 2)) { <span class="comment">/* Portuguese syntax */</span>
<a name="l06854"></a>06854       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a2e50b0f8e92cfa56a1eda5967fd3f99f">ast_say_datetime_from_now_pt</a>(chan, t, ints, lang);
<a name="l06855"></a>06855    }
<a name="l06856"></a>06856 
<a name="l06857"></a>06857    <span class="comment">/* Default to English */</span>
<a name="l06858"></a>06858    <span class="keywordflow">return</span> <a class="code" href="say_8c.html#adea77ee3cd971d260a61f8354c438a38">ast_say_datetime_from_now_en</a>(chan, t, ints, lang);
<a name="l06859"></a>06859 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a315074228d9a507cf937510e06d6d356"></a><!-- doxytag: member="say.c::say_digit_str_full" ref="a315074228d9a507cf937510e06d6d356" args="(struct ast_channel *chan, const char *str, const char *ints, const char *lang, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int say_digit_str_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l00221">221</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="file_8c_source.html#l00914">ast_fileexists()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>, and <a class="el" href="adsistub_8c_source.html#l00077">num</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07937">__say_init()</a>, and <a class="el" href="app__playback_8c_source.html#l00349">say_init_mode()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00222"></a>00222 {
<a name="l00223"></a>00223    <span class="keyword">const</span> <span class="keywordtype">char</span> *fn;
<a name="l00224"></a>00224    <span class="keywordtype">char</span> fnbuf[256];
<a name="l00225"></a>00225    <span class="keywordtype">int</span> <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00226"></a>00226    <span class="keywordtype">int</span> res = 0;
<a name="l00227"></a>00227 
<a name="l00228"></a>00228    <span class="keywordflow">while</span> (<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[num] &amp;&amp; !res) {
<a name="l00229"></a>00229       fn = NULL;
<a name="l00230"></a>00230       <span class="keywordflow">switch</span> (<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[num]) {
<a name="l00231"></a>00231       <span class="keywordflow">case</span> (<span class="charliteral">&apos;*&apos;</span>):
<a name="l00232"></a>00232          fn = <span class="stringliteral">&quot;digits/star&quot;</span>;
<a name="l00233"></a>00233          <span class="keywordflow">break</span>;
<a name="l00234"></a>00234       <span class="keywordflow">case</span> (<span class="charliteral">&apos;#&apos;</span>):
<a name="l00235"></a>00235          fn = <span class="stringliteral">&quot;digits/pound&quot;</span>;
<a name="l00236"></a>00236          <span class="keywordflow">break</span>;
<a name="l00237"></a>00237       <span class="keywordflow">case</span> (<span class="charliteral">&apos;-&apos;</span>):
<a name="l00238"></a>00238          fn = <span class="stringliteral">&quot;digits/minus&quot;</span>;
<a name="l00239"></a>00239          <span class="keywordflow">break</span>;
<a name="l00240"></a>00240       <span class="keywordflow">case</span> <span class="charliteral">&apos;0&apos;</span>:
<a name="l00241"></a>00241       <span class="keywordflow">case</span> <span class="charliteral">&apos;1&apos;</span>:
<a name="l00242"></a>00242       <span class="keywordflow">case</span> <span class="charliteral">&apos;2&apos;</span>:
<a name="l00243"></a>00243       <span class="keywordflow">case</span> <span class="charliteral">&apos;3&apos;</span>:
<a name="l00244"></a>00244       <span class="keywordflow">case</span> <span class="charliteral">&apos;4&apos;</span>:
<a name="l00245"></a>00245       <span class="keywordflow">case</span> <span class="charliteral">&apos;5&apos;</span>:
<a name="l00246"></a>00246       <span class="keywordflow">case</span> <span class="charliteral">&apos;6&apos;</span>:
<a name="l00247"></a>00247       <span class="keywordflow">case</span> <span class="charliteral">&apos;7&apos;</span>:
<a name="l00248"></a>00248       <span class="keywordflow">case</span> <span class="charliteral">&apos;8&apos;</span>:
<a name="l00249"></a>00249       <span class="keywordflow">case</span> <span class="charliteral">&apos;9&apos;</span>:
<a name="l00250"></a>00250          strcpy(fnbuf, <span class="stringliteral">&quot;digits/X&quot;</span>);
<a name="l00251"></a>00251          fnbuf[7] = <a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[num];
<a name="l00252"></a>00252          fn = fnbuf;
<a name="l00253"></a>00253          <span class="keywordflow">break</span>;
<a name="l00254"></a>00254       }
<a name="l00255"></a>00255       <span class="keywordflow">if</span> (fn &amp;&amp; <a class="code" href="file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde" title="Checks for the existence of a given file.">ast_fileexists</a>(fn, NULL, lang) &gt; 0) {
<a name="l00256"></a>00256          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l00257"></a>00257          <span class="keywordflow">if</span> (!res) {
<a name="l00258"></a>00258             <span class="keywordflow">if</span> ((audiofd  &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l00259"></a>00259                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l00260"></a>00260             <span class="keywordflow">else</span>
<a name="l00261"></a>00261                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l00262"></a>00262          }
<a name="l00263"></a>00263          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l00264"></a>00264       }
<a name="l00265"></a>00265       num++;
<a name="l00266"></a>00266    }
<a name="l00267"></a>00267 
<a name="l00268"></a>00268    <span class="keywordflow">return</span> res;
<a name="l00269"></a>00269 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af2a892d8550c4e6333d5e305f7689ec6"></a><!-- doxytag: member="say.c::say_enumeration_full" ref="af2a892d8550c4e6333d5e305f7689ec6" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int say_enumeration_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_enumeration_full: call language-specific functions </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l02553">2553</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="say_8c_source.html#l02669">ast_say_enumeration_full_da()</a>, <a class="el" href="say_8c_source.html#l02832">ast_say_enumeration_full_de()</a>, <a class="el" href="say_8c_source.html#l02571">ast_say_enumeration_full_en()</a>, and <a class="el" href="say_8c_source.html#l02994">ast_say_enumeration_full_he()</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07937">__say_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02554"></a>02554 {
<a name="l02555"></a>02555    <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;en&quot;</span>, 2)) {        <span class="comment">/* English syntax */</span>
<a name="l02556"></a>02556       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a0e5c6401d55a76947f9dbf5a425a077d" title="ast_say_enumeration_full_en: English syntax">ast_say_enumeration_full_en</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02557"></a>02557    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;da&quot;</span>, 2)) { <span class="comment">/* Danish syntax */</span>
<a name="l02558"></a>02558       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ae60d6664e3b02ccf86e95df90039ea82" title="ast_say_enumeration_full_da: Danish syntax">ast_say_enumeration_full_da</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l02559"></a>02559    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;de&quot;</span>, 2)) { <span class="comment">/* German syntax */</span>
<a name="l02560"></a>02560       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#af62cf96bd4eede73a25a8734f7cb1ee1" title="ast_say_enumeration_full_de: German syntax">ast_say_enumeration_full_de</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l02561"></a>02561    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;he&quot;</span>, 2)) { <span class="comment">/* Hebrew syntax */</span>
<a name="l02562"></a>02562       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a4fea2317fdf960edf9351980cf60cc8f">ast_say_enumeration_full_he</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l02563"></a>02563    }
<a name="l02564"></a>02564 
<a name="l02565"></a>02565    <span class="comment">/* Default to english */</span>
<a name="l02566"></a>02566    <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a0e5c6401d55a76947f9dbf5a425a077d" title="ast_say_enumeration_full_en: English syntax">ast_say_enumeration_full_en</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l02567"></a>02567 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae3cb498050c17bd7d8c6d2a516dccafe"></a><!-- doxytag: member="say.c::say_number_full" ref="ae3cb498050c17bd7d8c6d2a516dccafe" args="(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int say_number_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ast_say_number_full: call language-specific functions </p>

<p>Definition at line <a class="el" href="say_8c_source.html#l00430">430</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="say_8c_source.html#l00597">ast_say_number_full_cs()</a>, <a class="el" href="say_8c_source.html#l00695">ast_say_number_full_da()</a>, <a class="el" href="say_8c_source.html#l00808">ast_say_number_full_de()</a>, <a class="el" href="say_8c_source.html#l00504">ast_say_number_full_en()</a>, <a class="el" href="say_8c_source.html#l00943">ast_say_number_full_en_GB()</a>, <a class="el" href="say_8c_source.html#l01021">ast_say_number_full_es()</a>, <a class="el" href="say_8c_source.html#l01125">ast_say_number_full_fr()</a>, <a class="el" href="say_8c_source.html#l07079">ast_say_number_full_gr()</a>, <a class="el" href="say_8c_source.html#l01217">ast_say_number_full_he()</a>, <a class="el" href="say_8c_source.html#l01388">ast_say_number_full_hu()</a>, <a class="el" href="say_8c_source.html#l01465">ast_say_number_full_it()</a>, <a class="el" href="say_8c_source.html#l07619">ast_say_number_full_ka()</a>, <a class="el" href="say_8c_source.html#l01620">ast_say_number_full_nl()</a>, <a class="el" href="say_8c_source.html#l01712">ast_say_number_full_no()</a>, <a class="el" href="say_8c_source.html#l01914">ast_say_number_full_pl()</a>, <a class="el" href="say_8c_source.html#l02099">ast_say_number_full_pt()</a>, <a class="el" href="say_8c_source.html#l02404">ast_say_number_full_ru()</a>, <a class="el" href="say_8c_source.html#l02195">ast_say_number_full_se()</a>, <a class="el" href="say_8c_source.html#l02482">ast_say_number_full_th()</a>, <a class="el" href="say_8c_source.html#l02267">ast_say_number_full_zh()</a>, and <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07937">__say_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00431"></a>00431 {
<a name="l00432"></a>00432    <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;en_GB&quot;</span>, 5)) {     <span class="comment">/* British syntax */</span>
<a name="l00433"></a>00433       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a904d8ce61420f03ce0f20e525dcf7040" title="ast_say_number_full_en_GB: British and Norwegian syntax">ast_say_number_full_en_GB</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00434"></a>00434    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;en&quot;</span>, 2)) { <span class="comment">/* English syntax */</span>
<a name="l00435"></a>00435       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ad44c88ef3d874e42ed56b7bcdf57cb85" title="ast_say_number_full_en: English syntax">ast_say_number_full_en</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00436"></a>00436    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;cs&quot;</span>, 2)) { <span class="comment">/* Czech syntax */</span>
<a name="l00437"></a>00437       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a49f831d39c9d7571cbbb30c4c5e11ee0" title="ast_say_number_full_cs: Czech syntax">ast_say_number_full_cs</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00438"></a>00438    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;cz&quot;</span>, 2)) { <span class="comment">/* deprecated Czech syntax */</span>
<a name="l00439"></a>00439       <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;
<a name="l00440"></a>00440       <span class="keywordflow">if</span> (deprecation_warning++ % 10 == 0) {
<a name="l00441"></a>00441          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;cz is not a standard language code.  Please switch to using cs instead.\n&quot;</span>);
<a name="l00442"></a>00442       }
<a name="l00443"></a>00443       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a49f831d39c9d7571cbbb30c4c5e11ee0" title="ast_say_number_full_cs: Czech syntax">ast_say_number_full_cs</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00444"></a>00444    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;da&quot;</span>, 2)) { <span class="comment">/* Danish syntax */</span>
<a name="l00445"></a>00445       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ad0ff1295c4031b4385391a40ce5d4d85" title="ast_say_number_full_da: Danish syntax">ast_say_number_full_da</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00446"></a>00446    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;de&quot;</span>, 2)) { <span class="comment">/* German syntax */</span>
<a name="l00447"></a>00447       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a5ab1deb33c81966bd9269f860881f6df" title="ast_say_number_full_de: German syntax">ast_say_number_full_de</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00448"></a>00448    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;es&quot;</span>, 2)) { <span class="comment">/* Spanish syntax */</span>
<a name="l00449"></a>00449       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a7e1aac3120524368ac2bb9a72da190fc" title="ast_say_number_full_es: Spanish syntax">ast_say_number_full_es</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00450"></a>00450    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;fr&quot;</span>, 2)) { <span class="comment">/* French syntax */</span>
<a name="l00451"></a>00451       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#aa525a58f2cd9090afe8adb150b14ef2f" title="ast_say_number_full_fr: French syntax">ast_say_number_full_fr</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00452"></a>00452    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;ge&quot;</span>, 2)) { <span class="comment">/* deprecated Georgian syntax */</span>
<a name="l00453"></a>00453       <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;
<a name="l00454"></a>00454       <span class="keywordflow">if</span> (deprecation_warning++ % 10 == 0) {
<a name="l00455"></a>00455          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ge is not a standard language code.  Please switch to using ka instead.\n&quot;</span>);
<a name="l00456"></a>00456       }
<a name="l00457"></a>00457       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a86cb2d32ea9a4d78b8534aa4ce3410f2" title="ast_say_number_full_ka: Georgian syntax">ast_say_number_full_ka</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00458"></a>00458    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;gr&quot;</span>, 2)) { <span class="comment">/* Greek syntax */</span>
<a name="l00459"></a>00459       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ac16b9b35bdddf06b7fe0c347120adf37">ast_say_number_full_gr</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00460"></a>00460    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;he&quot;</span>, 2)) { <span class="comment">/* Hebrew syntax */</span>
<a name="l00461"></a>00461       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a954b0be90c03b1c03eeae93b96d9e6e6">ast_say_number_full_he</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00462"></a>00462    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;hu&quot;</span>, 2)) { <span class="comment">/* Hungarian syntax */</span>
<a name="l00463"></a>00463       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a9a8df90a122f5b736f0a359c03804f5e" title="ast_say_number_full_hu: Hungarian syntax">ast_say_number_full_hu</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00464"></a>00464    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;it&quot;</span>, 2)) { <span class="comment">/* Italian syntax */</span>
<a name="l00465"></a>00465       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a2230fadaf90551bdbbc5f33cfdba1d8c" title="ast_say_number_full_it: Italian">ast_say_number_full_it</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00466"></a>00466    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;ka&quot;</span>, 2)) { <span class="comment">/* Georgian syntax */</span>
<a name="l00467"></a>00467       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a86cb2d32ea9a4d78b8534aa4ce3410f2" title="ast_say_number_full_ka: Georgian syntax">ast_say_number_full_ka</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00468"></a>00468    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;mx&quot;</span>, 2)) { <span class="comment">/* deprecated Mexican syntax */</span>
<a name="l00469"></a>00469       <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;
<a name="l00470"></a>00470       <span class="keywordflow">if</span> (deprecation_warning++ % 10 == 0) {
<a name="l00471"></a>00471          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;mx is not a standard language code.  Please switch to using es_MX instead.\n&quot;</span>);
<a name="l00472"></a>00472       }
<a name="l00473"></a>00473       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a7e1aac3120524368ac2bb9a72da190fc" title="ast_say_number_full_es: Spanish syntax">ast_say_number_full_es</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00474"></a>00474    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;nl&quot;</span>, 2)) { <span class="comment">/* Dutch syntax */</span>
<a name="l00475"></a>00475       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a47ca4077ef4937c00d24c4f4ea47a809" title="ast_say_number_full_nl: dutch syntax">ast_say_number_full_nl</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00476"></a>00476    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;no&quot;</span>, 2)) { <span class="comment">/* Norwegian syntax */</span>
<a name="l00477"></a>00477       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a9b2edaefe9c8e5a03a16d1809c56c5f7" title="ast_say_number_full_no: Norwegian syntax">ast_say_number_full_no</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00478"></a>00478    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;pl&quot;</span>, 2)) { <span class="comment">/* Polish syntax */</span>
<a name="l00479"></a>00479       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ae60374c49cb7d12e43fa96fc9153d814">ast_say_number_full_pl</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00480"></a>00480    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;pt&quot;</span>, 2)) { <span class="comment">/* Portuguese syntax */</span>
<a name="l00481"></a>00481       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a31997e60e00663fb65c4c875303f63e4">ast_say_number_full_pt</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00482"></a>00482    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;ru&quot;</span>, 2)) { <span class="comment">/* Russian syntax */</span>
<a name="l00483"></a>00483       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a5318e736eefec1203eea76e14e3bda08" title="ast_say_number_full_ru: Russian syntax">ast_say_number_full_ru</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00484"></a>00484    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;se&quot;</span>, 2)) { <span class="comment">/* Swedish syntax */</span>
<a name="l00485"></a>00485       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#acdcc3b9113521b1537d27b7a7b2dd3e5" title="ast_say_number_full_se: Swedish syntax">ast_say_number_full_se</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, options, audiofd, ctrlfd);
<a name="l00486"></a>00486    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;th&quot;</span>, 2)) { <span class="comment">/* Thai syntax */</span>
<a name="l00487"></a>00487       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ab741ec8f1012e4aff2a7e4bd8df2efb3">ast_say_number_full_th</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00488"></a>00488    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;tw&quot;</span>, 2)) { <span class="comment">/* deprecated Taiwanese syntax */</span>
<a name="l00489"></a>00489       <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;
<a name="l00490"></a>00490       <span class="keywordflow">if</span> (deprecation_warning++ % 10 == 0) {
<a name="l00491"></a>00491          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;tw is a standard language code for Twi, not Taiwanese.  Please switch to using zh_TW instead.\n&quot;</span>);
<a name="l00492"></a>00492       }
<a name="l00493"></a>00493       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#aad53034af1449eeffe92422447968224" title="ast_say_number_full_zh: Taiwanese / Chinese syntax">ast_say_number_full_zh</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00494"></a>00494    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="stringliteral">&quot;zh&quot;</span>, 2)) { <span class="comment">/* Taiwanese / Chinese syntax */</span>
<a name="l00495"></a>00495       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#aad53034af1449eeffe92422447968224" title="ast_say_number_full_zh: Taiwanese / Chinese syntax">ast_say_number_full_zh</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00496"></a>00496    }
<a name="l00497"></a>00497 
<a name="l00498"></a>00498    <span class="comment">/* Default to english */</span>
<a name="l00499"></a>00499    <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ad44c88ef3d874e42ed56b7bcdf57cb85" title="ast_say_number_full_en: English syntax">ast_say_number_full_en</a>(chan, <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>, ints, <a class="code" href="chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, audiofd, ctrlfd);
<a name="l00500"></a>00500 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a359f06f26a33e5cde0df7f979b14078a"></a><!-- doxytag: member="say.c::say_phonetic_str_full" ref="a359f06f26a33e5cde0df7f979b14078a" args="(struct ast_channel *chan, const char *str, const char *ints, const char *lang, int audiofd, int ctrlfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int say_phonetic_str_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ctrlfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l00141">141</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="file_8c_source.html#l00914">ast_fileexists()</a>, <a class="el" href="file_8c_source.html#l00122">ast_stopstream()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, <a class="el" href="file_8c_source.html#l01320">ast_waitstream_full()</a>, and <a class="el" href="adsistub_8c_source.html#l00077">num</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07937">__say_init()</a>, and <a class="el" href="app__playback_8c_source.html#l00349">say_init_mode()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00142"></a>00142 {
<a name="l00143"></a>00143    <span class="keyword">const</span> <span class="keywordtype">char</span> *fn;
<a name="l00144"></a>00144    <span class="keywordtype">char</span> fnbuf[256];
<a name="l00145"></a>00145    <span class="keywordtype">char</span> ltr;
<a name="l00146"></a>00146    <span class="keywordtype">int</span> <a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a> = 0;
<a name="l00147"></a>00147    <span class="keywordtype">int</span> res = 0;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149    <span class="keywordflow">while</span> (<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[num] &amp;&amp; !res) {
<a name="l00150"></a>00150       fn = NULL;
<a name="l00151"></a>00151       <span class="keywordflow">switch</span> (<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[num]) {
<a name="l00152"></a>00152       <span class="keywordflow">case</span> (<span class="charliteral">&apos;*&apos;</span>):
<a name="l00153"></a>00153          fn = <span class="stringliteral">&quot;digits/star&quot;</span>;
<a name="l00154"></a>00154          <span class="keywordflow">break</span>;
<a name="l00155"></a>00155       <span class="keywordflow">case</span> (<span class="charliteral">&apos;#&apos;</span>):
<a name="l00156"></a>00156          fn = <span class="stringliteral">&quot;digits/pound&quot;</span>;
<a name="l00157"></a>00157          <span class="keywordflow">break</span>;
<a name="l00158"></a>00158       <span class="keywordflow">case</span> (<span class="charliteral">&apos;!&apos;</span>):
<a name="l00159"></a>00159          fn = <span class="stringliteral">&quot;letters/exclaimation-point&quot;</span>;
<a name="l00160"></a>00160          <span class="keywordflow">break</span>;
<a name="l00161"></a>00161       <span class="keywordflow">case</span> (<span class="charliteral">&apos;@&apos;</span>):
<a name="l00162"></a>00162          fn = <span class="stringliteral">&quot;letters/at&quot;</span>;
<a name="l00163"></a>00163          <span class="keywordflow">break</span>;
<a name="l00164"></a>00164       <span class="keywordflow">case</span> (<span class="charliteral">&apos;$&apos;</span>):
<a name="l00165"></a>00165          fn = <span class="stringliteral">&quot;letters/dollar&quot;</span>;
<a name="l00166"></a>00166          <span class="keywordflow">break</span>;
<a name="l00167"></a>00167       <span class="keywordflow">case</span> (<span class="charliteral">&apos;-&apos;</span>):
<a name="l00168"></a>00168          fn = <span class="stringliteral">&quot;letters/dash&quot;</span>;
<a name="l00169"></a>00169          <span class="keywordflow">break</span>;
<a name="l00170"></a>00170       <span class="keywordflow">case</span> (<span class="charliteral">&apos;.&apos;</span>):
<a name="l00171"></a>00171          fn = <span class="stringliteral">&quot;letters/dot&quot;</span>;
<a name="l00172"></a>00172          <span class="keywordflow">break</span>;
<a name="l00173"></a>00173       <span class="keywordflow">case</span> (<span class="charliteral">&apos;=&apos;</span>):
<a name="l00174"></a>00174          fn = <span class="stringliteral">&quot;letters/equals&quot;</span>;
<a name="l00175"></a>00175          <span class="keywordflow">break</span>;
<a name="l00176"></a>00176       <span class="keywordflow">case</span> (<span class="charliteral">&apos;+&apos;</span>):
<a name="l00177"></a>00177          fn = <span class="stringliteral">&quot;letters/plus&quot;</span>;
<a name="l00178"></a>00178          <span class="keywordflow">break</span>;
<a name="l00179"></a>00179       <span class="keywordflow">case</span> (<span class="charliteral">&apos;/&apos;</span>):
<a name="l00180"></a>00180          fn = <span class="stringliteral">&quot;letters/slash&quot;</span>;
<a name="l00181"></a>00181          <span class="keywordflow">break</span>;
<a name="l00182"></a>00182       <span class="keywordflow">case</span> (<span class="charliteral">&apos; &apos;</span>):
<a name="l00183"></a>00183          fn = <span class="stringliteral">&quot;letters/space&quot;</span>;
<a name="l00184"></a>00184          <span class="keywordflow">break</span>;
<a name="l00185"></a>00185       <span class="keywordflow">case</span> (<span class="charliteral">&apos;0&apos;</span>):
<a name="l00186"></a>00186       <span class="keywordflow">case</span> (<span class="charliteral">&apos;1&apos;</span>):
<a name="l00187"></a>00187       <span class="keywordflow">case</span> (<span class="charliteral">&apos;2&apos;</span>):
<a name="l00188"></a>00188       <span class="keywordflow">case</span> (<span class="charliteral">&apos;3&apos;</span>):
<a name="l00189"></a>00189       <span class="keywordflow">case</span> (<span class="charliteral">&apos;4&apos;</span>):
<a name="l00190"></a>00190       <span class="keywordflow">case</span> (<span class="charliteral">&apos;5&apos;</span>):
<a name="l00191"></a>00191       <span class="keywordflow">case</span> (<span class="charliteral">&apos;6&apos;</span>):
<a name="l00192"></a>00192       <span class="keywordflow">case</span> (<span class="charliteral">&apos;7&apos;</span>):
<a name="l00193"></a>00193       <span class="keywordflow">case</span> (<span class="charliteral">&apos;8&apos;</span>):
<a name="l00194"></a>00194          strcpy(fnbuf, <span class="stringliteral">&quot;digits/X&quot;</span>);
<a name="l00195"></a>00195          fnbuf[7] = <a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[num];
<a name="l00196"></a>00196          fn = fnbuf;
<a name="l00197"></a>00197          <span class="keywordflow">break</span>;
<a name="l00198"></a>00198       <span class="keywordflow">default</span>: <span class="comment">/* &apos;9&apos; falls here... */</span>
<a name="l00199"></a>00199          ltr = <a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[num];
<a name="l00200"></a>00200          <span class="keywordflow">if</span> (<span class="charliteral">&apos;A&apos;</span> &lt;= ltr &amp;&amp; ltr &lt;= <span class="charliteral">&apos;Z&apos;</span>) ltr += <span class="charliteral">&apos;a&apos;</span> - <span class="charliteral">&apos;A&apos;</span>;    <span class="comment">/* file names are all lower-case */</span>
<a name="l00201"></a>00201          strcpy(fnbuf, <span class="stringliteral">&quot;phonetic/X_p&quot;</span>);
<a name="l00202"></a>00202          fnbuf[9] = ltr;
<a name="l00203"></a>00203          fn = fnbuf;
<a name="l00204"></a>00204       }
<a name="l00205"></a>00205       <span class="keywordflow">if</span> (fn &amp;&amp; <a class="code" href="file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde" title="Checks for the existence of a given file.">ast_fileexists</a>(fn, NULL, lang) &gt; 0) {
<a name="l00206"></a>00206          res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, fn, lang);
<a name="l00207"></a>00207          <span class="keywordflow">if</span> (!res) {
<a name="l00208"></a>00208             <span class="keywordflow">if</span> ((audiofd  &gt; -1) &amp;&amp; (ctrlfd &gt; -1))
<a name="l00209"></a>00209                res = <a class="code" href="file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, ints, audiofd, ctrlfd);
<a name="l00210"></a>00210             <span class="keywordflow">else</span>
<a name="l00211"></a>00211                res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l00212"></a>00212          }
<a name="l00213"></a>00213          <a class="code" href="file_8h.html#a3092bf11d4bba66f646562759608b1bc" title="Stops a stream.">ast_stopstream</a>(chan);
<a name="l00214"></a>00214       }
<a name="l00215"></a>00215       num++;
<a name="l00216"></a>00216    }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218    <span class="keywordflow">return</span> res;
<a name="l00219"></a>00219 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2679ac199e3858d447f6b0dc998e7263"></a><!-- doxytag: member="say.c::say_time" ref="a2679ac199e3858d447f6b0dc998e7263" args="(struct ast_channel *chan, time_t t, const char *ints, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int say_time </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l06059">6059</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="say_8c_source.html#l06153">ast_say_time_de()</a>, <a class="el" href="say_8c_source.html#l06104">ast_say_time_en()</a>, <a class="el" href="say_8c_source.html#l06196">ast_say_time_fr()</a>, <a class="el" href="say_8c_source.html#l07203">ast_say_time_gr()</a>, <a class="el" href="say_8c_source.html#l06354">ast_say_time_he()</a>, <a class="el" href="say_8c_source.html#l06173">ast_say_time_hu()</a>, <a class="el" href="say_8c_source.html#l07736">ast_say_time_ka()</a>, <a class="el" href="say_8c_source.html#l06215">ast_say_time_nl()</a>, <a class="el" href="say_8c_source.html#l06235">ast_say_time_pt()</a>, <a class="el" href="say_8c_source.html#l06264">ast_say_time_pt_BR()</a>, <a class="el" href="say_8c_source.html#l06294">ast_say_time_th()</a>, <a class="el" href="say_8c_source.html#l06312">ast_say_time_zh()</a>, and <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l07937">__say_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l06060"></a>06060 {
<a name="l06061"></a>06061    <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;en&quot;</span>, 2)) {  <span class="comment">/* English syntax */</span>
<a name="l06062"></a>06062       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#aa6e079dc99911282bcfca18b87dbe18e">ast_say_time_en</a>(chan, t, ints, lang);
<a name="l06063"></a>06063    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;de&quot;</span>, 2)) { <span class="comment">/* German syntax */</span>
<a name="l06064"></a>06064       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a2f96f38cfd786e2037474bf885499713">ast_say_time_de</a>(chan, t, ints, lang);
<a name="l06065"></a>06065    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;fr&quot;</span>, 2)) { <span class="comment">/* French syntax */</span>
<a name="l06066"></a>06066       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#abaf1d38a580a6676b6c369b273bb110a">ast_say_time_fr</a>(chan, t, ints, lang);
<a name="l06067"></a>06067    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;ge&quot;</span>, 2)) { <span class="comment">/* deprecated Georgian syntax */</span>
<a name="l06068"></a>06068       <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;
<a name="l06069"></a>06069       <span class="keywordflow">if</span> (deprecation_warning++ % 10 == 0) {
<a name="l06070"></a>06070          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ge is not a standard language code.  Please switch to using ka instead.\n&quot;</span>);
<a name="l06071"></a>06071       }
<a name="l06072"></a>06072       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ad961c5f8bcfad964dc48985bc21fa164">ast_say_time_ka</a>(chan, t, ints, lang);
<a name="l06073"></a>06073    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;gr&quot;</span>, 2)) { <span class="comment">/* Greek syntax */</span>
<a name="l06074"></a>06074       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a9df5ed9ed2f58cd4b0f26c3bb506409d">ast_say_time_gr</a>(chan, t, ints, lang);
<a name="l06075"></a>06075    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;he&quot;</span>, 2)) { <span class="comment">/* Hebrew syntax */</span>
<a name="l06076"></a>06076       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a4fa30770543cf1238ad95aeb855778aa">ast_say_time_he</a>(chan, t, ints, lang);
<a name="l06077"></a>06077    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;hu&quot;</span>, 2)) { <span class="comment">/* Hungarian syntax */</span>
<a name="l06078"></a>06078       <span class="keywordflow">return</span>(<a class="code" href="say_8c.html#a9ffe4a620c3103ccc73cf12395c3bc85">ast_say_time_hu</a>(chan, t, ints, lang));
<a name="l06079"></a>06079    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;ka&quot;</span>, 2)) { <span class="comment">/* Georgian syntax */</span>
<a name="l06080"></a>06080       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ad961c5f8bcfad964dc48985bc21fa164">ast_say_time_ka</a>(chan, t, ints, lang);
<a name="l06081"></a>06081    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;nl&quot;</span>, 2)) { <span class="comment">/* Dutch syntax */</span>
<a name="l06082"></a>06082       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#a86fd5f2bc784f22fb979fa27a23d39bf">ast_say_time_nl</a>(chan, t, ints, lang);
<a name="l06083"></a>06083    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;pt_BR&quot;</span>, 5)) { <span class="comment">/* Brazilian Portuguese syntax */</span>
<a name="l06084"></a>06084       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ae7eeb1cfa8f6ae609d70b6a54ab70011">ast_say_time_pt_BR</a>(chan, t, ints, lang);
<a name="l06085"></a>06085    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;pt&quot;</span>, 2)) { <span class="comment">/* Portuguese syntax */</span>
<a name="l06086"></a>06086       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ad35c6b6c9c03292fc3c2662c231d27d6">ast_say_time_pt</a>(chan, t, ints, lang);
<a name="l06087"></a>06087    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;th&quot;</span>, 2)) { <span class="comment">/* Thai syntax */</span>
<a name="l06088"></a>06088       <span class="keywordflow">return</span>(<a class="code" href="say_8c.html#a2719111a35bea21d5a87f46c6c84ed63">ast_say_time_th</a>(chan, t, ints, lang));
<a name="l06089"></a>06089    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;tw&quot;</span>, 2)) { <span class="comment">/* deprecated Taiwanese syntax */</span>
<a name="l06090"></a>06090       <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;
<a name="l06091"></a>06091       <span class="keywordflow">if</span> (deprecation_warning++ % 10 == 0) {
<a name="l06092"></a>06092          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;tw is a standard language code for Twi, not Taiwanese.  Please switch to using zh_TW instead.\n&quot;</span>);
<a name="l06093"></a>06093       }
<a name="l06094"></a>06094       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ab8c68a104324a10f6e65daf995e7bbdc">ast_say_time_zh</a>(chan, t, ints, lang);
<a name="l06095"></a>06095    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(lang, <span class="stringliteral">&quot;zh&quot;</span>, 2)) { <span class="comment">/* Taiwanese / Chinese syntax */</span>
<a name="l06096"></a>06096       <span class="keywordflow">return</span> <a class="code" href="say_8c.html#ab8c68a104324a10f6e65daf995e7bbdc">ast_say_time_zh</a>(chan, t, ints, lang);
<a name="l06097"></a>06097    }
<a name="l06098"></a>06098 
<a name="l06099"></a>06099    <span class="comment">/* Default to English */</span>
<a name="l06100"></a>06100    <span class="keywordflow">return</span> <a class="code" href="say_8c.html#aa6e079dc99911282bcfca18b87dbe18e">ast_say_time_en</a>(chan, t, ints, lang);
<a name="l06101"></a>06101 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6b3dbe040a5eed932a68728b55195cf7"></a><!-- doxytag: member="say.c::wait_file" ref="a6b3dbe040a5eed932a68728b55195cf7" args="(struct ast_channel *chan, const char *ints, const char *file, const char *lang)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int wait_file </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lang</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="say_8c_source.html#l00418">418</a> of file <a class="el" href="say_8c_source.html">say.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="file_8c_source.html#l00943">ast_streamfile()</a>, <a class="el" href="file_8c_source.html#l01315">ast_waitstream()</a>, and <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>.</p>

<p>Referenced by <a class="el" href="say_8c_source.html#l03148">ast_say_date_da()</a>, <a class="el" href="say_8c_source.html#l03197">ast_say_date_de()</a>, <a class="el" href="say_8c_source.html#l03373">ast_say_date_pt()</a>, <a class="el" href="say_8c_source.html#l03727">ast_say_date_with_format_da()</a>, <a class="el" href="say_8c_source.html#l03929">ast_say_date_with_format_de()</a>, <a class="el" href="say_8c_source.html#l03480">ast_say_date_with_format_en()</a>, <a class="el" href="say_8c_source.html#l04466">ast_say_date_with_format_es()</a>, <a class="el" href="say_8c_source.html#l04655">ast_say_date_with_format_fr()</a>, <a class="el" href="say_8c_source.html#l07283">ast_say_date_with_format_gr()</a>, <a class="el" href="say_8c_source.html#l04322">ast_say_date_with_format_he()</a>, <a class="el" href="say_8c_source.html#l04850">ast_say_date_with_format_it()</a>, <a class="el" href="say_8c_source.html#l05080">ast_say_date_with_format_nl()</a>, <a class="el" href="say_8c_source.html#l05285">ast_say_date_with_format_pl()</a>, <a class="el" href="say_8c_source.html#l05502">ast_say_date_with_format_pt()</a>, <a class="el" href="say_8c_source.html#l04132">ast_say_date_with_format_th()</a>, <a class="el" href="say_8c_source.html#l05794">ast_say_date_with_format_zh()</a>, <a class="el" href="say_8c_source.html#l06938">ast_say_datetime_from_now_pt()</a>, <a class="el" href="say_8c_source.html#l02099">ast_say_number_full_pt()</a>, <a class="el" href="say_8c_source.html#l06235">ast_say_time_pt()</a>, <a class="el" href="say_8c_source.html#l06264">ast_say_time_pt_BR()</a>, and <a class="el" href="say_8c_source.html#l07033">gr_say_number_female()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00419"></a>00419 {
<a name="l00420"></a>00420    <span class="keywordtype">int</span> res;
<a name="l00421"></a>00421    <span class="keywordflow">if</span> ((res = <a class="code" href="file_8h.html#a67c7e271b4ca70aca6d48fd48d121857" title="Streams a file.">ast_streamfile</a>(chan, file, lang)))
<a name="l00422"></a>00422       <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to play message %s\n&quot;</span>, file);
<a name="l00423"></a>00423    <span class="keywordflow">if</span> (!res)
<a name="l00424"></a>00424       res = <a class="code" href="file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed.">ast_waitstream</a>(chan, ints);
<a name="l00425"></a>00425    <span class="keywordflow">return</span> res;
<a name="l00426"></a>00426 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:23:29 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
