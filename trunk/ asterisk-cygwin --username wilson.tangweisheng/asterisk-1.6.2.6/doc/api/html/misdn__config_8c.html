<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:22:23 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_0ca6ff3bf6b340411b2c6edd15b1a34d.html">channels</a>
  </div>
</div>
<div class="contents">
<h1>misdn_config.c File Reference</h1>
<p>chan_misdn configuration management  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="asterisk_8h_source.html">asterisk.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="chan__misdn__config_8h_source.html">chan_misdn_config.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="config_8h_source.html">asterisk/config.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="strings_8h_source.html">asterisk/strings.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br/>

<p><a href="misdn__config_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmsn__list.html">msn_list</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a7ecf4ce12140fcf92774233f0d480f99">CLI_ERROR</a>(<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, value, section)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#ac83a664de90770af20fa45e23a2f6a0b">GEN_CFG</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a79ca2b7c3ff47cfcc56e767e92d3f000">NO_DEFAULT</a>&nbsp;&nbsp;&nbsp;&quot;&lt;&gt;&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a655c84af1b0034986ff56e12e84f983d">NONE</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a83493b27f098faa6746d734d0560a3e7">NUM_GEN_ELEMENTS</a>&nbsp;&nbsp;&nbsp;(sizeof(<a class="el" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>) / sizeof(struct <a class="el" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a>))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a59d3b992910f474202453df33bd05ca5">NUM_PORT_ELEMENTS</a>&nbsp;&nbsp;&nbsp;(sizeof(<a class="el" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>) / sizeof(struct <a class="el" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a>))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#af239c62f325c4a450832ba971ad30594">PORT_CFG</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1">misdn_cfg_type</a> { <br/>
&nbsp;&nbsp;<a class="el" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a3fb9f6eb83f8251d1dca29e9d4db2e59">MISDN_CTYPE_STR</a>, 
<a class="el" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a38a39f43e1c5ab7d88da012b7d40af64">MISDN_CTYPE_INT</a>, 
<a class="el" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a41691293175e3c004c27bd122e4c0ac6">MISDN_CTYPE_BOOL</a>, 
<a class="el" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1ab25b97e6087e720228ebca3b77ebd857">MISDN_CTYPE_BOOLINT</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a1b4b4bec0d3721002c16eb2d28fab14c">MISDN_CTYPE_MSNLIST</a>, 
<a class="el" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a40c3b08f125c2ddf122150790302f80b">MISDN_CTYPE_ASTGROUP</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a807a1c4e4bed91c39a20e320dcb6947d">_build_general_config</a> (struct <a class="el" href="structast__variable.html">ast_variable</a> *v)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#ac54122236fbe57164ee22e04c8a546f3">_build_port_config</a> (struct <a class="el" href="structast__variable.html">ast_variable</a> *v, char *cat)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a705f2aef7442b96728a1d130c1ea4398">_enum_array_map</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a92f772f3a8fca25a32f035720398cda2">_fill_defaults</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a259567e54b2d303629277af2e67c6bfa">_free_general_cfg</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#ad242a41e8e1f5e9432d90ef70381032b">_free_msn_list</a> (struct <a class="el" href="structmsn__list.html">msn_list</a> *iter)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a023bb61b2e014d422690936565fcb69e">_free_port_cfg</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a67ad6725e9690d51f7e59ab628b661f0">_parse</a> (union <a class="el" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a> *dest, const char *value, enum <a class="el" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1">misdn_cfg_type</a> <a class="el" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, int boolint_def)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#aa8d3573401dc0c81640d196c819e9b9d">get_cfg_position</a> (const char *<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, int <a class="el" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a59f113bee91d678988a1c3d8ddbdb2dc">misdn_cfg_destroy</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a> (int port, enum <a class="el" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a> elem, void *<a class="el" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, int bufsize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#ac61399fce05fb3fceea23627e48a7769">misdn_cfg_get_config_string</a> (int port, enum <a class="el" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a> elem, char *<a class="el" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, int bufsize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#ab4fe73c162f2208a725cef8825a36de9">misdn_cfg_get_desc</a> (enum <a class="el" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a> elem, void *<a class="el" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, int bufsize, void *buf_default, int bufsize_default)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a23de2d260a7f394b3d0d4bdead5343c6">misdn_cfg_get_elem</a> (char *<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a5d5c67cc756ded480d5742ca65a3e36f">misdn_cfg_get_name</a> (enum <a class="el" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a> elem, void *<a class="el" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, int bufsize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a> (int port)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#af9a945b0921e0914c751795dc40af6ea">misdn_cfg_get_next_port_spin</a> (int port)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a5b0f1d6d9689fea5b7eba75176d06cc7">misdn_cfg_get_ports_string</a> (char *ports)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generate a comma separated list of all active ports.  <a href="#a5b0f1d6d9689fea5b7eba75176d06cc7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#aaa71f22ac88cd27d275bf6fbb7648f66">misdn_cfg_init</a> (int this_max_ports, int reload)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#abd7fda190c06742b1b32025dfa1776b5">misdn_cfg_is_group_method</a> (char *<a class="el" href="structgroup.html">group</a>, enum <a class="el" href="chan__misdn__config_8h.html#a9ce7b5b14a6c33d74b03a70feab95c92">misdn_cfg_method</a> meth)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a1ff611ca63fed235f7cb668f96f94ed5">misdn_cfg_is_msn_valid</a> (int port, char *msn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#ab08e8e7e093f022d1a156fe2d6ebdf45">misdn_cfg_is_port_valid</a> (int port)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a0a5150edaaeab71511aa854c2004b040">misdn_cfg_lock</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#af82466ea24146caeace6cdd5d7aba315">misdn_cfg_reload</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a788f0d601bd6a2f2089b3849b720bc62">misdn_cfg_unlock</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#ac2740a8103bd868c78d5f7f6c0985d6d">misdn_cfg_update_ptp</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a872080169b471c05fe0c59438346a2e8">misdn_get_global_jbconf</a> ()</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="lock_8h.html#a2d9118a2a8939f115eea771bce3a52f2">ast_mutex_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a9ef1b52be86dcb4cba28583d8f3feae9">config_mutex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a2d8d5920e90ccbad7832926becdadb29">default_jbconf</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static union <a class="el" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#abaabcb7f4349cc632dde3af5c6a5e1bd">global_jbconf</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static union <a class="el" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a0e04b70145d8bfed373b2341bffb78b8">ports_description</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>chan_misdn configuration management </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Christian Richter &lt;<a href="mailto:crich@beronet.com">crich@beronet.com</a>&gt; </dd></dl>

<p>Definition in file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a7ecf4ce12140fcf92774233f0d480f99"></a><!-- doxytag: member="misdn_config.c::CLI_ERROR" ref="a7ecf4ce12140fcf92774233f0d480f99" args="(name, value, section)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLI_ERROR</td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">value, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">section&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">({ \
   <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;misdn.conf: \&quot;%s=%s\&quot; (section: %s) invalid or out of range. &quot;</span> \
      <span class="stringliteral">&quot;Please edit your misdn.conf and then do a \&quot;misdn reload\&quot;.\n&quot;</span>, <a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, value, section); \
})
</pre></div>
<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00393">393</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l00947">_build_general_config()</a>, and <a class="el" href="misdn__config_8c_source.html#l00960">_build_port_config()</a>.</p>

</div>
</div>
<a class="anchor" id="ac83a664de90770af20fa45e23a2f6a0b"></a><!-- doxytag: member="misdn_config.c::GEN_CFG" ref="ac83a664de90770af20fa45e23a2f6a0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GEN_CFG&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00045">45</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l00947">_build_general_config()</a>, <a class="el" href="misdn__config_8c_source.html#l00435">get_cfg_position()</a>, and <a class="el" href="misdn__config_8c_source.html#l00571">misdn_cfg_get_elem()</a>.</p>

</div>
</div>
<a class="anchor" id="a79ca2b7c3ff47cfcc56e767e92d3f000"></a><!-- doxytag: member="misdn_config.c::NO_DEFAULT" ref="a79ca2b7c3ff47cfcc56e767e92d3f000" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NO_DEFAULT&nbsp;&nbsp;&nbsp;&quot;&lt;&gt;&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00042">42</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l01083">_fill_defaults()</a>, and <a class="el" href="misdn__config_8c_source.html#l00618">misdn_cfg_get_desc()</a>.</p>

</div>
</div>
<a class="anchor" id="a655c84af1b0034986ff56e12e84f983d"></a><!-- doxytag: member="misdn_config.c::NONE" ref="a655c84af1b0034986ff56e12e84f983d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NONE&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00043">43</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>Referenced by <a class="el" href="chan__sip_8c_source.html#l03932">__sip_autodestruct()</a>, <a class="el" href="chan__sip_8c_source.html#l12781">cb_extensionstate()</a>, <a class="el" href="chan__sip_8c_source.html#l21175">handle_request_subscribe()</a>, <a class="el" href="chan__sip_8c_source.html#l17893">handle_response_notify()</a>, <a class="el" href="chan__sip_8c_source.html#l16189">show_channels_cb()</a>, <a class="el" href="chan__sip_8c_source.html#l15831">show_chanstats_cb()</a>, <a class="el" href="chan__sip_8c_source.html#l07151">sip_alloc()</a>, <a class="el" href="chan__sip_8c_source.html#l16415">sip_show_channel()</a>, <a class="el" href="chan__sip_8c_source.html#l16526">sip_show_history()</a>, and <a class="el" href="chan__sip_8c_source.html#l11046">transmit_state_notify()</a>.</p>

</div>
</div>
<a class="anchor" id="a83493b27f098faa6746d734d0560a3e7"></a><!-- doxytag: member="misdn_config.c::NUM_GEN_ELEMENTS" ref="a83493b27f098faa6746d734d0560a3e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_GEN_ELEMENTS&nbsp;&nbsp;&nbsp;(sizeof(<a class="el" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>) / sizeof(struct <a class="el" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a>))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00047">47</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l00398">_enum_array_map()</a>, <a class="el" href="misdn__config_8c_source.html#l01083">_fill_defaults()</a>, <a class="el" href="misdn__config_8c_source.html#l00508">_free_general_cfg()</a>, <a class="el" href="misdn__config_8c_source.html#l00435">get_cfg_position()</a>, and <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a59d3b992910f474202453df33bd05ca5"></a><!-- doxytag: member="misdn_config.c::NUM_PORT_ELEMENTS" ref="a59d3b992910f474202453df33bd05ca5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_PORT_ELEMENTS&nbsp;&nbsp;&nbsp;(sizeof(<a class="el" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>) / sizeof(struct <a class="el" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a>))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00048">48</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l00398">_enum_array_map()</a>, <a class="el" href="misdn__config_8c_source.html#l01083">_fill_defaults()</a>, <a class="el" href="misdn__config_8c_source.html#l00475">_free_port_cfg()</a>, <a class="el" href="misdn__config_8c_source.html#l00435">get_cfg_position()</a>, and <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>.</p>

</div>
</div>
<a class="anchor" id="af239c62f325c4a450832ba971ad30594"></a><!-- doxytag: member="misdn_config.c::PORT_CFG" ref="af239c62f325c4a450832ba971ad30594" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORT_CFG&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00046">46</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l00960">_build_port_config()</a>, <a class="el" href="misdn__config_8c_source.html#l00435">get_cfg_position()</a>, and <a class="el" href="misdn__config_8c_source.html#l00571">misdn_cfg_get_elem()</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a0d6c46c9eae8390716fac867baef16e1"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_type" ref="a0d6c46c9eae8390716fac867baef16e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1">misdn_cfg_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a0d6c46c9eae8390716fac867baef16e1a3fb9f6eb83f8251d1dca29e9d4db2e59"></a><!-- doxytag: member="MISDN_CTYPE_STR" ref="a0d6c46c9eae8390716fac867baef16e1a3fb9f6eb83f8251d1dca29e9d4db2e59" args="" -->MISDN_CTYPE_STR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0d6c46c9eae8390716fac867baef16e1a38a39f43e1c5ab7d88da012b7d40af64"></a><!-- doxytag: member="MISDN_CTYPE_INT" ref="a0d6c46c9eae8390716fac867baef16e1a38a39f43e1c5ab7d88da012b7d40af64" args="" -->MISDN_CTYPE_INT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0d6c46c9eae8390716fac867baef16e1a41691293175e3c004c27bd122e4c0ac6"></a><!-- doxytag: member="MISDN_CTYPE_BOOL" ref="a0d6c46c9eae8390716fac867baef16e1a41691293175e3c004c27bd122e4c0ac6" args="" -->MISDN_CTYPE_BOOL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0d6c46c9eae8390716fac867baef16e1ab25b97e6087e720228ebca3b77ebd857"></a><!-- doxytag: member="MISDN_CTYPE_BOOLINT" ref="a0d6c46c9eae8390716fac867baef16e1ab25b97e6087e720228ebca3b77ebd857" args="" -->MISDN_CTYPE_BOOLINT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0d6c46c9eae8390716fac867baef16e1a1b4b4bec0d3721002c16eb2d28fab14c"></a><!-- doxytag: member="MISDN_CTYPE_MSNLIST" ref="a0d6c46c9eae8390716fac867baef16e1a1b4b4bec0d3721002c16eb2d28fab14c" args="" -->MISDN_CTYPE_MSNLIST</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0d6c46c9eae8390716fac867baef16e1a40c3b08f125c2ddf122150790302f80b"></a><!-- doxytag: member="MISDN_CTYPE_ASTGROUP" ref="a0d6c46c9eae8390716fac867baef16e1a40c3b08f125c2ddf122150790302f80b" args="" -->MISDN_CTYPE_ASTGROUP</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00062">62</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00062"></a>00062                     {
<a name="l00063"></a>00063    <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a3fb9f6eb83f8251d1dca29e9d4db2e59">MISDN_CTYPE_STR</a>,
<a name="l00064"></a>00064    <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a38a39f43e1c5ab7d88da012b7d40af64">MISDN_CTYPE_INT</a>,
<a name="l00065"></a>00065    <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a41691293175e3c004c27bd122e4c0ac6">MISDN_CTYPE_BOOL</a>,
<a name="l00066"></a>00066    <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1ab25b97e6087e720228ebca3b77ebd857">MISDN_CTYPE_BOOLINT</a>,
<a name="l00067"></a>00067    <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a1b4b4bec0d3721002c16eb2d28fab14c">MISDN_CTYPE_MSNLIST</a>,
<a name="l00068"></a>00068    <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a40c3b08f125c2ddf122150790302f80b">MISDN_CTYPE_ASTGROUP</a>
<a name="l00069"></a>00069 };
</pre></div></p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a807a1c4e4bed91c39a20e320dcb6947d"></a><!-- doxytag: member="misdn_config.c::_build_general_config" ref="a807a1c4e4bed91c39a20e320dcb6947d" args="(struct ast_variable *v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void _build_general_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00947">947</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l00870">_parse()</a>, <a class="el" href="abstract__jb_8c_source.html#l00571">ast_jb_read_conf()</a>, <a class="el" href="misdn__config_8c_source.html#l00089">misdn_cfg_spec::boolint_def</a>, <a class="el" href="misdn__config_8c_source.html#l00393">CLI_ERROR</a>, <a class="el" href="misdn__config_8c_source.html#l00045">GEN_CFG</a>, <a class="el" href="misdn__config_8c_source.html#l00435">get_cfg_position()</a>, <a class="el" href="misdn__config_8c_source.html#l00060">global_jbconf</a>, <a class="el" href="config_8h_source.html#l00075">ast_variable::name</a>, <a class="el" href="config_8h_source.html#l00077">ast_variable::next</a>, <a class="el" href="misdn__config_8c_source.html#l00087">misdn_cfg_spec::type</a>, and <a class="el" href="config_8h_source.html#l00076">ast_variable::value</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00948"></a>00948 {
<a name="l00949"></a>00949    <span class="keywordtype">int</span> pos;
<a name="l00950"></a>00950 
<a name="l00951"></a>00951    <span class="keywordflow">for</span> (; v; v = v-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>) {
<a name="l00952"></a>00952       <span class="keywordflow">if</span> (!<a class="code" href="abstract__jb_8h.html#ae50ad081bd2ae6b58bcfc4687916c586" title="Sets jitterbuffer configuration property.">ast_jb_read_conf</a>(&amp;<a class="code" href="misdn__config_8c.html#abaabcb7f4349cc632dde3af5c6a5e1bd">global_jbconf</a>, v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>))
<a name="l00953"></a>00953          <span class="keywordflow">continue</span>;
<a name="l00954"></a>00954       <span class="keywordflow">if</span> (((pos = <a class="code" href="misdn__config_8c.html#aa8d3573401dc0c81640d196c819e9b9d">get_cfg_position</a>(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <a class="code" href="misdn__config_8c.html#ac83a664de90770af20fa45e23a2f6a0b">GEN_CFG</a>)) &lt; 0) || 
<a name="l00955"></a>00955          (<a class="code" href="misdn__config_8c.html#a67ad6725e9690d51f7e59ab628b661f0">_parse</a>(&amp;<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[pos], v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[pos].<a class="code" href="structmisdn__cfg__spec.html#a88b351b6cfc442e1679c9537bca61cab">type</a>, <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[pos].<a class="code" href="structmisdn__cfg__spec.html#a8d928300435d8100e57a316008d390b7">boolint_def</a>) &lt; 0))
<a name="l00956"></a>00956          <a class="code" href="misdn__config_8c.html#a7ecf4ce12140fcf92774233f0d480f99">CLI_ERROR</a>(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;general&quot;</span>);
<a name="l00957"></a>00957    }
<a name="l00958"></a>00958 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac54122236fbe57164ee22e04c8a546f3"></a><!-- doxytag: member="misdn_config.c::_build_port_config" ref="ac54122236fbe57164ee22e04c8a546f3" args="(struct ast_variable *v, char *cat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void _build_port_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td>
          <td class="paramname"> <em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>cat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00960">960</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l00870">_parse()</a>, <a class="el" href="utils_8h_source.html#l00616">ast_strdupa</a>, <a class="el" href="misdn__config_8c_source.html#l00089">misdn_cfg_spec::boolint_def</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00025">BUFFERSIZE</a>, <a class="el" href="misdn__config_8c_source.html#l00393">CLI_ERROR</a>, <a class="el" href="misdn__config_8c_source.html#l00435">get_cfg_position()</a>, <a class="el" href="config_8h_source.html#l00075">ast_variable::name</a>, <a class="el" href="config_8h_source.html#l00077">ast_variable::next</a>, <a class="el" href="misdn__config_8c_source.html#l00046">PORT_CFG</a>, <a class="el" href="agi_2strcompat_8c_source.html#l00027">strsep()</a>, <a class="el" href="misdn__config_8c_source.html#l00087">misdn_cfg_spec::type</a>, <a class="el" href="evt_8c_source.html#l00071">type</a>, and <a class="el" href="config_8h_source.html#l00076">ast_variable::value</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00961"></a>00961 {
<a name="l00962"></a>00962    <span class="keywordtype">int</span> pos, i;
<a name="l00963"></a>00963    <span class="keyword">union </span><a class="code" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a> cfg_tmp[<a class="code" href="misdn__config_8c.html#a59d3b992910f474202453df33bd05ca5">NUM_PORT_ELEMENTS</a>];
<a name="l00964"></a>00964    <span class="keywordtype">int</span> cfg_for_ports[<a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1];
<a name="l00965"></a>00965 
<a name="l00966"></a>00966    <span class="keywordflow">if</span> (!v || !cat)
<a name="l00967"></a>00967       <span class="keywordflow">return</span>;
<a name="l00968"></a>00968 
<a name="l00969"></a>00969    memset(cfg_tmp, 0, <span class="keyword">sizeof</span>(cfg_tmp));
<a name="l00970"></a>00970    memset(cfg_for_ports, 0, <span class="keyword">sizeof</span>(cfg_for_ports));
<a name="l00971"></a>00971 
<a name="l00972"></a>00972    <span class="keywordflow">if</span> (!strcasecmp(cat, <span class="stringliteral">&quot;default&quot;</span>)) {
<a name="l00973"></a>00973       cfg_for_ports[0] = 1;
<a name="l00974"></a>00974    }
<a name="l00975"></a>00975 
<a name="l00976"></a>00976    <span class="keywordflow">if</span> (((pos = <a class="code" href="misdn__config_8c.html#aa8d3573401dc0c81640d196c819e9b9d">get_cfg_position</a>(<span class="stringliteral">&quot;name&quot;</span>, <a class="code" href="misdn__config_8c.html#af239c62f325c4a450832ba971ad30594">PORT_CFG</a>)) &lt; 0) || 
<a name="l00977"></a>00977       (<a class="code" href="misdn__config_8c.html#a67ad6725e9690d51f7e59ab628b661f0">_parse</a>(&amp;cfg_tmp[pos], cat, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[pos].<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[pos].boolint_def) &lt; 0)) {
<a name="l00978"></a>00978       <a class="code" href="misdn__config_8c.html#a7ecf4ce12140fcf92774233f0d480f99">CLI_ERROR</a>(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, cat);
<a name="l00979"></a>00979       <span class="keywordflow">return</span>;
<a name="l00980"></a>00980    }
<a name="l00981"></a>00981 
<a name="l00982"></a>00982    <span class="keywordflow">for</span> (; v; v = v-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>) {
<a name="l00983"></a>00983       <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;ports&quot;</span>)) {
<a name="l00984"></a>00984          <span class="keywordtype">char</span> *token, *tmp = <a class="code" href="utils_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6" title="duplicate a string in memory from the stack">ast_strdupa</a>(v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);
<a name="l00985"></a>00985          <span class="keywordtype">char</span> ptpbuf[<a class="code" href="chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00986"></a>00986          <span class="keywordtype">int</span> start, end;
<a name="l00987"></a>00987          <span class="keywordflow">for</span> (token = <a class="code" href="agi_2strcompat_8c.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tmp, <span class="stringliteral">&quot;,&quot;</span>); token; token = <a class="code" href="agi_2strcompat_8c.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tmp, <span class="stringliteral">&quot;,&quot;</span>), *ptpbuf = 0) { 
<a name="l00988"></a>00988             <span class="keywordflow">if</span> (!*token)
<a name="l00989"></a>00989                <span class="keywordflow">continue</span>;
<a name="l00990"></a>00990             <span class="keywordflow">if</span> (sscanf(token, <span class="stringliteral">&quot;%30d-%30d%511s&quot;</span>, &amp;start, &amp;end, ptpbuf) &gt;= 2) {
<a name="l00991"></a>00991                <span class="keywordflow">for</span> (; start &lt;= end; start++) {
<a name="l00992"></a>00992                   <span class="keywordflow">if</span> (start &lt;= max_ports &amp;&amp; start &gt; 0) {
<a name="l00993"></a>00993                      cfg_for_ports[start] = 1;
<a name="l00994"></a>00994                      <a class="code" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a>[start] = (strstr(ptpbuf, <span class="stringliteral">&quot;ptp&quot;</span>)) ? 1 : 0;
<a name="l00995"></a>00995                   } <span class="keywordflow">else</span>
<a name="l00996"></a>00996                      <a class="code" href="misdn__config_8c.html#a7ecf4ce12140fcf92774233f0d480f99">CLI_ERROR</a>(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, cat);
<a name="l00997"></a>00997                }
<a name="l00998"></a>00998             } <span class="keywordflow">else</span> {
<a name="l00999"></a>00999                <span class="keywordflow">if</span> (sscanf(token, <span class="stringliteral">&quot;%30d%511s&quot;</span>, &amp;start, ptpbuf)) {
<a name="l01000"></a>01000                   <span class="keywordflow">if</span> (start &lt;= max_ports &amp;&amp; start &gt; 0) {
<a name="l01001"></a>01001                      cfg_for_ports[start] = 1;
<a name="l01002"></a>01002                      <a class="code" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a>[start] = (strstr(ptpbuf, <span class="stringliteral">&quot;ptp&quot;</span>)) ? 1 : 0;
<a name="l01003"></a>01003                   } <span class="keywordflow">else</span>
<a name="l01004"></a>01004                      <a class="code" href="misdn__config_8c.html#a7ecf4ce12140fcf92774233f0d480f99">CLI_ERROR</a>(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, cat);
<a name="l01005"></a>01005                } <span class="keywordflow">else</span>
<a name="l01006"></a>01006                   <a class="code" href="misdn__config_8c.html#a7ecf4ce12140fcf92774233f0d480f99">CLI_ERROR</a>(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, cat);
<a name="l01007"></a>01007             }
<a name="l01008"></a>01008          }
<a name="l01009"></a>01009       } <span class="keywordflow">else</span> {
<a name="l01010"></a>01010          <span class="keywordflow">if</span> (((pos = <a class="code" href="misdn__config_8c.html#aa8d3573401dc0c81640d196c819e9b9d">get_cfg_position</a>(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <a class="code" href="misdn__config_8c.html#af239c62f325c4a450832ba971ad30594">PORT_CFG</a>)) &lt; 0) || 
<a name="l01011"></a>01011             (<a class="code" href="misdn__config_8c.html#a67ad6725e9690d51f7e59ab628b661f0">_parse</a>(&amp;cfg_tmp[pos], v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[pos].<a class="code" href="structmisdn__cfg__spec.html#a88b351b6cfc442e1679c9537bca61cab">type</a>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[pos].<a class="code" href="structmisdn__cfg__spec.html#a8d928300435d8100e57a316008d390b7">boolint_def</a>) &lt; 0))
<a name="l01012"></a>01012             <a class="code" href="misdn__config_8c.html#a7ecf4ce12140fcf92774233f0d480f99">CLI_ERROR</a>(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, cat);
<a name="l01013"></a>01013       }
<a name="l01014"></a>01014    }
<a name="l01015"></a>01015 
<a name="l01016"></a>01016    <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1); ++i) {
<a name="l01017"></a>01017       <span class="keywordflow">if</span> (i &gt; 0 &amp;&amp; cfg_for_ports[0]) {
<a name="l01018"></a>01018          <span class="comment">/* default category, will populate the port_cfg with additional port</span>
<a name="l01019"></a>01019 <span class="comment">         categories in subsequent calls to this function */</span>
<a name="l01020"></a>01020          memset(cfg_tmp, 0, <span class="keyword">sizeof</span>(cfg_tmp));
<a name="l01021"></a>01021       }
<a name="l01022"></a>01022       <span class="keywordflow">if</span> (cfg_for_ports[i]) {
<a name="l01023"></a>01023          memcpy(<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[i], cfg_tmp, <span class="keyword">sizeof</span>(cfg_tmp));
<a name="l01024"></a>01024       }
<a name="l01025"></a>01025    }
<a name="l01026"></a>01026 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a705f2aef7442b96728a1d130c1ea4398"></a><!-- doxytag: member="misdn_config.c::_enum_array_map" ref="a705f2aef7442b96728a1d130c1ea4398" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int _enum_array_map </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00398">398</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00030">MISDN_CFG_FIRST</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00091">MISDN_CFG_LAST</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00090">MISDN_CFG_PTP</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00094">MISDN_GEN_FIRST</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00109">MISDN_GEN_LAST</a>, <a class="el" href="misdn__config_8c_source.html#l00047">NUM_GEN_ELEMENTS</a>, and <a class="el" href="misdn__config_8c_source.html#l00048">NUM_PORT_ELEMENTS</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00399"></a>00399 {
<a name="l00400"></a>00400    <span class="keywordtype">int</span> i, j, ok;
<a name="l00401"></a>00401 
<a name="l00402"></a>00402    <span class="keywordflow">for</span> (i = <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a> + 1; i &lt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a>; ++i) {
<a name="l00403"></a>00403       <span class="keywordflow">if</span> (i == <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9c975239458a1af36eb8db7d17dd850d">MISDN_CFG_PTP</a>)
<a name="l00404"></a>00404          <span class="keywordflow">continue</span>;
<a name="l00405"></a>00405       ok = 0;
<a name="l00406"></a>00406       <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="misdn__config_8c.html#a59d3b992910f474202453df33bd05ca5">NUM_PORT_ELEMENTS</a>; ++j) {
<a name="l00407"></a>00407          <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[j].elem == i) {
<a name="l00408"></a>00408             <a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[i] = j;
<a name="l00409"></a>00409             ok = 1;
<a name="l00410"></a>00410             <span class="keywordflow">break</span>;
<a name="l00411"></a>00411          }
<a name="l00412"></a>00412       }
<a name="l00413"></a>00413       <span class="keywordflow">if</span> (!ok) {
<a name="l00414"></a>00414          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Enum element %d in misdn_cfg_elements (port section) has no corresponding element in the config struct!\n&quot;</span>, i);
<a name="l00415"></a>00415          <span class="keywordflow">return</span> -1;
<a name="l00416"></a>00416       }
<a name="l00417"></a>00417    }
<a name="l00418"></a>00418    <span class="keywordflow">for</span> (i = <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa50f2df70cb915612835a13a49c5fef81">MISDN_GEN_FIRST</a> + 1; i &lt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabeb4c50c2d53fffe39ee8c2fcc4cbc80">MISDN_GEN_LAST</a>; ++i) {
<a name="l00419"></a>00419       ok = 0;
<a name="l00420"></a>00420       <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="misdn__config_8c.html#a83493b27f098faa6746d734d0560a3e7">NUM_GEN_ELEMENTS</a>; ++j) {
<a name="l00421"></a>00421          <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[j].elem == i) {
<a name="l00422"></a>00422             <a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[i] = j;
<a name="l00423"></a>00423             ok = 1;
<a name="l00424"></a>00424             <span class="keywordflow">break</span>;
<a name="l00425"></a>00425          }
<a name="l00426"></a>00426       }
<a name="l00427"></a>00427       <span class="keywordflow">if</span> (!ok) {
<a name="l00428"></a>00428          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Enum element %d in misdn_cfg_elements (general section) has no corresponding element in the config struct!\n&quot;</span>, i);
<a name="l00429"></a>00429          <span class="keywordflow">return</span> -1;
<a name="l00430"></a>00430       }
<a name="l00431"></a>00431    }
<a name="l00432"></a>00432    <span class="keywordflow">return</span> 0;
<a name="l00433"></a>00433 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a92f772f3a8fca25a32f035720398cda2"></a><!-- doxytag: member="misdn_config.c::_fill_defaults" ref="a92f772f3a8fca25a32f035720398cda2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void _fill_defaults </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l01083">1083</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l00870">_parse()</a>, <a class="el" href="misdn__config_8c_source.html#l00081">misdn_cfg_pt::any</a>, <a class="el" href="misdn__config_8c_source.html#l00042">NO_DEFAULT</a>, <a class="el" href="misdn__config_8c_source.html#l00047">NUM_GEN_ELEMENTS</a>, <a class="el" href="misdn__config_8c_source.html#l00048">NUM_PORT_ELEMENTS</a>, and <a class="el" href="evt_8c_source.html#l00071">type</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01084"></a>01084 {
<a name="l01085"></a>01085    <span class="keywordtype">int</span> i;
<a name="l01086"></a>01086 
<a name="l01087"></a>01087    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="misdn__config_8c.html#a59d3b992910f474202453df33bd05ca5">NUM_PORT_ELEMENTS</a>; ++i) {
<a name="l01088"></a>01088       <span class="keywordflow">if</span> (!<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][i].<a class="code" href="unionmisdn__cfg__pt.html#ac68c3e928adb45a5992d721df3db2505">any</a> &amp;&amp; strcasecmp(<a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[i].def, <a class="code" href="misdn__config_8c.html#a79ca2b7c3ff47cfcc56e767e92d3f000">NO_DEFAULT</a>))
<a name="l01089"></a>01089          <a class="code" href="misdn__config_8c.html#a67ad6725e9690d51f7e59ab628b661f0">_parse</a>(&amp;(<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][i]), (<span class="keywordtype">char</span> *)<a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[i].def, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[i].<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[i].boolint_def);
<a name="l01090"></a>01090    }
<a name="l01091"></a>01091    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="misdn__config_8c.html#a83493b27f098faa6746d734d0560a3e7">NUM_GEN_ELEMENTS</a>; ++i) {
<a name="l01092"></a>01092       <span class="keywordflow">if</span> (!<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[i].<a class="code" href="unionmisdn__cfg__pt.html#ac68c3e928adb45a5992d721df3db2505">any</a> &amp;&amp; strcasecmp(<a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[i].def, <a class="code" href="misdn__config_8c.html#a79ca2b7c3ff47cfcc56e767e92d3f000">NO_DEFAULT</a>))
<a name="l01093"></a>01093          <a class="code" href="misdn__config_8c.html#a67ad6725e9690d51f7e59ab628b661f0">_parse</a>(&amp;(<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[i]), (<span class="keywordtype">char</span> *)<a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[i].def, <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[i].<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>, <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[i].boolint_def);
<a name="l01094"></a>01094    }
<a name="l01095"></a>01095 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a259567e54b2d303629277af2e67c6bfa"></a><!-- doxytag: member="misdn_config.c::_free_general_cfg" ref="a259567e54b2d303629277af2e67c6bfa" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void _free_general_cfg </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00508">508</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l00081">misdn_cfg_pt::any</a>, <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, and <a class="el" href="misdn__config_8c_source.html#l00047">NUM_GEN_ELEMENTS</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l01102">misdn_cfg_destroy()</a>, and <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00509"></a>00509 {
<a name="l00510"></a>00510    <span class="keywordtype">int</span> i;
<a name="l00511"></a>00511 
<a name="l00512"></a>00512    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="misdn__config_8c.html#a83493b27f098faa6746d734d0560a3e7">NUM_GEN_ELEMENTS</a>; i++) 
<a name="l00513"></a>00513       <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[i].<a class="code" href="unionmisdn__cfg__pt.html#ac68c3e928adb45a5992d721df3db2505">any</a>)
<a name="l00514"></a>00514          <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[i].any);
<a name="l00515"></a>00515 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad242a41e8e1f5e9432d90ef70381032b"></a><!-- doxytag: member="misdn_config.c::_free_msn_list" ref="ad242a41e8e1f5e9432d90ef70381032b" args="(struct msn_list *iter)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void _free_msn_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmsn__list.html">msn_list</a> *&nbsp;</td>
          <td class="paramname"> <em>iter</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00466">466</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="misdn__config_8c_source.html#l00072">msn_list::msn</a>, and <a class="el" href="misdn__config_8c_source.html#l00073">msn_list::next</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l00475">_free_port_cfg()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00467"></a>00467 {
<a name="l00468"></a>00468    <span class="keywordflow">if</span> (iter-&gt;<a class="code" href="structmsn__list.html#a59d10cdc7a1bafbb6761bd9e05ceb16e">next</a>)
<a name="l00469"></a>00469       <a class="code" href="misdn__config_8c.html#ad242a41e8e1f5e9432d90ef70381032b">_free_msn_list</a>(iter-&gt;<a class="code" href="structmsn__list.html#a59d10cdc7a1bafbb6761bd9e05ceb16e">next</a>);
<a name="l00470"></a>00470    <span class="keywordflow">if</span> (iter-&gt;<a class="code" href="structmsn__list.html#a990f0b7206ba433fb3a7a8bfce56aea1">msn</a>)
<a name="l00471"></a>00471       <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(iter-&gt;<a class="code" href="structmsn__list.html#a990f0b7206ba433fb3a7a8bfce56aea1">msn</a>);
<a name="l00472"></a>00472    <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(iter);
<a name="l00473"></a>00473 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a023bb61b2e014d422690936565fcb69e"></a><!-- doxytag: member="misdn_config.c::_free_port_cfg" ref="a023bb61b2e014d422690936565fcb69e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void _free_port_cfg </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00475">475</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l00466">_free_msn_list()</a>, <a class="el" href="misdn__config_8c_source.html#l00081">misdn_cfg_pt::any</a>, <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00031">MISDN_CFG_GROUPNAME</a>, <a class="el" href="misdn__config_8c_source.html#l00067">MISDN_CTYPE_MSNLIST</a>, <a class="el" href="misdn__config_8c_source.html#l00079">misdn_cfg_pt::ml</a>, <a class="el" href="misdn__config_8c_source.html#l00048">NUM_PORT_ELEMENTS</a>, <a class="el" href="app__jack_8c_source.html#l00142">str</a>, and <a class="el" href="evt_8c_source.html#l00071">type</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l01102">misdn_cfg_destroy()</a>, and <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00476"></a>00476 {
<a name="l00477"></a>00477    <span class="keywordtype">int</span> i, j;
<a name="l00478"></a>00478    <span class="keywordtype">int</span> gn = <a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a>];
<a name="l00479"></a>00479    <span class="keyword">union </span><a class="code" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a>* free_list[<a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 2];
<a name="l00480"></a>00480    
<a name="l00481"></a>00481    memset(free_list, 0, <span class="keyword">sizeof</span>(free_list));
<a name="l00482"></a>00482    free_list[0] = <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0];
<a name="l00483"></a>00483    <span class="keywordflow">for</span> (i = 1; i &lt;= <a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>; ++i) {
<a name="l00484"></a>00484       <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[i][gn].<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) {
<a name="l00485"></a>00485          <span class="comment">/* we always have a groupname in the non-default case, so this is fine */</span>
<a name="l00486"></a>00486          <span class="keywordflow">for</span> (j = 1; j &lt;= <a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>; ++j) {
<a name="l00487"></a>00487             <span class="keywordflow">if</span> (free_list[j] &amp;&amp; free_list[j][gn].str == <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[i][gn].str)
<a name="l00488"></a>00488                <span class="keywordflow">break</span>;
<a name="l00489"></a>00489             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!free_list[j]) {
<a name="l00490"></a>00490                free_list[j] = <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[i];
<a name="l00491"></a>00491                <span class="keywordflow">break</span>;
<a name="l00492"></a>00492             }
<a name="l00493"></a>00493          }
<a name="l00494"></a>00494       }
<a name="l00495"></a>00495    }
<a name="l00496"></a>00496    <span class="keywordflow">for</span> (j = 0; free_list[j]; ++j) {
<a name="l00497"></a>00497       <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="misdn__config_8c.html#a59d3b992910f474202453df33bd05ca5">NUM_PORT_ELEMENTS</a>; ++i) {
<a name="l00498"></a>00498          <span class="keywordflow">if</span> (free_list[j][i].<a class="code" href="unionmisdn__cfg__pt.html#ac68c3e928adb45a5992d721df3db2505">any</a>) {
<a name="l00499"></a>00499             <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[i].<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a> == <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a1b4b4bec0d3721002c16eb2d28fab14c">MISDN_CTYPE_MSNLIST</a>)
<a name="l00500"></a>00500                <a class="code" href="misdn__config_8c.html#ad242a41e8e1f5e9432d90ef70381032b">_free_msn_list</a>(free_list[j][i].<a class="code" href="unionmisdn__cfg__pt.html#abf455f77ca59efd9c05449072b886e4e">ml</a>);
<a name="l00501"></a>00501             <span class="keywordflow">else</span>
<a name="l00502"></a>00502                <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(free_list[j][i].any);
<a name="l00503"></a>00503          }
<a name="l00504"></a>00504       }
<a name="l00505"></a>00505    }
<a name="l00506"></a>00506 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a67ad6725e9690d51f7e59ab628b661f0"></a><!-- doxytag: member="misdn_config.c::_parse" ref="a67ad6725e9690d51f7e59ab628b661f0" args="(union misdn_cfg_pt *dest, const char *value, enum misdn_cfg_type type, int boolint_def)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int _parse </td>
          <td>(</td>
          <td class="paramtype">union <a class="el" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a> *&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1">misdn_cfg_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>boolint_def</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00870">870</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00072">ast_calloc</a>, <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="channel_8c_source.html#l05485">ast_get_group()</a>, <a class="el" href="astmm_8h_source.html#l00081">ast_malloc</a>, <a class="el" href="utils_8h_source.html#l00616">ast_strdupa</a>, <a class="el" href="utils_8c_source.html#l01311">ast_true()</a>, <a class="el" href="misdn__config_8c_source.html#l00080">misdn_cfg_pt::grp</a>, <a class="el" href="func__strings_8c_source.html#l00821">len()</a>, <a class="el" href="misdn__config_8c_source.html#l00068">MISDN_CTYPE_ASTGROUP</a>, <a class="el" href="misdn__config_8c_source.html#l00065">MISDN_CTYPE_BOOL</a>, <a class="el" href="misdn__config_8c_source.html#l00066">MISDN_CTYPE_BOOLINT</a>, <a class="el" href="misdn__config_8c_source.html#l00064">MISDN_CTYPE_INT</a>, <a class="el" href="misdn__config_8c_source.html#l00067">MISDN_CTYPE_MSNLIST</a>, <a class="el" href="misdn__config_8c_source.html#l00063">MISDN_CTYPE_STR</a>, <a class="el" href="misdn__config_8c_source.html#l00079">misdn_cfg_pt::ml</a>, <a class="el" href="misdn__config_8c_source.html#l00072">msn_list::msn</a>, <a class="el" href="misdn__config_8c_source.html#l00073">msn_list::next</a>, <a class="el" href="misdn__config_8c_source.html#l00078">misdn_cfg_pt::num</a>, <a class="el" href="misdn__config_8c_source.html#l00077">misdn_cfg_pt::str</a>, and <a class="el" href="agi_2strcompat_8c_source.html#l00027">strsep()</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l00947">_build_general_config()</a>, <a class="el" href="misdn__config_8c_source.html#l00960">_build_port_config()</a>, and <a class="el" href="misdn__config_8c_source.html#l01083">_fill_defaults()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00871"></a>00871 {
<a name="l00872"></a>00872    <span class="keywordtype">int</span> re = 0;
<a name="l00873"></a>00873    <span class="keywordtype">int</span> <a class="code" href="func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, tmp;
<a name="l00874"></a>00874    <span class="keywordtype">char</span> *valtmp;
<a name="l00875"></a>00875    <span class="keywordtype">char</span> *tmp2 = <a class="code" href="utils_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6" title="duplicate a string in memory from the stack">ast_strdupa</a>(value);
<a name="l00876"></a>00876 
<a name="l00877"></a>00877    <span class="keywordflow">switch</span> (<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>) {
<a name="l00878"></a>00878    <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a3fb9f6eb83f8251d1dca29e9d4db2e59">MISDN_CTYPE_STR</a>:
<a name="l00879"></a>00879       <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {
<a name="l00880"></a>00880          <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);
<a name="l00881"></a>00881       }
<a name="l00882"></a>00882       <span class="keywordflow">if</span> ((len = strlen(value))) {
<a name="l00883"></a>00883          dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>((len + 1) * <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l00884"></a>00884          strncpy(dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, value, len);
<a name="l00885"></a>00885          dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[len] = 0;
<a name="l00886"></a>00886       } <span class="keywordflow">else</span> {
<a name="l00887"></a>00887          dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l00888"></a>00888          dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[0] = 0;
<a name="l00889"></a>00889       }
<a name="l00890"></a>00890       <span class="keywordflow">break</span>;
<a name="l00891"></a>00891    <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a38a39f43e1c5ab7d88da012b7d40af64">MISDN_CTYPE_INT</a>:
<a name="l00892"></a>00892    {
<a name="l00893"></a>00893       <span class="keywordtype">int</span> res;
<a name="l00894"></a>00894 
<a name="l00895"></a>00895       <span class="keywordflow">if</span> (strchr(value,<span class="charliteral">&apos;x&apos;</span>)) {
<a name="l00896"></a>00896          res = sscanf(value, <span class="stringliteral">&quot;%30x&quot;</span>, &amp;tmp);
<a name="l00897"></a>00897       } <span class="keywordflow">else</span> {
<a name="l00898"></a>00898          res = sscanf(value, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;tmp);
<a name="l00899"></a>00899       }
<a name="l00900"></a>00900       <span class="keywordflow">if</span> (res) {
<a name="l00901"></a>00901          <span class="keywordflow">if</span> (!dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#a39966e2d53f3e1554213ef0608ad5e9c">num</a>) {
<a name="l00902"></a>00902             dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#a39966e2d53f3e1554213ef0608ad5e9c">num</a> = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00903"></a>00903          }
<a name="l00904"></a>00904          memcpy(dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#a39966e2d53f3e1554213ef0608ad5e9c">num</a>, &amp;tmp, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00905"></a>00905       } <span class="keywordflow">else</span>
<a name="l00906"></a>00906          re = -1;
<a name="l00907"></a>00907    }
<a name="l00908"></a>00908       <span class="keywordflow">break</span>;
<a name="l00909"></a>00909    <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a41691293175e3c004c27bd122e4c0ac6">MISDN_CTYPE_BOOL</a>:
<a name="l00910"></a>00910       <span class="keywordflow">if</span> (!dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#a39966e2d53f3e1554213ef0608ad5e9c">num</a>) {
<a name="l00911"></a>00911          dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#a39966e2d53f3e1554213ef0608ad5e9c">num</a> = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00912"></a>00912       }
<a name="l00913"></a>00913       *(dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#a39966e2d53f3e1554213ef0608ad5e9c">num</a>) = (<a class="code" href="strings_8h.html#a387a69b3871ca31061566a73f45d20f4" title="Make sure something is true. Determine if a string containing a boolean value is...">ast_true</a>(value) ? 1 : 0);
<a name="l00914"></a>00914       <span class="keywordflow">break</span>;
<a name="l00915"></a>00915    <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1ab25b97e6087e720228ebca3b77ebd857">MISDN_CTYPE_BOOLINT</a>:
<a name="l00916"></a>00916       <span class="keywordflow">if</span> (!dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#a39966e2d53f3e1554213ef0608ad5e9c">num</a>) {
<a name="l00917"></a>00917          dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#a39966e2d53f3e1554213ef0608ad5e9c">num</a> = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00918"></a>00918       }
<a name="l00919"></a>00919       <span class="keywordflow">if</span> (sscanf(value, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;tmp)) {
<a name="l00920"></a>00920          memcpy(dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#a39966e2d53f3e1554213ef0608ad5e9c">num</a>, &amp;tmp, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00921"></a>00921       } <span class="keywordflow">else</span> {
<a name="l00922"></a>00922          *(dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#a39966e2d53f3e1554213ef0608ad5e9c">num</a>) = (<a class="code" href="strings_8h.html#a387a69b3871ca31061566a73f45d20f4" title="Make sure something is true. Determine if a string containing a boolean value is...">ast_true</a>(value) ? boolint_def : 0);
<a name="l00923"></a>00923       }
<a name="l00924"></a>00924       <span class="keywordflow">break</span>;
<a name="l00925"></a>00925    <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a1b4b4bec0d3721002c16eb2d28fab14c">MISDN_CTYPE_MSNLIST</a>:
<a name="l00926"></a>00926       <span class="keywordflow">for</span> (valtmp = <a class="code" href="agi_2strcompat_8c.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tmp2, <span class="stringliteral">&quot;,&quot;</span>); valtmp; valtmp = <a class="code" href="agi_2strcompat_8c.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tmp2, <span class="stringliteral">&quot;,&quot;</span>)) {
<a name="l00927"></a>00927          <span class="keywordflow">if</span> ((len = strlen(valtmp))) {
<a name="l00928"></a>00928             <span class="keyword">struct </span><a class="code" href="structmsn__list.html">msn_list</a> *ml = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>(<span class="keyword">sizeof</span>(*ml));
<a name="l00929"></a>00929             ml-&gt;<a class="code" href="structmsn__list.html#a990f0b7206ba433fb3a7a8bfce56aea1">msn</a> = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(len+1, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l00930"></a>00930             strncpy(ml-&gt;<a class="code" href="structmsn__list.html#a990f0b7206ba433fb3a7a8bfce56aea1">msn</a>, valtmp, len);
<a name="l00931"></a>00931             ml-&gt;<a class="code" href="structmsn__list.html#a59d10cdc7a1bafbb6761bd9e05ceb16e">next</a> = dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#abf455f77ca59efd9c05449072b886e4e">ml</a>;
<a name="l00932"></a>00932             dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#abf455f77ca59efd9c05449072b886e4e">ml</a> = ml;
<a name="l00933"></a>00933          }
<a name="l00934"></a>00934       }
<a name="l00935"></a>00935       <span class="keywordflow">break</span>;
<a name="l00936"></a>00936    <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a40c3b08f125c2ddf122150790302f80b">MISDN_CTYPE_ASTGROUP</a>:
<a name="l00937"></a>00937       <span class="keywordflow">if</span> (!dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#af18db33a9880bbb832e539ff639b0411">grp</a>) {
<a name="l00938"></a>00938          dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#af18db33a9880bbb832e539ff639b0411">grp</a> = <a class="code" href="astmm_8h.html#a64a0e7a3ab511a3777ac56f5d43c628e">ast_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a>));
<a name="l00939"></a>00939       }
<a name="l00940"></a>00940       *(dest-&gt;<a class="code" href="unionmisdn__cfg__pt.html#af18db33a9880bbb832e539ff639b0411">grp</a>) = <a class="code" href="channel_8h.html#aee83e23058d0a4111fda1f506cbda107">ast_get_group</a>(value);
<a name="l00941"></a>00941       <span class="keywordflow">break</span>;
<a name="l00942"></a>00942    }
<a name="l00943"></a>00943 
<a name="l00944"></a>00944    <span class="keywordflow">return</span> re;
<a name="l00945"></a>00945 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa8d3573401dc0c81640d196c819e9b9d"></a><!-- doxytag: member="misdn_config.c::get_cfg_position" ref="aa8d3573401dc0c81640d196c819e9b9d" args="(const char *name, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int get_cfg_position </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00435">435</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l00045">GEN_CFG</a>, <a class="el" href="misdn__config_8c_source.html#l00047">NUM_GEN_ELEMENTS</a>, <a class="el" href="misdn__config_8c_source.html#l00048">NUM_PORT_ELEMENTS</a>, and <a class="el" href="misdn__config_8c_source.html#l00046">PORT_CFG</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l00947">_build_general_config()</a>, <a class="el" href="misdn__config_8c_source.html#l00960">_build_port_config()</a>, and <a class="el" href="misdn__config_8c_source.html#l00571">misdn_cfg_get_elem()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00436"></a>00436 {
<a name="l00437"></a>00437    <span class="keywordtype">int</span> i;
<a name="l00438"></a>00438 
<a name="l00439"></a>00439    <span class="keywordflow">switch</span> (<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>) {
<a name="l00440"></a>00440    <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#af239c62f325c4a450832ba971ad30594">PORT_CFG</a>:
<a name="l00441"></a>00441       <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="misdn__config_8c.html#a59d3b992910f474202453df33bd05ca5">NUM_PORT_ELEMENTS</a>; ++i) {
<a name="l00442"></a>00442          <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[i].<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>))
<a name="l00443"></a>00443             <span class="keywordflow">return</span> i;
<a name="l00444"></a>00444       }
<a name="l00445"></a>00445       <span class="keywordflow">break</span>;
<a name="l00446"></a>00446    <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#ac83a664de90770af20fa45e23a2f6a0b">GEN_CFG</a>:
<a name="l00447"></a>00447       <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="misdn__config_8c.html#a83493b27f098faa6746d734d0560a3e7">NUM_GEN_ELEMENTS</a>; ++i) {
<a name="l00448"></a>00448          <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[i].<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>))
<a name="l00449"></a>00449             <span class="keywordflow">return</span> i;
<a name="l00450"></a>00450       }
<a name="l00451"></a>00451    }
<a name="l00452"></a>00452 
<a name="l00453"></a>00453    <span class="keywordflow">return</span> -1;
<a name="l00454"></a>00454 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a59f113bee91d678988a1c3d8ddbdb2dc"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_destroy" ref="a59f113bee91d678988a1c3d8ddbdb2dc" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void misdn_cfg_destroy </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l01102">1102</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l00508">_free_general_cfg()</a>, <a class="el" href="misdn__config_8c_source.html#l00475">_free_port_cfg()</a>, <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="lock_8h_source.html#l01712">ast_mutex_destroy()</a>, <a class="el" href="misdn__config_8c_source.html#l00456">misdn_cfg_lock()</a>, and <a class="el" href="misdn__config_8c_source.html#l00461">misdn_cfg_unlock()</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l05389">unload_module()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01103"></a>01103 {
<a name="l01104"></a>01104    <a class="code" href="misdn__config_8c.html#a0a5150edaaeab71511aa854c2004b040">misdn_cfg_lock</a>();
<a name="l01105"></a>01105 
<a name="l01106"></a>01106    <a class="code" href="misdn__config_8c.html#a023bb61b2e014d422690936565fcb69e">_free_port_cfg</a>();
<a name="l01107"></a>01107    <a class="code" href="misdn__config_8c.html#a259567e54b2d303629277af2e67c6bfa">_free_general_cfg</a>();
<a name="l01108"></a>01108 
<a name="l01109"></a>01109    <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>);
<a name="l01110"></a>01110    <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>);
<a name="l01111"></a>01111    <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a>);
<a name="l01112"></a>01112    <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>);
<a name="l01113"></a>01113 
<a name="l01114"></a>01114    <a class="code" href="misdn__config_8c.html#a788f0d601bd6a2f2089b3849b720bc62">misdn_cfg_unlock</a>();
<a name="l01115"></a>01115    <a class="code" href="lock_8h.html#ab237e70b569019bfb490ab0c3c09b8c5">ast_mutex_destroy</a>(&amp;<a class="code" href="misdn__config_8c.html#a9ef1b52be86dcb4cba28583d8f3feae9">config_mutex</a>);
<a name="l01116"></a>01116 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0f6a5bee3a29bd963f565c6b474f2b23"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_get" ref="a0f6a5bee3a29bd963f565c6b474f2b23" args="(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void misdn_cfg_get </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a>&nbsp;</td>
          <td class="paramname"> <em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bufsize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00517">517</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l00081">misdn_cfg_pt::any</a>, <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="misdn__config_8c_source.html#l00674">misdn_cfg_is_port_valid()</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00091">MISDN_CFG_LAST</a>, <a class="el" href="misdn__config_8c_source.html#l00456">misdn_cfg_lock()</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00090">MISDN_CFG_PTP</a>, <a class="el" href="misdn__config_8c_source.html#l00461">misdn_cfg_unlock()</a>, <a class="el" href="misdn__config_8c_source.html#l00063">MISDN_CTYPE_STR</a>, <a class="el" href="strings_8h_source.html#l00072">S_OR</a>, <a class="el" href="app__jack_8c_source.html#l00142">str</a>, and <a class="el" href="evt_8c_source.html#l00071">type</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l04322">add_in_calls()</a>, <a class="el" href="chan__misdn_8c_source.html#l04337">add_out_calls()</a>, <a class="el" href="chan__misdn_8c_source.html#l04379">cb_events()</a>, <a class="el" href="chan__misdn_8c_source.html#l03330">dialtone_indicate()</a>, <a class="el" href="chan__misdn_8c_source.html#l05422">load_module()</a>, <a class="el" href="chan__misdn_8c_source.html#l03228">misdn_bridge()</a>, <a class="el" href="chan__misdn_8c_source.html#l02394">misdn_call()</a>, <a class="el" href="misdn__config_8c_source.html#l01028">misdn_cfg_update_ptp()</a>, <a class="el" href="chan__misdn_8c_source.html#l05663">misdn_check_l2l1()</a>, <a class="el" href="chan__misdn_8c_source.html#l03705">misdn_new()</a>, <a class="el" href="chan__misdn_8c_source.html#l03426">misdn_request()</a>, <a class="el" href="chan__misdn_8c_source.html#l05739">misdn_set_opt_exec()</a>, <a class="el" href="chan__misdn_8c_source.html#l02961">process_ast_dsp()</a>, <a class="el" href="chan__misdn_8c_source.html#l02185">read_config()</a>, <a class="el" href="chan__misdn_8c_source.html#l01331">reload_config()</a>, <a class="el" href="chan__misdn_8c_source.html#l02002">update_config()</a>, and <a class="el" href="chan__misdn_8c_source.html#l02166">update_ec_config()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00518"></a>00518 {
<a name="l00519"></a>00519    <span class="keywordtype">int</span> place;
<a name="l00520"></a>00520 
<a name="l00521"></a>00521    <span class="keywordflow">if</span> ((elem &lt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a>) &amp;&amp; !<a class="code" href="misdn__config_8c.html#ab08e8e7e093f022d1a156fe2d6ebdf45">misdn_cfg_is_port_valid</a>(port)) {
<a name="l00522"></a>00522       memset(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, 0, bufsize);
<a name="l00523"></a>00523       <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid call to misdn_cfg_get! Port number %d is not valid.\n&quot;</span>, port);
<a name="l00524"></a>00524       <span class="keywordflow">return</span>;
<a name="l00525"></a>00525    }
<a name="l00526"></a>00526 
<a name="l00527"></a>00527    <a class="code" href="misdn__config_8c.html#a0a5150edaaeab71511aa854c2004b040">misdn_cfg_lock</a>();
<a name="l00528"></a>00528    <span class="keywordflow">if</span> (elem == <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9c975239458a1af36eb8db7d17dd850d">MISDN_CFG_PTP</a>) {
<a name="l00529"></a>00529       <span class="keywordflow">if</span> (!memcpy(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, &amp;<a class="code" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a>[port], (bufsize &gt; <a class="code" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a>[port]) ? <span class="keyword">sizeof</span>(<a class="code" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a>[port]) : bufsize))
<a name="l00530"></a>00530          memset(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, 0, bufsize);
<a name="l00531"></a>00531    } <span class="keywordflow">else</span> {
<a name="l00532"></a>00532       <span class="keywordflow">if</span> ((place = <a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[elem]) &lt; 0) {
<a name="l00533"></a>00533          memset(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, 0, bufsize);
<a name="l00534"></a>00534          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid call to misdn_cfg_get! Invalid element (%d) requested.\n&quot;</span>, elem);
<a name="l00535"></a>00535       } <span class="keywordflow">else</span> {
<a name="l00536"></a>00536          <span class="keywordflow">if</span> (elem &lt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a>) {
<a name="l00537"></a>00537             <span class="keywordflow">switch</span> (<a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>) {
<a name="l00538"></a>00538             <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a3fb9f6eb83f8251d1dca29e9d4db2e59">MISDN_CTYPE_STR</a>:
<a name="l00539"></a>00539                <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) {
<a name="l00540"></a>00540                   <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].str, bufsize);
<a name="l00541"></a>00541                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].str) {
<a name="l00542"></a>00542                   <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].str, bufsize);
<a name="l00543"></a>00543                } <span class="keywordflow">else</span>
<a name="l00544"></a>00544                   memset(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, 0, bufsize);
<a name="l00545"></a>00545                <span class="keywordflow">break</span>;
<a name="l00546"></a>00546             <span class="keywordflow">default</span>:
<a name="l00547"></a>00547                <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].any)
<a name="l00548"></a>00548                   memcpy(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].any, bufsize);
<a name="l00549"></a>00549                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].any)
<a name="l00550"></a>00550                   memcpy(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].any, bufsize);
<a name="l00551"></a>00551                <span class="keywordflow">else</span>
<a name="l00552"></a>00552                   memset(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, 0, bufsize);
<a name="l00553"></a>00553             }
<a name="l00554"></a>00554          } <span class="keywordflow">else</span> {
<a name="l00555"></a>00555             <span class="keywordflow">switch</span> (<a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[place].type) {
<a name="l00556"></a>00556             <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a3fb9f6eb83f8251d1dca29e9d4db2e59">MISDN_CTYPE_STR</a>:
<a name="l00557"></a>00557                <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <a class="code" href="strings_8h.html#a2faaa16929951bfd2802b7829a100ba2" title="returns the equivalent of logic or for strings: first one if not empty, otherwise...">S_OR</a>(<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[place].str, <span class="stringliteral">&quot;&quot;</span>), bufsize);
<a name="l00558"></a>00558                <span class="keywordflow">break</span>;
<a name="l00559"></a>00559             <span class="keywordflow">default</span>:
<a name="l00560"></a>00560                <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[place].any)
<a name="l00561"></a>00561                   memcpy(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[place].any, bufsize);
<a name="l00562"></a>00562                <span class="keywordflow">else</span>
<a name="l00563"></a>00563                   memset(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, 0, bufsize);
<a name="l00564"></a>00564             }
<a name="l00565"></a>00565          }
<a name="l00566"></a>00566       }
<a name="l00567"></a>00567    }
<a name="l00568"></a>00568    <a class="code" href="misdn__config_8c.html#a788f0d601bd6a2f2089b3849b720bc62">misdn_cfg_unlock</a>();
<a name="l00569"></a>00569 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac61399fce05fb3fceea23627e48a7769"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_get_config_string" ref="ac61399fce05fb3fceea23627e48a7769" args="(int port, enum misdn_cfg_elements elem, char *buf, int bufsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void misdn_cfg_get_config_string </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a>&nbsp;</td>
          <td class="paramname"> <em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bufsize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00742">742</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="channel_8c_source.html#l05567">ast_print_group()</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00025">BUFFERSIZE</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00030">MISDN_CFG_FIRST</a>, <a class="el" href="misdn__config_8c_source.html#l00674">misdn_cfg_is_port_valid()</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00091">MISDN_CFG_LAST</a>, <a class="el" href="misdn__config_8c_source.html#l00456">misdn_cfg_lock()</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00090">MISDN_CFG_PTP</a>, <a class="el" href="misdn__config_8c_source.html#l00461">misdn_cfg_unlock()</a>, <a class="el" href="misdn__config_8c_source.html#l00068">MISDN_CTYPE_ASTGROUP</a>, <a class="el" href="misdn__config_8c_source.html#l00065">MISDN_CTYPE_BOOL</a>, <a class="el" href="misdn__config_8c_source.html#l00066">MISDN_CTYPE_BOOLINT</a>, <a class="el" href="misdn__config_8c_source.html#l00064">MISDN_CTYPE_INT</a>, <a class="el" href="misdn__config_8c_source.html#l00067">MISDN_CTYPE_MSNLIST</a>, <a class="el" href="misdn__config_8c_source.html#l00063">MISDN_CTYPE_STR</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00094">MISDN_GEN_FIRST</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00109">MISDN_GEN_LAST</a>, <a class="el" href="misdn__config_8c_source.html#l00079">misdn_cfg_pt::ml</a>, <a class="el" href="misdn__config_8c_source.html#l00072">msn_list::msn</a>, <a class="el" href="cdr__adaptive__odbc_8c_source.html#l00053">name</a>, <a class="el" href="misdn__config_8c_source.html#l00073">msn_list::next</a>, <a class="el" href="adsistub_8c_source.html#l00077">num</a>, <a class="el" href="app__jack_8c_source.html#l00142">str</a>, and <a class="el" href="evt_8c_source.html#l00071">type</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l01200">handle_cli_misdn_show_config()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00743"></a>00743 {
<a name="l00744"></a>00744    <span class="keywordtype">int</span> place;
<a name="l00745"></a>00745    <span class="keywordtype">char</span> tempbuf[<a class="code" href="chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00746"></a>00746    <span class="keyword">struct </span><a class="code" href="structmsn__list.html">msn_list</a> *iter;
<a name="l00747"></a>00747 
<a name="l00748"></a>00748    <span class="keywordflow">if</span> ((elem &lt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a>) &amp;&amp; !<a class="code" href="misdn__config_8c.html#ab08e8e7e093f022d1a156fe2d6ebdf45">misdn_cfg_is_port_valid</a>(port)) {
<a name="l00749"></a>00749       *<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a> = 0;
<a name="l00750"></a>00750       <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid call to misdn_cfg_get_config_string! Port number %d is not valid.\n&quot;</span>, port);
<a name="l00751"></a>00751       <span class="keywordflow">return</span>;
<a name="l00752"></a>00752    }
<a name="l00753"></a>00753 
<a name="l00754"></a>00754    place = <a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[elem];
<a name="l00755"></a>00755 
<a name="l00756"></a>00756    <a class="code" href="misdn__config_8c.html#a0a5150edaaeab71511aa854c2004b040">misdn_cfg_lock</a>();
<a name="l00757"></a>00757    <span class="keywordflow">if</span> (elem == <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9c975239458a1af36eb8db7d17dd850d">MISDN_CFG_PTP</a>) {
<a name="l00758"></a>00758       snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; ptp: %s&quot;</span>, <a class="code" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a>[port] ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);
<a name="l00759"></a>00759    }
<a name="l00760"></a>00760    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (elem &gt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a> &amp;&amp; elem &lt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a>) {
<a name="l00761"></a>00761       <span class="keywordflow">switch</span> (<a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].<a class="code" href="evt_8c.html#a69e2889a94aeb9ac881abb82d3c22116">type</a>) {
<a name="l00762"></a>00762       <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a38a39f43e1c5ab7d88da012b7d40af64">MISDN_CTYPE_INT</a>:
<a name="l00763"></a>00763       <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1ab25b97e6087e720228ebca3b77ebd857">MISDN_CTYPE_BOOLINT</a>:
<a name="l00764"></a>00764          <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].<a class="code" href="adsistub_8c.html#af6fc584548091f45267cfaf7066119bd">num</a>)
<a name="l00765"></a>00765             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s: %d&quot;</span>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, *<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].num);
<a name="l00766"></a>00766          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].num)
<a name="l00767"></a>00767             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s: %d&quot;</span>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, *<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].num);
<a name="l00768"></a>00768          <span class="keywordflow">else</span>
<a name="l00769"></a>00769             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s:&quot;</span>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>);
<a name="l00770"></a>00770          <span class="keywordflow">break</span>;
<a name="l00771"></a>00771       <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a41691293175e3c004c27bd122e4c0ac6">MISDN_CTYPE_BOOL</a>:
<a name="l00772"></a>00772          <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].num)
<a name="l00773"></a>00773             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s: %s&quot;</span>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, *<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].num ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);
<a name="l00774"></a>00774          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].num)
<a name="l00775"></a>00775             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s: %s&quot;</span>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, *<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].num ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);
<a name="l00776"></a>00776          <span class="keywordflow">else</span>
<a name="l00777"></a>00777             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s:&quot;</span>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>);
<a name="l00778"></a>00778          <span class="keywordflow">break</span>;
<a name="l00779"></a>00779       <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a40c3b08f125c2ddf122150790302f80b">MISDN_CTYPE_ASTGROUP</a>:
<a name="l00780"></a>00780          <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].grp)
<a name="l00781"></a>00781             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s: %s&quot;</span>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, 
<a name="l00782"></a>00782                    <a class="code" href="channel_8h.html#a092d4e67b0bda0f99b02a1534ee75408" title="print call- and pickup groups into buffer">ast_print_group</a>(tempbuf, <span class="keyword">sizeof</span>(tempbuf), *<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].grp));
<a name="l00783"></a>00783          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].grp)
<a name="l00784"></a>00784             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s: %s&quot;</span>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].name, 
<a name="l00785"></a>00785                    <a class="code" href="channel_8h.html#a092d4e67b0bda0f99b02a1534ee75408" title="print call- and pickup groups into buffer">ast_print_group</a>(tempbuf, <span class="keyword">sizeof</span>(tempbuf), *<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].grp));
<a name="l00786"></a>00786          <span class="keywordflow">else</span>
<a name="l00787"></a>00787             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s:&quot;</span>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].name);
<a name="l00788"></a>00788          <span class="keywordflow">break</span>;
<a name="l00789"></a>00789       <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a1b4b4bec0d3721002c16eb2d28fab14c">MISDN_CTYPE_MSNLIST</a>:
<a name="l00790"></a>00790          <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].ml)
<a name="l00791"></a>00791             iter = <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].<a class="code" href="unionmisdn__cfg__pt.html#abf455f77ca59efd9c05449072b886e4e">ml</a>;
<a name="l00792"></a>00792          <span class="keywordflow">else</span>
<a name="l00793"></a>00793             iter = <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].<a class="code" href="unionmisdn__cfg__pt.html#abf455f77ca59efd9c05449072b886e4e">ml</a>;
<a name="l00794"></a>00794          <span class="keywordflow">if</span> (iter) {
<a name="l00795"></a>00795             <span class="keywordflow">for</span> (; iter; iter = iter-&gt;<a class="code" href="structmsn__list.html#a59d10cdc7a1bafbb6761bd9e05ceb16e">next</a>) {
<a name="l00796"></a>00796                strncat(tempbuf, iter-&gt;<a class="code" href="structmsn__list.html#a990f0b7206ba433fb3a7a8bfce56aea1">msn</a>, <span class="keyword">sizeof</span>(tempbuf) - strlen(tempbuf) - 1);
<a name="l00797"></a>00797             }
<a name="l00798"></a>00798             <span class="keywordflow">if</span> (strlen(tempbuf) &gt; 1) {
<a name="l00799"></a>00799                tempbuf[strlen(tempbuf)-2] = 0;
<a name="l00800"></a>00800             }
<a name="l00801"></a>00801          }
<a name="l00802"></a>00802          snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; msns: %s&quot;</span>, *tempbuf ? tempbuf : <span class="stringliteral">&quot;none&quot;</span>);
<a name="l00803"></a>00803          <span class="keywordflow">break</span>;
<a name="l00804"></a>00804       <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a3fb9f6eb83f8251d1dca29e9d4db2e59">MISDN_CTYPE_STR</a>:
<a name="l00805"></a>00805          <span class="keywordflow">if</span> ( <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) {
<a name="l00806"></a>00806             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s: %s&quot;</span>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].name, <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][place].str);
<a name="l00807"></a>00807          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].str) {
<a name="l00808"></a>00808             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s: %s&quot;</span>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].name, <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][place].str);
<a name="l00809"></a>00809          } <span class="keywordflow">else</span> {
<a name="l00810"></a>00810             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s:&quot;</span>, <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[place].name);
<a name="l00811"></a>00811          }
<a name="l00812"></a>00812          <span class="keywordflow">break</span>;
<a name="l00813"></a>00813       }
<a name="l00814"></a>00814    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (elem &gt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa50f2df70cb915612835a13a49c5fef81">MISDN_GEN_FIRST</a> &amp;&amp; elem &lt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabeb4c50c2d53fffe39ee8c2fcc4cbc80">MISDN_GEN_LAST</a>) {
<a name="l00815"></a>00815       <span class="keywordflow">switch</span> (<a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[place].type) {
<a name="l00816"></a>00816       <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a38a39f43e1c5ab7d88da012b7d40af64">MISDN_CTYPE_INT</a>:
<a name="l00817"></a>00817       <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1ab25b97e6087e720228ebca3b77ebd857">MISDN_CTYPE_BOOLINT</a>:
<a name="l00818"></a>00818          <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[place].num)
<a name="l00819"></a>00819             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s: %d&quot;</span>, <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[place].name, *<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[place].num);
<a name="l00820"></a>00820          <span class="keywordflow">else</span>
<a name="l00821"></a>00821             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s:&quot;</span>, <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[place].name);
<a name="l00822"></a>00822          <span class="keywordflow">break</span>;
<a name="l00823"></a>00823       <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a41691293175e3c004c27bd122e4c0ac6">MISDN_CTYPE_BOOL</a>:
<a name="l00824"></a>00824          <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[place].num)
<a name="l00825"></a>00825             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s: %s&quot;</span>, <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[place].name, *<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[place].num ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);
<a name="l00826"></a>00826          <span class="keywordflow">else</span>
<a name="l00827"></a>00827             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s:&quot;</span>, <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[place].name);
<a name="l00828"></a>00828          <span class="keywordflow">break</span>;
<a name="l00829"></a>00829       <span class="keywordflow">case</span> <a class="code" href="misdn__config_8c.html#a0d6c46c9eae8390716fac867baef16e1a3fb9f6eb83f8251d1dca29e9d4db2e59">MISDN_CTYPE_STR</a>:
<a name="l00830"></a>00830          <span class="keywordflow">if</span> ( <a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[place].<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) {
<a name="l00831"></a>00831             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s: %s&quot;</span>, <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[place].name, <a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>[place].str);
<a name="l00832"></a>00832          } <span class="keywordflow">else</span> {
<a name="l00833"></a>00833             snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; %s:&quot;</span>, <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[place].name);
<a name="l00834"></a>00834          }
<a name="l00835"></a>00835          <span class="keywordflow">break</span>;
<a name="l00836"></a>00836       <span class="keywordflow">default</span>:
<a name="l00837"></a>00837          snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot; -&gt; type of %s not handled yet&quot;</span>, <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[place].name);
<a name="l00838"></a>00838          <span class="keywordflow">break</span>;
<a name="l00839"></a>00839       }
<a name="l00840"></a>00840    } <span class="keywordflow">else</span> {
<a name="l00841"></a>00841       *<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a> = 0;
<a name="l00842"></a>00842       <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid call to misdn_cfg_get_config_string! Invalid config element (%d) requested.\n&quot;</span>, elem);
<a name="l00843"></a>00843    }
<a name="l00844"></a>00844    <a class="code" href="misdn__config_8c.html#a788f0d601bd6a2f2089b3849b720bc62">misdn_cfg_unlock</a>();
<a name="l00845"></a>00845 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab4fe73c162f2208a725cef8825a36de9"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_get_desc" ref="ab4fe73c162f2208a725cef8825a36de9" args="(enum misdn_cfg_elements elem, void *buf, int bufsize, void *buf_default, int bufsize_default)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void misdn_cfg_get_desc </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a>&nbsp;</td>
          <td class="paramname"> <em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bufsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf_default</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bufsize_default</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00618">618</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="misdn__config_8c_source.html#l00088">misdn_cfg_spec::def</a>, <a class="el" href="channel_8c_source.html#l00138">desc</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00030">MISDN_CFG_FIRST</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00031">MISDN_CFG_GROUPNAME</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00091">MISDN_CFG_LAST</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00094">MISDN_GEN_FIRST</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00109">MISDN_GEN_LAST</a>, and <a class="el" href="misdn__config_8c_source.html#l00042">NO_DEFAULT</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l01175">show_config_description()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00619"></a>00619 {
<a name="l00620"></a>00620    <span class="keywordtype">int</span> place = <a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[elem];
<a name="l00621"></a>00621    <span class="keyword">struct </span><a class="code" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a> *spec = NULL;
<a name="l00622"></a>00622 
<a name="l00623"></a>00623    <span class="comment">/* here comes a hack to replace the (not existing) &quot;name&quot; element with the &quot;ports&quot; element */</span>
<a name="l00624"></a>00624    <span class="keywordflow">if</span> (<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a> == <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a>) {
<a name="l00625"></a>00625       <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <a class="code" href="misdn__config_8c.html#a0e04b70145d8bfed373b2341bffb78b8">ports_description</a>, bufsize);
<a name="l00626"></a>00626       <span class="keywordflow">if</span> (buf_default &amp;&amp; bufsize_default)
<a name="l00627"></a>00627          memset(buf_default, 0, 1);
<a name="l00628"></a>00628       <span class="keywordflow">return</span>;
<a name="l00629"></a>00629    }
<a name="l00630"></a>00630 
<a name="l00631"></a>00631    <span class="keywordflow">if</span> ((<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a> &gt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a>) &amp;&amp; (<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a> &lt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a>))
<a name="l00632"></a>00632       spec = (<span class="keyword">struct </span><a class="code" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a> *)<a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>;
<a name="l00633"></a>00633    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a> &gt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa50f2df70cb915612835a13a49c5fef81">MISDN_GEN_FIRST</a>) &amp;&amp; (<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a> &lt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabeb4c50c2d53fffe39ee8c2fcc4cbc80">MISDN_GEN_LAST</a>))
<a name="l00634"></a>00634       spec = (<span class="keyword">struct </span><a class="code" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a> *)<a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>;
<a name="l00635"></a>00635       
<a name="l00636"></a>00636    <span class="keywordflow">if</span> (!spec || !spec[place].<a class="code" href="channel_8c.html#a710bce51374aba96ab04912897666c35">desc</a>)
<a name="l00637"></a>00637       memset(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, 0, 1);
<a name="l00638"></a>00638    <span class="keywordflow">else</span> {
<a name="l00639"></a>00639       <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, spec[place].desc, bufsize);
<a name="l00640"></a>00640       <span class="keywordflow">if</span> (buf_default &amp;&amp; bufsize) {
<a name="l00641"></a>00641          <span class="keywordflow">if</span> (!strcmp(spec[place].<a class="code" href="structmisdn__cfg__spec.html#a06df8b8b6c73d221965c28812a1c149e">def</a>, <a class="code" href="misdn__config_8c.html#a79ca2b7c3ff47cfcc56e767e92d3f000">NO_DEFAULT</a>))
<a name="l00642"></a>00642             memset(buf_default, 0, 1);
<a name="l00643"></a>00643          <span class="keywordflow">else</span>
<a name="l00644"></a>00644             <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(buf_default, spec[place].def, bufsize_default);
<a name="l00645"></a>00645       }
<a name="l00646"></a>00646    }
<a name="l00647"></a>00647 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a23de2d260a7f394b3d0d4bdead5343c6"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_get_elem" ref="a23de2d260a7f394b3d0d4bdead5343c6" args="(char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a> misdn_cfg_get_elem </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00571">571</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l00086">misdn_cfg_spec::elem</a>, <a class="el" href="misdn__config_8c_source.html#l00045">GEN_CFG</a>, <a class="el" href="misdn__config_8c_source.html#l00435">get_cfg_position()</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00030">MISDN_CFG_FIRST</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00031">MISDN_CFG_GROUPNAME</a>, and <a class="el" href="misdn__config_8c_source.html#l00046">PORT_CFG</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l01200">handle_cli_misdn_show_config()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00572"></a>00572 {
<a name="l00573"></a>00573    <span class="keywordtype">int</span> pos;
<a name="l00574"></a>00574 
<a name="l00575"></a>00575    <span class="comment">/* here comes a hack to replace the (not existing) &quot;name&quot; element with the &quot;ports&quot; element */</span>
<a name="l00576"></a>00576    <span class="keywordflow">if</span> (!strcmp(<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="stringliteral">&quot;ports&quot;</span>))
<a name="l00577"></a>00577       <span class="keywordflow">return</span> <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a>;
<a name="l00578"></a>00578    <span class="keywordflow">if</span> (!strcmp(<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="stringliteral">&quot;name&quot;</span>))
<a name="l00579"></a>00579       <span class="keywordflow">return</span> <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a>;
<a name="l00580"></a>00580 
<a name="l00581"></a>00581    pos = <a class="code" href="misdn__config_8c.html#aa8d3573401dc0c81640d196c819e9b9d">get_cfg_position</a>(<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="misdn__config_8c.html#af239c62f325c4a450832ba971ad30594">PORT_CFG</a>);
<a name="l00582"></a>00582    <span class="keywordflow">if</span> (pos &gt;= 0)
<a name="l00583"></a>00583       <span class="keywordflow">return</span> <a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[pos].<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a>;
<a name="l00584"></a>00584    
<a name="l00585"></a>00585    pos = <a class="code" href="misdn__config_8c.html#aa8d3573401dc0c81640d196c819e9b9d">get_cfg_position</a>(<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="misdn__config_8c.html#ac83a664de90770af20fa45e23a2f6a0b">GEN_CFG</a>);
<a name="l00586"></a>00586    <span class="keywordflow">if</span> (pos &gt;= 0)
<a name="l00587"></a>00587       <span class="keywordflow">return</span> <a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[pos].<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a>;
<a name="l00588"></a>00588    
<a name="l00589"></a>00589    <span class="keywordflow">return</span> <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a>;
<a name="l00590"></a>00590 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5d5c67cc756ded480d5742ca65a3e36f"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_get_name" ref="a5d5c67cc756ded480d5742ca65a3e36f" args="(enum misdn_cfg_elements elem, void *buf, int bufsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void misdn_cfg_get_name </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a>&nbsp;</td>
          <td class="paramname"> <em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bufsize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00592">592</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00030">MISDN_CFG_FIRST</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00031">MISDN_CFG_GROUPNAME</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00091">MISDN_CFG_LAST</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00090">MISDN_CFG_PTP</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00094">MISDN_GEN_FIRST</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00109">MISDN_GEN_LAST</a>, and <a class="el" href="cdr__adaptive__odbc_8c_source.html#l00053">name</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l01925">complete_show_config()</a>, and <a class="el" href="chan__misdn_8c_source.html#l01175">show_config_description()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00593"></a>00593 {
<a name="l00594"></a>00594    <span class="keyword">struct </span><a class="code" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a> *spec = NULL;
<a name="l00595"></a>00595    <span class="keywordtype">int</span> place = <a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a>];
<a name="l00596"></a>00596 
<a name="l00597"></a>00597    <span class="comment">/* the ptp hack */</span>
<a name="l00598"></a>00598    <span class="keywordflow">if</span> (<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a> == <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9c975239458a1af36eb8db7d17dd850d">MISDN_CFG_PTP</a>) {
<a name="l00599"></a>00599       memset(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, 0, 1);
<a name="l00600"></a>00600       <span class="keywordflow">return</span>;
<a name="l00601"></a>00601    }
<a name="l00602"></a>00602    
<a name="l00603"></a>00603    <span class="comment">/* here comes a hack to replace the (not existing) &quot;name&quot; element with the &quot;ports&quot; element */</span>
<a name="l00604"></a>00604    <span class="keywordflow">if</span> (<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a> == <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a>) {
<a name="l00605"></a>00605       <span class="keywordflow">if</span> (!snprintf(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, bufsize, <span class="stringliteral">&quot;ports&quot;</span>))
<a name="l00606"></a>00606          memset(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, 0, 1);
<a name="l00607"></a>00607       <span class="keywordflow">return</span>;
<a name="l00608"></a>00608    }
<a name="l00609"></a>00609 
<a name="l00610"></a>00610    <span class="keywordflow">if</span> ((<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a> &gt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a>) &amp;&amp; (<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a> &lt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a>))
<a name="l00611"></a>00611       spec = (<span class="keyword">struct </span><a class="code" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a> *)<a class="code" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>;
<a name="l00612"></a>00612    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a> &gt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa50f2df70cb915612835a13a49c5fef81">MISDN_GEN_FIRST</a>) &amp;&amp; (<a class="code" href="structmisdn__cfg__spec.html#a1865504fb01a2e4ec328ccb0699f5a36">elem</a> &lt; <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabeb4c50c2d53fffe39ee8c2fcc4cbc80">MISDN_GEN_LAST</a>))
<a name="l00613"></a>00613       spec = (<span class="keyword">struct </span><a class="code" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a> *)<a class="code" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>;
<a name="l00614"></a>00614 
<a name="l00615"></a>00615    <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, spec ? spec[place].<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a> : <span class="stringliteral">&quot;&quot;</span>, bufsize);
<a name="l00616"></a>00616 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af6e72d0cfa09c4ab2c5441db492397df"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_get_next_port" ref="af6e72d0cfa09c4ab2c5441db492397df" args="(int port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int misdn_cfg_get_next_port </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00847">847</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="chan__misdn__config_8h_source.html#l00031">MISDN_CFG_GROUPNAME</a>, <a class="el" href="misdn__config_8c_source.html#l00456">misdn_cfg_lock()</a>, <a class="el" href="misdn__config_8c_source.html#l00461">misdn_cfg_unlock()</a>, and <a class="el" href="app__jack_8c_source.html#l00142">str</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l01925">complete_show_config()</a>, <a class="el" href="chan__misdn_8c_source.html#l01200">handle_cli_misdn_show_config()</a>, <a class="el" href="chan__misdn_8c_source.html#l01582">handle_cli_misdn_show_ports_stats()</a>, <a class="el" href="chan__misdn_8c_source.html#l01552">handle_cli_misdn_show_stacks()</a>, <a class="el" href="chan__misdn_8c_source.html#l05422">load_module()</a>, <a class="el" href="misdn__config_8c_source.html#l00864">misdn_cfg_get_next_port_spin()</a>, <a class="el" href="chan__misdn_8c_source.html#l05663">misdn_check_l2l1()</a>, <a class="el" href="chan__misdn_8c_source.html#l03705">misdn_new()</a>, <a class="el" href="chan__misdn_8c_source.html#l03426">misdn_request()</a>, and <a class="el" href="chan__misdn_8c_source.html#l03682">update_name()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00848"></a>00848 {
<a name="l00849"></a>00849    <span class="keywordtype">int</span> p = -1;
<a name="l00850"></a>00850    <span class="keywordtype">int</span> gn = <a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a>];
<a name="l00851"></a>00851    
<a name="l00852"></a>00852    <a class="code" href="misdn__config_8c.html#a0a5150edaaeab71511aa854c2004b040">misdn_cfg_lock</a>();
<a name="l00853"></a>00853    <span class="keywordflow">for</span> (port++; port &lt;= <a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>; port++) {
<a name="l00854"></a>00854       <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][gn].<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) {
<a name="l00855"></a>00855          p = port;
<a name="l00856"></a>00856          <span class="keywordflow">break</span>;
<a name="l00857"></a>00857       }
<a name="l00858"></a>00858    }
<a name="l00859"></a>00859    <a class="code" href="misdn__config_8c.html#a788f0d601bd6a2f2089b3849b720bc62">misdn_cfg_unlock</a>();
<a name="l00860"></a>00860 
<a name="l00861"></a>00861    <span class="keywordflow">return</span> p;
<a name="l00862"></a>00862 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af9a945b0921e0914c751795dc40af6ea"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_get_next_port_spin" ref="af9a945b0921e0914c751795dc40af6ea" args="(int port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int misdn_cfg_get_next_port_spin </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00864">864</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l00847">misdn_cfg_get_next_port()</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l03426">misdn_request()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00865"></a>00865 {
<a name="l00866"></a>00866    <span class="keywordtype">int</span> p = <a class="code" href="misdn__config_8c.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(port);
<a name="l00867"></a>00867    <span class="keywordflow">return</span> (p &gt; 0) ? p : <a class="code" href="misdn__config_8c.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(0);
<a name="l00868"></a>00868 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5b0f1d6d9689fea5b7eba75176d06cc7"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_get_ports_string" ref="a5b0f1d6d9689fea5b7eba75176d06cc7" args="(char *ports)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void misdn_cfg_get_ports_string </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>ports</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generate a comma separated list of all active ports. </p>

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00716">716</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="chan__misdn__config_8h_source.html#l00031">MISDN_CFG_GROUPNAME</a>, <a class="el" href="misdn__config_8c_source.html#l00456">misdn_cfg_lock()</a>, <a class="el" href="misdn__config_8c_source.html#l00461">misdn_cfg_unlock()</a>, and <a class="el" href="app__jack_8c_source.html#l00142">str</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l05422">load_module()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00717"></a>00717 {
<a name="l00718"></a>00718    <span class="keywordtype">char</span> tmp[16];
<a name="l00719"></a>00719    <span class="keywordtype">int</span> l, i;
<a name="l00720"></a>00720    <span class="keywordtype">int</span> gn = <a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a>];
<a name="l00721"></a>00721 
<a name="l00722"></a>00722    *ports = 0;
<a name="l00723"></a>00723 
<a name="l00724"></a>00724    <a class="code" href="misdn__config_8c.html#a0a5150edaaeab71511aa854c2004b040">misdn_cfg_lock</a>();
<a name="l00725"></a>00725    <span class="keywordflow">for</span> (i = 1; i &lt;= <a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>; i++) {
<a name="l00726"></a>00726       <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[i][gn].<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) {
<a name="l00727"></a>00727          <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a>[i])
<a name="l00728"></a>00728             sprintf(tmp, <span class="stringliteral">&quot;%dptp,&quot;</span>, i);
<a name="l00729"></a>00729          <span class="keywordflow">else</span>
<a name="l00730"></a>00730             sprintf(tmp, <span class="stringliteral">&quot;%d,&quot;</span>, i);
<a name="l00731"></a>00731          strcat(ports, tmp);
<a name="l00732"></a>00732       }
<a name="l00733"></a>00733    }
<a name="l00734"></a>00734    <a class="code" href="misdn__config_8c.html#a788f0d601bd6a2f2089b3849b720bc62">misdn_cfg_unlock</a>();
<a name="l00735"></a>00735 
<a name="l00736"></a>00736    <span class="keywordflow">if</span> ((l = strlen(ports))) {
<a name="l00737"></a>00737       <span class="comment">/* Strip trailing &apos;,&apos; */</span>
<a name="l00738"></a>00738       ports[l-1] = 0;
<a name="l00739"></a>00739    }
<a name="l00740"></a>00740 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aaa71f22ac88cd27d275bf6fbb7648f66"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_init" ref="aaa71f22ac88cd27d275bf6fbb7648f66" args="(int this_max_ports, int reload)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int misdn_cfg_init </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>this_max_ports</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>reload</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l01118">1118</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l00947">_build_general_config()</a>, <a class="el" href="misdn__config_8c_source.html#l00960">_build_port_config()</a>, <a class="el" href="misdn__config_8c_source.html#l00398">_enum_array_map()</a>, <a class="el" href="misdn__config_8c_source.html#l01083">_fill_defaults()</a>, <a class="el" href="misdn__config_8c_source.html#l00508">_free_general_cfg()</a>, <a class="el" href="misdn__config_8c_source.html#l00475">_free_port_cfg()</a>, <a class="el" href="astmm_8h_source.html#l00072">ast_calloc</a>, <a class="el" href="config_8c_source.html#l00613">ast_category_browse()</a>, <a class="el" href="config_8c_source.html#l00827">ast_config_destroy()</a>, <a class="el" href="config_8c_source.html#l02071">ast_config_load2()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="lock_8h_source.html#l01692">ast_mutex_init()</a>, <a class="el" href="config_8c_source.html#l00411">ast_variable_browse()</a>, <a class="el" href="cdr__csv_8c_source.html#l00054">config</a>, <a class="el" href="config_8h_source.html#l00043">CONFIG_FLAG_FILEUNCHANGED</a>, <a class="el" href="config_8h_source.html#l00050">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="config_8h_source.html#l00049">CONFIG_STATUS_FILEUNCHANGED</a>, <a class="el" href="misdn__config_8c_source.html#l00060">global_jbconf</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="misdn__config_8c_source.html#l00456">misdn_cfg_lock()</a>, <a class="el" href="misdn__config_8c_source.html#l00461">misdn_cfg_unlock()</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00109">MISDN_GEN_LAST</a>, <a class="el" href="misdn__config_8c_source.html#l00047">NUM_GEN_ELEMENTS</a>, and <a class="el" href="misdn__config_8c_source.html#l00048">NUM_PORT_ELEMENTS</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l05422">load_module()</a>, and <a class="el" href="misdn__config_8c_source.html#l01097">misdn_cfg_reload()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01119"></a>01119 {
<a name="l01120"></a>01120    <span class="keywordtype">char</span> <a class="code" href="cdr__csv_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>[] = <span class="stringliteral">&quot;misdn.conf&quot;</span>;
<a name="l01121"></a>01121    <span class="keywordtype">char</span> *cat, *p;
<a name="l01122"></a>01122    <span class="keywordtype">int</span> i;
<a name="l01123"></a>01123    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *cfg;
<a name="l01124"></a>01124    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *v;
<a name="l01125"></a>01125    <span class="keyword">struct </span><a class="code" href="structast__flags.html" title="Structure used to handle boolean flags.">ast_flags</a> <a class="code" href="app__rpt_8c.html#a1f57f20c1f46890828791a4827fe8752">config_flags</a> = { <a class="code" href="app__amd_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> ? <a class="code" href="config_8h.html#a2d5492e116eebd5075f247d21fb9db26afa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a> : 0 };
<a name="l01126"></a>01126 
<a name="l01127"></a>01127    <span class="keywordflow">if</span> (!(cfg = <a class="code" href="config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9" title="Load a config file.">ast_config_load2</a>(config, <span class="stringliteral">&quot;chan_misdn&quot;</span>, config_flags)) || cfg == <a class="code" href="config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {
<a name="l01128"></a>01128       <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;missing or invalid file: misdn.conf\n&quot;</span>);
<a name="l01129"></a>01129       <span class="keywordflow">return</span> -1;
<a name="l01130"></a>01130    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfg == <a class="code" href="config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a>)
<a name="l01131"></a>01131       <span class="keywordflow">return</span> 0;
<a name="l01132"></a>01132 
<a name="l01133"></a>01133    <a class="code" href="lock_8h.html#a5dc895fe6e8c089175159fc22e33fc3b">ast_mutex_init</a>(&amp;<a class="code" href="misdn__config_8c.html#a9ef1b52be86dcb4cba28583d8f3feae9">config_mutex</a>);
<a name="l01134"></a>01134 
<a name="l01135"></a>01135    <span class="comment">/* Copy the default jb config over global_jbconf */</span>
<a name="l01136"></a>01136    memcpy(&amp;<a class="code" href="misdn__config_8c.html#abaabcb7f4349cc632dde3af5c6a5e1bd">global_jbconf</a>, &amp;<a class="code" href="misdn__config_8c.html#a2d8d5920e90ccbad7832926becdadb29">default_jbconf</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structast__jb__conf.html" title="General jitterbuffer configuration.">ast_jb_conf</a>));
<a name="l01137"></a>01137 
<a name="l01138"></a>01138    <a class="code" href="misdn__config_8c.html#a0a5150edaaeab71511aa854c2004b040">misdn_cfg_lock</a>();
<a name="l01139"></a>01139 
<a name="l01140"></a>01140    <span class="keywordflow">if</span> (this_max_ports) {
<a name="l01141"></a>01141       <span class="comment">/* this is the first run */</span>
<a name="l01142"></a>01142       <a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> = this_max_ports;
<a name="l01143"></a>01143       <a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a> = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabeb4c50c2d53fffe39ee8c2fcc4cbc80">MISDN_GEN_LAST</a> + 1, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01144"></a>01144       <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a705f2aef7442b96728a1d130c1ea4398">_enum_array_map</a>())
<a name="l01145"></a>01145          <span class="keywordflow">return</span> -1;
<a name="l01146"></a>01146       p = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(1, (<a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1) * <span class="keyword">sizeof</span>(<span class="keyword">union</span> <a class="code" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a> *)
<a name="l01147"></a>01147                      + (<a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1) * <a class="code" href="misdn__config_8c.html#a59d3b992910f474202453df33bd05ca5">NUM_PORT_ELEMENTS</a> * <span class="keyword">sizeof</span>(<span class="keyword">union</span> <a class="code" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a>));
<a name="l01148"></a>01148       <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a> = (<span class="keyword">union </span><a class="code" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a> **)p;
<a name="l01149"></a>01149       p += (<a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1) * <span class="keyword">sizeof</span>(<span class="keyword">union</span> <a class="code" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a> *);
<a name="l01150"></a>01150       <span class="keywordflow">for</span> (i = 0; i &lt;= <a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>; ++i) {
<a name="l01151"></a>01151          <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[i] = (<span class="keyword">union </span><a class="code" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a> *)p;
<a name="l01152"></a>01152          p += <a class="code" href="misdn__config_8c.html#a59d3b992910f474202453df33bd05ca5">NUM_PORT_ELEMENTS</a> * <span class="keyword">sizeof</span>(<span class="keyword">union </span><a class="code" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a>);
<a name="l01153"></a>01153       }
<a name="l01154"></a>01154       <a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a> = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(1, <span class="keyword">sizeof</span>(<span class="keyword">union</span> <a class="code" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a> *) * <a class="code" href="misdn__config_8c.html#a83493b27f098faa6746d734d0560a3e7">NUM_GEN_ELEMENTS</a>);
<a name="l01155"></a>01155       <a class="code" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a> = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(<a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01156"></a>01156    }
<a name="l01157"></a>01157    <span class="keywordflow">else</span> {
<a name="l01158"></a>01158       <span class="comment">/* misdn reload */</span>
<a name="l01159"></a>01159       <a class="code" href="misdn__config_8c.html#a023bb61b2e014d422690936565fcb69e">_free_port_cfg</a>();
<a name="l01160"></a>01160       <a class="code" href="misdn__config_8c.html#a259567e54b2d303629277af2e67c6bfa">_free_general_cfg</a>();
<a name="l01161"></a>01161       memset(<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0], 0, <a class="code" href="misdn__config_8c.html#a59d3b992910f474202453df33bd05ca5">NUM_PORT_ELEMENTS</a> * <span class="keyword">sizeof</span>(<span class="keyword">union</span> <a class="code" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a>) * (<a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1));
<a name="l01162"></a>01162       memset(<a class="code" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a>, 0, <span class="keyword">sizeof</span>(<span class="keyword">union</span> <a class="code" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a> *) * <a class="code" href="misdn__config_8c.html#a83493b27f098faa6746d734d0560a3e7">NUM_GEN_ELEMENTS</a>);
<a name="l01163"></a>01163       memset(<a class="code" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (<a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1));
<a name="l01164"></a>01164    }
<a name="l01165"></a>01165 
<a name="l01166"></a>01166    cat = <a class="code" href="config_8h.html#a611776300f941a63266cb220ac62b4db" title="Goes through categories.">ast_category_browse</a>(cfg, NULL);
<a name="l01167"></a>01167 
<a name="l01168"></a>01168    <span class="keywordflow">while</span>(cat) {
<a name="l01169"></a>01169       v = <a class="code" href="config_8h.html#a935ccfa153100ddd320c8918bd6e941b" title="Goes through variables Somewhat similar in intent as the ast_category_browse. List...">ast_variable_browse</a>(cfg, cat);
<a name="l01170"></a>01170       <span class="keywordflow">if</span> (!strcasecmp(cat, <span class="stringliteral">&quot;general&quot;</span>)) {
<a name="l01171"></a>01171          <a class="code" href="misdn__config_8c.html#a807a1c4e4bed91c39a20e320dcb6947d">_build_general_config</a>(v);
<a name="l01172"></a>01172       } <span class="keywordflow">else</span> {
<a name="l01173"></a>01173          <a class="code" href="misdn__config_8c.html#ac54122236fbe57164ee22e04c8a546f3">_build_port_config</a>(v, cat);
<a name="l01174"></a>01174       }
<a name="l01175"></a>01175       cat = <a class="code" href="config_8h.html#a611776300f941a63266cb220ac62b4db" title="Goes through categories.">ast_category_browse</a>(cfg, cat);
<a name="l01176"></a>01176    }
<a name="l01177"></a>01177 
<a name="l01178"></a>01178    <a class="code" href="misdn__config_8c.html#a92f772f3a8fca25a32f035720398cda2">_fill_defaults</a>();
<a name="l01179"></a>01179 
<a name="l01180"></a>01180    <a class="code" href="misdn__config_8c.html#a788f0d601bd6a2f2089b3849b720bc62">misdn_cfg_unlock</a>();
<a name="l01181"></a>01181    <a class="code" href="config_8h.html#a710f0b2a897849572b77dd0854b8dc03" title="Destroys a config.">ast_config_destroy</a>(cfg);
<a name="l01182"></a>01182 
<a name="l01183"></a>01183    <span class="keywordflow">return</span> 0;
<a name="l01184"></a>01184 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abd7fda190c06742b1b32025dfa1776b5"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_is_group_method" ref="abd7fda190c06742b1b32025dfa1776b5" args="(char *group, enum misdn_cfg_method meth)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int misdn_cfg_is_group_method </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="chan__misdn__config_8h.html#a9ce7b5b14a6c33d74b03a70feab95c92">misdn_cfg_method</a>&nbsp;</td>
          <td class="paramname"> <em>meth</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00681">681</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="chan__misdn__config_8h_source.html#l00114">METHOD_ROUND_ROBIN</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00113">METHOD_STANDARD</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00115">METHOD_STANDARD_DEC</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00031">MISDN_CFG_GROUPNAME</a>, <a class="el" href="misdn__config_8c_source.html#l00456">misdn_cfg_lock()</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00045">MISDN_CFG_METHOD</a>, <a class="el" href="misdn__config_8c_source.html#l00461">misdn_cfg_unlock()</a>, <a class="el" href="app__jack_8c_source.html#l00142">str</a>, and <a class="el" href="misdn__config_8c_source.html#l00077">misdn_cfg_pt::str</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l03426">misdn_request()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00682"></a>00682 {
<a name="l00683"></a>00683    <span class="keywordtype">int</span> i, re = 0;
<a name="l00684"></a>00684    <span class="keywordtype">char</span> *method ;
<a name="l00685"></a>00685 
<a name="l00686"></a>00686    <a class="code" href="misdn__config_8c.html#a0a5150edaaeab71511aa854c2004b040">misdn_cfg_lock</a>();
<a name="l00687"></a>00687 
<a name="l00688"></a>00688    method = <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][<a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa987f6cab53c31e4d59eb76f485d7cf14">MISDN_CFG_METHOD</a>]].<a class="code" href="unionmisdn__cfg__pt.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>;
<a name="l00689"></a>00689 
<a name="l00690"></a>00690    <span class="keywordflow">for</span> (i = 1; i &lt;= <a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>; i++) {
<a name="l00691"></a>00691       <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[i] &amp;&amp; <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[i][<a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a>]].<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) {
<a name="l00692"></a>00692          <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[i][<a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a>]].str, <a class="code" href="structgroup.html">group</a>))
<a name="l00693"></a>00693             method = (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[i][<a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa987f6cab53c31e4d59eb76f485d7cf14">MISDN_CFG_METHOD</a>]].<a class="code" href="unionmisdn__cfg__pt.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> ? 
<a name="l00694"></a>00694                     <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[i][<a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa987f6cab53c31e4d59eb76f485d7cf14">MISDN_CFG_METHOD</a>]].<a class="code" href="unionmisdn__cfg__pt.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> : <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][<a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa987f6cab53c31e4d59eb76f485d7cf14">MISDN_CFG_METHOD</a>]].<a class="code" href="unionmisdn__cfg__pt.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);
<a name="l00695"></a>00695       }
<a name="l00696"></a>00696    }
<a name="l00697"></a>00697 
<a name="l00698"></a>00698    <span class="keywordflow">if</span> (method) {
<a name="l00699"></a>00699       <span class="keywordflow">switch</span> (meth) {
<a name="l00700"></a>00700       <span class="keywordflow">case</span> <a class="code" href="chan__misdn__config_8h.html#a9ce7b5b14a6c33d74b03a70feab95c92a9b70807fba6cc7c0cc71315e8780494a">METHOD_STANDARD</a>:      re = !strcasecmp(method, <span class="stringliteral">&quot;standard&quot;</span>);
<a name="l00701"></a>00701                            <span class="keywordflow">break</span>;
<a name="l00702"></a>00702       <span class="keywordflow">case</span> <a class="code" href="chan__misdn__config_8h.html#a9ce7b5b14a6c33d74b03a70feab95c92aae039733b86f215ef5e8e0f7472e178b">METHOD_ROUND_ROBIN</a>:   re = !strcasecmp(method, <span class="stringliteral">&quot;round_robin&quot;</span>);
<a name="l00703"></a>00703                            <span class="keywordflow">break</span>;
<a name="l00704"></a>00704       <span class="keywordflow">case</span> <a class="code" href="chan__misdn__config_8h.html#a9ce7b5b14a6c33d74b03a70feab95c92abe93bc1ee9b0980c424e3442874ee818">METHOD_STANDARD_DEC</a>:  re = !strcasecmp(method, <span class="stringliteral">&quot;standard_dec&quot;</span>);
<a name="l00705"></a>00705                            <span class="keywordflow">break</span>;
<a name="l00706"></a>00706       }
<a name="l00707"></a>00707    }
<a name="l00708"></a>00708    <a class="code" href="misdn__config_8c.html#a788f0d601bd6a2f2089b3849b720bc62">misdn_cfg_unlock</a>();
<a name="l00709"></a>00709 
<a name="l00710"></a>00710    <span class="keywordflow">return</span> re;
<a name="l00711"></a>00711 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1ff611ca63fed235f7cb668f96f94ed5"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_is_msn_valid" ref="a1ff611ca63fed235f7cb668f96f94ed5" args="(int port, char *msn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int misdn_cfg_is_msn_valid </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>msn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00649">649</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="pbx_8c_source.html#l02402">ast_extension_match()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="misdn__config_8c_source.html#l00674">misdn_cfg_is_port_valid()</a>, <a class="el" href="misdn__config_8c_source.html#l00456">misdn_cfg_lock()</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00086">MISDN_CFG_MSNS</a>, <a class="el" href="misdn__config_8c_source.html#l00461">misdn_cfg_unlock()</a>, <a class="el" href="misdn__config_8c_source.html#l00079">misdn_cfg_pt::ml</a>, <a class="el" href="misdn__config_8c_source.html#l00072">msn_list::msn</a>, and <a class="el" href="misdn__config_8c_source.html#l00073">msn_list::next</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l04379">cb_events()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00650"></a>00650 {
<a name="l00651"></a>00651    <span class="keywordtype">int</span> re = 0;
<a name="l00652"></a>00652    <span class="keyword">struct </span><a class="code" href="structmsn__list.html">msn_list</a> *iter;
<a name="l00653"></a>00653 
<a name="l00654"></a>00654    <span class="keywordflow">if</span> (!<a class="code" href="misdn__config_8c.html#ab08e8e7e093f022d1a156fe2d6ebdf45">misdn_cfg_is_port_valid</a>(port)) {
<a name="l00655"></a>00655       <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid call to misdn_cfg_is_msn_valid! Port number %d is not valid.\n&quot;</span>, port);
<a name="l00656"></a>00656       <span class="keywordflow">return</span> 0;
<a name="l00657"></a>00657    }
<a name="l00658"></a>00658 
<a name="l00659"></a>00659    <a class="code" href="misdn__config_8c.html#a0a5150edaaeab71511aa854c2004b040">misdn_cfg_lock</a>();
<a name="l00660"></a>00660    <span class="keywordflow">if</span> (<a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][<a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aad27ef0e52b8b1967ba96cadc8994bb86">MISDN_CFG_MSNS</a>]].ml)
<a name="l00661"></a>00661       iter = <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][<a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aad27ef0e52b8b1967ba96cadc8994bb86">MISDN_CFG_MSNS</a>]].<a class="code" href="unionmisdn__cfg__pt.html#abf455f77ca59efd9c05449072b886e4e">ml</a>;
<a name="l00662"></a>00662    <span class="keywordflow">else</span>
<a name="l00663"></a>00663       iter = <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[0][<a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aad27ef0e52b8b1967ba96cadc8994bb86">MISDN_CFG_MSNS</a>]].<a class="code" href="unionmisdn__cfg__pt.html#abf455f77ca59efd9c05449072b886e4e">ml</a>;
<a name="l00664"></a>00664    <span class="keywordflow">for</span> (; iter; iter = iter-&gt;<a class="code" href="structmsn__list.html#a59d10cdc7a1bafbb6761bd9e05ceb16e">next</a>) 
<a name="l00665"></a>00665       <span class="keywordflow">if</span> (*(iter-&gt;<a class="code" href="structmsn__list.html#a990f0b7206ba433fb3a7a8bfce56aea1">msn</a>) == <span class="charliteral">&apos;*&apos;</span> || <a class="code" href="pbx_8h.html#a94cf2f099462a906620b5566871af797" title="Determine if a given extension matches a given pattern (in NXX format).">ast_extension_match</a>(iter-&gt;<a class="code" href="structmsn__list.html#a990f0b7206ba433fb3a7a8bfce56aea1">msn</a>, <a class="code" href="structmsn__list.html#a990f0b7206ba433fb3a7a8bfce56aea1">msn</a>)) {
<a name="l00666"></a>00666          re = 1;
<a name="l00667"></a>00667          <span class="keywordflow">break</span>;
<a name="l00668"></a>00668       }
<a name="l00669"></a>00669    <a class="code" href="misdn__config_8c.html#a788f0d601bd6a2f2089b3849b720bc62">misdn_cfg_unlock</a>();
<a name="l00670"></a>00670 
<a name="l00671"></a>00671    <span class="keywordflow">return</span> re;
<a name="l00672"></a>00672 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab08e8e7e093f022d1a156fe2d6ebdf45"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_is_port_valid" ref="ab08e8e7e093f022d1a156fe2d6ebdf45" args="(int port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int misdn_cfg_is_port_valid </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00674">674</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="chan__misdn__config_8h_source.html#l00031">MISDN_CFG_GROUPNAME</a>, and <a class="el" href="app__jack_8c_source.html#l00142">str</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l01200">handle_cli_misdn_show_config()</a>, <a class="el" href="misdn__config_8c_source.html#l00517">misdn_cfg_get()</a>, <a class="el" href="misdn__config_8c_source.html#l00742">misdn_cfg_get_config_string()</a>, <a class="el" href="misdn__config_8c_source.html#l00649">misdn_cfg_is_msn_valid()</a>, and <a class="el" href="misdn__config_8c_source.html#l01028">misdn_cfg_update_ptp()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00675"></a>00675 {
<a name="l00676"></a>00676    <span class="keywordtype">int</span> gn = <a class="code" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>[<a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a>];
<a name="l00677"></a>00677 
<a name="l00678"></a>00678    <span class="keywordflow">return</span> (port &gt;= 1 &amp;&amp; port &lt;= <a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> &amp;&amp; <a class="code" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a>[port][gn].<a class="code" href="app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);
<a name="l00679"></a>00679 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0a5150edaaeab71511aa854c2004b040"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_lock" ref="a0a5150edaaeab71511aa854c2004b040" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_cfg_lock </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00456">456</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="lock_8h_source.html#l01717">ast_mutex_lock()</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l01102">misdn_cfg_destroy()</a>, <a class="el" href="misdn__config_8c_source.html#l00517">misdn_cfg_get()</a>, <a class="el" href="misdn__config_8c_source.html#l00742">misdn_cfg_get_config_string()</a>, <a class="el" href="misdn__config_8c_source.html#l00847">misdn_cfg_get_next_port()</a>, <a class="el" href="misdn__config_8c_source.html#l00716">misdn_cfg_get_ports_string()</a>, <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>, <a class="el" href="misdn__config_8c_source.html#l00681">misdn_cfg_is_group_method()</a>, <a class="el" href="misdn__config_8c_source.html#l00649">misdn_cfg_is_msn_valid()</a>, and <a class="el" href="misdn__config_8c_source.html#l01028">misdn_cfg_update_ptp()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00457"></a>00457 {
<a name="l00458"></a>00458    <a class="code" href="lock_8h.html#ad941566de4050aa7358493af94d2ba4d">ast_mutex_lock</a>(&amp;<a class="code" href="misdn__config_8c.html#a9ef1b52be86dcb4cba28583d8f3feae9">config_mutex</a>);
<a name="l00459"></a>00459 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af82466ea24146caeace6cdd5d7aba315"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_reload" ref="af82466ea24146caeace6cdd5d7aba315" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void misdn_cfg_reload </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l01097">1097</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l01331">reload_config()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01098"></a>01098 {
<a name="l01099"></a>01099    <a class="code" href="misdn__config_8c.html#aaa71f22ac88cd27d275bf6fbb7648f66">misdn_cfg_init</a>(0, 1);
<a name="l01100"></a>01100 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a788f0d601bd6a2f2089b3849b720bc62"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_unlock" ref="a788f0d601bd6a2f2089b3849b720bc62" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_cfg_unlock </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00461">461</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="lock_8h_source.html#l01707">ast_mutex_unlock()</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l01102">misdn_cfg_destroy()</a>, <a class="el" href="misdn__config_8c_source.html#l00517">misdn_cfg_get()</a>, <a class="el" href="misdn__config_8c_source.html#l00742">misdn_cfg_get_config_string()</a>, <a class="el" href="misdn__config_8c_source.html#l00847">misdn_cfg_get_next_port()</a>, <a class="el" href="misdn__config_8c_source.html#l00716">misdn_cfg_get_ports_string()</a>, <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>, <a class="el" href="misdn__config_8c_source.html#l00681">misdn_cfg_is_group_method()</a>, <a class="el" href="misdn__config_8c_source.html#l00649">misdn_cfg_is_msn_valid()</a>, and <a class="el" href="misdn__config_8c_source.html#l01028">misdn_cfg_update_ptp()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00462"></a>00462 {
<a name="l00463"></a>00463    <a class="code" href="lock_8h.html#aa9b39f0e22f44a7e7f587d4252e41a0b">ast_mutex_unlock</a>(&amp;<a class="code" href="misdn__config_8c.html#a9ef1b52be86dcb4cba28583d8f3feae9">config_mutex</a>);
<a name="l00464"></a>00464 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac2740a8103bd868c78d5f7f6c0985d6d"></a><!-- doxytag: member="misdn_config.c::misdn_cfg_update_ptp" ref="ac2740a8103bd868c78d5f7f6c0985d6d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void misdn_cfg_update_ptp </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l01028">1028</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="strings_8h_source.html#l00063">ast_strlen_zero()</a>, <a class="el" href="chan__misdn__config_8h_source.html#l00025">BUFFERSIZE</a>, <a class="el" href="private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="misdn__config_8c_source.html#l00517">misdn_cfg_get()</a>, <a class="el" href="misdn__config_8c_source.html#l00674">misdn_cfg_is_port_valid()</a>, <a class="el" href="misdn__config_8c_source.html#l00456">misdn_cfg_lock()</a>, <a class="el" href="misdn__config_8c_source.html#l00461">misdn_cfg_unlock()</a>, and <a class="el" href="chan__misdn__config_8h_source.html#l00096">MISDN_GEN_MISDN_INIT</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l05422">load_module()</a>, and <a class="el" href="chan__misdn_8c_source.html#l01331">reload_config()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01029"></a>01029 {
<a name="l01030"></a>01030 <span class="preprocessor">#ifndef MISDN_1_2</span>
<a name="l01031"></a>01031 <span class="preprocessor"></span>   <span class="keywordtype">char</span> misdn_init[<a class="code" href="chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>];
<a name="l01032"></a>01032    <span class="keywordtype">char</span> line[<a class="code" href="chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>];
<a name="l01033"></a>01033    FILE *fp;
<a name="l01034"></a>01034    <span class="keywordtype">char</span> *tok, *p, *end;
<a name="l01035"></a>01035    <span class="keywordtype">int</span> port;
<a name="l01036"></a>01036 
<a name="l01037"></a>01037    <a class="code" href="misdn__config_8c.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(0, <a class="code" href="chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e4f8d28e6bf873400924bb0161807c9">MISDN_GEN_MISDN_INIT</a>, &amp;misdn_init, <span class="keyword">sizeof</span>(misdn_init));
<a name="l01038"></a>01038 
<a name="l01039"></a>01039    <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(misdn_init)) {
<a name="l01040"></a>01040       fp = fopen(misdn_init, <span class="stringliteral">&quot;r&quot;</span>);
<a name="l01041"></a>01041       <span class="keywordflow">if</span> (fp) {
<a name="l01042"></a>01042          <span class="keywordflow">while</span>(fgets(line, <span class="keyword">sizeof</span>(line), fp)) {
<a name="l01043"></a>01043             <span class="keywordflow">if</span> (!strncmp(line, <span class="stringliteral">&quot;nt_ptp&quot;</span>, 6)) {
<a name="l01044"></a>01044                <span class="keywordflow">for</span> (tok = strtok_r(line,<span class="stringliteral">&quot;,=&quot;</span>, &amp;p);
<a name="l01045"></a>01045                    tok;
<a name="l01046"></a>01046                    tok = strtok_r(NULL,<span class="stringliteral">&quot;,=&quot;</span>, &amp;p)) {
<a name="l01047"></a>01047                   port = strtol(tok, &amp;end, 10);
<a name="l01048"></a>01048                   <span class="keywordflow">if</span> (end != tok &amp;&amp; <a class="code" href="misdn__config_8c.html#ab08e8e7e093f022d1a156fe2d6ebdf45">misdn_cfg_is_port_valid</a>(port)) {
<a name="l01049"></a>01049                      <a class="code" href="misdn__config_8c.html#a0a5150edaaeab71511aa854c2004b040">misdn_cfg_lock</a>();
<a name="l01050"></a>01050                      <a class="code" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a>[port] = 1;
<a name="l01051"></a>01051                      <a class="code" href="misdn__config_8c.html#a788f0d601bd6a2f2089b3849b720bc62">misdn_cfg_unlock</a>();
<a name="l01052"></a>01052                   }
<a name="l01053"></a>01053                }
<a name="l01054"></a>01054             }
<a name="l01055"></a>01055          }
<a name="l01056"></a>01056          fclose(fp);
<a name="l01057"></a>01057       } <span class="keywordflow">else</span> {
<a name="l01058"></a>01058          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,<span class="stringliteral">&quot;Couldn&apos;t open %s: %s\n&quot;</span>, misdn_init, strerror(errno));
<a name="l01059"></a>01059       }
<a name="l01060"></a>01060    }
<a name="l01061"></a>01061 <span class="preprocessor">#else</span>
<a name="l01062"></a>01062 <span class="preprocessor"></span>   <span class="keywordtype">int</span> i;
<a name="l01063"></a>01063    <span class="keywordtype">int</span> proto;
<a name="l01064"></a>01064    <span class="keywordtype">char</span> filename[128];
<a name="l01065"></a>01065    FILE *fp;
<a name="l01066"></a>01066 
<a name="l01067"></a>01067    <span class="keywordflow">for</span> (i = 1; i &lt;= <a class="code" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>; ++i) {
<a name="l01068"></a>01068       snprintf(filename, <span class="keyword">sizeof</span>(filename), <span class="stringliteral">&quot;/sys/class/mISDN-stacks/st-%08x/protocol&quot;</span>, i &lt;&lt; 8);
<a name="l01069"></a>01069       fp = fopen(filename, <span class="stringliteral">&quot;r&quot;</span>);
<a name="l01070"></a>01070       <span class="keywordflow">if</span> (!fp) {
<a name="l01071"></a>01071          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not open %s: %s\n&quot;</span>, filename, strerror(errno));
<a name="l01072"></a>01072          <span class="keywordflow">continue</span>;
<a name="l01073"></a>01073       }
<a name="l01074"></a>01074       <span class="keywordflow">if</span> (fscanf(fp, <span class="stringliteral">&quot;0x%08x&quot;</span>, &amp;proto) != 1)
<a name="l01075"></a>01075          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not parse contents of %s!\n&quot;</span>, filename);
<a name="l01076"></a>01076       <span class="keywordflow">else</span>
<a name="l01077"></a>01077          <a class="code" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a>[i] = proto &amp; 1&lt;&lt;5 ? 1 : 0;
<a name="l01078"></a>01078       fclose(fp);
<a name="l01079"></a>01079    }
<a name="l01080"></a>01080 <span class="preprocessor">#endif</span>
<a name="l01081"></a>01081 <span class="preprocessor"></span>}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a872080169b471c05fe0c59438346a2e8"></a><!-- doxytag: member="misdn_config.c::misdn_get_global_jbconf" ref="a872080169b471c05fe0c59438346a2e8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a>* misdn_get_global_jbconf </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l01186">1186</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>References <a class="el" href="misdn__config_8c_source.html#l00060">global_jbconf</a>.</p>

<p>Referenced by <a class="el" href="chan__misdn_8c_source.html#l03705">misdn_new()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01186"></a>01186                                               {
<a name="l01187"></a>01187    <span class="keywordflow">return</span> &amp;<a class="code" href="misdn__config_8c.html#abaabcb7f4349cc632dde3af5c6a5e1bd">global_jbconf</a>;
<a name="l01188"></a>01188 }
</pre></div></p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a9ef1b52be86dcb4cba28583d8f3feae9"></a><!-- doxytag: member="misdn_config.c::config_mutex" ref="a9ef1b52be86dcb4cba28583d8f3feae9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lock_8h.html#a2d9118a2a8939f115eea771bce3a52f2">ast_mutex_t</a> <a class="el" href="misdn__config_8c.html#a9ef1b52be86dcb4cba28583d8f3feae9">config_mutex</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00391">391</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2d8d5920e90ccbad7832926becdadb29"></a><!-- doxytag: member="misdn_config.c::default_jbconf" ref="a2d8d5920e90ccbad7832926becdadb29" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> <a class="el" href="misdn__config_8c.html#a2d8d5920e90ccbad7832926becdadb29">default_jbconf</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Global jitterbuffer configuration - by default, jb is disabled </p>

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00051">51</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad07677134e8a6de0c88b0f168ad85a32"></a><!-- doxytag: member="misdn_config.c::gen_spec" ref="ad07677134e8a6de0c88b0f168ad85a32" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a> <a class="el" href="misdn__config_8c.html#ad07677134e8a6de0c88b0f168ad85a32">gen_spec</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00342">342</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

</div>
</div>
<a class="anchor" id="a909c469ee436b5ef84fbcbef82968d90"></a><!-- doxytag: member="misdn_config.c::general_cfg" ref="a909c469ee436b5ef84fbcbef82968d90" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union <a class="el" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a>* <a class="el" href="misdn__config_8c.html#a909c469ee436b5ef84fbcbef82968d90">general_cfg</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00385">385</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

</div>
</div>
<a class="anchor" id="abaabcb7f4349cc632dde3af5c6a5e1bd"></a><!-- doxytag: member="misdn_config.c::global_jbconf" ref="abaabcb7f4349cc632dde3af5c6a5e1bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> <a class="el" href="misdn__config_8c.html#abaabcb7f4349cc632dde3af5c6a5e1bd">global_jbconf</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00060">60</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>Referenced by <a class="el" href="misdn__config_8c_source.html#l00947">_build_general_config()</a>, <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>, and <a class="el" href="misdn__config_8c_source.html#l01186">misdn_get_global_jbconf()</a>.</p>

</div>
</div>
<a class="anchor" id="a92a7399cbb76f6349df98d9432ad52c6"></a><!-- doxytag: member="misdn_config.c::map" ref="a92a7399cbb76f6349df98d9432ad52c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* <a class="el" href="misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00389">389</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>Referenced by <a class="el" href="config_8c_source.html#l01846">append_mapping()</a>, <a class="el" href="pbx__dundi_8c_source.html#l04216">build_mapping()</a>, <a class="el" href="config_8c_source.html#l01831">clear_config_maps()</a>, <a class="el" href="pbx__dundi_8c_source.html#l02814">dundi_show_mappings()</a>, <a class="el" href="config_8c_source.html#l01992">find_engine()</a>, <a class="el" href="config_8c_source.html#l02427">handle_cli_core_show_config_mappings()</a>, <a class="el" href="app__voicemail_8c_source.html#l03681">last_message_index()</a>, <a class="el" href="pbx__dundi_8c_source.html#l04134">mark_mappings()</a>, and <a class="el" href="pbx__dundi_8c_source.html#l04186">prune_mappings()</a>.</p>

</div>
</div>
<a class="anchor" id="a24bb5f2898b28cecc69c86bb429f7517"></a><!-- doxytag: member="misdn_config.c::max_ports" ref="a24bb5f2898b28cecc69c86bb429f7517" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="misdn__config_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00383">383</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3b0333e64170b22ed99bddf9311f515d"></a><!-- doxytag: member="misdn_config.c::port_cfg" ref="a3b0333e64170b22ed99bddf9311f515d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union <a class="el" href="unionmisdn__cfg__pt.html">misdn_cfg_pt</a>** <a class="el" href="misdn__config_8c.html#a3b0333e64170b22ed99bddf9311f515d">port_cfg</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00381">381</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab39610cf57f36b653b2f73c7a2f44175"></a><!-- doxytag: member="misdn_config.c::port_spec" ref="ab39610cf57f36b653b2f73c7a2f44175" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmisdn__cfg__spec.html">misdn_cfg_spec</a> <a class="el" href="misdn__config_8c.html#ab39610cf57f36b653b2f73c7a2f44175">port_spec</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00097">97</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0e04b70145d8bfed373b2341bffb78b8"></a><!-- doxytag: member="misdn_config.c::ports_description" ref="a0e04b70145d8bfed373b2341bffb78b8" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="misdn__config_8c.html#a0e04b70145d8bfed373b2341bffb78b8">ports_description</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
   <span class="stringliteral">&quot;Define your ports, e.g. 1,2 (depends on mISDN-driver loading order).&quot;</span>
</pre></div>
<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00094">94</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8811c37f1bf155dadba8ae3dfb0fdfee"></a><!-- doxytag: member="misdn_config.c::ptp" ref="a8811c37f1bf155dadba8ae3dfb0fdfee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* <a class="el" href="misdn__config_8c.html#a8811c37f1bf155dadba8ae3dfb0fdfee">ptp</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="misdn__config_8c_source.html#l00387">387</a> of file <a class="el" href="misdn__config_8c_source.html">misdn_config.c</a>.</p>

<p>Referenced by <a class="el" href="isdn__lib_8c_source.html#l04102">misdn_lib_init()</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:22:23 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
