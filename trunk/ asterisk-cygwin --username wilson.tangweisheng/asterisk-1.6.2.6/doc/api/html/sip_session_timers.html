<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:23:35 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="sip_session_timers">SIP Session Timers in Asterisk Chan_sip </a></h1><p>The SIP Session-Timers is an <a class="el" href="structextension.html">extension</a> of the SIP protocol that allows end-points and proxies to refresh a session periodically. The <a class="el" href="structsessions.html">sessions</a> are kept alive by sending a RE-INVITE or UPDATE request at a negotiated interval. If a session refresh fails then all the entities that support Session- Timers clear their internal session <a class="el" href="structstate.html">state</a>. In addition, UAs generate a BYE request in order to clear the <a class="el" href="structstate.html">state</a> in the proxies and the remote UA (this is done for the benefit of SIP entities in the path that do not support Session-Timers).</p>
<p>The Session-Timers can be configured on a system-wide, per-user, or per-peer basis. The peruser/ per-peer settings override the global settings. The following new parameters have been added to the sip.conf file. session-timers=["accept", "originate", "refuse"] session-expires=[integer] session-minse=[integer] session-refresher=["uas", "uac"]</p>
<p>The session-timers parameter in sip.conf defines the mode of operation of SIP session-timers feature in Asterisk. The Asterisk can be configured in one of the following three modes:</p>
<p>1. Accept :: In the "accept" mode, the Asterisk server honors session-timers <a class="el" href="structrequests.html">requests</a> made by remote end-points. A remote end-point can request Asterisk to engage session-timers by either sending it an INVITE request with a "Supported: timer" header in it or by responding to Asterisk's INVITE with a 200 OK that contains Session-Expires: header in it. In this mode, the Asterisk server does not request session-timers from remote end-points. This is the default mode. 2. Originate :: In the "originate" mode, the Asterisk server <a class="el" href="structrequests.html">requests</a> the remote end-points to activate session-timers in addition to honoring such <a class="el" href="structrequests.html">requests</a> made by the remote end-pints. In order to get as much protection as possible against hanging SIP <a class="el" href="structchannels.html" title="the list of channels we have. Note that the lock for this list is used for both the...">channels</a> due to network or end-point failures, Asterisk resends periodic re-INVITEs even if a remote end-point does not support the session-timers feature. 3. Refuse :: In the "refuse" mode, Asterisk acts as if it does not support session- timers for inbound or outbound <a class="el" href="structrequests.html">requests</a>. If a remote end-point <a class="el" href="structrequests.html">requests</a> session-timers in a dialog, then Asterisk ignores that request unless it's noted as a requirement (Require: header), in which case the INVITE is rejected with a 420 Bad Extension response. </p>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:23:35 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
