<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:18:40 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_1ab815038f534adda65c8b4ae4993449.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_16d825f1fa9ecca2e70b1a8d9256d0e6.html">asterisk</a>
  </div>
</div>
<div class="contents">
<h1>frame.h</h1><a href="frame_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Asterisk -- An open source telephony toolkit.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 1999 - 2005, Digium, Inc.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Mark Spencer &lt;markster@digium.com&gt;</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * See http://www.asterisk.org for more information about</span>
<a name="l00009"></a>00009 <span class="comment"> * the Asterisk project. Please do not directly contact</span>
<a name="l00010"></a>00010 <span class="comment"> * any of the maintainers of this project for assistance;</span>
<a name="l00011"></a>00011 <span class="comment"> * the project provides a web site, mailing lists and IRC</span>
<a name="l00012"></a>00012 <span class="comment"> * channels for your use.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * This program is free software, distributed under the terms of</span>
<a name="l00015"></a>00015 <span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span>
<a name="l00016"></a>00016 <span class="comment"> * at the top of the source tree.</span>
<a name="l00017"></a>00017 <span class="comment"> */</span>
<a name="l00018"></a>00018 <span class="comment"></span>
<a name="l00019"></a>00019 <span class="comment">/*! \file</span>
<a name="l00020"></a>00020 <span class="comment"> * \brief Asterisk internal frame definitions.</span>
<a name="l00021"></a>00021 <span class="comment"> * \arg For an explanation of frames, see \ref Def_Frame</span>
<a name="l00022"></a>00022 <span class="comment"> * \arg Frames are send of Asterisk channels, see \ref Def_Channel</span>
<a name="l00023"></a>00023 <span class="comment"> */</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="preprocessor">#ifndef _ASTERISK_FRAME_H</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">#define _ASTERISK_FRAME_H</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span>
<a name="l00028"></a>00028 <span class="preprocessor">#if defined(__cplusplus) || defined(c_plusplus)</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00030"></a>00030 <span class="preprocessor">#endif</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;sys/time.h&gt;</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="endian_8h.html" title="Asterisk architecture endianess compatibility definitions.">asterisk/endian.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="linkedlists_8h.html" title="A set of macros to manage forward-linked lists.">asterisk/linkedlists.h</a>&quot;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="structast__codec__pref.html">00037</a> <span class="keyword">struct </span><a class="code" href="structast__codec__pref.html">ast_codec_pref</a> {
<a name="l00038"></a><a class="code" href="structast__codec__pref.html#af2068e452bdf5eeafcda00c8c06b5cc0">00038</a>    <span class="keywordtype">char</span> <a class="code" href="structast__codec__pref.html#af2068e452bdf5eeafcda00c8c06b5cc0">order</a>[32];
<a name="l00039"></a><a class="code" href="structast__codec__pref.html#a2b0514c4f4584036696b7b6e83985906">00039</a>    <span class="keywordtype">char</span> <a class="code" href="structast__codec__pref.html#a2b0514c4f4584036696b7b6e83985906">framing</a>[32];
<a name="l00040"></a>00040 };
<a name="l00041"></a>00041 <span class="comment"></span>
<a name="l00042"></a>00042 <span class="comment">/*! \page Def_Frame AST Multimedia and signalling frames</span>
<a name="l00043"></a>00043 <span class="comment">   \section Def_AstFrame What is an ast_frame ?</span>
<a name="l00044"></a>00044 <span class="comment">   A frame of data read used to communicate between </span>
<a name="l00045"></a>00045 <span class="comment">   between channels and applications.</span>
<a name="l00046"></a>00046 <span class="comment">   Frames are divided into frame types and subclasses.</span>
<a name="l00047"></a>00047 <span class="comment"></span>
<a name="l00048"></a>00048 <span class="comment">   \par Frame types </span>
<a name="l00049"></a>00049 <span class="comment">   \arg \b VOICE: Voice data, subclass is codec (AST_FORMAT_*)</span>
<a name="l00050"></a>00050 <span class="comment">   \arg \b VIDEO: Video data, subclass is codec (AST_FORMAT_*)</span>
<a name="l00051"></a>00051 <span class="comment">   \arg \b DTMF:  A DTMF digit, subclass is the digit</span>
<a name="l00052"></a>00052 <span class="comment">   \arg \b IMAGE: Image transport, mostly used in IAX</span>
<a name="l00053"></a>00053 <span class="comment">   \arg \b TEXT:  Text messages and character by character (real time text)</span>
<a name="l00054"></a>00054 <span class="comment">   \arg \b HTML:  URL&apos;s and web pages</span>
<a name="l00055"></a>00055 <span class="comment">   \arg \b MODEM: Modulated data encodings, such as T.38 and V.150</span>
<a name="l00056"></a>00056 <span class="comment">   \arg \b IAX:   Private frame type for the IAX protocol</span>
<a name="l00057"></a>00057 <span class="comment">   \arg \b CNG:   Comfort noice frames</span>
<a name="l00058"></a>00058 <span class="comment">   \arg \b CONTROL:  A control frame, subclass defined as AST_CONTROL_</span>
<a name="l00059"></a>00059 <span class="comment">   \arg \b NULL:  Empty, useless frame</span>
<a name="l00060"></a>00060 <span class="comment"></span>
<a name="l00061"></a>00061 <span class="comment">   \par Files</span>
<a name="l00062"></a>00062 <span class="comment">   \arg frame.h   Definitions</span>
<a name="l00063"></a>00063 <span class="comment">   \arg frame.c   Function library</span>
<a name="l00064"></a>00064 <span class="comment">   \arg \ref Def_Channel Asterisk channels</span>
<a name="l00065"></a>00065 <span class="comment">   \section Def_ControlFrame Control Frames</span>
<a name="l00066"></a>00066 <span class="comment">   Control frames send signalling information between channels</span>
<a name="l00067"></a>00067 <span class="comment">   and devices. They are prefixed with AST_CONTROL_, like AST_CONTROL_FRAME_HANGUP</span>
<a name="l00068"></a>00068 <span class="comment">   \arg \b HANGUP The other end has hungup</span>
<a name="l00069"></a>00069 <span class="comment">   \arg \b RING   Local ring</span>
<a name="l00070"></a>00070 <span class="comment">   \arg \b RINGING   The other end is ringing</span>
<a name="l00071"></a>00071 <span class="comment">   \arg \b ANSWER The other end has answered</span>
<a name="l00072"></a>00072 <span class="comment">   \arg \b BUSY   Remote end is busy</span>
<a name="l00073"></a>00073 <span class="comment">   \arg \b TAKEOFFHOOK  Make it go off hook (what&apos;s &quot;it&quot; ? )</span>
<a name="l00074"></a>00074 <span class="comment">   \arg \b OFFHOOK   Line is off hook</span>
<a name="l00075"></a>00075 <span class="comment">   \arg \b CONGESTION   Congestion (circuit is busy, not available)</span>
<a name="l00076"></a>00076 <span class="comment">   \arg \b FLASH  Other end sends flash hook</span>
<a name="l00077"></a>00077 <span class="comment">   \arg \b WINK   Other end sends wink</span>
<a name="l00078"></a>00078 <span class="comment">   \arg \b OPTION Send low-level option</span>
<a name="l00079"></a>00079 <span class="comment">   \arg \b RADIO_KEY Key radio (see app_rpt.c)</span>
<a name="l00080"></a>00080 <span class="comment">   \arg \b RADIO_UNKEY  Un-key radio (see app_rpt.c)</span>
<a name="l00081"></a>00081 <span class="comment">   \arg \b PROGRESS  Other end indicates call progress</span>
<a name="l00082"></a>00082 <span class="comment">   \arg \b PROCEEDING   Indicates proceeding</span>
<a name="l00083"></a>00083 <span class="comment">   \arg \b HOLD   Call is placed on hold</span>
<a name="l00084"></a>00084 <span class="comment">   \arg \b UNHOLD Call is back from hold</span>
<a name="l00085"></a>00085 <span class="comment">   \arg \b VIDUPDATE Video update requested</span>
<a name="l00086"></a>00086 <span class="comment">   \arg \b SRCUPDATE       The source of media has changed</span>
<a name="l00087"></a>00087 <span class="comment"></span>
<a name="l00088"></a>00088 <span class="comment">*/</span>
<a name="l00089"></a>00089 <span class="comment"></span>
<a name="l00090"></a>00090 <span class="comment">/*!</span>
<a name="l00091"></a>00091 <span class="comment"> * \brief Frame types </span>
<a name="l00092"></a>00092 <span class="comment"> *</span>
<a name="l00093"></a>00093 <span class="comment"> * \note It is important that the values of each frame type are never changed,</span>
<a name="l00094"></a>00094 <span class="comment"> *       because it will break backwards compatability with older versions.</span>
<a name="l00095"></a>00095 <span class="comment"> *       This is because these constants are transmitted directly over IAX2.</span>
<a name="l00096"></a>00096 <span class="comment"> */</span>
<a name="l00097"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">00097</a> <span class="keyword">enum</span> <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0" title="Frame types.">ast_frame_type</a> {<span class="comment"></span>
<a name="l00098"></a>00098 <span class="comment">   /*! DTMF end event, subclass is the digit */</span>
<a name="l00099"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">00099</a>    <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a> = 1,<span class="comment"></span>
<a name="l00100"></a>00100 <span class="comment">   /*! Voice data, subclass is AST_FORMAT_* */</span>
<a name="l00101"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">00101</a>    <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>,<span class="comment"></span>
<a name="l00102"></a>00102 <span class="comment">   /*! Video frame, maybe?? :) */</span>
<a name="l00103"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">00103</a>    <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>,<span class="comment"></span>
<a name="l00104"></a>00104 <span class="comment">   /*! A control frame, subclass is AST_CONTROL_* */</span>
<a name="l00105"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">00105</a>    <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>,<span class="comment"></span>
<a name="l00106"></a>00106 <span class="comment">   /*! An empty, useless frame */</span>
<a name="l00107"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">00107</a>    <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a>,<span class="comment"></span>
<a name="l00108"></a>00108 <span class="comment">   /*! Inter Asterisk Exchange private frame type */</span>
<a name="l00109"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a7f7e5bdc9f8a8ef45c4d078f96b52624">00109</a>    <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a7f7e5bdc9f8a8ef45c4d078f96b52624">AST_FRAME_IAX</a>,<span class="comment"></span>
<a name="l00110"></a>00110 <span class="comment">   /*! Text messages */</span>
<a name="l00111"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">00111</a>    <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>,<span class="comment"></span>
<a name="l00112"></a>00112 <span class="comment">   /*! Image Frames */</span>
<a name="l00113"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">00113</a>    <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">AST_FRAME_IMAGE</a>,<span class="comment"></span>
<a name="l00114"></a>00114 <span class="comment">   /*! HTML Frame */</span>
<a name="l00115"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a3d91bab33583f560197e21532a02a895">00115</a>    <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a3d91bab33583f560197e21532a02a895">AST_FRAME_HTML</a>,<span class="comment"></span>
<a name="l00116"></a>00116 <span class="comment">   /*! Comfort Noise frame (subclass is level of CNG in -dBov), </span>
<a name="l00117"></a>00117 <span class="comment">       body may include zero or more 8-bit quantization coefficients */</span>
<a name="l00118"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4">00118</a>    <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4">AST_FRAME_CNG</a>,<span class="comment"></span>
<a name="l00119"></a>00119 <span class="comment">   /*! Modem-over-IP data streams */</span>
<a name="l00120"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">00120</a>    <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a>,  <span class="comment"></span>
<a name="l00121"></a>00121 <span class="comment">   /*! DTMF begin event, subclass is the digit */</span>
<a name="l00122"></a><a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">00122</a>    <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>,
<a name="l00123"></a>00123 };
<a name="l00124"></a><a class="code" href="frame_8h.html#a248afd6c02044259a386f6b7aee922a2">00124</a> <span class="preprocessor">#define AST_FRAME_DTMF AST_FRAME_DTMF_END</span>
<a name="l00125"></a>00125 <span class="preprocessor"></span>
<a name="l00126"></a>00126 <span class="keyword">enum</span> {<span class="comment"></span>
<a name="l00127"></a>00127 <span class="comment">   /*! This frame contains valid timing information */</span>
<a name="l00128"></a><a class="code" href="frame_8h.html#a0ae1e3bf78c960c83e2d437efd802058ae8f674e19f6450e2b746c8a52c11649a">00128</a>    <a class="code" href="frame_8h.html#a0ae1e3bf78c960c83e2d437efd802058ae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a> = (1 &lt;&lt; 0),<span class="comment"></span>
<a name="l00129"></a>00129 <span class="comment">   /*! This frame came from a translator and is still the original frame.</span>
<a name="l00130"></a>00130 <span class="comment">    *  The translator can not be free&apos;d if the frame inside of it still has</span>
<a name="l00131"></a>00131 <span class="comment">    *  this flag set. */</span>
<a name="l00132"></a><a class="code" href="frame_8h.html#a0ae1e3bf78c960c83e2d437efd802058a4a242fff9bd02b02c64a1515a85e15ce">00132</a>    <a class="code" href="frame_8h.html#a0ae1e3bf78c960c83e2d437efd802058a4a242fff9bd02b02c64a1515a85e15ce">AST_FRFLAG_FROM_TRANSLATOR</a> = (1 &lt;&lt; 1),<span class="comment"></span>
<a name="l00133"></a>00133 <span class="comment">   /*! This frame came from a dsp and is still the original frame.</span>
<a name="l00134"></a>00134 <span class="comment">    *  The dsp cannot be free&apos;d if the frame inside of it still has</span>
<a name="l00135"></a>00135 <span class="comment">    *  this flag set. */</span>
<a name="l00136"></a><a class="code" href="frame_8h.html#a0ae1e3bf78c960c83e2d437efd802058a7500f97b39b4d91f3df7daa2435fc8fe">00136</a>    <a class="code" href="frame_8h.html#a0ae1e3bf78c960c83e2d437efd802058a7500f97b39b4d91f3df7daa2435fc8fe">AST_FRFLAG_FROM_DSP</a> = (1 &lt;&lt; 2),
<a name="l00137"></a>00137 };
<a name="l00138"></a>00138 <span class="comment"></span>
<a name="l00139"></a>00139 <span class="comment">/*! \brief Data structure associated with a single frame of data</span>
<a name="l00140"></a>00140 <span class="comment"> */</span>
<a name="l00141"></a><a class="code" href="structast__frame.html">00141</a> <span class="keyword">struct </span><a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> {<span class="comment"></span>
<a name="l00142"></a>00142 <span class="comment">   /*! Kind of frame */</span>
<a name="l00143"></a><a class="code" href="structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">00143</a>    <span class="keyword">enum</span> <a class="code" href="frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0" title="Frame types.">ast_frame_type</a> <a class="code" href="structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>;            <span class="comment"></span>
<a name="l00144"></a>00144 <span class="comment">   /*! Subclass, frame dependent */</span>
<a name="l00145"></a><a class="code" href="structast__frame.html#a8690cd2e4b0ef8477711b72a120ae086">00145</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#a8690cd2e4b0ef8477711b72a120ae086">subclass</a>;           <span class="comment"></span>
<a name="l00146"></a>00146 <span class="comment">   /*! Length of data */</span>
<a name="l00147"></a><a class="code" href="structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">00147</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>;            <span class="comment"></span>
<a name="l00148"></a>00148 <span class="comment">   /*! Number of samples in this frame */</span>
<a name="l00149"></a><a class="code" href="structast__frame.html#a37672e6b906143604cefd3e959777b31">00149</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;            <span class="comment"></span>
<a name="l00150"></a>00150 <span class="comment">   /*! Was the data malloc&apos;d?  i.e. should we free it when we discard the frame? */</span>
<a name="l00151"></a><a class="code" href="structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">00151</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">mallocd</a>;            <span class="comment"></span>
<a name="l00152"></a>00152 <span class="comment">   /*! The number of bytes allocated for a malloc&apos;d frame header */</span>
<a name="l00153"></a><a class="code" href="structast__frame.html#a8cbff4a8245f6b7d82c011261cf1fb4d">00153</a>    <span class="keywordtype">size_t</span> <a class="code" href="structast__frame.html#a8cbff4a8245f6b7d82c011261cf1fb4d">mallocd_hdr_len</a>;<span class="comment"></span>
<a name="l00154"></a>00154 <span class="comment">   /*! How many bytes exist _before_ &quot;data&quot; that can be used if needed */</span>
<a name="l00155"></a><a class="code" href="structast__frame.html#aed7ea92f45bd273dde380a45ddced592">00155</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;          <span class="comment"></span>
<a name="l00156"></a>00156 <span class="comment">   /*! Optional source of frame for debugging */</span>
<a name="l00157"></a><a class="code" href="structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">00157</a>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a>;           <span class="comment"></span>
<a name="l00158"></a>00158 <span class="comment">   /*! Pointer to actual data */</span>
<a name="l00159"></a><a class="code" href="structast__frame.html#a5ad776be1fb768f3399aafcd1b58b3a2">00159</a>    <span class="keyword">union </span>{ <span class="keywordtype">void</span> *<a class="code" href="structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>; uint32_t <a class="code" href="structast__frame.html#a5ad776be1fb768f3399aafcd1b58b3a2">uint32</a>; <span class="keywordtype">char</span> <a class="code" href="structast__frame.html#a6fac61c62eefab416afbb5042a7a7beb">pad</a>[8]; } <a class="code" href="structast__frame.html#a7c81436eb90123aabf892413fc5bf849">data</a>;<span class="comment"></span>
<a name="l00160"></a>00160 <span class="comment">   /*! Global delivery time */</span>      
<a name="l00161"></a><a class="code" href="structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">00161</a>    <span class="keyword">struct </span>timeval <a class="code" href="structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>;<span class="comment"></span>
<a name="l00162"></a>00162 <span class="comment">   /*! For placing in a linked list */</span>
<a name="l00163"></a>00163    <a class="code" href="structast__frame.html#a838f9acef0dd46589d97f6deffdd71ff">AST_LIST_ENTRY</a>(<a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a>) frame_list;<span class="comment"></span>
<a name="l00164"></a>00164 <span class="comment">   /*! Misc. frame flags */</span>
<a name="l00165"></a><a class="code" href="structast__frame.html#ac92588540e8c1d014a08cd8a45462b19">00165</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>;<span class="comment"></span>
<a name="l00166"></a>00166 <span class="comment">   /*! Timestamp in milliseconds */</span>
<a name="l00167"></a><a class="code" href="structast__frame.html#a1eb46dcb363821328c0d2a758549216b">00167</a>    <span class="keywordtype">long</span> <a class="code" href="structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a>;<span class="comment"></span>
<a name="l00168"></a>00168 <span class="comment">   /*! Length in milliseconds */</span>
<a name="l00169"></a><a class="code" href="structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">00169</a>    <span class="keywordtype">long</span> <a class="code" href="structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>;<span class="comment"></span>
<a name="l00170"></a>00170 <span class="comment">   /*! Sequence number */</span>
<a name="l00171"></a><a class="code" href="structast__frame.html#ab793262012344621455faf9266acbac2">00171</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>;
<a name="l00172"></a>00172 };
<a name="l00173"></a>00173 <span class="comment"></span>
<a name="l00174"></a>00174 <span class="comment">/*!</span>
<a name="l00175"></a>00175 <span class="comment"> * Set the various field of a frame to point to a buffer.</span>
<a name="l00176"></a>00176 <span class="comment"> * Typically you set the base address of the buffer, the offset as</span>
<a name="l00177"></a>00177 <span class="comment"> * AST_FRIENDLY_OFFSET, and the datalen as the amount of bytes queued.</span>
<a name="l00178"></a>00178 <span class="comment"> * The remaining things (to be done manually) is set the number of</span>
<a name="l00179"></a>00179 <span class="comment"> * samples, which cannot be derived from the datalen unless you know</span>
<a name="l00180"></a>00180 <span class="comment"> * the number of bits per sample.</span>
<a name="l00181"></a>00181 <span class="comment"> */</span>
<a name="l00182"></a><a class="code" href="frame_8h.html#ac8bc210573f6b9c55ef38662bddc4675">00182</a> <span class="preprocessor">#define  AST_FRAME_SET_BUFFER(fr, _base, _ofs, _datalen) \</span>
<a name="l00183"></a>00183 <span class="preprocessor">   {              \</span>
<a name="l00184"></a>00184 <span class="preprocessor">   (fr)-&gt;data.ptr = (char *)_base + (_ofs);  \</span>
<a name="l00185"></a>00185 <span class="preprocessor">   (fr)-&gt;offset = (_ofs);        \</span>
<a name="l00186"></a>00186 <span class="preprocessor">   (fr)-&gt;datalen = (_datalen);      \</span>
<a name="l00187"></a>00187 <span class="preprocessor">   }</span>
<a name="l00188"></a>00188 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00189"></a>00189 <span class="comment">/*! Queueing a null frame is fairly common, so we declare a global null frame object</span>
<a name="l00190"></a>00190 <span class="comment">    for this purpose instead of having to declare one on the stack */</span>
<a name="l00191"></a>00191 <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> <a class="code" href="frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;
<a name="l00192"></a>00192 <span class="comment"></span>
<a name="l00193"></a>00193 <span class="comment">/*! \brief Offset into a frame&apos;s data buffer.</span>
<a name="l00194"></a>00194 <span class="comment"> *</span>
<a name="l00195"></a>00195 <span class="comment"> * By providing some &quot;empty&quot; space prior to the actual data of an ast_frame,</span>
<a name="l00196"></a>00196 <span class="comment"> * this gives any consumer of the frame ample space to prepend other necessary</span>
<a name="l00197"></a>00197 <span class="comment"> * information without having to create a new buffer.</span>
<a name="l00198"></a>00198 <span class="comment"> *</span>
<a name="l00199"></a>00199 <span class="comment"> * As an example, RTP can use the data from an ast_frame and simply prepend the</span>
<a name="l00200"></a>00200 <span class="comment"> * RTP header information into the space provided by AST_FRIENDLY_OFFSET instead</span>
<a name="l00201"></a>00201 <span class="comment"> * of having to create a new buffer with the necessary space allocated.</span>
<a name="l00202"></a>00202 <span class="comment"> */</span>
<a name="l00203"></a><a class="code" href="frame_8h.html#ac8f7380b8620c80443286b44481f641c">00203</a> <span class="preprocessor">#define AST_FRIENDLY_OFFSET   64 </span>
<a name="l00204"></a><a class="code" href="frame_8h.html#a0398e1e7020adf345eaaca6357f164b2">00204</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_MIN_OFFSET     32 </span><span class="comment">/*! Make sure we keep at least this much handy */</span>
<a name="l00205"></a>00205 <span class="comment"></span>
<a name="l00206"></a>00206 <span class="comment">/*! Need the header be free&apos;d? */</span>
<a name="l00207"></a><a class="code" href="frame_8h.html#a22c49dfda592a2adb1fbaeaaa6ed3b7f">00207</a> <span class="preprocessor">#define AST_MALLOCD_HDR    (1 &lt;&lt; 0)</span>
<a name="l00208"></a>00208 <span class="preprocessor"></span><span class="comment">/*! Need the data be free&apos;d? */</span>
<a name="l00209"></a><a class="code" href="frame_8h.html#a700f5f786d7e5a985387e5ce40c47a6a">00209</a> <span class="preprocessor">#define AST_MALLOCD_DATA   (1 &lt;&lt; 1)</span>
<a name="l00210"></a>00210 <span class="preprocessor"></span><span class="comment">/*! Need the source be free&apos;d? (haha!) */</span>
<a name="l00211"></a><a class="code" href="frame_8h.html#aa1644c06703f3d2e61318b559a090685">00211</a> <span class="preprocessor">#define AST_MALLOCD_SRC    (1 &lt;&lt; 2)</span>
<a name="l00212"></a>00212 <span class="preprocessor"></span>
<a name="l00213"></a>00213 <span class="comment">/* MODEM subclasses */</span><span class="comment"></span>
<a name="l00214"></a>00214 <span class="comment">/*! T.38 Fax-over-IP */</span>
<a name="l00215"></a><a class="code" href="frame_8h.html#a3a510e4e2673c6870ed5fe0f1eb53732">00215</a> <span class="preprocessor">#define AST_MODEM_T38      1</span>
<a name="l00216"></a>00216 <span class="preprocessor"></span><span class="comment">/*! V.150 Modem-over-IP */</span>
<a name="l00217"></a><a class="code" href="frame_8h.html#ad7ac909bf2adaabfe37805db2cf53f14">00217</a> <span class="preprocessor">#define AST_MODEM_V150     2</span>
<a name="l00218"></a>00218 <span class="preprocessor"></span>
<a name="l00219"></a>00219 <span class="comment">/* HTML subclasses */</span><span class="comment"></span>
<a name="l00220"></a>00220 <span class="comment">/*! Sending a URL */</span>
<a name="l00221"></a><a class="code" href="frame_8h.html#a6eada13200d55b88ef01b68c5d62a43a">00221</a> <span class="preprocessor">#define AST_HTML_URL    1</span>
<a name="l00222"></a>00222 <span class="preprocessor"></span><span class="comment">/*! Data frame */</span>
<a name="l00223"></a><a class="code" href="frame_8h.html#aba474b9a2a4dcde86ee12f74e878ab6d">00223</a> <span class="preprocessor">#define AST_HTML_DATA      2</span>
<a name="l00224"></a>00224 <span class="preprocessor"></span><span class="comment">/*! Beginning frame */</span>
<a name="l00225"></a><a class="code" href="frame_8h.html#ade1d4ef84064d1c58f0377514292db3c">00225</a> <span class="preprocessor">#define AST_HTML_BEGIN     4</span>
<a name="l00226"></a>00226 <span class="preprocessor"></span><span class="comment">/*! End frame */</span>
<a name="l00227"></a><a class="code" href="frame_8h.html#aa6c9a7c6b3b55b0b2b3792655b24cfaf">00227</a> <span class="preprocessor">#define AST_HTML_END    8</span>
<a name="l00228"></a>00228 <span class="preprocessor"></span><span class="comment">/*! Load is complete */</span>
<a name="l00229"></a><a class="code" href="frame_8h.html#a91982c4a8393bd03929906ae254e759e">00229</a> <span class="preprocessor">#define AST_HTML_LDCOMPLETE   16</span>
<a name="l00230"></a>00230 <span class="preprocessor"></span><span class="comment">/*! Peer is unable to support HTML */</span>
<a name="l00231"></a><a class="code" href="frame_8h.html#a75abb5123a5468bdce1c651a6df008c3">00231</a> <span class="preprocessor">#define AST_HTML_NOSUPPORT 17</span>
<a name="l00232"></a>00232 <span class="preprocessor"></span><span class="comment">/*! Send URL, and track */</span>
<a name="l00233"></a><a class="code" href="frame_8h.html#a5e242c10a410dcee83755947346d9671">00233</a> <span class="preprocessor">#define AST_HTML_LINKURL   18</span>
<a name="l00234"></a>00234 <span class="preprocessor"></span><span class="comment">/*! No more HTML linkage */</span>
<a name="l00235"></a><a class="code" href="frame_8h.html#a1c9f284a258e8c26216fe1ac4fbecba4">00235</a> <span class="preprocessor">#define AST_HTML_UNLINK    19</span>
<a name="l00236"></a>00236 <span class="preprocessor"></span><span class="comment">/*! Reject link request */</span>
<a name="l00237"></a><a class="code" href="frame_8h.html#ad5863e5c322715392e99acc5bef0a518">00237</a> <span class="preprocessor">#define AST_HTML_LINKREJECT   20</span>
<a name="l00238"></a>00238 <span class="preprocessor"></span>
<a name="l00239"></a>00239 <span class="comment">/* Data formats for capabilities and frames alike */</span><span class="comment"></span>
<a name="l00240"></a>00240 <span class="comment">/*! G.723.1 compression */</span>
<a name="l00241"></a><a class="code" href="frame_8h.html#ad90b56ed6ada6e4f13224512668e20fb">00241</a> <span class="preprocessor">#define AST_FORMAT_G723_1  (1 &lt;&lt; 0)</span>
<a name="l00242"></a>00242 <span class="preprocessor"></span><span class="comment">/*! GSM compression */</span>
<a name="l00243"></a><a class="code" href="frame_8h.html#a85106ada66147a674b36f0a55297d29d">00243</a> <span class="preprocessor">#define AST_FORMAT_GSM     (1 &lt;&lt; 1)</span>
<a name="l00244"></a>00244 <span class="preprocessor"></span><span class="comment">/*! Raw mu-law data (G.711) */</span>
<a name="l00245"></a><a class="code" href="frame_8h.html#ab602cf455d4a96a3adba2e3ba8cd2b2c">00245</a> <span class="preprocessor">#define AST_FORMAT_ULAW    (1 &lt;&lt; 2)</span>
<a name="l00246"></a>00246 <span class="preprocessor"></span><span class="comment">/*! Raw A-law data (G.711) */</span>
<a name="l00247"></a><a class="code" href="frame_8h.html#aa58cc980a9c9108522effc64e9aff2d6">00247</a> <span class="preprocessor">#define AST_FORMAT_ALAW    (1 &lt;&lt; 3)</span>
<a name="l00248"></a>00248 <span class="preprocessor"></span><span class="comment">/*! ADPCM (G.726, 32kbps, AAL2 codeword packing) */</span>
<a name="l00249"></a><a class="code" href="frame_8h.html#a536fbd427f197a33e679c7721afad420">00249</a> <span class="preprocessor">#define AST_FORMAT_G726_AAL2  (1 &lt;&lt; 4)</span>
<a name="l00250"></a>00250 <span class="preprocessor"></span><span class="comment">/*! ADPCM (IMA) */</span>
<a name="l00251"></a><a class="code" href="frame_8h.html#a933964fc376c2642f9471c176fb7ae7d">00251</a> <span class="preprocessor">#define AST_FORMAT_ADPCM   (1 &lt;&lt; 5)</span>
<a name="l00252"></a>00252 <span class="preprocessor"></span><span class="comment">/*! Raw 16-bit Signed Linear (8000 Hz) PCM */</span>
<a name="l00253"></a><a class="code" href="frame_8h.html#aa68ce7f14882005613a3e1fb0f4181b7">00253</a> <span class="preprocessor">#define AST_FORMAT_SLINEAR (1 &lt;&lt; 6)</span>
<a name="l00254"></a>00254 <span class="preprocessor"></span><span class="comment">/*! LPC10, 180 samples/frame */</span>
<a name="l00255"></a><a class="code" href="frame_8h.html#ac816c6f1fd32b02a6d20af297d96d04f">00255</a> <span class="preprocessor">#define AST_FORMAT_LPC10   (1 &lt;&lt; 7)</span>
<a name="l00256"></a>00256 <span class="preprocessor"></span><span class="comment">/*! G.729A audio */</span>
<a name="l00257"></a><a class="code" href="frame_8h.html#a8c5f13161448f613baaf42dea11f520a">00257</a> <span class="preprocessor">#define AST_FORMAT_G729A   (1 &lt;&lt; 8)</span>
<a name="l00258"></a>00258 <span class="preprocessor"></span><span class="comment">/*! SpeeX Free Compression */</span>
<a name="l00259"></a><a class="code" href="frame_8h.html#a1a05dee116bf73c0f1ca8410bdb48c62">00259</a> <span class="preprocessor">#define AST_FORMAT_SPEEX   (1 &lt;&lt; 9)</span>
<a name="l00260"></a>00260 <span class="preprocessor"></span><span class="comment">/*! iLBC Free Compression */</span>
<a name="l00261"></a><a class="code" href="frame_8h.html#a8330d06ea408802c37e9af61a513c6a1">00261</a> <span class="preprocessor">#define AST_FORMAT_ILBC    (1 &lt;&lt; 10)</span>
<a name="l00262"></a>00262 <span class="preprocessor"></span><span class="comment">/*! ADPCM (G.726, 32kbps, RFC3551 codeword packing) */</span>
<a name="l00263"></a><a class="code" href="frame_8h.html#a030c77081bc2aff5ae5a384769f46418">00263</a> <span class="preprocessor">#define AST_FORMAT_G726    (1 &lt;&lt; 11)</span>
<a name="l00264"></a>00264 <span class="preprocessor"></span><span class="comment">/*! G.722 */</span>
<a name="l00265"></a><a class="code" href="frame_8h.html#a4a0e8720928940d26abf28fff2e6586d">00265</a> <span class="preprocessor">#define AST_FORMAT_G722    (1 &lt;&lt; 12)</span>
<a name="l00266"></a>00266 <span class="preprocessor"></span><span class="comment">/*! G.722.1 (also known as Siren7, 32kbps assumed) */</span>
<a name="l00267"></a><a class="code" href="frame_8h.html#a13092663dddb1492d81571f9f0ae4506">00267</a> <span class="preprocessor">#define AST_FORMAT_SIREN7  (1 &lt;&lt; 13)</span>
<a name="l00268"></a>00268 <span class="preprocessor"></span><span class="comment">/*! G.722.1 Annex C (also known as Siren14, 48kbps assumed) */</span>
<a name="l00269"></a><a class="code" href="frame_8h.html#a590224283a5c1527fab938e4d02686cc">00269</a> <span class="preprocessor">#define AST_FORMAT_SIREN14 (1 &lt;&lt; 14)</span>
<a name="l00270"></a>00270 <span class="preprocessor"></span><span class="comment">/*! Raw 16-bit Signed Linear (16000 Hz) PCM */</span>
<a name="l00271"></a><a class="code" href="frame_8h.html#a6e078550fcf3f2038f6c343b3d65a936">00271</a> <span class="preprocessor">#define AST_FORMAT_SLINEAR16  (1 &lt;&lt; 15)</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span><span class="comment">/*! Maximum audio mask */</span>
<a name="l00273"></a><a class="code" href="frame_8h.html#a3f680b9c15596de927d507a664fd2803">00273</a> <span class="preprocessor">#define AST_FORMAT_AUDIO_MASK   ((1 &lt;&lt; 16)-1)</span>
<a name="l00274"></a>00274 <span class="preprocessor"></span><span class="comment">/*! JPEG Images */</span>
<a name="l00275"></a><a class="code" href="frame_8h.html#a9f42fbac3d6631f67cb0fb9a91091ec5">00275</a> <span class="preprocessor">#define AST_FORMAT_JPEG    (1 &lt;&lt; 16)</span>
<a name="l00276"></a>00276 <span class="preprocessor"></span><span class="comment">/*! PNG Images */</span>
<a name="l00277"></a><a class="code" href="frame_8h.html#a66201142be0584b5741786416aa3e446">00277</a> <span class="preprocessor">#define AST_FORMAT_PNG     (1 &lt;&lt; 17)</span>
<a name="l00278"></a>00278 <span class="preprocessor"></span><span class="comment">/*! H.261 Video */</span>
<a name="l00279"></a><a class="code" href="frame_8h.html#a876fb06c385409451b7842fe1af6c42e">00279</a> <span class="preprocessor">#define AST_FORMAT_H261    (1 &lt;&lt; 18)</span>
<a name="l00280"></a>00280 <span class="preprocessor"></span><span class="comment">/*! H.263 Video */</span>
<a name="l00281"></a><a class="code" href="frame_8h.html#a750506bc6e9117c66a5a6ad2dc82bc85">00281</a> <span class="preprocessor">#define AST_FORMAT_H263    (1 &lt;&lt; 19)</span>
<a name="l00282"></a>00282 <span class="preprocessor"></span><span class="comment">/*! H.263+ Video */</span>
<a name="l00283"></a><a class="code" href="frame_8h.html#aea05b09095ebe8302b1187f4f0b0d042">00283</a> <span class="preprocessor">#define AST_FORMAT_H263_PLUS  (1 &lt;&lt; 20)</span>
<a name="l00284"></a>00284 <span class="preprocessor"></span><span class="comment">/*! H.264 Video */</span>
<a name="l00285"></a><a class="code" href="frame_8h.html#a884a71784d2a563dd54eb15c2cfc57b0">00285</a> <span class="preprocessor">#define AST_FORMAT_H264    (1 &lt;&lt; 21)</span>
<a name="l00286"></a>00286 <span class="preprocessor"></span><span class="comment">/*! MPEG4 Video */</span>
<a name="l00287"></a><a class="code" href="frame_8h.html#a315d4a14bcf11a55ea8df52dd3a74d35">00287</a> <span class="preprocessor">#define AST_FORMAT_MP4_VIDEO  (1 &lt;&lt; 22)</span>
<a name="l00288"></a><a class="code" href="frame_8h.html#ad048231af8a6271706585e3c8630dc69">00288</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_FORMAT_VIDEO_MASK   (((1 &lt;&lt; 25)-1) &amp; ~(AST_FORMAT_AUDIO_MASK))</span>
<a name="l00289"></a>00289 <span class="preprocessor"></span><span class="comment">/*! T.140 RED Text format RFC 4103 */</span>
<a name="l00290"></a><a class="code" href="frame_8h.html#aa43d17815b58f27836a45fb310d33959">00290</a> <span class="preprocessor">#define AST_FORMAT_T140RED      (1 &lt;&lt; 26)</span>
<a name="l00291"></a>00291 <span class="preprocessor"></span><span class="comment">/*! T.140 Text format - ITU T.140, RFC 4103 */</span>
<a name="l00292"></a><a class="code" href="frame_8h.html#a721e65ac52ff8eca03ea163544e695b6">00292</a> <span class="preprocessor">#define AST_FORMAT_T140    (1 &lt;&lt; 27)</span>
<a name="l00293"></a>00293 <span class="preprocessor"></span><span class="comment">/*! Maximum text mask */</span>
<a name="l00294"></a><a class="code" href="frame_8h.html#adc565e19015a070b20ac2cf23bde6345">00294</a> <span class="preprocessor">#define AST_FORMAT_MAX_TEXT   (1 &lt;&lt; 28))</span>
<a name="l00295"></a><a class="code" href="frame_8h.html#a40d5a53729402277e268d8b35b7ffaa5">00295</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_FORMAT_TEXT_MASK   (((1 &lt;&lt; 30)-1) &amp; ~(AST_FORMAT_AUDIO_MASK) &amp; ~(AST_FORMAT_VIDEO_MASK))</span>
<a name="l00296"></a>00296 <span class="preprocessor"></span>
<a name="l00297"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390">00297</a> <span class="keyword">enum</span> <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a> {
<a name="l00298"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">00298</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a> = 1,    <span class="comment">/*!&lt; Other end has hungup */</span>
<a name="l00299"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2">00299</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2">AST_CONTROL_RING</a> = 2,      <span class="comment">/*!&lt; Local ring */</span>
<a name="l00300"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">00300</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a> = 3,   <span class="comment">/*!&lt; Remote end is ringing */</span>
<a name="l00301"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">00301</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a> = 4,    <span class="comment">/*!&lt; Remote end has answered */</span>
<a name="l00302"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">00302</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a> = 5,      <span class="comment">/*!&lt; Remote end is busy */</span>
<a name="l00303"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a5a24176e8066b727463907da4903bb8e">00303</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a5a24176e8066b727463907da4903bb8e">AST_CONTROL_TAKEOFFHOOK</a> = 6,  <span class="comment">/*!&lt; Make it go off hook */</span>
<a name="l00304"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a28cd8e9f9005e25624f993d6edd46755">00304</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a28cd8e9f9005e25624f993d6edd46755">AST_CONTROL_OFFHOOK</a> = 7,   <span class="comment">/*!&lt; Line is off hook */</span>
<a name="l00305"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">00305</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a> = 8,   <span class="comment">/*!&lt; Congestion (circuits busy) */</span>
<a name="l00306"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">00306</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a> = 9,     <span class="comment">/*!&lt; Flash hook */</span>
<a name="l00307"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a195b2c39c09113953814aa800dd06e7f">00307</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a195b2c39c09113953814aa800dd06e7f">AST_CONTROL_WINK</a> = 10,     <span class="comment">/*!&lt; Wink */</span>
<a name="l00308"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390ac4106406e269667ff84ee49e0a634f94">00308</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390ac4106406e269667ff84ee49e0a634f94">AST_CONTROL_OPTION</a> = 11,   <span class="comment">/*!&lt; Set a low-level option */</span>
<a name="l00309"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390aacb7ddf1a95fa544fdecada68213f3c7">00309</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390aacb7ddf1a95fa544fdecada68213f3c7">AST_CONTROL_RADIO_KEY</a> = 12,   <span class="comment">/*!&lt; Key Radio */</span>
<a name="l00310"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a34ac3ccebc219c59daa7eb0275fcd54d">00310</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a34ac3ccebc219c59daa7eb0275fcd54d">AST_CONTROL_RADIO_UNKEY</a> = 13, <span class="comment">/*!&lt; Un-Key Radio */</span>
<a name="l00311"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">00311</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a> = 14, <span class="comment">/*!&lt; Indicate PROGRESS */</span>
<a name="l00312"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">00312</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a> = 15,  <span class="comment">/*!&lt; Indicate CALL PROCEEDING */</span>
<a name="l00313"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">00313</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a> = 16,     <span class="comment">/*!&lt; Indicate call is placed on hold */</span>
<a name="l00314"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">00314</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a> = 17,   <span class="comment">/*!&lt; Indicate call is left from hold */</span>
<a name="l00315"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">00315</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a> = 18,   <span class="comment">/*!&lt; Indicate video frame update */</span>
<a name="l00316"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390af4cf96fe3cc13c2a1b4d539fcb1adaed">00316</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390af4cf96fe3cc13c2a1b4d539fcb1adaed">_XXX_AST_CONTROL_T38</a> = 19, <span class="comment">/*!&lt; T38 state change request/notification \deprecated This is no longer supported. Use AST_CONTROL_T38_PARAMETERS instead. */</span>
<a name="l00317"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">00317</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a> = 20,     <span class="comment">/*!&lt; Indicate source of media has changed */</span>
<a name="l00318"></a><a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">00318</a>    <a class="code" href="frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a> = 24, <span class="comment">/*!&lt; T38 state change request/notification with parameters */</span>
<a name="l00319"></a>00319 };
<a name="l00320"></a>00320 
<a name="l00321"></a><a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4b">00321</a> <span class="keyword">enum</span> <a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4b">ast_control_t38</a> {
<a name="l00322"></a><a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bafdb1ca68d683c64301c4cf07463a9975">00322</a>    <a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bafdb1ca68d683c64301c4cf07463a9975">AST_T38_REQUEST_NEGOTIATE</a> = 1,   <span class="comment">/*!&lt; Request T38 on a channel (voice to fax) */</span>
<a name="l00323"></a><a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bab75e46d3212a2a886143d874c78a1e3c">00323</a>    <a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bab75e46d3212a2a886143d874c78a1e3c">AST_T38_REQUEST_TERMINATE</a>, <span class="comment">/*!&lt; Terminate T38 on a channel (fax to voice) */</span>
<a name="l00324"></a><a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bad501e0d5fe272eaba466507a686a2df5">00324</a>    <a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bad501e0d5fe272eaba466507a686a2df5">AST_T38_NEGOTIATED</a>,     <span class="comment">/*!&lt; T38 negotiated (fax mode) */</span>
<a name="l00325"></a><a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f">00325</a>    <a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f">AST_T38_TERMINATED</a>,     <span class="comment">/*!&lt; T38 terminated (back to voice) */</span>
<a name="l00326"></a><a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4baa02b30f25621f20396d06f5ac8aa7a2e">00326</a>    <a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4baa02b30f25621f20396d06f5ac8aa7a2e">AST_T38_REFUSED</a>         <span class="comment">/*!&lt; T38 refused for some reason (usually rejected by remote end) */</span>
<a name="l00327"></a>00327 };
<a name="l00328"></a>00328 
<a name="l00329"></a><a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07">00329</a> <span class="keyword">enum</span> <a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07">ast_control_t38_rate</a> {
<a name="l00330"></a><a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07a2787578f9ccc8bc25700960b1a15eeb9">00330</a>    <a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07a2787578f9ccc8bc25700960b1a15eeb9">AST_T38_RATE_2400</a> = 0,
<a name="l00331"></a><a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07abac3dceee1028a6e984102f26d619e9a">00331</a>    <a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07abac3dceee1028a6e984102f26d619e9a">AST_T38_RATE_4800</a>,
<a name="l00332"></a><a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07ab81ae2414637c4a270b76b507f1301c9">00332</a>    <a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07ab81ae2414637c4a270b76b507f1301c9">AST_T38_RATE_7200</a>,
<a name="l00333"></a><a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07a259d0e5aca2b0ab99d8ec2f815361083">00333</a>    <a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07a259d0e5aca2b0ab99d8ec2f815361083">AST_T38_RATE_9600</a>,
<a name="l00334"></a><a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07a1204a41ae6ce4cfe99a7c3133a6193dc">00334</a>    <a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07a1204a41ae6ce4cfe99a7c3133a6193dc">AST_T38_RATE_12000</a>,
<a name="l00335"></a><a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07a2956ffa9b3fdde7ffc800fbd6e6a5482">00335</a>    <a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07a2956ffa9b3fdde7ffc800fbd6e6a5482">AST_T38_RATE_14400</a>,
<a name="l00336"></a>00336 };
<a name="l00337"></a>00337 
<a name="l00338"></a><a class="code" href="frame_8h.html#a9db3df106b7deebbee4c5106a880ec33">00338</a> <span class="keyword">enum</span> <a class="code" href="frame_8h.html#a9db3df106b7deebbee4c5106a880ec33">ast_control_t38_rate_management</a> {
<a name="l00339"></a><a class="code" href="frame_8h.html#a9db3df106b7deebbee4c5106a880ec33abbb1b9b329ded73597a5c2eefe13a34c">00339</a>    <a class="code" href="frame_8h.html#a9db3df106b7deebbee4c5106a880ec33abbb1b9b329ded73597a5c2eefe13a34c">AST_T38_RATE_MANAGEMENT_TRANSFERRED_TCF</a> = 0,
<a name="l00340"></a><a class="code" href="frame_8h.html#a9db3df106b7deebbee4c5106a880ec33a3b48c41b5453ab45d44ecc6251d024b9">00340</a>    <a class="code" href="frame_8h.html#a9db3df106b7deebbee4c5106a880ec33a3b48c41b5453ab45d44ecc6251d024b9">AST_T38_RATE_MANAGEMENT_LOCAL_TCF</a>,
<a name="l00341"></a>00341 };
<a name="l00342"></a>00342 
<a name="l00343"></a><a class="code" href="structast__control__t38__parameters.html">00343</a> <span class="keyword">struct </span><a class="code" href="structast__control__t38__parameters.html">ast_control_t38_parameters</a> {
<a name="l00344"></a><a class="code" href="structast__control__t38__parameters.html#adb36822366e10ce64ca8337c512732a6">00344</a>    <span class="keyword">enum</span> <a class="code" href="frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4b">ast_control_t38</a> request_response;       <span class="comment">/*!&lt; Request or response of the T38 control frame */</span>
<a name="l00345"></a><a class="code" href="structast__control__t38__parameters.html#a5408ac5df4c170828874e1b10b4c35a0">00345</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="res__config__ldap_8c.html#aad880fc4455c253781e8968f2239d56f">version</a>;               <span class="comment">/*!&lt; Supported T.38 version */</span>
<a name="l00346"></a><a class="code" href="structast__control__t38__parameters.html#a7924cc45cde640e779a902c4aadaf180">00346</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_ifp;               <span class="comment">/*!&lt; Maximum IFP size supported */</span>
<a name="l00347"></a><a class="code" href="structast__control__t38__parameters.html#a124b43d7f331e00aad39c964ea523329">00347</a>    <span class="keyword">enum</span> <a class="code" href="frame_8h.html#a8d9ee156e6e29222a8fc1383f2832b07">ast_control_t38_rate</a> rate;           <span class="comment">/*!&lt; Maximum fax rate supported */</span>
<a name="l00348"></a><a class="code" href="structast__control__t38__parameters.html#ad39f48f545d7c8962dfa0ae83a61c21f">00348</a>    <span class="keyword">enum</span> <a class="code" href="frame_8h.html#a9db3df106b7deebbee4c5106a880ec33">ast_control_t38_rate_management</a> rate_management; <span class="comment">/*!&lt; Rate management setting */</span>
<a name="l00349"></a><a class="code" href="structast__control__t38__parameters.html#addb721c952a7144f0a6a9ac5f621d2bc">00349</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> fill_bit_removal:1;       <span class="comment">/*!&lt; Set if fill bit removal can be used */</span>
<a name="l00350"></a><a class="code" href="structast__control__t38__parameters.html#ad2b3d53474db70e3ff2058da953b7b82">00350</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> transcoding_mmr:1;           <span class="comment">/*!&lt; Set if MMR transcoding can be used */</span>
<a name="l00351"></a><a class="code" href="structast__control__t38__parameters.html#a07676322ec48c4872f9a208a6248d034">00351</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> transcoding_jbig:1;       <span class="comment">/*!&lt; Set if JBIG transcoding can be used */</span>
<a name="l00352"></a>00352 };
<a name="l00353"></a>00353 
<a name="l00354"></a><a class="code" href="frame_8h.html#a06828788896ac92282112bd8ffe12319">00354</a> <span class="preprocessor">#define AST_SMOOTHER_FLAG_G729      (1 &lt;&lt; 0)</span>
<a name="l00355"></a><a class="code" href="frame_8h.html#af2e180889cb2b85cd10823803b9eb005">00355</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_SMOOTHER_FLAG_BE     (1 &lt;&lt; 1)</span>
<a name="l00356"></a>00356 <span class="preprocessor"></span>
<a name="l00357"></a>00357 <span class="comment">/* Option identifiers and flags */</span>
<a name="l00358"></a><a class="code" href="frame_8h.html#aaec646e296938635ffb97c5c7d6b05c8">00358</a> <span class="preprocessor">#define AST_OPTION_FLAG_REQUEST     0</span>
<a name="l00359"></a><a class="code" href="frame_8h.html#a9dadbc2c8b65db4fc9d55c7fb570ad00">00359</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_OPTION_FLAG_ACCEPT      1</span>
<a name="l00360"></a><a class="code" href="frame_8h.html#a67877fed6ccd13c907a70050a37e49c8">00360</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_OPTION_FLAG_REJECT      2</span>
<a name="l00361"></a><a class="code" href="frame_8h.html#ad81d0232835b30408180e7589de682ed">00361</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_OPTION_FLAG_QUERY    4</span>
<a name="l00362"></a><a class="code" href="frame_8h.html#ab16ca879c74e982d15703425d8c7eb0d">00362</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_OPTION_FLAG_ANSWER      5</span>
<a name="l00363"></a><a class="code" href="frame_8h.html#a4654681541c2bd74f152cae73a536a38">00363</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_OPTION_FLAG_WTF      6</span>
<a name="l00364"></a>00364 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00365"></a>00365 <span class="comment">/*! Verify touchtones by muting audio transmission </span>
<a name="l00366"></a>00366 <span class="comment">   (and reception) and verify the tone is still present */</span>
<a name="l00367"></a><a class="code" href="frame_8h.html#a31312f6b6c2296e3495ad1d9e198cbf4">00367</a> <span class="preprocessor">#define AST_OPTION_TONE_VERIFY      1     </span>
<a name="l00368"></a>00368 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00369"></a>00369 <span class="comment">/*! Put a compatible channel into TDD (TTY for the hearing-impared) mode */</span>
<a name="l00370"></a><a class="code" href="frame_8h.html#aa27da183a0551e3f9497a8064e24b0b6">00370</a> <span class="preprocessor">#define  AST_OPTION_TDD       2</span>
<a name="l00371"></a>00371 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00372"></a>00372 <span class="comment">/*! Relax the parameters for DTMF reception (mainly for radio use) */</span>
<a name="l00373"></a><a class="code" href="frame_8h.html#a255dd10b04d66ed03d553244b4aa2f15">00373</a> <span class="preprocessor">#define  AST_OPTION_RELAXDTMF    3</span>
<a name="l00374"></a>00374 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00375"></a>00375 <span class="comment">/*! Set (or clear) Audio (Not-Clear) Mode */</span>
<a name="l00376"></a><a class="code" href="frame_8h.html#aee98973da4263b45bacb162534a66cfc">00376</a> <span class="preprocessor">#define  AST_OPTION_AUDIO_MODE      4</span>
<a name="l00377"></a>00377 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00378"></a>00378 <span class="comment">/*! Set channel transmit gain </span>
<a name="l00379"></a>00379 <span class="comment"> * Option data is a single signed char</span>
<a name="l00380"></a>00380 <span class="comment">   representing number of decibels (dB)</span>
<a name="l00381"></a>00381 <span class="comment">   to set gain to (on top of any gain</span>
<a name="l00382"></a>00382 <span class="comment">   specified in channel driver)</span>
<a name="l00383"></a>00383 <span class="comment">*/</span>
<a name="l00384"></a><a class="code" href="frame_8h.html#abcf55626860f173284cafa474946d9b2">00384</a> <span class="preprocessor">#define AST_OPTION_TXGAIN     5</span>
<a name="l00385"></a>00385 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00386"></a>00386 <span class="comment">/*! Set channel receive gain</span>
<a name="l00387"></a>00387 <span class="comment"> * Option data is a single signed char</span>
<a name="l00388"></a>00388 <span class="comment">   representing number of decibels (dB)</span>
<a name="l00389"></a>00389 <span class="comment">   to set gain to (on top of any gain</span>
<a name="l00390"></a>00390 <span class="comment">   specified in channel driver)</span>
<a name="l00391"></a>00391 <span class="comment">*/</span>
<a name="l00392"></a><a class="code" href="frame_8h.html#a3e9274bcddca58b613f4e676b9943c03">00392</a> <span class="preprocessor">#define AST_OPTION_RXGAIN     6</span>
<a name="l00393"></a>00393 <span class="preprocessor"></span>
<a name="l00394"></a>00394 <span class="comment">/* set channel into &quot;Operator Services&quot; mode */</span>
<a name="l00395"></a><a class="code" href="frame_8h.html#a5cb9d9050e5d0ec07f7c85849aea5b52">00395</a> <span class="preprocessor">#define  AST_OPTION_OPRMODE      7</span>
<a name="l00396"></a>00396 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00397"></a>00397 <span class="comment">/*! Explicitly enable or disable echo cancelation for the given channel */</span>
<a name="l00398"></a><a class="code" href="frame_8h.html#ac888578b526eb9f2c888d248fdbe17e3">00398</a> <span class="preprocessor">#define  AST_OPTION_ECHOCAN      8</span>
<a name="l00399"></a>00399 <span class="preprocessor"></span>
<a name="l00400"></a>00400 <span class="comment">/* !</span>
<a name="l00401"></a>00401 <span class="comment"> * Read-only. Allows query current status of T38 on the channel.</span>
<a name="l00402"></a>00402 <span class="comment"> * data: ast_t38state</span>
<a name="l00403"></a>00403 <span class="comment"> */</span>
<a name="l00404"></a><a class="code" href="frame_8h.html#aa3dbd0541decd817d6eeba18acaa34aa">00404</a> <span class="preprocessor">#define AST_OPTION_T38_STATE     10</span>
<a name="l00405"></a>00405 <span class="preprocessor"></span>
<a name="l00406"></a><a class="code" href="structoprmode.html">00406</a> <span class="keyword">struct </span><a class="code" href="structoprmode.html">oprmode</a> {
<a name="l00407"></a><a class="code" href="structoprmode.html#a49ad9c522be37a447242ba7ff4a1e0db">00407</a>    <span class="keyword">struct </span><a class="code" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> *peer;
<a name="l00408"></a><a class="code" href="structoprmode.html#a1ea5d0cb93f22f7d0fdf804bd68c3326">00408</a>    <span class="keywordtype">int</span> mode;
<a name="l00409"></a>00409 } ;
<a name="l00410"></a>00410 
<a name="l00411"></a><a class="code" href="structast__option__header.html">00411</a> <span class="keyword">struct </span><a class="code" href="structast__option__header.html">ast_option_header</a> {
<a name="l00412"></a>00412    <span class="comment">/* Always keep in network byte order */</span>
<a name="l00413"></a>00413 <span class="preprocessor">#if __BYTE_ORDER == __BIG_ENDIAN</span>
<a name="l00414"></a>00414 <span class="preprocessor"></span>        uint16_t flag:3;
<a name="l00415"></a>00415         uint16_t option:13;
<a name="l00416"></a>00416 <span class="preprocessor">#else</span>
<a name="l00417"></a>00417 <span class="preprocessor"></span><span class="preprocessor">#if __BYTE_ORDER == __LITTLE_ENDIAN</span>
<a name="l00418"></a>00418 <span class="preprocessor"></span>        uint16_t option:13;
<a name="l00419"></a>00419         uint16_t flag:3;
<a name="l00420"></a>00420 <span class="preprocessor">#else</span>
<a name="l00421"></a>00421 <span class="preprocessor"></span><span class="preprocessor">#error Byte order not defined</span>
<a name="l00422"></a>00422 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00423"></a>00423 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00424"></a><a class="code" href="structast__option__header.html#ac3c027f9a365f5741871df5ace13943f">00424</a> <span class="preprocessor"></span>      uint8_t <a class="code" href="structast__frame.html#a7c81436eb90123aabf892413fc5bf849">data</a>[0];
<a name="l00425"></a>00425 };
<a name="l00426"></a>00426 
<a name="l00427"></a>00427 <span class="comment"></span>
<a name="l00428"></a>00428 <span class="comment">/*! \brief Definition of supported media formats (codecs) */</span>
<a name="l00429"></a><a class="code" href="structast__format__list.html">00429</a> <span class="keyword">struct </span><a class="code" href="structast__format__list.html" title="Definition of supported media formats (codecs).">ast_format_list</a> {
<a name="l00430"></a><a class="code" href="structast__format__list.html#ad1e28a1a66a25529b0b61b9ca4e66d44">00430</a>    <span class="keywordtype">int</span> bits;   <span class="comment">/*!&lt; bitmask value */</span>
<a name="l00431"></a><a class="code" href="structast__format__list.html#a5ac083a645d964373f022d03df4849c8">00431</a>    <span class="keywordtype">char</span> *<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>; <span class="comment">/*!&lt; short name */</span>
<a name="l00432"></a><a class="code" href="structast__format__list.html#add8d19b166553d5213be6c9cb878dc39">00432</a>    <span class="keywordtype">int</span> samplespersecond; <span class="comment">/*!&lt; Number of samples per second (8000/16000) */</span>
<a name="l00433"></a><a class="code" href="structast__format__list.html#a3aad16fd4bea1b9717f232ea75ad6449">00433</a>    <span class="keywordtype">char</span> *<a class="code" href="channel_8c.html#a710bce51374aba96ab04912897666c35">desc</a>; <span class="comment">/*!&lt; Description */</span>
<a name="l00434"></a><a class="code" href="structast__format__list.html#a9e1771ccc63dc75f22fb3ea58841fc9c">00434</a>    <span class="keywordtype">int</span> fr_len; <span class="comment">/*!&lt; Single frame length in bytes */</span>
<a name="l00435"></a><a class="code" href="structast__format__list.html#a005fe943b03a357496fec4fd5a5384c7">00435</a>    <span class="keywordtype">int</span> min_ms; <span class="comment">/*!&lt; Min value */</span>
<a name="l00436"></a><a class="code" href="structast__format__list.html#ae92eef30d25050a86edb84d37a39b984">00436</a>    <span class="keywordtype">int</span> max_ms; <span class="comment">/*!&lt; Max value */</span>
<a name="l00437"></a><a class="code" href="structast__format__list.html#a05368e07b33c55c5588a16887e0d1937">00437</a>    <span class="keywordtype">int</span> inc_ms; <span class="comment">/*!&lt; Increment */</span>
<a name="l00438"></a><a class="code" href="structast__format__list.html#a6811d95221b6ad6a05fb9e628d903ff5">00438</a>    <span class="keywordtype">int</span> def_ms; <span class="comment">/*!&lt; Default value */</span>
<a name="l00439"></a><a class="code" href="structast__format__list.html#ac92588540e8c1d014a08cd8a45462b19">00439</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> flags;  <span class="comment">/*!&lt; Smoother flags */</span>
<a name="l00440"></a><a class="code" href="structast__format__list.html#a8082330d5592ca639ddd6f7be0c0c39b">00440</a>    <span class="keywordtype">int</span> cur_ms; <span class="comment">/*!&lt; Current value */</span>
<a name="l00441"></a>00441 };
<a name="l00442"></a>00442 
<a name="l00443"></a>00443 <span class="comment"></span>
<a name="l00444"></a>00444 <span class="comment">/*! \brief  Requests a frame to be allocated </span>
<a name="l00445"></a>00445 <span class="comment"> * </span>
<a name="l00446"></a>00446 <span class="comment"> * \param source </span>
<a name="l00447"></a>00447 <span class="comment"> * Request a frame be allocated.  source is an optional source of the frame, </span>
<a name="l00448"></a>00448 <span class="comment"> * len is the requested length, or &quot;0&quot; if the caller will supply the buffer </span>
<a name="l00449"></a>00449 <span class="comment"> */</span>
<a name="l00450"></a>00450 <span class="preprocessor">#if 0 </span><span class="comment">/* Unimplemented */</span>
<a name="l00451"></a>00451 <span class="keyword">struct </span><a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *ast_fralloc(<span class="keywordtype">char</span> *source, <span class="keywordtype">int</span> len);
<a name="l00452"></a>00452 <span class="preprocessor">#endif</span>
<a name="l00453"></a>00453 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00454"></a>00454 <span class="comment">/*!  </span>
<a name="l00455"></a>00455 <span class="comment"> * \brief Frees a frame or list of frames</span>
<a name="l00456"></a>00456 <span class="comment"> * </span>
<a name="l00457"></a>00457 <span class="comment"> * \param fr Frame to free, or head of list to free</span>
<a name="l00458"></a>00458 <span class="comment"> * \param cache Whether to consider this frame for frame caching</span>
<a name="l00459"></a>00459 <span class="comment"> */</span>
<a name="l00460"></a>00460 <span class="keywordtype">void</span> <a class="code" href="frame_8h.html#a27385fd97f84847f7aa3b7bfcb861361" title="Requests a frame to be allocated.">ast_frame_free</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *fr, <span class="keywordtype">int</span> cache);
<a name="l00461"></a>00461 
<a name="l00462"></a><a class="code" href="frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">00462</a> <span class="preprocessor">#define ast_frfree(fr) ast_frame_free(fr, 1)</span>
<a name="l00463"></a>00463 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00464"></a>00464 <span class="comment">/*! \brief Makes a frame independent of any static storage</span>
<a name="l00465"></a>00465 <span class="comment"> * \param fr frame to act upon</span>
<a name="l00466"></a>00466 <span class="comment"> * Take a frame, and if it&apos;s not been malloc&apos;d, make a malloc&apos;d copy</span>
<a name="l00467"></a>00467 <span class="comment"> * and if the data hasn&apos;t been malloced then make the</span>
<a name="l00468"></a>00468 <span class="comment"> * data malloc&apos;d.  If you need to store frames, say for queueing, then</span>
<a name="l00469"></a>00469 <span class="comment"> * you should call this function.</span>
<a name="l00470"></a>00470 <span class="comment"> * \return Returns a frame on success, NULL on error</span>
<a name="l00471"></a>00471 <span class="comment"> * \note This function may modify the frame passed to it, so you must</span>
<a name="l00472"></a>00472 <span class="comment"> * not assume the frame will be intact after the isolated frame has</span>
<a name="l00473"></a>00473 <span class="comment"> * been produced. In other words, calling this function on a frame</span>
<a name="l00474"></a>00474 <span class="comment"> * should be the last operation you do with that frame before freeing</span>
<a name="l00475"></a>00475 <span class="comment"> * it (or exiting the block, if the frame is on the stack.)</span>
<a name="l00476"></a>00476 <span class="comment"> */</span>
<a name="l00477"></a>00477 <span class="keyword">struct </span><a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *<a class="code" href="frame_8h.html#aa7dbd9b12889d9f96fb6c01f94b4909e" title="Makes a frame independent of any static storage.">ast_frisolate</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *fr);
<a name="l00478"></a>00478 <span class="comment"></span>
<a name="l00479"></a>00479 <span class="comment">/*! \brief Copies a frame </span>
<a name="l00480"></a>00480 <span class="comment"> * \param fr frame to copy</span>
<a name="l00481"></a>00481 <span class="comment"> * Duplicates a frame -- should only rarely be used, typically frisolate is good enough</span>
<a name="l00482"></a>00482 <span class="comment"> * \return Returns a frame on success, NULL on error</span>
<a name="l00483"></a>00483 <span class="comment"> */</span>
<a name="l00484"></a>00484 <span class="keyword">struct </span><a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *<a class="code" href="frame_8h.html#a4b23720d208128250a765490b1a4f145" title="Copies a frame.">ast_frdup</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *fr);
<a name="l00485"></a>00485 
<a name="l00486"></a>00486 <span class="keywordtype">void</span> <a class="code" href="frame_8h.html#ad3313ac3c6813594f1ea408e26505be7">ast_swapcopy_samples</a>(<span class="keywordtype">void</span> *dst, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a>, <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);
<a name="l00487"></a>00487 
<a name="l00488"></a>00488 <span class="comment">/* Helpers for byteswapping native samples to/from </span>
<a name="l00489"></a>00489 <span class="comment">   little-endian and big-endian. */</span>
<a name="l00490"></a>00490 <span class="preprocessor">#if __BYTE_ORDER == __LITTLE_ENDIAN</span>
<a name="l00491"></a>00491 <span class="preprocessor"></span><span class="preprocessor">#define ast_frame_byteswap_le(fr) do { ; } while(0)</span>
<a name="l00492"></a>00492 <span class="preprocessor"></span><span class="preprocessor">#define ast_frame_byteswap_be(fr) do { struct ast_frame *__f = (fr); ast_swapcopy_samples(__f-&gt;data.ptr, __f-&gt;data.ptr, __f-&gt;samples); } while(0)</span>
<a name="l00493"></a>00493 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00494"></a><a class="code" href="frame_8h.html#aaf462b0134f5e50cf6f671622fa40003">00494</a> <span class="preprocessor"></span><span class="preprocessor">#define ast_frame_byteswap_le(fr) do { struct ast_frame *__f = (fr); ast_swapcopy_samples(__f-&gt;data.ptr, __f-&gt;data.ptr, __f-&gt;samples); } while(0)</span>
<a name="l00495"></a><a class="code" href="frame_8h.html#a0eb09df2bca453c21ced51b12b52a88b">00495</a> <span class="preprocessor"></span><span class="preprocessor">#define ast_frame_byteswap_be(fr) do { ; } while(0)</span>
<a name="l00496"></a>00496 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00497"></a>00497 <span class="preprocessor"></span>
<a name="l00498"></a>00498 <span class="comment"></span>
<a name="l00499"></a>00499 <span class="comment">/*! \brief Get the name of a format</span>
<a name="l00500"></a>00500 <span class="comment"> * \param format id of format</span>
<a name="l00501"></a>00501 <span class="comment"> * \return A static string containing the name of the format or &quot;unknown&quot; if unknown.</span>
<a name="l00502"></a>00502 <span class="comment"> */</span>
<a name="l00503"></a>00503 <span class="keywordtype">char</span>* <a class="code" href="frame_8h.html#afe8f690984f8ba95cd01a431198c10bf" title="Get the name of a format.">ast_getformatname</a>(<span class="keywordtype">int</span> <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l00504"></a>00504 <span class="comment"></span>
<a name="l00505"></a>00505 <span class="comment">/*! \brief Get the names of a set of formats</span>
<a name="l00506"></a>00506 <span class="comment"> * \param buf a buffer for the output string</span>
<a name="l00507"></a>00507 <span class="comment"> * \param size size of buf (bytes)</span>
<a name="l00508"></a>00508 <span class="comment"> * \param format the format (combined IDs of codecs)</span>
<a name="l00509"></a>00509 <span class="comment"> * Prints a list of readable codec names corresponding to &quot;format&quot;.</span>
<a name="l00510"></a>00510 <span class="comment"> * ex: for format=AST_FORMAT_GSM|AST_FORMAT_SPEEX|AST_FORMAT_ILBC it will return &quot;0x602 (GSM|SPEEX|ILBC)&quot;</span>
<a name="l00511"></a>00511 <span class="comment"> * \return The return value is buf.</span>
<a name="l00512"></a>00512 <span class="comment"> */</span>
<a name="l00513"></a>00513 <span class="keywordtype">char</span>* <a class="code" href="frame_8h.html#a37cdc7e78686b0bfa4e47e645f782b30" title="Get the names of a set of formats.">ast_getformatname_multiple</a>(<span class="keywordtype">char</span> *<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <span class="keywordtype">size_t</span> size, <span class="keywordtype">int</span> <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l00514"></a>00514 <span class="comment"></span>
<a name="l00515"></a>00515 <span class="comment">/*!</span>
<a name="l00516"></a>00516 <span class="comment"> * \brief Gets a format from a name.</span>
<a name="l00517"></a>00517 <span class="comment"> * \param name string of format</span>
<a name="l00518"></a>00518 <span class="comment"> * \return This returns the form of the format in binary on success, 0 on error.</span>
<a name="l00519"></a>00519 <span class="comment"> */</span>
<a name="l00520"></a>00520 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#a2cf30450cd1821bfbc77d2d9e3605363" title="Gets a format from a name.">ast_getformatbyname</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>);
<a name="l00521"></a>00521 <span class="comment"></span>
<a name="l00522"></a>00522 <span class="comment">/*! \brief Get a name from a format </span>
<a name="l00523"></a>00523 <span class="comment"> * Gets a name from a format</span>
<a name="l00524"></a>00524 <span class="comment"> * \param codec codec number (1,2,4,8,16,etc.)</span>
<a name="l00525"></a>00525 <span class="comment"> * \return This returns a static string identifying the format on success, 0 on error.</span>
<a name="l00526"></a>00526 <span class="comment"> */</span>
<a name="l00527"></a>00527 <span class="keywordtype">char</span> *<a class="code" href="frame_8h.html#ab492fdbd06591d26ff743d440cc0594f" title="Get a name from a format Gets a name from a format.">ast_codec2str</a>(<span class="keywordtype">int</span> codec);
<a name="l00528"></a>00528 <span class="comment"></span>
<a name="l00529"></a>00529 <span class="comment">/*! \name AST_Smoother </span>
<a name="l00530"></a>00530 <span class="comment">*/</span><span class="comment"></span>
<a name="l00531"></a>00531 <span class="comment">/*@{ */</span><span class="comment"></span>
<a name="l00532"></a>00532 <span class="comment">/*! \page ast_smooth The AST Frame Smoother</span>
<a name="l00533"></a>00533 <span class="comment">The ast_smoother interface was designed specifically</span>
<a name="l00534"></a>00534 <span class="comment">to take frames of variant sizes and produce frames of a single expected</span>
<a name="l00535"></a>00535 <span class="comment">size, precisely what you want to do.</span>
<a name="l00536"></a>00536 <span class="comment"></span>
<a name="l00537"></a>00537 <span class="comment">The basic interface is:</span>
<a name="l00538"></a>00538 <span class="comment"></span>
<a name="l00539"></a>00539 <span class="comment">- Initialize with ast_smoother_new()</span>
<a name="l00540"></a>00540 <span class="comment">- Queue input frames with ast_smoother_feed()</span>
<a name="l00541"></a>00541 <span class="comment">- Get output frames with ast_smoother_read()</span>
<a name="l00542"></a>00542 <span class="comment">- when you&apos;re done, free the structure with ast_smoother_free()</span>
<a name="l00543"></a>00543 <span class="comment">- Also see ast_smoother_test_flag(), ast_smoother_set_flags(), ast_smoother_get_flags(), ast_smoother_reset()</span>
<a name="l00544"></a>00544 <span class="comment">*/</span>
<a name="l00545"></a>00545 <span class="keyword">struct </span><a class="code" href="structast__smoother.html">ast_smoother</a>;
<a name="l00546"></a>00546 
<a name="l00547"></a>00547 <span class="keyword">struct </span><a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="frame_8h.html#a6f1c795e5db00c9eb553e540dce7a503">ast_smoother_new</a>(<span class="keywordtype">int</span> bytes);
<a name="l00548"></a>00548 <span class="keywordtype">void</span> <a class="code" href="frame_8h.html#a2bf0a4739b534e4f317230763ec3afcb">ast_smoother_set_flags</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *smoother, <span class="keywordtype">int</span> flags);
<a name="l00549"></a>00549 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#a6fc9579ac9888a2a92016034592c7d76">ast_smoother_get_flags</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *smoother);
<a name="l00550"></a>00550 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#a3d6997c8a03e68d88c52f784c16c069f">ast_smoother_test_flag</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a>, <span class="keywordtype">int</span> flag);
<a name="l00551"></a>00551 <span class="keywordtype">void</span> <a class="code" href="frame_8h.html#a6d3b71e0a81af743bae6c33c02b64f1f">ast_smoother_free</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a>);
<a name="l00552"></a>00552 <span class="keywordtype">void</span> <a class="code" href="frame_8h.html#add7324cf0482ce24eaa13abdc00e115d">ast_smoother_reset</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a>, <span class="keywordtype">int</span> bytes);
<a name="l00553"></a>00553 <span class="comment"></span>
<a name="l00554"></a>00554 <span class="comment">/*!</span>
<a name="l00555"></a>00555 <span class="comment"> * \brief Reconfigure an existing smoother to output a different number of bytes per frame</span>
<a name="l00556"></a>00556 <span class="comment"> * \param s the smoother to reconfigure</span>
<a name="l00557"></a>00557 <span class="comment"> * \param bytes the desired number of bytes per output frame</span>
<a name="l00558"></a>00558 <span class="comment"> * \return nothing</span>
<a name="l00559"></a>00559 <span class="comment"> *</span>
<a name="l00560"></a>00560 <span class="comment"> */</span>
<a name="l00561"></a>00561 <span class="keywordtype">void</span> <a class="code" href="frame_8h.html#a34c247d5417aed64069bbeac7fc09728" title="Reconfigure an existing smoother to output a different number of bytes per frame...">ast_smoother_reconfigure</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a>, <span class="keywordtype">int</span> bytes);
<a name="l00562"></a>00562 
<a name="l00563"></a>00563 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#aa3ca9ba99227d1f76e44d2ceb32cc6f5">__ast_smoother_feed</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a>, <span class="keyword">struct</span> <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *<a class="code" href="format__g726_8c.html#a6add0b75a88c25db4ccbf690acda6d7f">f</a>, <span class="keywordtype">int</span> swap);
<a name="l00564"></a>00564 <span class="keyword">struct </span><a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *<a class="code" href="frame_8h.html#af8d6dcd265eaf403b1b1139770c885d8">ast_smoother_read</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="aesopt_8h.html#a20c782a91c883391b9bdf9e3176e447c">s</a>);
<a name="l00565"></a><a class="code" href="frame_8h.html#aab5808a118c74febd13f39746bcce96c">00565</a> <span class="preprocessor">#define ast_smoother_feed(s,f) __ast_smoother_feed(s, f, 0)</span>
<a name="l00566"></a>00566 <span class="preprocessor"></span><span class="preprocessor">#if __BYTE_ORDER == __LITTLE_ENDIAN</span>
<a name="l00567"></a>00567 <span class="preprocessor"></span><span class="preprocessor">#define ast_smoother_feed_be(s,f) __ast_smoother_feed(s, f, 1)</span>
<a name="l00568"></a>00568 <span class="preprocessor"></span><span class="preprocessor">#define ast_smoother_feed_le(s,f) __ast_smoother_feed(s, f, 0)</span>
<a name="l00569"></a>00569 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00570"></a><a class="code" href="frame_8h.html#a3af01c93b369d5de7caccd2be0b97c4a">00570</a> <span class="preprocessor"></span><span class="preprocessor">#define ast_smoother_feed_be(s,f) __ast_smoother_feed(s, f, 0)</span>
<a name="l00571"></a><a class="code" href="frame_8h.html#a7e82e68964857ead9954ebc73ce5e844">00571</a> <span class="preprocessor"></span><span class="preprocessor">#define ast_smoother_feed_le(s,f) __ast_smoother_feed(s, f, 1)</span>
<a name="l00572"></a>00572 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00573"></a>00573 <span class="preprocessor"></span><span class="comment">/*@} Doxygen marker */</span>
<a name="l00574"></a>00574 
<a name="l00575"></a>00575 <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structast__format__list.html" title="Definition of supported media formats (codecs).">ast_format_list</a> *<a class="code" href="frame_8h.html#a268ae14fc66757a5491831e30560a476">ast_get_format_list_index</a>(<span class="keywordtype">int</span> index);
<a name="l00576"></a>00576 <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structast__format__list.html" title="Definition of supported media formats (codecs).">ast_format_list</a> *<a class="code" href="frame_8h.html#a7a74b26c677d2372f9b90b3a38d03b14">ast_get_format_list</a>(<span class="keywordtype">size_t</span> *size);
<a name="l00577"></a>00577 <span class="keywordtype">void</span> <a class="code" href="frame_8h.html#a35641692b96e9e81da06d8d36e677cb8">ast_frame_dump</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="keyword">struct</span> <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *<a class="code" href="format__g726_8c.html#a6add0b75a88c25db4ccbf690acda6d7f">f</a>, <span class="keywordtype">char</span> *<a class="code" href="http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>);
<a name="l00578"></a>00578 <span class="comment"></span>
<a name="l00579"></a>00579 <span class="comment">/*! \page AudioCodecPref Audio Codec Preferences</span>
<a name="l00580"></a>00580 <span class="comment"></span>
<a name="l00581"></a>00581 <span class="comment">   In order to negotiate audio codecs in the order they are configured</span>
<a name="l00582"></a>00582 <span class="comment">   in &lt;channel&gt;.conf for a device, we set up codec preference lists</span>
<a name="l00583"></a>00583 <span class="comment">   in addition to the codec capabilities setting. The capabilities</span>
<a name="l00584"></a>00584 <span class="comment">   setting is a bitmask of audio and video codecs with no internal</span>
<a name="l00585"></a>00585 <span class="comment">   order. This will reflect the offer given to the other side, where</span>
<a name="l00586"></a>00586 <span class="comment">   the prefered codecs will be added to the top of the list in the</span>
<a name="l00587"></a>00587 <span class="comment">   order indicated by the &quot;allow&quot; lines in the device configuration.</span>
<a name="l00588"></a>00588 <span class="comment">   </span>
<a name="l00589"></a>00589 <span class="comment">   Video codecs are not included in the preference lists since they</span>
<a name="l00590"></a>00590 <span class="comment">   can&apos;t be transcoded and we just have to pick whatever is supported</span>
<a name="l00591"></a>00591 <span class="comment">*/</span>
<a name="l00592"></a>00592 <span class="comment"></span>
<a name="l00593"></a>00593 <span class="comment">/*! </span>
<a name="l00594"></a>00594 <span class="comment"> *\brief Initialize an audio codec preference to &quot;no preference&quot;.</span>
<a name="l00595"></a>00595 <span class="comment"> * \arg \ref AudioCodecPref </span>
<a name="l00596"></a>00596 <span class="comment">*/</span>
<a name="l00597"></a>00597 <span class="keywordtype">void</span> <a class="code" href="frame_8h.html#a091484df2212a98c435737d22a367bce" title="Initialize an audio codec preference to &amp;quot;no preference&amp;quot;.">ast_codec_pref_init</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref);
<a name="l00598"></a>00598 <span class="comment"></span>
<a name="l00599"></a>00599 <span class="comment">/*! </span>
<a name="l00600"></a>00600 <span class="comment"> * \brief Codec located at a particular place in the preference index.</span>
<a name="l00601"></a>00601 <span class="comment"> * \arg \ref AudioCodecPref </span>
<a name="l00602"></a>00602 <span class="comment">*/</span>
<a name="l00603"></a>00603 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#af9dd4cbc4b715644df1afe4964169c9b" title="Codec located at a particular place in the preference index.">ast_codec_pref_index</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> index);
<a name="l00604"></a>00604 <span class="comment"></span>
<a name="l00605"></a>00605 <span class="comment">/*! \brief Remove audio a codec from a preference list */</span>
<a name="l00606"></a>00606 <span class="keywordtype">void</span> <a class="code" href="frame_8h.html#a8daa8fe39c23fc605881466efafa00f7" title="Remove audio a codec from a preference list.">ast_codec_pref_remove</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l00607"></a>00607 <span class="comment"></span>
<a name="l00608"></a>00608 <span class="comment">/*! \brief Append a audio codec to a preference list, removing it first if it was already there </span>
<a name="l00609"></a>00609 <span class="comment">*/</span>
<a name="l00610"></a>00610 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#a54b0af0dfdc8466239e6babb9303f7b3" title="Append a audio codec to a preference list, removing it first if it was already there...">ast_codec_pref_append</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l00611"></a>00611 <span class="comment"></span>
<a name="l00612"></a>00612 <span class="comment">/*! \brief Prepend an audio codec to a preference list, removing it first if it was already there </span>
<a name="l00613"></a>00613 <span class="comment">*/</span>
<a name="l00614"></a>00614 <span class="keywordtype">void</span> <a class="code" href="frame_8h.html#a5eb17ccec8892ebe96ab661e749f0399" title="Prepend an audio codec to a preference list, removing it first if it was already...">ast_codec_pref_prepend</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <span class="keywordtype">int</span> only_if_existing);
<a name="l00615"></a>00615 <span class="comment"></span>
<a name="l00616"></a>00616 <span class="comment">/*! \brief Select the best audio format according to preference list from supplied options. </span>
<a name="l00617"></a>00617 <span class="comment">   If &quot;find_best&quot; is non-zero then if nothing is found, the &quot;Best&quot; format of </span>
<a name="l00618"></a>00618 <span class="comment">   the format list is selected, otherwise 0 is returned. */</span>
<a name="l00619"></a>00619 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#a123ec7e6e90e279b75bc6447eab5d3b2" title="Select the best audio format according to preference list from supplied options....">ast_codec_choose</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> <a class="code" href="structformats.html">formats</a>, <span class="keywordtype">int</span> <a class="code" href="app__queue_8c.html#ab389b8ba466d7d05808b044592b05710" title="find the entry with the best metric, or NULL">find_best</a>);
<a name="l00620"></a>00620 <span class="comment"></span>
<a name="l00621"></a>00621 <span class="comment">/*! \brief Set packet size for codec</span>
<a name="l00622"></a>00622 <span class="comment">*/</span>
<a name="l00623"></a>00623 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#a6803881645ae33ff0618b3648d26aeaa" title="Set packet size for codec.">ast_codec_pref_setsize</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <span class="keywordtype">int</span> framems);
<a name="l00624"></a>00624 <span class="comment"></span>
<a name="l00625"></a>00625 <span class="comment">/*! \brief Get packet size for codec</span>
<a name="l00626"></a>00626 <span class="comment">*/</span>
<a name="l00627"></a>00627 <span class="keyword">struct </span><a class="code" href="structast__format__list.html" title="Definition of supported media formats (codecs).">ast_format_list</a> <a class="code" href="frame_8h.html#ac9789499b866949ab31bab025b497964" title="Get packet size for codec.">ast_codec_pref_getsize</a>(struct <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>);
<a name="l00628"></a>00628 <span class="comment"></span>
<a name="l00629"></a>00629 <span class="comment">/*! \brief Parse an &quot;allow&quot; or &quot;deny&quot; line in a channel or device configuration </span>
<a name="l00630"></a>00630 <span class="comment">        and update the capabilities mask and pref if provided.</span>
<a name="l00631"></a>00631 <span class="comment">   Video codecs are not added to codec preference lists, since we can not transcode</span>
<a name="l00632"></a>00632 <span class="comment">   \return Returns number of errors encountered during parsing</span>
<a name="l00633"></a>00633 <span class="comment"> */</span>
<a name="l00634"></a>00634 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#a35aa1fb72e1993a14156a6b912034ef9" title="Parse an &amp;quot;allow&amp;quot; or &amp;quot;deny&amp;quot; line in a channel or device configuration...">ast_parse_allow_disallow</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> *mask, <span class="keyword">const</span> <span class="keywordtype">char</span> *list, <span class="keywordtype">int</span> allowing);
<a name="l00635"></a>00635 <span class="comment"></span>
<a name="l00636"></a>00636 <span class="comment">/*! \brief Dump audio codec preference list into a string */</span>
<a name="l00637"></a>00637 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#a784e4f7371cbfce0b3e9f957f7ce54e3" title="Dump audio codec preference list into a string.">ast_codec_pref_string</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">char</span> *<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <span class="keywordtype">size_t</span> size);
<a name="l00638"></a>00638 <span class="comment"></span>
<a name="l00639"></a>00639 <span class="comment">/*! \brief Shift an audio codec preference list up or down 65 bytes so that it becomes an ASCII string */</span>
<a name="l00640"></a>00640 <span class="keywordtype">void</span> <a class="code" href="frame_8h.html#a42cc334b6773ff33cb3c24ca5a916842" title="Shift an audio codec preference list up or down 65 bytes so that it becomes an ASCII...">ast_codec_pref_convert</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">char</span> *<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <span class="keywordtype">size_t</span> size, <span class="keywordtype">int</span> right);
<a name="l00641"></a>00641 <span class="comment"></span>
<a name="l00642"></a>00642 <span class="comment">/*! \brief Returns the number of samples contained in the frame */</span>
<a name="l00643"></a>00643 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#aedec72ae8357bb6c334111f93d283713" title="Returns the number of samples contained in the frame.">ast_codec_get_samples</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *<a class="code" href="format__g726_8c.html#a6add0b75a88c25db4ccbf690acda6d7f">f</a>);
<a name="l00644"></a>00644 <span class="comment"></span>
<a name="l00645"></a>00645 <span class="comment">/*! \brief Returns the number of bytes for the number of samples of the given format */</span>
<a name="l00646"></a>00646 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#ae147ae1521acd6b95bba6956078b2f34" title="Returns the number of bytes for the number of samples of the given format.">ast_codec_get_len</a>(<span class="keywordtype">int</span> <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>, <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);
<a name="l00647"></a>00647 <span class="comment"></span>
<a name="l00648"></a>00648 <span class="comment">/*! \brief Appends a frame to the end of a list of frames, truncating the maximum length of the list */</span>
<a name="l00649"></a>00649 <span class="keyword">struct </span><a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *<a class="code" href="frame_8h.html#a4c78eded634cd9ae8d55eea5e91964f5" title="Appends a frame to the end of a list of frames, truncating the maximum length of...">ast_frame_enqueue</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *head, <span class="keyword">struct</span> <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *<a class="code" href="format__g726_8c.html#a6add0b75a88c25db4ccbf690acda6d7f">f</a>, <span class="keywordtype">int</span> maxlen, <span class="keywordtype">int</span> dupe);
<a name="l00650"></a>00650 
<a name="l00651"></a>00651 <span class="comment"></span>
<a name="l00652"></a>00652 <span class="comment">/*! \brief Gets duration in ms of interpolation frame for a format */</span>
<a name="l00653"></a><a class="code" href="frame_8h.html#ab4d67e0c5a553f7796d59ccbbad33510">00653</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#ab4d67e0c5a553f7796d59ccbbad33510" title="Gets duration in ms of interpolation frame for a format.">ast_codec_interp_len</a>(<span class="keywordtype">int</span> <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>) 
<a name="l00654"></a>00654 { 
<a name="l00655"></a>00655    <span class="keywordflow">return</span> (format == <a class="code" href="frame_8h.html#a8330d06ea408802c37e9af61a513c6a1">AST_FORMAT_ILBC</a>) ? 30 : 20;
<a name="l00656"></a>00656 }
<a name="l00657"></a>00657 <span class="comment"></span>
<a name="l00658"></a>00658 <span class="comment">/*!</span>
<a name="l00659"></a>00659 <span class="comment">  \brief Adjusts the volume of the audio samples contained in a frame.</span>
<a name="l00660"></a>00660 <span class="comment">  \param f The frame containing the samples (must be AST_FRAME_VOICE and AST_FORMAT_SLINEAR)</span>
<a name="l00661"></a>00661 <span class="comment">  \param adjustment The number of dB to adjust up or down.</span>
<a name="l00662"></a>00662 <span class="comment">  \return 0 for success, non-zero for an error</span>
<a name="l00663"></a>00663 <span class="comment"> */</span>
<a name="l00664"></a>00664 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#a59b72ee1caa9e8349ca017df01e8ac55" title="Adjusts the volume of the audio samples contained in a frame.">ast_frame_adjust_volume</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *<a class="code" href="format__g726_8c.html#a6add0b75a88c25db4ccbf690acda6d7f">f</a>, <span class="keywordtype">int</span> adjustment);
<a name="l00665"></a>00665 <span class="comment"></span>
<a name="l00666"></a>00666 <span class="comment">/*!</span>
<a name="l00667"></a>00667 <span class="comment">  \brief Sums two frames of audio samples.</span>
<a name="l00668"></a>00668 <span class="comment">  \param f1 The first frame (which will contain the result)</span>
<a name="l00669"></a>00669 <span class="comment">  \param f2 The second frame</span>
<a name="l00670"></a>00670 <span class="comment">  \return 0 for success, non-zero for an error</span>
<a name="l00671"></a>00671 <span class="comment"></span>
<a name="l00672"></a>00672 <span class="comment">  The frames must be AST_FRAME_VOICE and must contain AST_FORMAT_SLINEAR samples,</span>
<a name="l00673"></a>00673 <span class="comment">  and must contain the same number of samples.</span>
<a name="l00674"></a>00674 <span class="comment"> */</span>
<a name="l00675"></a>00675 <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#ab819ef38276be16fede1c39cfcc8306c" title="Sums two frames of audio samples.">ast_frame_slinear_sum</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *f1, <span class="keyword">struct</span> <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *f2);
<a name="l00676"></a>00676 <span class="comment"></span>
<a name="l00677"></a>00677 <span class="comment">/*!</span>
<a name="l00678"></a>00678 <span class="comment"> * \brief Get the sample rate for a given format.</span>
<a name="l00679"></a>00679 <span class="comment"> */</span>
<a name="l00680"></a><a class="code" href="frame_8h.html#a29a7b93f4295966d4d441e91bff2b01e">00680</a> <span class="keyword">static</span> <a class="code" href="compiler_8h.html#ae8c57c7218a376f10cbdf0e50f1189ee">force_inline</a> <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#a29a7b93f4295966d4d441e91bff2b01e" title="Get the sample rate for a given format.">ast_format_rate</a>(<span class="keywordtype">int</span> <a class="code" href="cdr__custom_8c.html#a2177723f86d0a496f395614f4493cd7f">format</a>)
<a name="l00681"></a>00681 {
<a name="l00682"></a>00682    <span class="keywordflow">switch</span> (format) {
<a name="l00683"></a>00683    <span class="keywordflow">case</span> <a class="code" href="frame_8h.html#a4a0e8720928940d26abf28fff2e6586d">AST_FORMAT_G722</a>:
<a name="l00684"></a>00684    <span class="keywordflow">case</span> <a class="code" href="frame_8h.html#a6e078550fcf3f2038f6c343b3d65a936">AST_FORMAT_SLINEAR16</a>:
<a name="l00685"></a>00685    <span class="keywordflow">case</span> <a class="code" href="frame_8h.html#a13092663dddb1492d81571f9f0ae4506">AST_FORMAT_SIREN7</a>:
<a name="l00686"></a>00686       <span class="keywordflow">return</span> 16000;
<a name="l00687"></a>00687    <span class="keywordflow">case</span> <a class="code" href="frame_8h.html#a590224283a5c1527fab938e4d02686cc">AST_FORMAT_SIREN14</a>:
<a name="l00688"></a>00688       <span class="keywordflow">return</span> 32000;
<a name="l00689"></a>00689    <span class="keywordflow">default</span>:
<a name="l00690"></a>00690       <span class="keywordflow">return</span> 8000;
<a name="l00691"></a>00691    }
<a name="l00692"></a>00692 }
<a name="l00693"></a>00693 
<a name="l00694"></a>00694 <span class="preprocessor">#if defined(__cplusplus) || defined(c_plusplus)</span>
<a name="l00695"></a>00695 <span class="preprocessor"></span>}
<a name="l00696"></a>00696 <span class="preprocessor">#endif</span>
<a name="l00697"></a>00697 <span class="preprocessor"></span>
<a name="l00698"></a>00698 <span class="preprocessor">#endif </span><span class="comment">/* _ASTERISK_FRAME_H */</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:18:40 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
