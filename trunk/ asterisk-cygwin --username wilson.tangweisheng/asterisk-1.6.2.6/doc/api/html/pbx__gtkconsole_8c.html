<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:22:53 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_6ae6169cd48d88136f0d813c029ee18c.html">pbx</a>
  </div>
</div>
<div class="contents">
<h1>pbx_gtkconsole.c File Reference</h1>
<p>GTK Console monitor -- very kludgy right now.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="asterisk_8h_source.html">asterisk.h</a>&quot;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;signal.h&gt;</code><br/>
<code>#include &lt;sys/time.h&gt;</code><br/>
<code>#include &lt;gtk/gtk.h&gt;</code><br/>
<code>#include &lt;glib.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="config_8h_source.html">asterisk/config.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="module_8h_source.html">asterisk/module.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="logger_8h_source.html">asterisk/logger.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="paths_8h_source.html">asterisk/paths.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="term_8h_source.html">asterisk/term.h</a>&quot;</code><br/>

<p><a href="pbx__gtkconsole_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#ae37c58cdee588e3376ebf4300949629c">__verboser</a> (const char *_stuff)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#aacda35b0d282625bc2171384b6e82857">add_mod</a> (const char *module, const char *<a class="el" href="callerid_8c.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a>, int usecount, const char *like)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a90ee59a0e8c227f206e94b5555b9c777">add_module</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#ae553432d9c2050cb69863126759710e4">cleanup</a> (void *useless)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a0d2e652fdb839154db337fef09cb4d94">cli_activate</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a9478d2b90c83345dbc1baba96cb3ba29">cliinput</a> (void *data, int source, GdkInputCondition ic)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#aac5054564a8b99634647231a22330f36">consolethread</a> (void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a2a6ec6b63ac4b032dd7c584cf14538de">exit_completely</a> (GtkWidget *widget, gpointer data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a6dafe7c68338a7b7e18b2941efea7d59">exit_nicely</a> (GtkWidget *widget, gpointer data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#ad928f238c1d7162e13363a777d60af43">exit_now</a> (GtkWidget *widget, gpointer data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#ab92b4ffeff8095c7105c609dcb2760e9">file_ok_sel</a> (GtkWidget *w, GtkFileSelection *fs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a6e77eac4a1659da45f52e7c2331cf864">mod_update</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a6cbb3b01ef59904f5c58134e0f49a174">remove_module</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a45e4c0ab1e5ea59682d0b6abd584634d">show_console</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a50d9319557c308aaf55721eed34e896b">update_statusbar</a> (char *<a class="el" href="adsistub_8c.html#a0dee90db1d6eb30329bee1ae6cec036a">msg</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a0c0c99ba0add51bd09ff543f9e245d12">verboser</a> (const char *stuff)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structast__module__info.html">ast_module_info</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = AST_MODULE, .flags = AST_MODFLAG_DEFAULT , .<a class="el" href="callerid_8c.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a> = &quot;GTK Console&quot; , .key = &quot;This paragraph is copyright (c) 2006 by Digium, Inc. \In order for your module to load, it must return this \key via a function called \&quot;key\&quot;. Any code which \includes this paragraph must be licensed under the GNU \General Public License <a class="el" href="res__config__pgsql_8c.html#aad880fc4455c253781e8968f2239d56f">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;aefddfaffd51bc118c14a748e96eb9a0&quot; , .load = load_module, .unload = unload_module, .reload = reload, }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structast__module__info.html">ast_module_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#ae25b9f3970870610911f8850897e8ead">ast_module_info</a> = &amp;<a class="el" href="res__timing__timerfd_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#ac1017f4049ee9cf09572aa89ab1a233f">cleanupid</a> = -1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static GtkWidget *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a704ae1af535db1fe8718b633689bdfb3">cli</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a8e200ba52c1d5d75fe559882e742d378">clipipe</a> [2]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static GtkWidget *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a72ffa7a226d23b25e70d40b707dee259">closew</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static pthread_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a77d5df922ae6b1d6423ed76f91d22a37">console_thread</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a679cabe3b846f2e363f43d8e57433834">inuse</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct timeval&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#ab9167ed7936f3ca9012b99f80485d6f2">last</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static GtkWidget *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static GtkWidget *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a1a178011116b4794df2c3dd41be5e9ed">quit</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static GtkWidget *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a22c97d796c5f592c603bab82cfa9cc44">statusbar</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static GtkWidget *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a986279393cc32e1f2fafea05783d6322">verb</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="lock_8h.html#a2d9118a2a8939f115eea771bce3a52f2">ast_mutex_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#ab90fbaf4df3ce36f8ceced3bb450bc37">verb_lock</a> = ((<a class="el" href="lock_8h.html#a2d9118a2a8939f115eea771bce3a52f2">ast_mutex_t</a>) PTHREAD_MUTEX_INITIALIZER )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static GtkWidget *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>GTK Console monitor -- very kludgy right now. </p>

<p>Definition in file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a88b7c88fed6b80fd18f34f97757dfc04"></a><!-- doxytag: member="pbx_gtkconsole.c::__reg_module" ref="a88b7c88fed6b80fd18f34f97757dfc04" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00510">510</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="afeab1257bd17282b95875499393a147a"></a><!-- doxytag: member="pbx_gtkconsole.c::__unreg_module" ref="afeab1257bd17282b95875499393a147a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00510">510</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae37c58cdee588e3376ebf4300949629c"></a><!-- doxytag: member="pbx_gtkconsole.c::__verboser" ref="ae37c58cdee588e3376ebf4300949629c" args="(const char *_stuff)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __verboser </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>_stuff</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00100">100</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="utils_8h_source.html#l00616">ast_strdupa</a>, <a class="el" href="time_8h_source.html#l00089">ast_tvdiff_ms()</a>, <a class="el" href="time_8h_source.html#l00099">ast_tvzero()</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00088">cleanup()</a>, <a class="el" href="devicestate_8c_source.html#l00198">last</a>, and <a class="el" href="term_8c_source.html#l00271">term_strip()</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00145">cliinput()</a>, and <a class="el" href="pbx__gtkconsole_8c_source.html#l00133">verboser()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00101"></a>00101 {
<a name="l00102"></a>00102    <span class="keywordtype">char</span> *s2[2];
<a name="l00103"></a>00103    <span class="keyword">struct </span>timeval <a class="code" href="time_8h.html#a9cf96982557d56650f0f4cd3762f05a0">tv</a>;
<a name="l00104"></a>00104    <span class="keywordtype">int</span> ms;
<a name="l00105"></a>00105    <span class="keywordtype">char</span> *stuff;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107    stuff = <a class="code" href="utils_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6" title="duplicate a string in memory from the stack">ast_strdupa</a>(_stuff);
<a name="l00108"></a>00108    <a class="code" href="term_8h.html#ab0924db6a78be6daa36e939ad5c983de">term_strip</a>(stuff, stuff, strlen(stuff) + 1);
<a name="l00109"></a>00109 
<a name="l00110"></a>00110    s2[0] = (<span class="keywordtype">char</span> *)stuff;
<a name="l00111"></a>00111    s2[1] = NULL;
<a name="l00112"></a>00112    gtk_clist_freeze(GTK_CLIST(<a class="code" href="structverb.html">verb</a>));
<a name="l00113"></a>00113    gtk_clist_append(GTK_CLIST(<a class="code" href="structverb.html">verb</a>), s2);
<a name="l00114"></a>00114    <span class="keywordflow">if</span> (!<a class="code" href="time_8h.html#a1b7c6177ea781fc11512de25805fc144" title="Returns true if the argument is 0,0.">ast_tvzero</a>(<a class="code" href="devicestate_8c.html#a43a8def62ee15449794285cbbc0f79af">last</a>)) {
<a name="l00115"></a>00115       gdk_threads_leave();
<a name="l00116"></a>00116       gettimeofday(&amp;tv, NULL);
<a name="l00117"></a>00117       <span class="keywordflow">if</span> (<a class="code" href="pbx__gtkconsole_8c.html#ac1017f4049ee9cf09572aa89ab1a233f">cleanupid</a> &gt; -1)
<a name="l00118"></a>00118          gtk_timeout_remove(<a class="code" href="pbx__gtkconsole_8c.html#ac1017f4049ee9cf09572aa89ab1a233f">cleanupid</a>);
<a name="l00119"></a>00119       ms = <a class="code" href="time_8h.html#a74e35cffcd45ad6cd7c8587921e8a4c2" title="Computes the difference (in milliseconds) between two struct timeval instances.">ast_tvdiff_ms</a>(tv, <a class="code" href="devicestate_8c.html#a43a8def62ee15449794285cbbc0f79af">last</a>);
<a name="l00120"></a>00120       <span class="keywordflow">if</span> (ms &lt; 100) {
<a name="l00121"></a>00121          <span class="comment">/* We just got a message within 100ms, so just schedule an update</span>
<a name="l00122"></a>00122 <span class="comment">            in the near future */</span>
<a name="l00123"></a>00123          <a class="code" href="pbx__gtkconsole_8c.html#ac1017f4049ee9cf09572aa89ab1a233f">cleanupid</a> = gtk_timeout_add(200, <a class="code" href="pbx__gtkconsole_8c.html#ae553432d9c2050cb69863126759710e4">cleanup</a>, NULL);
<a name="l00124"></a>00124       } <span class="keywordflow">else</span> {
<a name="l00125"></a>00125          <a class="code" href="pbx__gtkconsole_8c.html#ae553432d9c2050cb69863126759710e4">cleanup</a>(&amp;<a class="code" href="pbx__gtkconsole_8c.html#ac1017f4049ee9cf09572aa89ab1a233f">cleanupid</a>);
<a name="l00126"></a>00126       }
<a name="l00127"></a>00127       <a class="code" href="devicestate_8c.html#a43a8def62ee15449794285cbbc0f79af">last</a> = <a class="code" href="time_8h.html#a9cf96982557d56650f0f4cd3762f05a0">tv</a>;
<a name="l00128"></a>00128    } <span class="keywordflow">else</span> {
<a name="l00129"></a>00129       gettimeofday(&amp;<a class="code" href="devicestate_8c.html#a43a8def62ee15449794285cbbc0f79af">last</a>, NULL);
<a name="l00130"></a>00130    }
<a name="l00131"></a>00131 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aacda35b0d282625bc2171384b6e82857"></a><!-- doxytag: member="pbx_gtkconsole.c::add_mod" ref="aacda35b0d282625bc2171384b6e82857" args="(const char *module, const char *description, int usecount, const char *like)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int add_mod </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>description</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>usecount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>like</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00277">277</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="res__config__ldap_8c_source.html#l00069">pass</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00292">mod_update()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00278"></a>00278 {
<a name="l00279"></a>00279    <span class="keywordtype">char</span> use[10];
<a name="l00280"></a>00280    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="res__config__ldap_8c.html#a68433c52f2199bd92a3c151b295de06e">pass</a>[4];
<a name="l00281"></a>00281    <span class="keywordtype">int</span> row;
<a name="l00282"></a>00282    snprintf(use, <span class="keyword">sizeof</span>(use), <span class="stringliteral">&quot;%d&quot;</span>, usecount);
<a name="l00283"></a>00283    pass[0] = module;
<a name="l00284"></a>00284    pass[1] = <a class="code" href="callerid_8c.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a>;
<a name="l00285"></a>00285    pass[2] = use;
<a name="l00286"></a>00286    pass[3] = NULL;
<a name="l00287"></a>00287    row = gtk_clist_append(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), (<span class="keywordtype">char</span> **) pass);
<a name="l00288"></a>00288    gtk_clist_set_row_data(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), row, (<span class="keywordtype">char</span> *) module);
<a name="l00289"></a>00289    <span class="keywordflow">return</span> 0;   
<a name="l00290"></a>00290 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a90ee59a0e8c227f206e94b5555b9c777"></a><!-- doxytag: member="pbx_gtkconsole.c::add_module" ref="a90ee59a0e8c227f206e94b5555b9c777" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void add_module </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00263">263</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="asterisk_8c_source.html#l00250">ast_config_AST_MODULE_DIR</a>, and <a class="el" href="pbx__gtkconsole_8c_source.html#l00243">file_ok_sel()</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00264"></a>00264 {
<a name="l00265"></a>00265    <span class="keywordtype">char</span> tmp[PATH_MAX];
<a name="l00266"></a>00266    GtkWidget *filew;
<a name="l00267"></a>00267    snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%s/*.so&quot;</span>, <a class="code" href="paths_8h.html#a5852d8e3bf5485c09b0f3d2c2375eec3">ast_config_AST_MODULE_DIR</a>);
<a name="l00268"></a>00268    filew = gtk_file_selection_new(<span class="stringliteral">&quot;Load Module&quot;</span>);
<a name="l00269"></a>00269    gtk_signal_connect(GTK_OBJECT (GTK_FILE_SELECTION(filew)-&gt;ok_button),
<a name="l00270"></a>00270                <span class="stringliteral">&quot;clicked&quot;</span>, GTK_SIGNAL_FUNC(<a class="code" href="pbx__gtkconsole_8c.html#ab92b4ffeff8095c7105c609dcb2760e9">file_ok_sel</a>), filew);
<a name="l00271"></a>00271    gtk_signal_connect_object(GTK_OBJECT (GTK_FILE_SELECTION(filew)-&gt;cancel_button),
<a name="l00272"></a>00272                <span class="stringliteral">&quot;clicked&quot;</span>, GTK_SIGNAL_FUNC(gtk_widget_destroy), GTK_OBJECT(filew));
<a name="l00273"></a>00273    gtk_file_selection_set_filename(GTK_FILE_SELECTION(filew), (<span class="keywordtype">char</span> *)tmp);
<a name="l00274"></a>00274    gtk_widget_show(filew);
<a name="l00275"></a>00275 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae553432d9c2050cb69863126759710e4"></a><!-- doxytag: member="pbx_gtkconsole.c::cleanup" ref="ae553432d9c2050cb69863126759710e4" args="(void *useless)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cleanup </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>useless</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00088">88</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00100">__verboser()</a>, <a class="el" href="chan__sip_8c_source.html#l02910">_sip_tcp_helper_thread()</a>, <a class="el" href="chan__iax2_8c_source.html#l12156">build_user()</a>, and <a class="el" href="http_8c_source.html#l00423">handle_uri()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00089"></a>00089 {
<a name="l00090"></a>00090    gdk_threads_enter();
<a name="l00091"></a>00091    gtk_clist_thaw(GTK_CLIST(<a class="code" href="structverb.html">verb</a>));
<a name="l00092"></a>00092    gtk_widget_queue_resize(<a class="code" href="structverb.html">verb</a>-&gt;parent);
<a name="l00093"></a>00093    gtk_clist_moveto(GTK_CLIST(<a class="code" href="structverb.html">verb</a>), GTK_CLIST(<a class="code" href="structverb.html">verb</a>)-&gt;rows - 1, 0, 0, 0);
<a name="l00094"></a>00094    <a class="code" href="pbx__gtkconsole_8c.html#ac1017f4049ee9cf09572aa89ab1a233f">cleanupid</a> = -1;
<a name="l00095"></a>00095    gdk_threads_leave();
<a name="l00096"></a>00096    <span class="keywordflow">return</span> 0;
<a name="l00097"></a>00097 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0d2e652fdb839154db337fef09cb4d94"></a><!-- doxytag: member="pbx_gtkconsole.c::cli_activate" ref="a0d2e652fdb839154db337fef09cb4d94" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cli_activate </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00347">347</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="cli_8h_source.html#l00210">ast_cli_command</a>, <a class="el" href="adsistub_8c_source.html#l00059">buf</a>, and <a class="el" href="app__minivm_8c_source.html#l00406">TRUE</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00348"></a>00348 {
<a name="l00349"></a>00349    <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00350"></a>00350    strncpy(buf, gtk_entry_get_text(GTK_ENTRY(<a class="code" href="pbx__gtkconsole_8c.html#a704ae1af535db1fe8718b633689bdfb3">cli</a>)), <span class="keyword">sizeof</span>(buf) - 1);
<a name="l00351"></a>00351    gtk_entry_set_text(GTK_ENTRY(<a class="code" href="pbx__gtkconsole_8c.html#a704ae1af535db1fe8718b633689bdfb3">cli</a>), <span class="stringliteral">&quot;&quot;</span>);
<a name="l00352"></a>00352    <span class="keywordflow">if</span> (strlen(buf)) {
<a name="l00353"></a>00353       <a class="code" href="cli_8h.html#a9c772ebcb8e1a0d2cecbf551f089f58f">ast_cli_command</a>(<a class="code" href="pbx__gtkconsole_8c.html#a8e200ba52c1d5d75fe559882e742d378">clipipe</a>[1], buf);
<a name="l00354"></a>00354    }
<a name="l00355"></a>00355    <span class="keywordflow">return</span> <a class="code" href="app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00356"></a>00356 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9478d2b90c83345dbc1baba96cb3ba29"></a><!-- doxytag: member="pbx_gtkconsole.c::cliinput" ref="a9478d2b90c83345dbc1baba96cb3ba29" args="(void *data, int source, GdkInputCondition ic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void cliinput </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GdkInputCondition&nbsp;</td>
          <td class="paramname"> <em>ic</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00145">145</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="pbx__gtkconsole_8c_source.html#l00100">__verboser()</a>, and <a class="el" href="adsistub_8c_source.html#l00059">buf</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00146"></a>00146 {
<a name="l00147"></a>00147    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>[256];
<a name="l00148"></a>00148    <span class="keyword">static</span> <span class="keywordtype">int</span> offset = 0;
<a name="l00149"></a>00149    <span class="keywordtype">int</span> res;
<a name="l00150"></a>00150    <span class="keywordtype">char</span> *c;
<a name="l00151"></a>00151    <span class="keywordtype">char</span> *l;
<a name="l00152"></a>00152    <span class="keywordtype">char</span> n;
<a name="l00153"></a>00153    <span class="comment">/* Read as much stuff is there */</span>
<a name="l00154"></a>00154    res = read(source, buf + offset, <span class="keyword">sizeof</span>(buf) - 1 - offset);
<a name="l00155"></a>00155    <span class="keywordflow">if</span> (res &gt; -1)
<a name="l00156"></a>00156       buf[res + offset] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l00157"></a>00157    <span class="comment">/* make sure we&apos;ve null terminated whatever we have so far */</span>
<a name="l00158"></a>00158    c = buf;
<a name="l00159"></a>00159    l = buf;
<a name="l00160"></a>00160    <span class="keywordflow">while</span>(*c) {
<a name="l00161"></a>00161       <span class="keywordflow">if</span> (*c == <span class="charliteral">&apos;\n&apos;</span>) {
<a name="l00162"></a>00162          <span class="comment">/* Keep the trailing \n */</span>
<a name="l00163"></a>00163          c++;
<a name="l00164"></a>00164          n = *c;
<a name="l00165"></a>00165          *c = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l00166"></a>00166          <a class="code" href="pbx__gtkconsole_8c.html#ae37c58cdee588e3376ebf4300949629c">__verboser</a>(l);
<a name="l00167"></a>00167          *(c - 1) = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l00168"></a>00168          *c = n;
<a name="l00169"></a>00169          l = c;
<a name="l00170"></a>00170       } <span class="keywordflow">else</span>
<a name="l00171"></a>00171       c++;
<a name="l00172"></a>00172    }
<a name="l00173"></a>00173    <span class="keywordflow">if</span> (strlen(l)) {
<a name="l00174"></a>00174       <span class="comment">/* We have some left over */</span>
<a name="l00175"></a>00175       memmove(buf, l, strlen(l) + 1);
<a name="l00176"></a>00176       offset = strlen(buf);
<a name="l00177"></a>00177    } <span class="keywordflow">else</span> {
<a name="l00178"></a>00178       offset = 0;
<a name="l00179"></a>00179    }
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aac5054564a8b99634647231a22330f36"></a><!-- doxytag: member="pbx_gtkconsole.c::consolethread" ref="aac5054564a8b99634647231a22330f36" args="(void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* consolethread </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00338">338</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00339"></a>00339 {
<a name="l00340"></a>00340    gtk_widget_show(<a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>);
<a name="l00341"></a>00341    gdk_threads_enter();
<a name="l00342"></a>00342    gtk_main();
<a name="l00343"></a>00343    gdk_threads_leave();
<a name="l00344"></a>00344    <span class="keywordflow">return</span> NULL;
<a name="l00345"></a>00345 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2a6ec6b63ac4b032dd7c584cf14538de"></a><!-- doxytag: member="pbx_gtkconsole.c::exit_completely" ref="a2a6ec6b63ac4b032dd7c584cf14538de" args="(GtkWidget *widget, gpointer data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void exit_completely </td>
          <td>(</td>
          <td class="paramtype">GtkWidget *&nbsp;</td>
          <td class="paramname"> <em>widget</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpointer&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00322">322</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="cli_8h_source.html#l00210">ast_cli_command</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00323"></a>00323 {
<a name="l00324"></a>00324 <span class="preprocessor">#if 0</span>
<a name="l00325"></a>00325 <span class="preprocessor"></span>   <span class="comment">/* Clever... */</span>
<a name="l00326"></a>00326    <a class="code" href="cli_8h.html#a9c772ebcb8e1a0d2cecbf551f089f58f">ast_cli_command</a>(<a class="code" href="pbx__gtkconsole_8c.html#a8e200ba52c1d5d75fe559882e742d378">clipipe</a>[1], <span class="stringliteral">&quot;quit&quot;</span>);
<a name="l00327"></a>00327 <span class="preprocessor">#else</span>
<a name="l00328"></a>00328 <span class="preprocessor"></span>   kill(getpid(), SIGTERM);
<a name="l00329"></a>00329 <span class="preprocessor">#endif</span>
<a name="l00330"></a>00330 <span class="preprocessor"></span>}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6dafe7c68338a7b7e18b2941efea7d59"></a><!-- doxytag: member="pbx_gtkconsole.c::exit_nicely" ref="a6dafe7c68338a7b7e18b2941efea7d59" args="(GtkWidget *widget, gpointer data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void exit_nicely </td>
          <td>(</td>
          <td class="paramtype">GtkWidget *&nbsp;</td>
          <td class="paramname"> <em>widget</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpointer&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00332">332</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00333"></a>00333 {
<a name="l00334"></a>00334    fflush(stdout);
<a name="l00335"></a>00335    gtk_widget_destroy(<a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>);
<a name="l00336"></a>00336 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad928f238c1d7162e13363a777d60af43"></a><!-- doxytag: member="pbx_gtkconsole.c::exit_now" ref="ad928f238c1d7162e13363a777d60af43" args="(GtkWidget *widget, gpointer data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void exit_now </td>
          <td>(</td>
          <td class="paramtype">GtkWidget *&nbsp;</td>
          <td class="paramname"> <em>widget</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpointer&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00308">308</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="loader_8c_source.html#l01146">ast_loader_unregister()</a>, <a class="el" href="loader_8c_source.html#l00482">ast_unload_resource()</a>, <a class="el" href="logger_8c_source.html#l01330">ast_unregister_verbose()</a>, <a class="el" href="loader_8c_source.html#l01085">ast_update_use_count()</a>, <a class="el" href="logger_8h_source.html#l00220">ast_verb</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00292">mod_update()</a>, and <a class="el" href="pbx__gtkconsole_8c_source.html#l00133">verboser()</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00309"></a>00309 {
<a name="l00310"></a>00310    <span class="keywordtype">int</span> res;
<a name="l00311"></a>00311 
<a name="l00312"></a>00312    <a class="code" href="module_8h.html#a057c6c9c5266071d7a8a09695555ee25" title="Remove a procedure to be run when modules are updated.">ast_loader_unregister</a>(<a class="code" href="pbx__gtkconsole_8c.html#a6e77eac4a1659da45f52e7c2331cf864">mod_update</a>);
<a name="l00313"></a>00313    gtk_main_quit();
<a name="l00314"></a>00314    <a class="code" href="pbx__gtkconsole_8c.html#a679cabe3b846f2e363f43d8e57433834">inuse</a>--;
<a name="l00315"></a>00315    <a class="code" href="module_8h.html#a28b9e8444e0f9b495cc1b10628b816e8" title="Notify when usecount has been changed.">ast_update_use_count</a>();
<a name="l00316"></a>00316    res = <a class="code" href="logger_8h.html#ac9d5f6e4de00a7d86e9c6e1cdef13409">ast_unregister_verbose</a>(<a class="code" href="pbx__gtkconsole_8c.html#a0c0c99ba0add51bd09ff543f9e245d12">verboser</a>);
<a name="l00317"></a>00317    <a class="code" href="module_8h.html#a52f6615f305951a0d61adc6e61920c34" title="Unload a module.">ast_unload_resource</a>(<span class="stringliteral">&quot;pbx_gtkconsole&quot;</span>, 0);
<a name="l00318"></a>00318    <a class="code" href="logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;GTK Console Monitor Exiting\n&quot;</span>);
<a name="l00319"></a>00319    <span class="comment">/* XXX Trying to quit after calling this makes asterisk segfault XXX */</span>
<a name="l00320"></a>00320 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab92b4ffeff8095c7105c609dcb2760e9"></a><!-- doxytag: member="pbx_gtkconsole.c::file_ok_sel" ref="ab92b4ffeff8095c7105c609dcb2760e9" args="(GtkWidget *w, GtkFileSelection *fs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void file_ok_sel </td>
          <td>(</td>
          <td class="paramtype">GtkWidget *&nbsp;</td>
          <td class="paramname"> <em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GtkFileSelection *&nbsp;</td>
          <td class="paramname"> <em>fs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00243">243</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="asterisk_8c_source.html#l00250">ast_config_AST_MODULE_DIR</a>, <a class="el" href="loader_8c_source.html#l00831">ast_load_resource()</a>, <a class="el" href="adsistub_8c_source.html#l00059">buf</a>, and <a class="el" href="pbx__gtkconsole_8c_source.html#l00068">update_statusbar()</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00263">add_module()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00244"></a>00244 {
<a name="l00245"></a>00245    <span class="keywordtype">char</span> tmp[PATH_MAX];
<a name="l00246"></a>00246    <span class="keywordtype">char</span> *module = gtk_file_selection_get_filename(fs);
<a name="l00247"></a>00247    <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>[256];
<a name="l00248"></a>00248    snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%s/&quot;</span>, <a class="code" href="paths_8h.html#a5852d8e3bf5485c09b0f3d2c2375eec3">ast_config_AST_MODULE_DIR</a>);
<a name="l00249"></a>00249    <span class="keywordflow">if</span> (!strncmp(module, (<span class="keywordtype">char</span> *)tmp, strlen(tmp))) 
<a name="l00250"></a>00250       module += strlen(tmp);
<a name="l00251"></a>00251    gdk_threads_leave();
<a name="l00252"></a>00252    <span class="keywordflow">if</span> (<a class="code" href="module_8h.html#a841766995d4e10ebb3950b10aab97d9e" title="Load a module.">ast_load_resource</a>(module)) {
<a name="l00253"></a>00253       snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Error loading module &apos;%s&apos;.&quot;</span>, module);
<a name="l00254"></a>00254       <a class="code" href="pbx__gtkconsole_8c.html#a50d9319557c308aaf55721eed34e896b">update_statusbar</a>(buf);
<a name="l00255"></a>00255    } <span class="keywordflow">else</span> {
<a name="l00256"></a>00256       snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Module &apos;%s&apos; loaded&quot;</span>, module);
<a name="l00257"></a>00257       <a class="code" href="pbx__gtkconsole_8c.html#a50d9319557c308aaf55721eed34e896b">update_statusbar</a>(buf);
<a name="l00258"></a>00258    }
<a name="l00259"></a>00259    gdk_threads_enter();
<a name="l00260"></a>00260    gtk_widget_destroy(GTK_WIDGET(fs));
<a name="l00261"></a>00261 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac3382bf6da54c56b37069bd76bbdf4f9"></a><!-- doxytag: member="pbx_gtkconsole.c::load_module" ref="ac3382bf6da54c56b37069bd76bbdf4f9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00483">483</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="module_8h_source.html#l00065">AST_MODULE_LOAD_FAILURE</a>, <a class="el" href="module_8h_source.html#l00061">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="loader_8c_source.html#l01085">ast_update_use_count()</a>, <a class="el" href="logger_8h_source.html#l00220">ast_verb</a>, <a class="el" href="logger_8h_source.html#l00119">LOG_DEBUG</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="asterisk_8c_source.html#l00175">option_debug</a>, and <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00484"></a>00484 {
<a name="l00485"></a>00485    <span class="keywordflow">if</span> (pipe(<a class="code" href="pbx__gtkconsole_8c.html#a8e200ba52c1d5d75fe559882e742d378">clipipe</a>)) {
<a name="l00486"></a>00486       <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create CLI pipe\n&quot;</span>);
<a name="l00487"></a>00487       <span class="keywordflow">return</span> <a class="code" href="module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a>;
<a name="l00488"></a>00488    }
<a name="l00489"></a>00489    g_thread_init(NULL);
<a name="l00490"></a>00490    <span class="keywordflow">if</span> (gtk_init_check(NULL, NULL))  {
<a name="l00491"></a>00491       <span class="keywordflow">if</span> (!<a class="code" href="pbx__gtkconsole_8c.html#a45e4c0ab1e5ea59682d0b6abd584634d">show_console</a>()) {
<a name="l00492"></a>00492          <a class="code" href="pbx__gtkconsole_8c.html#a679cabe3b846f2e363f43d8e57433834">inuse</a>++;
<a name="l00493"></a>00493          <a class="code" href="module_8h.html#a28b9e8444e0f9b495cc1b10628b816e8" title="Notify when usecount has been changed.">ast_update_use_count</a>();
<a name="l00494"></a>00494          <a class="code" href="logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Launched GTK Console monitor\n&quot;</span>);
<a name="l00495"></a>00495       } <span class="keywordflow">else</span>
<a name="l00496"></a>00496          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to start GTK console\n&quot;</span>);
<a name="l00497"></a>00497    } <span class="keywordflow">else</span> {
<a name="l00498"></a>00498       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ga40f8fb2e731031d99f732f515cec680f">option_debug</a>)
<a name="l00499"></a>00499          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Unable to start GTK console monitor -- ignoring\n&quot;</span>);
<a name="l00500"></a>00500       <span class="keywordflow">else</span>
<a name="l00501"></a>00501          <a class="code" href="logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;GTK is not available -- skipping monitor\n&quot;</span>);
<a name="l00502"></a>00502    }
<a name="l00503"></a>00503    <span class="keywordflow">return</span> <a class="code" href="module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;
<a name="l00504"></a>00504 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6e77eac4a1659da45f52e7c2331cf864"></a><!-- doxytag: member="pbx_gtkconsole.c::mod_update" ref="a6e77eac4a1659da45f52e7c2331cf864" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mod_update </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00292">292</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="pbx__gtkconsole_8c_source.html#l00277">add_mod()</a>, and <a class="el" href="loader_8c_source.html#l01097">ast_update_module_list()</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00308">exit_now()</a>, and <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00293"></a>00293 {
<a name="l00294"></a>00294    <span class="keywordtype">char</span> *module= NULL;
<a name="l00295"></a>00295    <span class="comment">/* Update the mod stuff */</span>
<a name="l00296"></a>00296    <span class="keywordflow">if</span> (GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>)-&gt;selection) {
<a name="l00297"></a>00297       module= (<span class="keywordtype">char</span> *)gtk_clist_get_row_data(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), (long) GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>)-&gt;selection-&gt;data);
<a name="l00298"></a>00298    }
<a name="l00299"></a>00299    gtk_clist_freeze(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>));
<a name="l00300"></a>00300    gtk_clist_clear(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>));
<a name="l00301"></a>00301    <a class="code" href="module_8h.html#a19adc7caa79fecaf1257325ffb366fe7" title="Ask for a list of modules, descriptions, and use counts.">ast_update_module_list</a>(<a class="code" href="pbx__gtkconsole_8c.html#aacda35b0d282625bc2171384b6e82857">add_mod</a>, NULL);
<a name="l00302"></a>00302    <span class="keywordflow">if</span> (module)
<a name="l00303"></a>00303       gtk_clist_select_row(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), gtk_clist_find_row_from_data(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), module), -1);
<a name="l00304"></a>00304    gtk_clist_thaw(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>));
<a name="l00305"></a>00305    <span class="keywordflow">return</span> 1;
<a name="l00306"></a>00306 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad1982509765f4870f1f63412a53ea668"></a><!-- doxytag: member="pbx_gtkconsole.c::reload" ref="ad1982509765f4870f1f63412a53ea668" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int reload </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00203">203</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="loader_8c_source.html#l00831">ast_load_resource()</a>, <a class="el" href="module_8h_source.html#l00061">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="loader_8c_source.html#l00482">ast_unload_resource()</a>, <a class="el" href="adsistub_8c_source.html#l00059">buf</a>, <a class="el" href="astmm_8h_source.html#l00084">free</a>, <a class="el" href="astmm_8h_source.html#l00096">strdup</a>, and <a class="el" href="pbx__gtkconsole_8c_source.html#l00068">update_statusbar()</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00204"></a>00204 {
<a name="l00205"></a>00205    <span class="keywordtype">int</span> res, x;
<a name="l00206"></a>00206    <span class="keywordtype">char</span> *module;
<a name="l00207"></a>00207    <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>[256];
<a name="l00208"></a>00208    <span class="keywordflow">if</span> (GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>)-&gt;selection) {
<a name="l00209"></a>00209       module= (<span class="keywordtype">char</span> *)gtk_clist_get_row_data(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), (long) GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>)-&gt;selection-&gt;data);
<a name="l00210"></a>00210       module = <a class="code" href="astmm_8h.html#a33bc8f85636226ba23bf348f78352aef">strdup</a>(module);
<a name="l00211"></a>00211       <span class="keywordflow">if</span> (module) {
<a name="l00212"></a>00212          gdk_threads_leave();
<a name="l00213"></a>00213          res = <a class="code" href="module_8h.html#a52f6615f305951a0d61adc6e61920c34" title="Unload a module.">ast_unload_resource</a>(module, 0);
<a name="l00214"></a>00214          gdk_threads_enter();
<a name="l00215"></a>00215          <span class="keywordflow">if</span> (res) {
<a name="l00216"></a>00216             snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Module &apos;%s&apos; is in use&quot;</span>, module);
<a name="l00217"></a>00217             <a class="code" href="pbx__gtkconsole_8c.html#a50d9319557c308aaf55721eed34e896b">update_statusbar</a>(buf);
<a name="l00218"></a>00218          } <span class="keywordflow">else</span> {
<a name="l00219"></a>00219             gdk_threads_leave();
<a name="l00220"></a>00220             res = <a class="code" href="module_8h.html#a841766995d4e10ebb3950b10aab97d9e" title="Load a module.">ast_load_resource</a>(module);
<a name="l00221"></a>00221             gdk_threads_enter();
<a name="l00222"></a>00222             <span class="keywordflow">if</span> (res) {
<a name="l00223"></a>00223                snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Error reloading module &apos;%s&apos;&quot;</span>, module);
<a name="l00224"></a>00224             } <span class="keywordflow">else</span> {
<a name="l00225"></a>00225                snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Module &apos;%s&apos; reloaded&quot;</span>, module);
<a name="l00226"></a>00226             }
<a name="l00227"></a>00227             <span class="keywordflow">for</span> (x=0; x &lt; GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>)-&gt;rows; x++) {
<a name="l00228"></a>00228                <span class="keywordflow">if</span> (!strcmp((<span class="keywordtype">char</span> *)gtk_clist_get_row_data(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), x), module)) {
<a name="l00229"></a>00229                   gtk_clist_select_row(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), x, -1);
<a name="l00230"></a>00230                   <span class="keywordflow">break</span>;
<a name="l00231"></a>00231                }
<a name="l00232"></a>00232             }
<a name="l00233"></a>00233             <a class="code" href="pbx__gtkconsole_8c.html#a50d9319557c308aaf55721eed34e896b">update_statusbar</a>(buf);
<a name="l00234"></a>00234             
<a name="l00235"></a>00235          }
<a name="l00236"></a>00236          <a class="code" href="astmm_8h.html#aa7157aa9480bb73f090dca36776419bf">free</a>(module);
<a name="l00237"></a>00237       }
<a name="l00238"></a>00238    }
<a name="l00239"></a>00239 
<a name="l00240"></a>00240    <span class="keywordflow">return</span> <a class="code" href="module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;
<a name="l00241"></a>00241 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6cbb3b01ef59904f5c58134e0f49a174"></a><!-- doxytag: member="pbx_gtkconsole.c::remove_module" ref="a6cbb3b01ef59904f5c58134e0f49a174" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void remove_module </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00183">183</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="loader_8c_source.html#l00482">ast_unload_resource()</a>, <a class="el" href="adsistub_8c_source.html#l00059">buf</a>, and <a class="el" href="pbx__gtkconsole_8c_source.html#l00068">update_statusbar()</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00184"></a>00184 {
<a name="l00185"></a>00185    <span class="keywordtype">int</span> res;
<a name="l00186"></a>00186    <span class="keywordtype">char</span> *module;
<a name="l00187"></a>00187    <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>[256];
<a name="l00188"></a>00188    <span class="keywordflow">if</span> (GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>)-&gt;selection) {
<a name="l00189"></a>00189       module = (<span class="keywordtype">char</span> *) gtk_clist_get_row_data(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), (long) GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>)-&gt;selection-&gt;data);
<a name="l00190"></a>00190       gdk_threads_leave();
<a name="l00191"></a>00191       res = <a class="code" href="module_8h.html#a52f6615f305951a0d61adc6e61920c34" title="Unload a module.">ast_unload_resource</a>(module, 0);
<a name="l00192"></a>00192       gdk_threads_enter();
<a name="l00193"></a>00193       <span class="keywordflow">if</span> (res) {
<a name="l00194"></a>00194          snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Module &apos;%s&apos; is in use&quot;</span>, module);
<a name="l00195"></a>00195          <a class="code" href="pbx__gtkconsole_8c.html#a50d9319557c308aaf55721eed34e896b">update_statusbar</a>(buf);
<a name="l00196"></a>00196       } <span class="keywordflow">else</span> {
<a name="l00197"></a>00197          snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Module &apos;%s&apos; removed&quot;</span>, module);
<a name="l00198"></a>00198          <a class="code" href="pbx__gtkconsole_8c.html#a50d9319557c308aaf55721eed34e896b">update_statusbar</a>(buf);
<a name="l00199"></a>00199       }
<a name="l00200"></a>00200    }
<a name="l00201"></a>00201 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a45e4c0ab1e5ea59682d0b6abd584634d"></a><!-- doxytag: member="pbx_gtkconsole.c::show_console" ref="a45e4c0ab1e5ea59682d0b6abd584634d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int show_console </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">358</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="pbx__gtkconsole_8c_source.html#l00263">add_module()</a>, <a class="el" href="loader_8c_source.html#l01131">ast_loader_register()</a>, <a class="el" href="utils_8h_source.html#l00376">ast_pthread_create</a>, <a class="el" href="logger_8c_source.html#l01314">ast_register_verbose()</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00347">cli_activate()</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00145">cliinput()</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00338">consolethread()</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00322">exit_completely()</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00332">exit_nicely()</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00308">exit_now()</a>, <a class="el" href="app__minivm_8c_source.html#l00409">FALSE</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00292">mod_update()</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00203">reload()</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00183">remove_module()</a>, <a class="el" href="app__minivm_8c_source.html#l00406">TRUE</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00068">update_statusbar()</a>, and <a class="el" href="pbx__gtkconsole_8c_source.html#l00133">verboser()</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00483">load_module()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00359"></a>00359 {
<a name="l00360"></a>00360    GtkWidget *hbox;
<a name="l00361"></a>00361    GtkWidget *wbox;
<a name="l00362"></a>00362    GtkWidget *notebook;
<a name="l00363"></a>00363    GtkWidget *sw;
<a name="l00364"></a>00364    GtkWidget *bbox, *hbbox, *add, *removew, *reloadw;
<a name="l00365"></a>00365    <span class="keywordtype">char</span> *modtitles[3] = { <span class="stringliteral">&quot;Module&quot;</span>, <span class="stringliteral">&quot;Description&quot;</span>, <span class="stringliteral">&quot;Use Count&quot;</span> };
<a name="l00366"></a>00366    <span class="keywordtype">int</span> res;
<a name="l00367"></a>00367 
<a name="l00368"></a>00368    <a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a> = gtk_window_new(GTK_WINDOW_TOPLEVEL);
<a name="l00369"></a>00369    
<a name="l00370"></a>00370    <a class="code" href="pbx__gtkconsole_8c.html#a22c97d796c5f592c603bab82cfa9cc44">statusbar</a> = gtk_statusbar_new();
<a name="l00371"></a>00371    gtk_widget_show(<a class="code" href="pbx__gtkconsole_8c.html#a22c97d796c5f592c603bab82cfa9cc44">statusbar</a>);
<a name="l00372"></a>00372    
<a name="l00373"></a>00373    gtk_signal_connect(GTK_OBJECT(<a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>), <span class="stringliteral">&quot;delete_event&quot;</span>,
<a name="l00374"></a>00374          GTK_SIGNAL_FUNC (<a class="code" href="pbx__gtkconsole_8c.html#a6dafe7c68338a7b7e18b2941efea7d59">exit_nicely</a>), <a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>);
<a name="l00375"></a>00375    gtk_signal_connect(GTK_OBJECT(<a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>), <span class="stringliteral">&quot;destroy&quot;</span>,
<a name="l00376"></a>00376          GTK_SIGNAL_FUNC (<a class="code" href="pbx__gtkconsole_8c.html#ad928f238c1d7162e13363a777d60af43">exit_now</a>), <a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>);
<a name="l00377"></a>00377    gtk_container_set_border_width(GTK_CONTAINER(<a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>), 10);
<a name="l00378"></a>00378 
<a name="l00379"></a>00379    <a class="code" href="pbx__gtkconsole_8c.html#a1a178011116b4794df2c3dd41be5e9ed">quit</a> = gtk_button_new_with_label(<span class="stringliteral">&quot;Quit Asterisk&quot;</span>);
<a name="l00380"></a>00380    gtk_signal_connect(GTK_OBJECT(<a class="code" href="pbx__gtkconsole_8c.html#a1a178011116b4794df2c3dd41be5e9ed">quit</a>), <span class="stringliteral">&quot;clicked&quot;</span>,
<a name="l00381"></a>00381          GTK_SIGNAL_FUNC (<a class="code" href="pbx__gtkconsole_8c.html#a2a6ec6b63ac4b032dd7c584cf14538de">exit_completely</a>), <a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>);
<a name="l00382"></a>00382    gtk_widget_show(<a class="code" href="pbx__gtkconsole_8c.html#a1a178011116b4794df2c3dd41be5e9ed">quit</a>);
<a name="l00383"></a>00383 
<a name="l00384"></a>00384    <a class="code" href="pbx__gtkconsole_8c.html#a72ffa7a226d23b25e70d40b707dee259">closew</a> = gtk_button_new_with_label(<span class="stringliteral">&quot;Close Window&quot;</span>);
<a name="l00385"></a>00385    gtk_signal_connect(GTK_OBJECT(<a class="code" href="pbx__gtkconsole_8c.html#a72ffa7a226d23b25e70d40b707dee259">closew</a>), <span class="stringliteral">&quot;clicked&quot;</span>,
<a name="l00386"></a>00386          GTK_SIGNAL_FUNC (<a class="code" href="pbx__gtkconsole_8c.html#a6dafe7c68338a7b7e18b2941efea7d59">exit_nicely</a>), <a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>);
<a name="l00387"></a>00387    gtk_widget_show(<a class="code" href="pbx__gtkconsole_8c.html#a72ffa7a226d23b25e70d40b707dee259">closew</a>);
<a name="l00388"></a>00388 
<a name="l00389"></a>00389    notebook = gtk_notebook_new();
<a name="l00390"></a>00390    <a class="code" href="structverb.html">verb</a> = gtk_clist_new(1);
<a name="l00391"></a>00391    gtk_clist_columns_autosize(GTK_CLIST(<a class="code" href="structverb.html">verb</a>));
<a name="l00392"></a>00392    sw = gtk_scrolled_window_new(NULL, NULL);
<a name="l00393"></a>00393    gtk_scrolled_window_set_policy(GTK_SCROLLED_WINDOW(sw), GTK_POLICY_AUTOMATIC, GTK_POLICY_ALWAYS);
<a name="l00394"></a>00394    gtk_container_add(GTK_CONTAINER(sw), <a class="code" href="structverb.html">verb</a>);
<a name="l00395"></a>00395    gtk_widget_show(<a class="code" href="structverb.html">verb</a>);
<a name="l00396"></a>00396    gtk_widget_show(sw);
<a name="l00397"></a>00397    gtk_widget_set_usize(<a class="code" href="structverb.html">verb</a>, 640, 400);
<a name="l00398"></a>00398    gtk_notebook_append_page(GTK_NOTEBOOK(notebook), sw, gtk_label_new(<span class="stringliteral">&quot;Verbose Status&quot;</span>));
<a name="l00399"></a>00399 
<a name="l00400"></a>00400    
<a name="l00401"></a>00401    <a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a> = gtk_clist_new_with_titles(3, modtitles);
<a name="l00402"></a>00402    gtk_clist_columns_autosize(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>));
<a name="l00403"></a>00403    gtk_clist_set_column_auto_resize(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), 0, <a class="code" href="app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00404"></a>00404    gtk_clist_set_column_auto_resize(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), 1, <a class="code" href="app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00405"></a>00405    gtk_clist_set_column_auto_resize(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), 2, <a class="code" href="app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00406"></a>00406    gtk_clist_set_sort_column(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), 0);
<a name="l00407"></a>00407    gtk_clist_set_auto_sort(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), <a class="code" href="app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00408"></a>00408    gtk_clist_column_titles_passive(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>));
<a name="l00409"></a>00409    sw = gtk_scrolled_window_new(NULL, NULL);
<a name="l00410"></a>00410    gtk_scrolled_window_set_policy(GTK_SCROLLED_WINDOW(sw), GTK_POLICY_AUTOMATIC, GTK_POLICY_ALWAYS);
<a name="l00411"></a>00411    gtk_container_add(GTK_CONTAINER(sw), <a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>);
<a name="l00412"></a>00412    gtk_clist_set_selection_mode(GTK_CLIST(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>), GTK_SELECTION_BROWSE);
<a name="l00413"></a>00413    gtk_widget_show(<a class="code" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a>);
<a name="l00414"></a>00414    gtk_widget_show(sw);
<a name="l00415"></a>00415 
<a name="l00416"></a>00416    add = gtk_button_new_with_label(<span class="stringliteral">&quot;Load...&quot;</span>);
<a name="l00417"></a>00417    gtk_widget_show(add);
<a name="l00418"></a>00418    removew = gtk_button_new_with_label(<span class="stringliteral">&quot;Unload&quot;</span>);
<a name="l00419"></a>00419    gtk_widget_show(removew);
<a name="l00420"></a>00420    reloadw = gtk_button_new_with_label(<span class="stringliteral">&quot;Reload&quot;</span>);
<a name="l00421"></a>00421    gtk_widget_show(reloadw);
<a name="l00422"></a>00422    gtk_signal_connect(GTK_OBJECT(removew), <span class="stringliteral">&quot;clicked&quot;</span>,
<a name="l00423"></a>00423          GTK_SIGNAL_FUNC (<a class="code" href="pbx__gtkconsole_8c.html#a6cbb3b01ef59904f5c58134e0f49a174">remove_module</a>), <a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>);
<a name="l00424"></a>00424    gtk_signal_connect(GTK_OBJECT(add), <span class="stringliteral">&quot;clicked&quot;</span>,
<a name="l00425"></a>00425          GTK_SIGNAL_FUNC (<a class="code" href="pbx__gtkconsole_8c.html#a90ee59a0e8c227f206e94b5555b9c777">add_module</a>), <a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>);
<a name="l00426"></a>00426    gtk_signal_connect(GTK_OBJECT(reloadw), <span class="stringliteral">&quot;clicked&quot;</span>,
<a name="l00427"></a>00427          GTK_SIGNAL_FUNC (<a class="code" href="pbx__gtkconsole_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>), <a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>);
<a name="l00428"></a>00428       
<a name="l00429"></a>00429    bbox = gtk_vbox_new(<a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 5);
<a name="l00430"></a>00430    gtk_widget_show(bbox);
<a name="l00431"></a>00431 
<a name="l00432"></a>00432    gtk_widget_set_usize(bbox, 100, -1);
<a name="l00433"></a>00433    gtk_box_pack_start(GTK_BOX(bbox), add, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 5);
<a name="l00434"></a>00434    gtk_box_pack_start(GTK_BOX(bbox), removew, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 5);
<a name="l00435"></a>00435    gtk_box_pack_start(GTK_BOX(bbox), reloadw, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 5);
<a name="l00436"></a>00436 
<a name="l00437"></a>00437    hbbox = gtk_hbox_new(<a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 5);
<a name="l00438"></a>00438    gtk_widget_show(hbbox);
<a name="l00439"></a>00439    
<a name="l00440"></a>00440    gtk_box_pack_start(GTK_BOX(hbbox), sw, <a class="code" href="app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, <a class="code" href="app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, 5);
<a name="l00441"></a>00441    gtk_box_pack_start(GTK_BOX(hbbox), bbox, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 5);
<a name="l00442"></a>00442 
<a name="l00443"></a>00443    gtk_notebook_append_page(GTK_NOTEBOOK(notebook), hbbox, gtk_label_new(<span class="stringliteral">&quot;Module Information&quot;</span>));
<a name="l00444"></a>00444 
<a name="l00445"></a>00445    gtk_widget_show(notebook);
<a name="l00446"></a>00446 
<a name="l00447"></a>00447    wbox = gtk_hbox_new(<a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 5);
<a name="l00448"></a>00448    gtk_widget_show(wbox);
<a name="l00449"></a>00449    gtk_box_pack_end(GTK_BOX(wbox), <a class="code" href="pbx__gtkconsole_8c.html#a1a178011116b4794df2c3dd41be5e9ed">quit</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 5);
<a name="l00450"></a>00450    gtk_box_pack_end(GTK_BOX(wbox), <a class="code" href="pbx__gtkconsole_8c.html#a72ffa7a226d23b25e70d40b707dee259">closew</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 5);
<a name="l00451"></a>00451 
<a name="l00452"></a>00452    hbox = gtk_vbox_new(<a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 0);
<a name="l00453"></a>00453    gtk_widget_show(hbox);
<a name="l00454"></a>00454    
<a name="l00455"></a>00455    <span class="comment">/* Command line */</span>
<a name="l00456"></a>00456    <a class="code" href="pbx__gtkconsole_8c.html#a704ae1af535db1fe8718b633689bdfb3">cli</a> = gtk_entry_new();
<a name="l00457"></a>00457    gtk_widget_show(<a class="code" href="pbx__gtkconsole_8c.html#a704ae1af535db1fe8718b633689bdfb3">cli</a>);
<a name="l00458"></a>00458 
<a name="l00459"></a>00459    gtk_signal_connect(GTK_OBJECT(<a class="code" href="pbx__gtkconsole_8c.html#a704ae1af535db1fe8718b633689bdfb3">cli</a>), <span class="stringliteral">&quot;activate&quot;</span>,
<a name="l00460"></a>00460          GTK_SIGNAL_FUNC (<a class="code" href="pbx__gtkconsole_8c.html#a0d2e652fdb839154db337fef09cb4d94">cli_activate</a>), NULL);
<a name="l00461"></a>00461 
<a name="l00462"></a>00462    gtk_box_pack_start(GTK_BOX(hbox), notebook, <a class="code" href="app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, <a class="code" href="app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, 5);
<a name="l00463"></a>00463    gtk_box_pack_start(GTK_BOX(hbox), wbox, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 5);
<a name="l00464"></a>00464    gtk_box_pack_start(GTK_BOX(hbox), <a class="code" href="pbx__gtkconsole_8c.html#a704ae1af535db1fe8718b633689bdfb3">cli</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 0);
<a name="l00465"></a>00465    gtk_box_pack_start(GTK_BOX(hbox), <a class="code" href="pbx__gtkconsole_8c.html#a22c97d796c5f592c603bab82cfa9cc44">statusbar</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 0);
<a name="l00466"></a>00466    gtk_container_add(GTK_CONTAINER(<a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>), hbox);
<a name="l00467"></a>00467    gtk_window_set_title(GTK_WINDOW(<a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>), <span class="stringliteral">&quot;Asterisk Console&quot;</span>);
<a name="l00468"></a>00468    gtk_widget_grab_focus(<a class="code" href="pbx__gtkconsole_8c.html#a704ae1af535db1fe8718b633689bdfb3">cli</a>);
<a name="l00469"></a>00469    <a class="code" href="utils_8h.html#a4781fd54a4ca8c7f0f8a32a6cce503c0">ast_pthread_create</a>(&amp;<a class="code" href="pbx__gtkconsole_8c.html#a77d5df922ae6b1d6423ed76f91d22a37">console_thread</a>, NULL, <a class="code" href="pbx__gtkconsole_8c.html#aac5054564a8b99634647231a22330f36">consolethread</a>, NULL);
<a name="l00470"></a>00470    <span class="comment">/* XXX Okay, seriously fix me! XXX */</span>
<a name="l00471"></a>00471    usleep(100000);
<a name="l00472"></a>00472    res = <a class="code" href="logger_8h.html#a88db6a9fa710d601734eb260ad30348f">ast_register_verbose</a>(<a class="code" href="pbx__gtkconsole_8c.html#a0c0c99ba0add51bd09ff543f9e245d12">verboser</a>);
<a name="l00473"></a>00473    gtk_clist_freeze(GTK_CLIST(<a class="code" href="structverb.html">verb</a>));
<a name="l00474"></a>00474    <a class="code" href="module_8h.html#a35e5148750fa0ab4ffa54d0fe19c966a" title="Add a procedure to be run when modules have been updated.">ast_loader_register</a>(<a class="code" href="pbx__gtkconsole_8c.html#a6e77eac4a1659da45f52e7c2331cf864">mod_update</a>);
<a name="l00475"></a>00475    gtk_clist_thaw(GTK_CLIST(<a class="code" href="structverb.html">verb</a>));
<a name="l00476"></a>00476    gdk_input_add(<a class="code" href="pbx__gtkconsole_8c.html#a8e200ba52c1d5d75fe559882e742d378">clipipe</a>[0], GDK_INPUT_READ, <a class="code" href="pbx__gtkconsole_8c.html#a9478d2b90c83345dbc1baba96cb3ba29">cliinput</a>, NULL);
<a name="l00477"></a>00477    <a class="code" href="pbx__gtkconsole_8c.html#a6e77eac4a1659da45f52e7c2331cf864">mod_update</a>();
<a name="l00478"></a>00478    <a class="code" href="pbx__gtkconsole_8c.html#a50d9319557c308aaf55721eed34e896b">update_statusbar</a>(<span class="stringliteral">&quot;Asterisk Console Ready&quot;</span>);
<a name="l00479"></a>00479    <span class="keywordflow">return</span> 0;
<a name="l00480"></a>00480 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad09fa931f468002152a3cc2d5ce25eae"></a><!-- doxytag: member="pbx_gtkconsole.c::unload_module" ref="ad09fa931f468002152a3cc2d5ce25eae" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00074">74</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00075"></a>00075 {
<a name="l00076"></a>00076    <span class="keywordflow">if</span> (<a class="code" href="pbx__gtkconsole_8c.html#a679cabe3b846f2e363f43d8e57433834">inuse</a>) {
<a name="l00077"></a>00077       <span class="comment">/* Kill off the main thread */</span>
<a name="l00078"></a>00078       pthread_cancel(<a class="code" href="pbx__gtkconsole_8c.html#a77d5df922ae6b1d6423ed76f91d22a37">console_thread</a>);
<a name="l00079"></a>00079       gdk_threads_enter();
<a name="l00080"></a>00080       gtk_widget_destroy(<a class="code" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>);
<a name="l00081"></a>00081       gdk_threads_leave();
<a name="l00082"></a>00082       close(<a class="code" href="pbx__gtkconsole_8c.html#a8e200ba52c1d5d75fe559882e742d378">clipipe</a>[0]);
<a name="l00083"></a>00083       close(<a class="code" href="pbx__gtkconsole_8c.html#a8e200ba52c1d5d75fe559882e742d378">clipipe</a>[1]);
<a name="l00084"></a>00084    }
<a name="l00085"></a>00085    <span class="keywordflow">return</span> 0;
<a name="l00086"></a>00086 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a50d9319557c308aaf55721eed34e896b"></a><!-- doxytag: member="pbx_gtkconsole.c::update_statusbar" ref="a50d9319557c308aaf55721eed34e896b" args="(char *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void update_statusbar </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00068">68</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00243">file_ok_sel()</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00203">reload()</a>, <a class="el" href="pbx__gtkconsole_8c_source.html#l00183">remove_module()</a>, and <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00069"></a>00069 {
<a name="l00070"></a>00070    gtk_statusbar_pop(GTK_STATUSBAR(<a class="code" href="pbx__gtkconsole_8c.html#a22c97d796c5f592c603bab82cfa9cc44">statusbar</a>), 1);
<a name="l00071"></a>00071    gtk_statusbar_push(GTK_STATUSBAR(<a class="code" href="pbx__gtkconsole_8c.html#a22c97d796c5f592c603bab82cfa9cc44">statusbar</a>), 1, <a class="code" href="adsistub_8c.html#a0dee90db1d6eb30329bee1ae6cec036a">msg</a>);
<a name="l00072"></a>00072 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0c0c99ba0add51bd09ff543f9e245d12"></a><!-- doxytag: member="pbx_gtkconsole.c::verboser" ref="a0c0c99ba0add51bd09ff543f9e245d12" args="(const char *stuff)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void verboser </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>stuff</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00133">133</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>References <a class="el" href="pbx__gtkconsole_8c_source.html#l00100">__verboser()</a>, <a class="el" href="lock_8h_source.html#l01717">ast_mutex_lock()</a>, <a class="el" href="lock_8h_source.html#l01707">ast_mutex_unlock()</a>, and <a class="el" href="pbx__gtkconsole_8c_source.html#l00050">verb_lock</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00308">exit_now()</a>, and <a class="el" href="pbx__gtkconsole_8c_source.html#l00358">show_console()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00134"></a>00134 {
<a name="l00135"></a>00135    <span class="keywordflow">if</span> (*stuff == 127) {
<a name="l00136"></a>00136       stuff++;
<a name="l00137"></a>00137    }
<a name="l00138"></a>00138 
<a name="l00139"></a>00139    <a class="code" href="lock_8h.html#ad941566de4050aa7358493af94d2ba4d">ast_mutex_lock</a>(&amp;<a class="code" href="pbx__gtkconsole_8c.html#ab90fbaf4df3ce36f8ceced3bb450bc37">verb_lock</a>);
<a name="l00140"></a>00140    <span class="comment">/* Lock appropriately if we&apos;re really being called in verbose mode */</span>
<a name="l00141"></a>00141    <a class="code" href="pbx__gtkconsole_8c.html#ae37c58cdee588e3376ebf4300949629c">__verboser</a>(stuff);
<a name="l00142"></a>00142    <a class="code" href="lock_8h.html#aa9b39f0e22f44a7e7f587d4252e41a0b">ast_mutex_unlock</a>(&amp;<a class="code" href="pbx__gtkconsole_8c.html#ab90fbaf4df3ce36f8ceced3bb450bc37">verb_lock</a>);
<a name="l00143"></a>00143 }
</pre></div></p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ab22f32016155f7f403e7178767163d7d"></a><!-- doxytag: member="pbx_gtkconsole.c::__mod_info" ref="ab22f32016155f7f403e7178767163d7d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__module__info.html">ast_module_info</a> <a class="el" href="res__timing__timerfd_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = AST_MODULE, .flags = AST_MODFLAG_DEFAULT , .<a class="el" href="callerid_8c.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a> = &quot;GTK Console&quot; , .key = &quot;This paragraph is copyright (c) 2006 by Digium, Inc. \In order for your module to load, it must return this \key via a function called \&quot;key\&quot;. Any code which \includes this paragraph must be licensed under the GNU \General Public License <a class="el" href="res__config__pgsql_8c.html#aad880fc4455c253781e8968f2239d56f">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;aefddfaffd51bc118c14a748e96eb9a0&quot; , .load = load_module, .unload = unload_module, .reload = reload, }<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00510">510</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae25b9f3970870610911f8850897e8ead"></a><!-- doxytag: member="pbx_gtkconsole.c::ast_module_info" ref="ae25b9f3970870610911f8850897e8ead" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__module__info.html">ast_module_info</a>* <a class="el" href="structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="res__timing__timerfd_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00510">510</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac1017f4049ee9cf09572aa89ab1a233f"></a><!-- doxytag: member="pbx_gtkconsole.c::cleanupid" ref="ac1017f4049ee9cf09572aa89ab1a233f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="pbx__gtkconsole_8c.html#ac1017f4049ee9cf09572aa89ab1a233f">cleanupid</a> = -1<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00056">56</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="a704ae1af535db1fe8718b633689bdfb3"></a><!-- doxytag: member="pbx_gtkconsole.c::cli" ref="a704ae1af535db1fe8718b633689bdfb3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GtkWidget* <a class="el" href="pbx__gtkconsole_8c.html#a704ae1af535db1fe8718b633689bdfb3">cli</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00064">64</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8e200ba52c1d5d75fe559882e742d378"></a><!-- doxytag: member="pbx_gtkconsole.c::clipipe" ref="a8e200ba52c1d5d75fe559882e742d378" args="[2]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="pbx__gtkconsole_8c.html#a8e200ba52c1d5d75fe559882e742d378">clipipe</a>[2]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00055">55</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="a72ffa7a226d23b25e70d40b707dee259"></a><!-- doxytag: member="pbx_gtkconsole.c::closew" ref="a72ffa7a226d23b25e70d40b707dee259" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GtkWidget* <a class="el" href="pbx__gtkconsole_8c.html#a72ffa7a226d23b25e70d40b707dee259">closew</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00060">60</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="a77d5df922ae6b1d6423ed76f91d22a37"></a><!-- doxytag: member="pbx_gtkconsole.c::console_thread" ref="a77d5df922ae6b1d6423ed76f91d22a37" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t <a class="el" href="pbx__gtkconsole_8c.html#a77d5df922ae6b1d6423ed76f91d22a37">console_thread</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00052">52</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="a679cabe3b846f2e363f43d8e57433834"></a><!-- doxytag: member="pbx_gtkconsole.c::inuse" ref="a679cabe3b846f2e363f43d8e57433834" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="pbx__gtkconsole_8c.html#a679cabe3b846f2e363f43d8e57433834">inuse</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00054">54</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>Referenced by <a class="el" href="abstract__jb_8c_source.html#l00202">ast_jb_do_usecheck()</a>, <a class="el" href="app__chanisavail_8c_source.html#l00097">chanavail_exec()</a>, <a class="el" href="chan__dahdi_8c_source.html#l17308">load_module()</a>, and <a class="el" href="chan__sip_8c_source.html#l05634">update_call_counter()</a>.</p>

</div>
</div>
<a class="anchor" id="ab9167ed7936f3ca9012b99f80485d6f2"></a><!-- doxytag: member="pbx_gtkconsole.c::last" ref="ab9167ed7936f3ca9012b99f80485d6f2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval <a class="el" href="res__smdi_8c.html#a9584356f2e9a2d4e36cdadce9c5df4a7">last</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00066">66</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa308c88ec23cbe0cb2ac92091eda1d29"></a><!-- doxytag: member="pbx_gtkconsole.c::modules" ref="aa308c88ec23cbe0cb2ac92091eda1d29" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GtkWidget* <a class="el" href="pbx__gtkconsole_8c.html#aa308c88ec23cbe0cb2ac92091eda1d29">modules</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00062">62</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1a178011116b4794df2c3dd41be5e9ed"></a><!-- doxytag: member="pbx_gtkconsole.c::quit" ref="a1a178011116b4794df2c3dd41be5e9ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GtkWidget* <a class="el" href="pbx__gtkconsole_8c.html#a1a178011116b4794df2c3dd41be5e9ed">quit</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00059">59</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>Referenced by <a class="el" href="res__agi_8c_source.html#l00617">launch_asyncagi()</a>, <a class="el" href="chan__dahdi_8c_source.html#l09116">mwi_send_process_buffer()</a>, <a class="el" href="chan__dahdi_8c_source.html#l08925">mwi_thread()</a>, and <a class="el" href="chan__dahdi_8c_source.html#l07675">ss_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a22c97d796c5f592c603bab82cfa9cc44"></a><!-- doxytag: member="pbx_gtkconsole.c::statusbar" ref="a22c97d796c5f592c603bab82cfa9cc44" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GtkWidget* <a class="el" href="pbx__gtkconsole_8c.html#a22c97d796c5f592c603bab82cfa9cc44">statusbar</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00063">63</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="a986279393cc32e1f2fafea05783d6322"></a><!-- doxytag: member="pbx_gtkconsole.c::verb" ref="a986279393cc32e1f2fafea05783d6322" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GtkWidget* <a class="el" href="structverb.html">verb</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00061">61</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab90fbaf4df3ce36f8ceced3bb450bc37"></a><!-- doxytag: member="pbx_gtkconsole.c::verb_lock" ref="ab90fbaf4df3ce36f8ceced3bb450bc37" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lock_8h.html#a2d9118a2a8939f115eea771bce3a52f2">ast_mutex_t</a> <a class="el" href="pbx__gtkconsole_8c.html#ab90fbaf4df3ce36f8ceced3bb450bc37">verb_lock</a> = ((<a class="el" href="lock_8h.html#a2d9118a2a8939f115eea771bce3a52f2">ast_mutex_t</a>) PTHREAD_MUTEX_INITIALIZER )<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00050">50</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

<p>Referenced by <a class="el" href="pbx__gtkconsole_8c_source.html#l00133">verboser()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d346c08cf2d67c388caabffb412b293"></a><!-- doxytag: member="pbx_gtkconsole.c::window" ref="a3d346c08cf2d67c388caabffb412b293" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GtkWidget* <a class="el" href="pbx__gtkconsole_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pbx__gtkconsole_8c_source.html#l00058">58</a> of file <a class="el" href="pbx__gtkconsole_8c_source.html">pbx_gtkconsole.c</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:22:53 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
