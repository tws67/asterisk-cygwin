<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:22:17 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_0ca6ff3bf6b340411b2c6edd15b1a34d.html">channels</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_ff311a8f439b457db2e83f52de102b35.html">misdn</a>
  </div>
</div>
<div class="contents">
<h1>isdn_lib_intern.h File Reference</h1><code>#include &lt;mISDNuser/mISDNlib.h&gt;</code><br/>
<code>#include &lt;mISDNuser/isdn_net.h&gt;</code><br/>
<code>#include &lt;mISDNuser/l3dss1.h&gt;</code><br/>
<code>#include &lt;mISDNuser/net_l3.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="isdn__lib_8h_source.html">isdn_lib.h</a>&quot;</code><br/>

<p><a href="isdn__lib__intern_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structisdn__msg.html">isdn_msg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmisdn__stack.html">misdn_stack</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsend__lock.html">send_lock</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="isdn__lib__intern_8h.html#a88137f1d562eb491a6f952d43e7f0f22">mISDNUSER_HEAD_SIZE</a>&nbsp;&nbsp;&nbsp;(sizeof(mISDNuser_head_t))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="isdn__lib__intern_8h.html#a01e2caf6063486f5db8c9bfef4a6a17f">QI_ELEMENT</a>(a)&nbsp;&nbsp;&nbsp;a.off</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">msg_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="isdn__lib__intern_8h.html#ade13137a3e8880c4bec999e6f5a65b9b">create_l3msg</a> (int prim, int mt, int dinfo, int size, int nt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmisdn__stack.html">misdn_stack</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="isdn__lib__intern_8h.html#a741c68a6879aa333e2fdf1e552e1a5fd">get_stack_by_bc</a> (struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="isdn__lib__intern_8h.html#a622bd30db092a77314ee5e5581a80f75">isdn_get_info</a> (struct <a class="el" href="structisdn__msg.html">isdn_msg</a> msgs[], enum <a class="el" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> event, int nt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">msg_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="isdn__lib__intern_8h.html#aa7c9e04ed1d840c5faccb31bee81e0cd">isdn_msg_build_event</a> (struct <a class="el" href="structisdn__msg.html">isdn_msg</a> msgs[], struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc, enum <a class="el" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> event, int nt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0">event_e</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="isdn__lib__intern_8h.html#a7a92a25c6c4083aee9277797c24977e9">isdn_msg_get_event</a> (struct <a class="el" href="structisdn__msg.html">isdn_msg</a> msgs[], msg_t *frm, int nt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="isdn__lib__intern_8h.html#a27043961c2c17e3fc04f0ff07a65f5a7">isdn_msg_get_index</a> (struct <a class="el" href="structisdn__msg.html">isdn_msg</a> msgs[], msg_t *frm, int nt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="isdn__lib__intern_8h.html#a3cb76f744d1a7a137e93308c6e3af34e">isdn_msg_get_index_by_event</a> (struct <a class="el" href="structisdn__msg.html">isdn_msg</a> msgs[], enum <a class="el" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> event, int nt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="isdn__lib__intern_8h.html#a4eaa873aaf415ce94764169f2110404a">isdn_msg_get_info</a> (struct <a class="el" href="structisdn__msg.html">isdn_msg</a> msgs[], msg_t *<a class="el" href="adsistub_8c.html#a0dee90db1d6eb30329bee1ae6cec036a">msg</a>, int nt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="isdn__lib__intern_8h.html#a6fb028d4322a5a9d1a09ec780c73d05d">isdn_msg_parse_event</a> (struct <a class="el" href="structisdn__msg.html">isdn_msg</a> msgs[], msg_t *frm, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc, int nt)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a88137f1d562eb491a6f952d43e7f0f22"></a><!-- doxytag: member="isdn_lib_intern.h::mISDNUSER_HEAD_SIZE" ref="a88137f1d562eb491a6f952d43e7f0f22" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mISDNUSER_HEAD_SIZE&nbsp;&nbsp;&nbsp;(sizeof(mISDNuser_head_t))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="isdn__lib__intern_8h_source.html#l00026">26</a> of file <a class="el" href="isdn__lib__intern_8h_source.html">isdn_lib_intern.h</a>.</p>

<p>Referenced by <a class="el" href="isdn__msg__parser_8c_source.html#l00113">build_alerting()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00387">build_connect()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00463">build_connect_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00796">build_disconnect()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00983">build_facility()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00557">build_hold()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00626">build_hold_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00695">build_hold_reject()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01079">build_information()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01026">build_notify()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00078">build_proceeding()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00145">build_progress()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00877">build_release()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00934">build_release_complete()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00838">build_restart()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00603">build_resume()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00672">build_resume_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00534">build_resume_reject()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00718">build_retrieve()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00741">build_retrieve_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00765">build_retrieve_reject()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00275">build_setup()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00435">build_setup_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01120">build_status()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01047">build_status_enquiry()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00580">build_suspend()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00649">build_suspend_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00511">build_suspend_reject()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01141">build_timeout()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00488">build_user_information()</a>, <a class="el" href="isdn__lib_8c_source.html#l01875">handle_event_nt()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00098">parse_alerting()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00364">parse_connect()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00779">parse_disconnect()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00956">parse_facility()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01061">parse_information()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00057">parse_proceeding()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00132">parse_progress()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00861">parse_release()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00900">parse_release_complete()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00819">parse_restart()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00159">parse_setup()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00414">parse_setup_acknowledge()</a>, and <a class="el" href="isdn__msg__parser_8c_source.html#l01104">parse_status()</a>.</p>

</div>
</div>
<a class="anchor" id="a01e2caf6063486f5db8c9bfef4a6a17f"></a><!-- doxytag: member="isdn_lib_intern.h::QI_ELEMENT" ref="a01e2caf6063486f5db8c9bfef4a6a17f" args="(a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QI_ELEMENT</td>
          <td>(</td>
          <td class="paramtype">a&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;a.off</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="isdn__lib__intern_8h_source.html#l00021">21</a> of file <a class="el" href="isdn__lib__intern_8h_source.html">isdn_lib_intern.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ade13137a3e8880c4bec999e6f5a65b9b"></a><!-- doxytag: member="isdn_lib_intern.h::create_l3msg" ref="ade13137a3e8880c4bec999e6f5a65b9b" args="(int prim, int mt, int dinfo, int size, int nt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">msg_t* create_l3msg </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>prim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dinfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="isdn__lib_8c_source.html#l00373">373</a> of file <a class="el" href="isdn__lib_8c_source.html">isdn_lib.c</a>.</p>

<p>Referenced by <a class="el" href="isdn__msg__parser_8c_source.html#l00113">build_alerting()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00387">build_connect()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00463">build_connect_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00796">build_disconnect()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00983">build_facility()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00557">build_hold()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00626">build_hold_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00695">build_hold_reject()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01079">build_information()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01026">build_notify()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00078">build_proceeding()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00145">build_progress()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00877">build_release()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00934">build_release_complete()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00838">build_restart()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00603">build_resume()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00672">build_resume_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00534">build_resume_reject()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00718">build_retrieve()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00741">build_retrieve_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00765">build_retrieve_reject()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00275">build_setup()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00435">build_setup_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01120">build_status()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01047">build_status_enquiry()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00580">build_suspend()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00649">build_suspend_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00511">build_suspend_reject()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01141">build_timeout()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00488">build_user_information()</a>, and <a class="el" href="isdn__lib_8c_source.html#l01875">handle_event_nt()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00374"></a>00374 {
<a name="l00375"></a>00375    <span class="keywordtype">int</span> i = 0;
<a name="l00376"></a>00376    msg_t *dmsg;
<a name="l00377"></a>00377    Q931_info_t *qi;
<a name="l00378"></a>00378    iframe_t *frm;
<a name="l00379"></a>00379   
<a name="l00380"></a>00380    <span class="keywordflow">if</span> (!ntmode)
<a name="l00381"></a>00381       size = <span class="keyword">sizeof</span>(Q931_info_t)+2;
<a name="l00382"></a>00382   
<a name="l00383"></a>00383    <span class="keywordflow">while</span>(i &lt; 10) {
<a name="l00384"></a>00384       <span class="keywordflow">if</span> (ntmode) {
<a name="l00385"></a>00385          dmsg = prep_l3data_msg(prim, dinfo, size, 256, NULL);
<a name="l00386"></a>00386          <span class="keywordflow">if</span> (dmsg) {
<a name="l00387"></a>00387             <span class="keywordflow">return</span>(dmsg);
<a name="l00388"></a>00388          }
<a name="l00389"></a>00389       } <span class="keywordflow">else</span> {
<a name="l00390"></a>00390          dmsg = alloc_msg(size+256+mISDN_HEADER_LEN+DEFAULT_HEADROOM);
<a name="l00391"></a>00391          <span class="keywordflow">if</span> (dmsg)
<a name="l00392"></a>00392          {
<a name="l00393"></a>00393             memset(msg_put(dmsg,size+mISDN_HEADER_LEN), 0, size+mISDN_HEADER_LEN);
<a name="l00394"></a>00394             frm = (iframe_t *)dmsg-&gt;data;
<a name="l00395"></a>00395             frm-&gt;prim = prim;
<a name="l00396"></a>00396             frm-&gt;dinfo = dinfo;
<a name="l00397"></a>00397             qi = (Q931_info_t *)(dmsg-&gt;data + mISDN_HEADER_LEN);
<a name="l00398"></a>00398             qi-&gt;type = mt;
<a name="l00399"></a>00399             <span class="keywordflow">return</span>(dmsg);
<a name="l00400"></a>00400          }
<a name="l00401"></a>00401       }
<a name="l00402"></a>00402     
<a name="l00403"></a>00403       <span class="keywordflow">if</span> (!i) printf(<span class="stringliteral">&quot;cannot allocate memory, trying again...\n&quot;</span>);
<a name="l00404"></a>00404       i++;
<a name="l00405"></a>00405       usleep(300000);
<a name="l00406"></a>00406    }
<a name="l00407"></a>00407    printf(<span class="stringliteral">&quot;cannot allocate memory, system overloaded.\n&quot;</span>);
<a name="l00408"></a>00408    exit(-1);
<a name="l00409"></a>00409 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a741c68a6879aa333e2fdf1e552e1a5fd"></a><!-- doxytag: member="isdn_lib_intern.h::get_stack_by_bc" ref="a741c68a6879aa333e2fdf1e552e1a5fd" args="(struct misdn_bchannel *bc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmisdn__stack.html">misdn_stack</a>* get_stack_by_bc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="paramname"> <em>bc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="isdn__lib_8c_source.html#l00154">154</a> of file <a class="el" href="isdn__lib_8c_source.html">isdn_lib.c</a>.</p>

<p>References <a class="el" href="isdn__lib_8c_source.html#l04624">get_misdn_stack()</a>, <a class="el" href="isdn__lib__intern_8h_source.html#l00135">misdn_stack::next</a>, <a class="el" href="isdn__lib__intern_8h_source.html#l00121">misdn_stack::port</a>, and <a class="el" href="isdn__lib_8h_source.html#l00221">misdn_bchannel::port</a>.</p>

<p>Referenced by <a class="el" href="isdn__lib_8c_source.html#l00765">clean_up_bc()</a>, <a class="el" href="isdn__lib_8c_source.html#l00937">create_process()</a>, <a class="el" href="ie_8c_source.html#l00762">dec_ie_channel_id()</a>, <a class="el" href="ie_8c_source.html#l00687">enc_ie_channel_id()</a>, <a class="el" href="isdn__lib_8c_source.html#l02396">handle_bchan()</a>, <a class="el" href="isdn__lib_8c_source.html#l01576">handle_event()</a>, <a class="el" href="isdn__lib_8c_source.html#l04248">manager_bchannel_activate()</a>, <a class="el" href="isdn__lib_8c_source.html#l04270">manager_bchannel_deactivate()</a>, <a class="el" href="isdn__lib_8c_source.html#l04414">manager_clean_bc()</a>, <a class="el" href="isdn__lib_8c_source.html#l04603">manager_ec_disable()</a>, <a class="el" href="isdn__lib_8c_source.html#l04554">manager_ec_enable()</a>, <a class="el" href="isdn__lib_8c_source.html#l03371">misdn_lib_log_ies()</a>, <a class="el" href="isdn__lib_8c_source.html#l01742">misdn_lib_release()</a>, <a class="el" href="isdn__lib_8c_source.html#l03422">misdn_lib_send_event()</a>, <a class="el" href="isdn__lib_8c_source.html#l04306">misdn_lib_tx2misdn_frm()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00900">parse_release_complete()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l00819">parse_restart()</a>, <a class="el" href="isdn__lib_8c_source.html#l00412">send_msg()</a>, and <a class="el" href="isdn__lib_8c_source.html#l01006">setup_bc()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00155"></a>00155 {
<a name="l00156"></a>00156    <span class="keyword">struct </span><a class="code" href="structmisdn__stack.html">misdn_stack</a> *stack = <a class="code" href="isdn__lib_8c.html#afc530f1c2814dd0007e8ccd6aaf1fb06">get_misdn_stack</a>();
<a name="l00157"></a>00157 
<a name="l00158"></a>00158    <span class="keywordflow">if</span> (!bc)
<a name="l00159"></a>00159       <span class="keywordflow">return</span> NULL;
<a name="l00160"></a>00160    
<a name="l00161"></a>00161    <span class="keywordflow">for</span> ( ; stack; stack = stack-&gt;<a class="code" href="structmisdn__stack.html#a57eb386a189890dc2136b66b1d1fbdae" title="Next stack in the list of stacks.">next</a>) {
<a name="l00162"></a>00162       <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb" title="Logical Layer 1 port associated with this B channel.">port</a> == stack-&gt;<a class="code" href="structmisdn__stack.html#a63c89c04d1feae07ca35558055155ffb" title="Logical Layer 1 port associated with this stack.">port</a>)
<a name="l00163"></a>00163          <span class="keywordflow">return</span> stack;
<a name="l00164"></a>00164    }
<a name="l00165"></a>00165 
<a name="l00166"></a>00166    <span class="keywordflow">return</span> NULL;
<a name="l00167"></a>00167 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a622bd30db092a77314ee5e5581a80f75"></a><!-- doxytag: member="isdn_lib_intern.h::isdn_get_info" ref="a622bd30db092a77314ee5e5581a80f75" args="(struct isdn_msg msgs[], enum event_e event, int nt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* isdn_get_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structisdn__msg.html">isdn_msg</a>&nbsp;</td>
          <td class="paramname"> <em>msgs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0">event_e</a>&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="isdn__msg__parser_8c_source.html#l01318">1318</a> of file <a class="el" href="isdn__msg__parser_8c_source.html">isdn_msg_parser.c</a>.</p>

<p>References <a class="el" href="isdn__lib_8h_source.html#l00122">EVENT_BCHAN_ACTIVATED</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01314">EVENT_BCHAN_ACTIVATED_INFO</a>, <a class="el" href="isdn__lib_8h_source.html#l00121">EVENT_BCHAN_DATA</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01313">EVENT_BCHAN_DATA_INFO</a>, <a class="el" href="isdn__lib_8h_source.html#l00123">EVENT_BCHAN_ERROR</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01316">EVENT_BCHAN_ERROR_INFO</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01307">EVENT_CLEAN_INFO</a>, <a class="el" href="isdn__lib_8h_source.html#l00124">EVENT_CLEANUP</a>, <a class="el" href="isdn__lib_8h_source.html#l00155">EVENT_DTMF_TONE</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01308">EVENT_DTMF_TONE_INFO</a>, <a class="el" href="isdn__lib_8h_source.html#l00157">EVENT_NEW_BC</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01310">EVENT_NEW_BC_INFO</a>, <a class="el" href="isdn__lib_8h_source.html#l00159">EVENT_NEW_CHANNEL</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01312">EVENT_NEW_CHANNEL_INFO</a>, <a class="el" href="isdn__lib_8h_source.html#l00156">EVENT_NEW_L3ID</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01309">EVENT_NEW_L3ID_INFO</a>, <a class="el" href="isdn__lib_8h_source.html#l00158">EVENT_PORT_ALARM</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01311">EVENT_PORT_ALARM_INFO</a>, <a class="el" href="isdn__lib_8h_source.html#l00120">EVENT_TONE_GENERATE</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01315">EVENT_TONE_GENERATE_INFO</a>, <a class="el" href="isdn__lib__intern_8h_source.html#l00049">isdn_msg::info</a>, and <a class="el" href="isdn__msg__parser_8c_source.html#l01281">isdn_msg_get_index_by_event()</a>.</p>

<p>Referenced by <a class="el" href="isdn__lib_8c_source.html#l01875">handle_event_nt()</a>, <a class="el" href="isdn__lib_8c_source.html#l02692">handle_frm()</a>, <a class="el" href="isdn__lib_8c_source.html#l02846">handle_l1()</a>, <a class="el" href="isdn__lib_8c_source.html#l04243">manager_isdn_get_info()</a>, and <a class="el" href="isdn__lib_8c_source.html#l03422">misdn_lib_send_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01319"></a>01319 {
<a name="l01320"></a>01320    <span class="keywordtype">int</span> i=<a class="code" href="isdn__lib__intern_8h.html#a3cb76f744d1a7a137e93308c6e3af34e">isdn_msg_get_index_by_event</a>(msgs, event, <a class="code" href="structmisdn__stack.html#aa10df685d964a073b6109e024ca6e9ec" title="TRUE if NT side of protocol (TE otherwise).">nt</a>);
<a name="l01321"></a>01321    
<a name="l01322"></a>01322    <span class="keywordflow">if</span>(i&gt;=0) <span class="keywordflow">return</span> msgs[i].<a class="code" href="structisdn__msg.html#a65627378647d3a125ae55432f3f569e2">info</a>;
<a name="l01323"></a>01323    
<a name="l01324"></a>01324    <span class="keywordflow">if</span> (event == <a class="code" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac49b8317168e8506edc0de2450658541">EVENT_CLEANUP</a>) <span class="keywordflow">return</span> <a class="code" href="isdn__msg__parser_8c.html#ae238ed124cbdd0b0b69fb8af0b4c4a90">EVENT_CLEAN_INFO</a>;
<a name="l01325"></a>01325    <span class="keywordflow">if</span> (event == <a class="code" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5453b43c808f36b08d5145be1856ae77">EVENT_DTMF_TONE</a>) <span class="keywordflow">return</span> <a class="code" href="isdn__msg__parser_8c.html#abed4e222aa3acc13157763a2245c9f1e">EVENT_DTMF_TONE_INFO</a>;
<a name="l01326"></a>01326    <span class="keywordflow">if</span> (event == <a class="code" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a00e5f3ee95cd2c61825dde95d4561ce3">EVENT_NEW_L3ID</a>) <span class="keywordflow">return</span> <a class="code" href="isdn__msg__parser_8c.html#a4b36fb844a824946319c6ef576448120">EVENT_NEW_L3ID_INFO</a>;
<a name="l01327"></a>01327    <span class="keywordflow">if</span> (event == <a class="code" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ae181b9b8e2c00cb51f42deed063ed1ab">EVENT_NEW_BC</a>) <span class="keywordflow">return</span> <a class="code" href="isdn__msg__parser_8c.html#a1bf9cdc35b6199d04ff08713c7baccf4">EVENT_NEW_BC_INFO</a>;
<a name="l01328"></a>01328    <span class="keywordflow">if</span> (event == <a class="code" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a33a36b6aad8ef7a1c08cbac58ff63664">EVENT_NEW_CHANNEL</a>) <span class="keywordflow">return</span> <a class="code" href="isdn__msg__parser_8c.html#aac62263b94a78fc7ec877cd4e45880d7">EVENT_NEW_CHANNEL_INFO</a>;
<a name="l01329"></a>01329    <span class="keywordflow">if</span> (event == <a class="code" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a6b6590a1b67d07a9e1ab635a6cc1ebde">EVENT_BCHAN_DATA</a>) <span class="keywordflow">return</span> <a class="code" href="isdn__msg__parser_8c.html#a6ebfe31afd7d8ee94c2f18405c13a028">EVENT_BCHAN_DATA_INFO</a>;
<a name="l01330"></a>01330    <span class="keywordflow">if</span> (event == <a class="code" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a0d3a575e6b608b18c13582c9855b18d8">EVENT_BCHAN_ACTIVATED</a>) <span class="keywordflow">return</span> <a class="code" href="isdn__msg__parser_8c.html#a7871aaaff1e9277c1d1b7fc777b04713">EVENT_BCHAN_ACTIVATED_INFO</a>;
<a name="l01331"></a>01331    <span class="keywordflow">if</span> (event == <a class="code" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a346ec23214fa6f859c999294e84b65a2">EVENT_TONE_GENERATE</a>) <span class="keywordflow">return</span> <a class="code" href="isdn__msg__parser_8c.html#a5bb373a50d300fd3ab94c10781eba4bf">EVENT_TONE_GENERATE_INFO</a>;
<a name="l01332"></a>01332    <span class="keywordflow">if</span> (event == <a class="code" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a50ddddd2e7ed5ebc329cb84f494c59dd">EVENT_PORT_ALARM</a>) <span class="keywordflow">return</span> <a class="code" href="isdn__msg__parser_8c.html#a24d346f8af5329d3300e99897b0743ca">EVENT_PORT_ALARM_INFO</a>;
<a name="l01333"></a>01333    <span class="keywordflow">if</span> (event == <a class="code" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a784d7a1053a1d9680c5be66e3c294843">EVENT_BCHAN_ERROR</a>) <span class="keywordflow">return</span> <a class="code" href="isdn__msg__parser_8c.html#ac409f1f182a7c2389ff9f4023d1766c1">EVENT_BCHAN_ERROR_INFO</a>;
<a name="l01334"></a>01334    
<a name="l01335"></a>01335    <span class="keywordflow">return</span> NULL;
<a name="l01336"></a>01336 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa7c9e04ed1d840c5faccb31bee81e0cd"></a><!-- doxytag: member="isdn_lib_intern.h::isdn_msg_build_event" ref="aa7c9e04ed1d840c5faccb31bee81e0cd" args="(struct isdn_msg msgs[], struct misdn_bchannel *bc, enum event_e event, int nt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">msg_t* isdn_msg_build_event </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structisdn__msg.html">isdn_msg</a>&nbsp;</td>
          <td class="paramname"> <em>msgs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="paramname"> <em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0">event_e</a>&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="isdn__msg__parser_8c_source.html#l01347">1347</a> of file <a class="el" href="isdn__msg__parser_8c_source.html">isdn_msg_parser.c</a>.</p>

<p>References <a class="el" href="isdn__msg__parser_8c_source.html#l01281">isdn_msg_get_index_by_event()</a>, and <a class="el" href="structisdn__msg.html#aab88120c02ae16dda2a614c2d3c05671">isdn_msg::msg_builder</a>.</p>

<p>Referenced by <a class="el" href="isdn__lib_8c_source.html#l03422">misdn_lib_send_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01348"></a>01348 {
<a name="l01349"></a>01349    <span class="keywordtype">int</span> i=<a class="code" href="isdn__lib__intern_8h.html#a3cb76f744d1a7a137e93308c6e3af34e">isdn_msg_get_index_by_event</a>(msgs, event, <a class="code" href="structmisdn__stack.html#aa10df685d964a073b6109e024ca6e9ec" title="TRUE if NT side of protocol (TE otherwise).">nt</a>);
<a name="l01350"></a>01350    <span class="keywordflow">if</span>(i&lt;0) <span class="keywordflow">return</span> NULL;
<a name="l01351"></a>01351   
<a name="l01352"></a>01352    <span class="keywordflow">return</span>  msgs[i].<a class="code" href="structisdn__msg.html#aab88120c02ae16dda2a614c2d3c05671">msg_builder</a>(msgs, bc, <a class="code" href="structmisdn__stack.html#aa10df685d964a073b6109e024ca6e9ec" title="TRUE if NT side of protocol (TE otherwise).">nt</a>);
<a name="l01353"></a>01353 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7a92a25c6c4083aee9277797c24977e9"></a><!-- doxytag: member="isdn_lib_intern.h::isdn_msg_get_event" ref="a7a92a25c6c4083aee9277797c24977e9" args="(struct isdn_msg msgs[], msg_t *frm, int nt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> isdn_msg_get_event </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structisdn__msg.html">isdn_msg</a>&nbsp;</td>
          <td class="paramname"> <em>msgs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">msg_t *&nbsp;</td>
          <td class="paramname"> <em>frm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="isdn__msg__parser_8c_source.html#l01292">1292</a> of file <a class="el" href="isdn__msg__parser_8c_source.html">isdn_msg_parser.c</a>.</p>

<p>References <a class="el" href="isdn__lib__intern_8h_source.html#l00045">isdn_msg::event</a>, <a class="el" href="isdn__lib_8h_source.html#l00160">EVENT_UNKNOWN</a>, and <a class="el" href="isdn__msg__parser_8c_source.html#l01260">isdn_msg_get_index()</a>.</p>

<p>Referenced by <a class="el" href="isdn__lib_8c_source.html#l01875">handle_event_nt()</a>, and <a class="el" href="isdn__lib_8c_source.html#l02692">handle_frm()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01293"></a>01293 {
<a name="l01294"></a>01294    <span class="keywordtype">int</span> i=<a class="code" href="isdn__lib__intern_8h.html#a27043961c2c17e3fc04f0ff07a65f5a7">isdn_msg_get_index</a>(msgs, <a class="code" href="adsistub_8c.html#a0dee90db1d6eb30329bee1ae6cec036a">msg</a>, <a class="code" href="structmisdn__stack.html#aa10df685d964a073b6109e024ca6e9ec" title="TRUE if NT side of protocol (TE otherwise).">nt</a>);
<a name="l01295"></a>01295    <span class="keywordflow">if</span>(i&gt;=0) <span class="keywordflow">return</span> msgs[i].<a class="code" href="structisdn__msg.html#a78879fa150cdc17936db789b4d397472">event</a>;
<a name="l01296"></a>01296    <span class="keywordflow">return</span> <a class="code" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a26beca10d559b1d358c49a8b872cc5eb">EVENT_UNKNOWN</a>;
<a name="l01297"></a>01297 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a27043961c2c17e3fc04f0ff07a65f5a7"></a><!-- doxytag: member="isdn_lib_intern.h::isdn_msg_get_index" ref="a27043961c2c17e3fc04f0ff07a65f5a7" args="(struct isdn_msg msgs[], msg_t *frm, int nt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int isdn_msg_get_index </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structisdn__msg.html">isdn_msg</a>&nbsp;</td>
          <td class="paramname"> <em>msgs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">msg_t *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>INTERFACE FCTS </p>

<p>Definition at line <a class="el" href="isdn__msg__parser_8c_source.html#l01260">1260</a> of file <a class="el" href="isdn__msg__parser_8c_source.html">isdn_msg_parser.c</a>.</p>

<p>References <a class="el" href="isdn__lib__intern_8h_source.html#l00042">isdn_msg::misdn_msg</a>, and <a class="el" href="isdn__msg__parser_8c_source.html#l01257">msgs_max</a>.</p>

<p>Referenced by <a class="el" href="isdn__msg__parser_8c_source.html#l01292">isdn_msg_get_event()</a>, <a class="el" href="isdn__msg__parser_8c_source.html#l01299">isdn_msg_get_info()</a>, and <a class="el" href="isdn__msg__parser_8c_source.html#l01338">isdn_msg_parse_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01261"></a>01261 {
<a name="l01262"></a>01262    <span class="keywordtype">int</span> i;
<a name="l01263"></a>01263 
<a name="l01264"></a>01264    <span class="keywordflow">if</span> (<a class="code" href="structmisdn__stack.html#aa10df685d964a073b6109e024ca6e9ec" title="TRUE if NT side of protocol (TE otherwise).">nt</a>){
<a name="l01265"></a>01265       mISDNuser_head_t *hh = (mISDNuser_head_t*)<a class="code" href="adsistub_8c.html#a0dee90db1d6eb30329bee1ae6cec036a">msg</a>-&gt;<a class="code" href="structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>;
<a name="l01266"></a>01266       
<a name="l01267"></a>01267       for (i=0; i&lt; <a class="code" href="isdn__msg__parser_8c.html#a111217256650583a2e00360a5d948fed">msgs_max</a> -1; i++) {
<a name="l01268"></a>01268          <span class="keywordflow">if</span> ( (hh-&gt;prim&amp;COMMAND_MASK)==(msgs[i].<a class="code" href="structisdn__msg.html#a83adcf83cfdf8a9150e120786bf27fd8">misdn_msg</a>&amp;COMMAND_MASK)) <span class="keywordflow">return</span> i;
<a name="l01269"></a>01269       }
<a name="l01270"></a>01270       
<a name="l01271"></a>01271    } <span class="keywordflow">else</span> {
<a name="l01272"></a>01272       iframe_t *frm = (iframe_t*)<a class="code" href="adsistub_8c.html#a0dee90db1d6eb30329bee1ae6cec036a">msg</a>-&gt;<a class="code" href="structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>;
<a name="l01273"></a>01273     
<a name="l01274"></a>01274       for (i=0; i&lt; msgs_max -1; i++) 
<a name="l01275"></a>01275          <span class="keywordflow">if</span> ( (frm-&gt;prim&amp;COMMAND_MASK)==(msgs[i].<a class="code" href="structisdn__msg.html#a83adcf83cfdf8a9150e120786bf27fd8">misdn_msg</a>&amp;COMMAND_MASK)) <span class="keywordflow">return</span> i;
<a name="l01276"></a>01276    }
<a name="l01277"></a>01277 
<a name="l01278"></a>01278    <span class="keywordflow">return</span> -1;
<a name="l01279"></a>01279 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3cb76f744d1a7a137e93308c6e3af34e"></a><!-- doxytag: member="isdn_lib_intern.h::isdn_msg_get_index_by_event" ref="a3cb76f744d1a7a137e93308c6e3af34e" args="(struct isdn_msg msgs[], enum event_e event, int nt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int isdn_msg_get_index_by_event </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structisdn__msg.html">isdn_msg</a>&nbsp;</td>
          <td class="paramname"> <em>msgs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0">event_e</a>&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="isdn__msg__parser_8c_source.html#l01281">1281</a> of file <a class="el" href="isdn__msg__parser_8c_source.html">isdn_msg_parser.c</a>.</p>

<p>References <a class="el" href="isdn__lib_8c.html#ad1a7ed589e7bc8ca220a5dd792f474b7">cb_log</a>, and <a class="el" href="isdn__msg__parser_8c_source.html#l01257">msgs_max</a>.</p>

<p>Referenced by <a class="el" href="isdn__msg__parser_8c_source.html#l01318">isdn_get_info()</a>, and <a class="el" href="isdn__msg__parser_8c_source.html#l01347">isdn_msg_build_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01282"></a>01282 {
<a name="l01283"></a>01283    <span class="keywordtype">int</span> i;
<a name="l01284"></a>01284    <span class="keywordflow">for</span> (i=0; i&lt; <a class="code" href="isdn__msg__parser_8c.html#a111217256650583a2e00360a5d948fed">msgs_max</a>; i++) 
<a name="l01285"></a>01285       <span class="keywordflow">if</span> ( event == msgs[i].event) <span class="keywordflow">return</span> i;
<a name="l01286"></a>01286 
<a name="l01287"></a>01287    <a class="code" href="isdn__lib_8c.html#ad1a7ed589e7bc8ca220a5dd792f474b7">cb_log</a>(10,0, <span class="stringliteral">&quot;get_index: event not found!\n&quot;</span>);
<a name="l01288"></a>01288    
<a name="l01289"></a>01289    <span class="keywordflow">return</span> -1;
<a name="l01290"></a>01290 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4eaa873aaf415ce94764169f2110404a"></a><!-- doxytag: member="isdn_lib_intern.h::isdn_msg_get_info" ref="a4eaa873aaf415ce94764169f2110404a" args="(struct isdn_msg msgs[], msg_t *msg, int nt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* isdn_msg_get_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structisdn__msg.html">isdn_msg</a>&nbsp;</td>
          <td class="paramname"> <em>msgs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">msg_t *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="isdn__msg__parser_8c_source.html#l01299">1299</a> of file <a class="el" href="isdn__msg__parser_8c_source.html">isdn_msg_parser.c</a>.</p>

<p>References <a class="el" href="isdn__lib__intern_8h_source.html#l00049">isdn_msg::info</a>, and <a class="el" href="isdn__msg__parser_8c_source.html#l01260">isdn_msg_get_index()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01300"></a>01300 {
<a name="l01301"></a>01301    <span class="keywordtype">int</span> i=<a class="code" href="isdn__lib__intern_8h.html#a27043961c2c17e3fc04f0ff07a65f5a7">isdn_msg_get_index</a>(msgs, <a class="code" href="adsistub_8c.html#a0dee90db1d6eb30329bee1ae6cec036a">msg</a>, <a class="code" href="structmisdn__stack.html#aa10df685d964a073b6109e024ca6e9ec" title="TRUE if NT side of protocol (TE otherwise).">nt</a>);
<a name="l01302"></a>01302    <span class="keywordflow">if</span>(i&gt;=0) <span class="keywordflow">return</span> msgs[i].<a class="code" href="structisdn__msg.html#a65627378647d3a125ae55432f3f569e2">info</a>;
<a name="l01303"></a>01303    <span class="keywordflow">return</span> NULL;
<a name="l01304"></a>01304 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6fb028d4322a5a9d1a09ec780c73d05d"></a><!-- doxytag: member="isdn_lib_intern.h::isdn_msg_parse_event" ref="a6fb028d4322a5a9d1a09ec780c73d05d" args="(struct isdn_msg msgs[], msg_t *frm, struct misdn_bchannel *bc, int nt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int isdn_msg_parse_event </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structisdn__msg.html">isdn_msg</a>&nbsp;</td>
          <td class="paramname"> <em>msgs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">msg_t *&nbsp;</td>
          <td class="paramname"> <em>frm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="paramname"> <em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="isdn__msg__parser_8c_source.html#l01338">1338</a> of file <a class="el" href="isdn__msg__parser_8c_source.html">isdn_msg_parser.c</a>.</p>

<p>References <a class="el" href="isdn__msg__parser_8c_source.html#l01260">isdn_msg_get_index()</a>, and <a class="el" href="structisdn__msg.html#aad070f454872ca62baa58412b9ee83f5">isdn_msg::msg_parser</a>.</p>

<p>Referenced by <a class="el" href="isdn__lib_8c_source.html#l01875">handle_event_nt()</a>, and <a class="el" href="isdn__lib_8c_source.html#l02692">handle_frm()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01339"></a>01339 {
<a name="l01340"></a>01340    <span class="keywordtype">int</span> i=<a class="code" href="isdn__lib__intern_8h.html#a27043961c2c17e3fc04f0ff07a65f5a7">isdn_msg_get_index</a>(msgs, <a class="code" href="adsistub_8c.html#a0dee90db1d6eb30329bee1ae6cec036a">msg</a>, <a class="code" href="structmisdn__stack.html#aa10df685d964a073b6109e024ca6e9ec" title="TRUE if NT side of protocol (TE otherwise).">nt</a>);
<a name="l01341"></a>01341    <span class="keywordflow">if</span>(i&lt;0) <span class="keywordflow">return</span> -1;
<a name="l01342"></a>01342 
<a name="l01343"></a>01343    msgs[i].<a class="code" href="structisdn__msg.html#aad070f454872ca62baa58412b9ee83f5">msg_parser</a>(msgs, <a class="code" href="adsistub_8c.html#a0dee90db1d6eb30329bee1ae6cec036a">msg</a>, bc, <a class="code" href="structmisdn__stack.html#aa10df685d964a073b6109e024ca6e9ec" title="TRUE if NT side of protocol (TE otherwise).">nt</a>);
<a name="l01344"></a>01344    <span class="keywordflow">return</span> 0;
<a name="l01345"></a>01345 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:22:17 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
