<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:21:53 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_afe38fc0ccf2e9eefca5d5c6b03503d9.html">main</a>
  </div>
</div>
<div class="contents">
<h1>chanvars.c File Reference</h1>
<p>Channel Variables.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="asterisk_8h_source.html">asterisk.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="chanvars_8h_source.html">asterisk/chanvars.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="strings_8h_source.html">asterisk/strings.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br/>

<p><a href="chanvars_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__var__t.html">ast_var_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="chanvars_8c.html#a8ea2b5a29fa275115c7ed27a593b727d">ast_var_assign</a> (const char *<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="chanvars_8c.html#a52aaa758ed30031250c2d356b993c6d9">ast_var_delete</a> (struct <a class="el" href="structast__var__t.html">ast_var_t</a> *var)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="chanvars_8c.html#a37f22870d234aefac66dafb58f8b86fd">ast_var_full_name</a> (const struct <a class="el" href="structast__var__t.html">ast_var_t</a> *var)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="chanvars_8c.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a> (const struct <a class="el" href="structast__var__t.html">ast_var_t</a> *var)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="chanvars_8c.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a> (const struct <a class="el" href="structast__var__t.html">ast_var_t</a> *var)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Channel Variables. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Mark Spencer &lt;<a href="mailto:markster@digium.com">markster@digium.com</a>&gt; </dd></dl>

<p>Definition in file <a class="el" href="chanvars_8c_source.html">chanvars.c</a>.</p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a8ea2b5a29fa275115c7ed27a593b727d"></a><!-- doxytag: member="chanvars.c::ast_var_assign" ref="a8ea2b5a29fa275115c7ed27a593b727d" args="(const char *name, const char *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__var__t.html">ast_var_t</a>* ast_var_assign </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chanvars_8c_source.html#l00037">37</a> of file <a class="el" href="chanvars_8c_source.html">chanvars.c</a>.</p>

<p>References <a class="el" href="astmm_8c_source.html#l00199">__ast_calloc()</a>, <a class="el" href="astmm_8h_source.html#l00072">ast_calloc</a>, <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="chanvars_8h_source.html#l00031">ast_var_t::name</a>, <a class="el" href="chanvars_8h_source.html#l00030">ast_var_t::value</a>, and <a class="el" href="ast__expr2f_8c_source.html#l00613">var</a>.</p>

<p>Referenced by <a class="el" href="chan__iax2_8c_source.html#l09409">acf_iaxvar_write()</a>, <a class="el" href="res__phoneprov_8c_source.html#l00860">add_user_extension()</a>, <a class="el" href="cdr_8c_source.html#l00336">ast_cdr_copy_vars()</a>, <a class="el" href="cdr_8c_source.html#l00292">ast_cdr_setvar()</a>, <a class="el" href="channel_8c_source.html#l04302">ast_channel_inherit_variables()</a>, <a class="el" href="chan__iax2_8c_source.html#l05415">ast_iax2_new()</a>, <a class="el" href="chan__iax2_8c_source.html#l07812">authenticate_reply()</a>, <a class="el" href="res__phoneprov_8c_source.html#l00709">build_extension()</a>, <a class="el" href="res__phoneprov_8c_source.html#l00583">build_profile()</a>, <a class="el" href="channel_8c_source.html#l04351">clone_variables()</a>, <a class="el" href="app__playback_8c_source.html#l00162">do_say()</a>, <a class="el" href="pbx__dundi_8c_source.html#l00561">dundi_lookup_local()</a>, <a class="el" href="app__stack_8c_source.html#l00192">frame_set_var()</a>, <a class="el" href="chan__iax2_8c_source.html#l01207">iax2_dup_variable_datastore()</a>, <a class="el" href="pbx__loopback_8c_source.html#l00083">loopback_subst()</a>, <a class="el" href="pbx_8c_source.html#l08989">pbx_builtin_pushvar_helper()</a>, <a class="el" href="pbx_8c_source.html#l09023">pbx_builtin_setvar_helper()</a>, <a class="el" href="res__phoneprov_8c_source.html#l00401">phoneprov_callback()</a>, <a class="el" href="res__phoneprov_8c_source.html#l00912">set_config()</a>, <a class="el" href="res__phoneprov_8c_source.html#l00344">set_timezone_variables()</a>, <a class="el" href="func__global_8c_source.html#l00176">shared_write()</a>, and <a class="el" href="chan__iax2_8c_source.html#l09458">socket_process()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00039"></a>00039 {  
<a name="l00040"></a>00040    <span class="keyword">struct </span><a class="code" href="structast__var__t.html">ast_var_t</a> *<a class="code" href="ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;
<a name="l00041"></a>00041    <span class="keywordtype">int</span> name_len = strlen(<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>) + 1;
<a name="l00042"></a>00042    <span class="keywordtype">int</span> value_len = strlen(<a class="code" href="structast__var__t.html#a4e9aec275e566b978a3ccb4e043d8c61">value</a>) + 1;
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="preprocessor">#ifdef MALLOC_DEBUG</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (!(var = <a class="code" href="astmm_8h.html#ad800d5c993a0c605f6e061bdef1b524c">__ast_calloc</a>(<span class="keyword">sizeof</span>(*var) + name_len + value_len, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>), file, lineno, function))) {
<a name="l00046"></a>00046 <span class="preprocessor">#else</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (!(var = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(<span class="keyword">sizeof</span>(*var) + name_len + value_len, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>)))) {
<a name="l00048"></a>00048 <span class="preprocessor">#endif</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>      <span class="keywordflow">return</span> NULL;
<a name="l00050"></a>00050    }
<a name="l00051"></a>00051 
<a name="l00052"></a>00052    <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(var-&gt;<a class="code" href="structast__var__t.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, <a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, name_len);
<a name="l00053"></a>00053    var-&gt;<a class="code" href="structast__var__t.html#a4e9aec275e566b978a3ccb4e043d8c61">value</a> = var-&gt;<a class="code" href="structast__var__t.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a> + name_len;
<a name="l00054"></a>00054    <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(var-&gt;<a class="code" href="structast__var__t.html#a4e9aec275e566b978a3ccb4e043d8c61">value</a>, <a class="code" href="structast__var__t.html#a4e9aec275e566b978a3ccb4e043d8c61">value</a>, value_len);
<a name="l00055"></a>00055    
<a name="l00056"></a>00056    <span class="keywordflow">return</span> var;
<a name="l00057"></a>00057 }  
</pre></div></p>

</div>
</div>
<a class="anchor" id="a52aaa758ed30031250c2d356b993c6d9"></a><!-- doxytag: member="chanvars.c::ast_var_delete" ref="a52aaa758ed30031250c2d356b993c6d9" args="(struct ast_var_t *var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_var_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__var__t.html">ast_var_t</a> *&nbsp;</td>
          <td class="paramname"> <em>var</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chanvars_8c_source.html#l00059">59</a> of file <a class="el" href="chanvars_8c_source.html">chanvars.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>.</p>

<p>Referenced by <a class="el" href="chan__iax2_8c_source.html#l09409">acf_iaxvar_write()</a>, <a class="el" href="cdr_8c_source.html#l00407">ast_cdr_free_vars()</a>, <a class="el" href="cdr_8c_source.html#l00292">ast_cdr_setvar()</a>, <a class="el" href="channel_8c_source.html#l01388">ast_channel_free()</a>, <a class="el" href="res__phoneprov_8c_source.html#l00695">delete_extension()</a>, <a class="el" href="app__playback_8c_source.html#l00162">do_say()</a>, <a class="el" href="pbx__dundi_8c_source.html#l00561">dundi_lookup_local()</a>, <a class="el" href="app__stack_8c_source.html#l00222">gosub_release_frame()</a>, <a class="el" href="pbx__loopback_8c_source.html#l00083">loopback_subst()</a>, <a class="el" href="pbx_8c_source.html#l09182">pbx_builtin_clear_globals()</a>, <a class="el" href="pbx_8c_source.html#l09023">pbx_builtin_setvar_helper()</a>, <a class="el" href="res__phoneprov_8c_source.html#l00263">profile_destructor()</a>, <a class="el" href="res__phoneprov_8c_source.html#l01298">reload()</a>, <a class="el" href="func__global_8c_source.html#l00092">shared_variable_free()</a>, <a class="el" href="func__global_8c_source.html#l00176">shared_write()</a>, <a class="el" href="chan__sip_8c_source.html#l25477">sip_removeheader()</a>, and <a class="el" href="res__phoneprov_8c_source.html#l01271">unload_module()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00060"></a>00060 {
<a name="l00061"></a>00061    <span class="keywordflow">if</span> (var)
<a name="l00062"></a>00062       <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(var);
<a name="l00063"></a>00063 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a37f22870d234aefac66dafb58f8b86fd"></a><!-- doxytag: member="chanvars.c::ast_var_full_name" ref="a37f22870d234aefac66dafb58f8b86fd" args="(const struct ast_var_t *var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_var_full_name </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structast__var__t.html">ast_var_t</a> *&nbsp;</td>
          <td class="paramname"> <em>var</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chanvars_8c_source.html#l00080">80</a> of file <a class="el" href="chanvars_8c_source.html">chanvars.c</a>.</p>

<p>References <a class="el" href="chanvars_8h_source.html#l00031">ast_var_t::name</a>.</p>

<p>Referenced by <a class="el" href="channel_8c_source.html#l04302">ast_channel_inherit_variables()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00081"></a>00081 {
<a name="l00082"></a>00082    <span class="keywordflow">return</span> (var ? var-&gt;<a class="code" href="structast__var__t.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a> : NULL);
<a name="l00083"></a>00083 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a356a31cd608ec07d3668dcd589be49d8"></a><!-- doxytag: member="chanvars.c::ast_var_name" ref="a356a31cd608ec07d3668dcd589be49d8" args="(const struct ast_var_t *var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_var_name </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structast__var__t.html">ast_var_t</a> *&nbsp;</td>
          <td class="paramname"> <em>var</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chanvars_8c_source.html#l00065">65</a> of file <a class="el" href="chanvars_8c_source.html">chanvars.c</a>.</p>

<p>References <a class="el" href="chanvars_8h_source.html#l00031">ast_var_t::name</a>.</p>

<p>Referenced by <a class="el" href="cdr_8c_source.html#l00336">ast_cdr_copy_vars()</a>, <a class="el" href="cdr_8c_source.html#l00187">ast_cdr_getvar_internal()</a>, <a class="el" href="cdr_8c_source.html#l00362">ast_cdr_serialize_variables()</a>, <a class="el" href="cdr_8c_source.html#l00292">ast_cdr_setvar()</a>, <a class="el" href="channel_8c_source.html#l04302">ast_channel_inherit_variables()</a>, <a class="el" href="cdr_8c_source.html#l00461">cdr_merge_vars()</a>, <a class="el" href="func__strings_8c_source.html#l00556">clearvar_prefix()</a>, <a class="el" href="app__stack_8c_source.html#l00192">frame_set_var()</a>, <a class="el" href="app__stack_8c_source.html#l00222">gosub_release_frame()</a>, <a class="el" href="pbx_8c_source.html#l06157">handle_show_globals()</a>, <a class="el" href="func__strings_8c_source.html#l00642">hashkeys_read()</a>, <a class="el" href="chan__iax2_8c_source.html#l04777">iax2_call()</a>, <a class="el" href="chan__iax2_8c_source.html#l01207">iax2_dup_variable_datastore()</a>, <a class="el" href="app__stack_8c_source.html#l00455">local_read()</a>, <a class="el" href="chan__mgcp_8c_source.html#l00843">mgcp_call()</a>, <a class="el" href="app__osplookup_8c_source.html#l01255">ospauth_exec()</a>, <a class="el" href="app__osplookup_8c_source.html#l01657">ospfinished_exec()</a>, <a class="el" href="app__osplookup_8c_source.html#l01335">osplookup_exec()</a>, <a class="el" href="app__osplookup_8c_source.html#l01503">ospnext_exec()</a>, <a class="el" href="pbx_8c_source.html#l08951">pbx_builtin_getvar_helper()</a>, <a class="el" href="pbx_8c_source.html#l08920">pbx_builtin_serialize_variables()</a>, <a class="el" href="pbx_8c_source.html#l09023">pbx_builtin_setvar_helper()</a>, <a class="el" href="pbx_8c_source.html#l02867">pbx_retrieve_variable()</a>, <a class="el" href="app__stack_8c_source.html#l00516">peek_read()</a>, <a class="el" href="func__global_8c_source.html#l00128">shared_read()</a>, <a class="el" href="func__global_8c_source.html#l00176">shared_write()</a>, <a class="el" href="chan__sip_8c_source.html#l05373">sip_call()</a>, <a class="el" href="chan__sip_8c_source.html#l25477">sip_removeheader()</a>, and <a class="el" href="chan__sip_8c_source.html#l10819">transmit_invite()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00066"></a>00066 {
<a name="l00067"></a>00067    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>;
<a name="l00068"></a>00068 
<a name="l00069"></a>00069    <span class="keywordflow">if</span> (var == NULL || (name = var-&gt;<a class="code" href="structast__var__t.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>) == NULL)
<a name="l00070"></a>00070       <span class="keywordflow">return</span> NULL;
<a name="l00071"></a>00071    <span class="comment">/* Return the name without the initial underscores */</span>
<a name="l00072"></a>00072    <span class="keywordflow">if</span> (name[0] == <span class="charliteral">&apos;_&apos;</span>) {
<a name="l00073"></a>00073       name++;
<a name="l00074"></a>00074       <span class="keywordflow">if</span> (name[0] == <span class="charliteral">&apos;_&apos;</span>)
<a name="l00075"></a>00075          name++;
<a name="l00076"></a>00076    }
<a name="l00077"></a>00077    <span class="keywordflow">return</span> name;
<a name="l00078"></a>00078 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8e0081172db71c5021d20706c50d959c"></a><!-- doxytag: member="chanvars.c::ast_var_value" ref="a8e0081172db71c5021d20706c50d959c" args="(const struct ast_var_t *var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_var_value </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structast__var__t.html">ast_var_t</a> *&nbsp;</td>
          <td class="paramname"> <em>var</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chanvars_8c_source.html#l00085">85</a> of file <a class="el" href="chanvars_8c_source.html">chanvars.c</a>.</p>

<p>References <a class="el" href="chanvars_8h_source.html#l00030">ast_var_t::value</a>.</p>

<p>Referenced by <a class="el" href="cdr_8c_source.html#l00336">ast_cdr_copy_vars()</a>, <a class="el" href="cdr_8c_source.html#l00187">ast_cdr_getvar_internal()</a>, <a class="el" href="cdr_8c_source.html#l00362">ast_cdr_serialize_variables()</a>, <a class="el" href="channel_8c_source.html#l04302">ast_channel_inherit_variables()</a>, <a class="el" href="cdr_8c_source.html#l00461">cdr_merge_vars()</a>, <a class="el" href="pbx_8c_source.html#l06157">handle_show_globals()</a>, <a class="el" href="chan__iax2_8c_source.html#l04777">iax2_call()</a>, <a class="el" href="chan__iax2_8c_source.html#l01207">iax2_dup_variable_datastore()</a>, <a class="el" href="chan__mgcp_8c_source.html#l00843">mgcp_call()</a>, <a class="el" href="app__osplookup_8c_source.html#l01255">ospauth_exec()</a>, <a class="el" href="app__osplookup_8c_source.html#l01657">ospfinished_exec()</a>, <a class="el" href="app__osplookup_8c_source.html#l01335">osplookup_exec()</a>, <a class="el" href="app__osplookup_8c_source.html#l01503">ospnext_exec()</a>, <a class="el" href="pbx_8c_source.html#l08951">pbx_builtin_getvar_helper()</a>, <a class="el" href="pbx_8c_source.html#l08920">pbx_builtin_serialize_variables()</a>, <a class="el" href="pbx_8c_source.html#l02867">pbx_retrieve_variable()</a>, <a class="el" href="app__stack_8c_source.html#l00516">peek_read()</a>, <a class="el" href="func__global_8c_source.html#l00128">shared_read()</a>, <a class="el" href="chan__sip_8c_source.html#l05373">sip_call()</a>, <a class="el" href="chan__sip_8c_source.html#l25477">sip_removeheader()</a>, and <a class="el" href="chan__sip_8c_source.html#l10819">transmit_invite()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00086"></a>00086 {
<a name="l00087"></a>00087    <span class="keywordflow">return</span> (var ? var-&gt;<a class="code" href="structast__var__t.html#a4e9aec275e566b978a3ccb4e043d8c61">value</a> : NULL);
<a name="l00088"></a>00088 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:21:54 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
