<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:23:36 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="todo">Todo List </a></h1><p><a class="anchor" id="_todo000066"></a> </p>
<dl>
<dt>Global <a class="el" href="channel_8c.html#a69a66588107e52e682f046d05898ff43">__ast_read</a>  </dt>
<dd>XXX It is possible to write a digit to the audiohook twice if the digit was originally read while the channel was in autoservice. </dd>
</dl>
<p><a class="anchor" id="_todo000023"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a2b4aa417f028dd3f0727312a234a919f">__sip_reliable_xmit</a>  </dt>
<dd>According to the RFC some packets need to be retransmitted even if its TCP, so this needs to get revisited </dd>
</dl>
<p><a class="anchor" id="_todo000021"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a40aef132883dc46a1366bf5191004a8d">_sip_tcp_helper_thread</a>  </dt>
<dd>XXX If there's no Content-Length or if the content-length and what we receive is not the same - we should generate an error </dd>
</dl>
<p><a class="anchor" id="_todo000048"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#ada5bfee7a246a992665f4719110ef850">add_peer_mailboxes</a>  </dt>
<dd>document this function </dd>
</dl>
<p><a class="anchor" id="_todo000055"></a> </p>
<dl>
<dt>File <a class="el" href="ael__structs_8h.html">ael_structs.h</a>  </dt>
<dd>document this file (ael.h) </dd>
</dl>
<p><a class="anchor" id="_todo000018"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#ab2887e2cf6f870a0d8f2fa4184fba26c">ALLOWED_METHODS</a>  </dt>
<dd>This string should be set dynamically. We only support REFER and SUBSCRIBE if we have allowsubscribe and allowrefer on in sip.conf. </dd>
</dl>
<p><a class="anchor" id="_todo000064"></a> </p>
<dl>
<dt>Class <a class="el" href="structao2__container.html">ao2_container</a>  </dt>
<dd>Linking and unlink objects is typically expensive, as it involves a <a class="el" href="astmm_8h.html#ab8b25cd8f16d4a6552afe4e65c4f082d">malloc()</a> of a small object which is very inefficient. To optimize this, we allocate larger arrays of bucket_list's when we run out of them, and then manage our own freelist. This will be more efficient as we can do the freelist management while we hold the lock (that we need anyways). </dd>
</dl>
<p><a class="anchor" id="_todo000004"></a> </p>
<dl>
<dt>File <a class="el" href="app__originate_8c.html">app_originate.c</a>  </dt>
<dd>Make a way to be able to set variables (and functions) on the outbound channel, similar to the Variable headers for the AMI Originate, and the Set options for call files. </dd>
</dl>
<p><a class="anchor" id="_todo000057"></a> </p>
<dl>
<dt>Global <a class="el" href="audiohook_8h.html#ae09727634eabe798d8abc95d46fa7b1e">ast_audiohook_move_by_source</a>  </dt>
<dd><p class="startdd">Currently only the first audiohook of a specific source found will be moved. We should add the capability to move multiple audiohooks from a single source as well.</p>
<p class="enddd"></p>
</dd>
</dl>
<p><a class="anchor" id="_todo000072"></a> </p>
<dl>
<dt>Global <a class="el" href="features_8h.html#a3fe7c7e43b8f3140716d836816bf827f">ast_bridge_call</a>  </dt>
<dd><p class="startdd">XXX how do we guarantee the latter ? </p>
<p class="enddd">XXX how do we guarantee the latter ? </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000059"></a> </p>
<dl>
<dt>Class <a class="el" href="structast__callerid.html">ast_callerid</a>  </dt>
<dd>Implement settings for transliteration between UTF8 caller ID names in to Ascii Caller ID's (DAHDI). Östen Åsklund might be transliterated into Osten Asklund or Oesten Aasklund depending upon language and person... We need automatic routines for incoming calls and static settings for our own accounts. </dd>
</dl>
<p><a class="anchor" id="_todo000056"></a> </p>
<dl>
<dt>File <a class="el" href="ast__expr_8h.html">ast_expr.h</a>  </dt>
<dd>Explain this file! </dd>
</dl>
<p><a class="anchor" id="_todo000058"></a> </p>
<dl>
<dt>Class <a class="el" href="structast__generator.html">ast_generator</a>  </dt>
<dd>Add an explanation of an Asterisk generator </dd>
</dl>
<p><a class="anchor" id="_todo000077"></a> </p>
<dl>
<dt>Global <a class="el" href="rtp_8c.html#ae8c264c840c8c9b4e8ca062746000506">ast_rtcp_calc_interval</a>  </dt>
<dd>XXX Do a more reasonable calculation on this one Look in RFC 3550 Section A.7 for an example </dd>
</dl>
<p><a class="anchor" id="_todo000067"></a> </p>
<dl>
<dt>Global <a class="el" href="channel_8h.html#a79c413d51b7135404d5cacf811649a61">ast_write</a>  </dt>
<dd>XXX should return 0 maybe ? </dd>
</dl>
<p><a class="anchor" id="_todo000078"></a> </p>
<dl>
<dt>Page <a class="el" href="Def_syntaxlang.html">Asterisk Language Syntaxes supported</a>  </dt>
<dd><p class="startdd">Note that in future, we need to move to a model where we can differentiate further - e.g. between en_US &amp; en_UK</p>
<p class="enddd"></p>
</dd>
</dl>
<p><a class="anchor" id="_todo000020"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a888c079583d258201c429c49613eb43e">authl</a>  </dt>
<dd>Move the <a class="el" href="structsip__auth.html" title="sip_auth: Credentials for authentication to other SIP services">sip_auth</a> list to AST_LIST </dd>
</dl>
<p><a class="anchor" id="_todo000005"></a> </p>
<dl>
<dt>File <a class="el" href="bridge__softmix_8c.html">bridge_softmix.c</a>  </dt>
<dd>This bridge operates in 8 kHz mode unless a define is uncommented. This needs to be improved so the bridge moves between the dominant codec as needed depending on <a class="el" href="structchannels.html" title="the list of channels we have. Note that the lock for this list is used for both the...">channels</a> present in the bridge and transcoding capabilities. </dd>
</dl>
<p><a class="anchor" id="_todo000065"></a> </p>
<dl>
<dt>Class <a class="el" href="structbucket__list.html">bucket_list</a>  </dt>
<dd>this should be private to the container code </dd>
</dl>
<p><a class="anchor" id="_todo000053"></a> </p>
<dl>
<dt>Global <a class="el" href="format__h264_8c.html#a6821bafc3c88dfb2e433a095df9940c6">BUF_SIZE</a>  </dt>
<dd>Check this buf size estimate, it may be totally wrong for large frame video </dd>
</dl>
<p><a class="anchor" id="_todo000069"></a> </p>
<dl>
<dt>Global <a class="el" href="features_8c.html#ab15661cb2b776df35b0ae031fc5b0be1">builtin_blindtransfer</a>  </dt>
<dd><p class="startdd">XXX Maybe we should have another <a class="el" href="structmessage.html">message</a> here instead of invalid <a class="el" href="structextension.html">extension</a> XXX </p>
<p class="enddd">XXX Maybe we should have another <a class="el" href="structmessage.html">message</a> here instead of invalid <a class="el" href="structextension.html">extension</a> XXX </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000007"></a> </p>
<dl>
<dt>File <a class="el" href="chan__dahdi_8c.html">chan_dahdi.c</a>  </dt>
<dd>Deprecate the "musiconhold" configuration option post 1.4 </dd>
</dl>
<p><a class="anchor" id="_todo000010"></a> </p>
<dl>
<dt>File <a class="el" href="chan__iax2_8c.html">chan_iax2.c</a>  </dt>
<dd>Implement musicclass settings for IAX2 devices </dd>
</dl>
<p><a class="anchor" id="_todo000012"></a> </p>
<dl>
<dt>File <a class="el" href="chan__sip_8c.html">chan_sip.c</a>  </dt>
<dd><p class="startdd">Better support of forking </p>
<p>VIA branch tag transaction checking </p>
<p>Transaction support</p>
<p class="enddd"></p>
</dd>
</dl>
<p><a class="anchor" id="_todo000032"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a62da05908b35326060a7a889f9a05824">check_auth</a>  </dt>
<dd><p class="startdd">need a better return code here </p>
<p class="enddd">need a better return code here </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000047"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a9494443a360124a693bd2bd9396630cb">check_rtp_timeout</a>  </dt>
<dd><p class="startdd">Check video RTP keepalives</p>
<p class="enddd"></p>
</dd>
</dl>
<p><a class="anchor" id="_todo000024"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#affcfa96b5000dca10e26ebfd866313f7">create_addr</a>  </dt>
<dd>Fix this function. When we ask for SRV, we should check all transports In the future, we should first check NAPTR to find out transport preference </dd>
</dl>
<p><a class="anchor" id="_todo000001"></a> </p>
<dl>
<dt>Global <a class="el" href="app__db_8c.html#ae5718d48f71cb54f608df3962147caab">d_app</a>  </dt>
<dd>XXX Remove this application after 1.4 is relased </dd>
</dl>
<p><a class="anchor" id="_todo000008"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__dahdi_8c.html#a983e979fabe9ac6d4012524c7c2107d8">dahdi_setoption</a>  </dt>
<dd>XXX This is an abuse of the stack!! </dd>
</dl>
<p><a class="anchor" id="_todo000060"></a> </p>
<dl>
<dt>File <a class="el" href="devicestate_8h.html">devicestate.h</a>  </dt>
<dd><p class="startdd">Currently, when the <a class="el" href="structstate.html">state</a> of a device changes, the device <a class="el" href="structstate.html">state</a> provider calls one of the functions defined here to queue an object to say that the <a class="el" href="structstate.html">state</a> of a device has changed. However, this does not include the new <a class="el" href="structstate.html">state</a>. Another thread processes these device <a class="el" href="structstate.html">state</a> change objects and calls the device <a class="el" href="structstate.html">state</a> provider's callback to figure out what the new <a class="el" href="structstate.html">state</a> is. It would make a lot more sense for the new <a class="el" href="structstate.html">state</a> to be included in the original function call that says the <a class="el" href="structstate.html">state</a> of a device has changed. However, it will take a lot of work to change this.</p>
<p class="enddd"></p>
</dd>
</dl>
<p><a class="anchor" id="_todo000038"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a8698611ba90697c9677ac43309df97af">dialog_needdestroy</a>  </dt>
<dd>Re-work this to improve efficiency. Currently, this function is called on _every_ dialog after processing _every_ incoming SIP/UDP packet, or potentially even more often when the scheduler has entries to run. </dd>
</dl>
<p><a class="anchor" id="_todo000003"></a> </p>
<dl>
<dt>Global <a class="el" href="app__externalivr_8c.html#adbe489a18baa75f556a07affd102820d">eivr_comm</a>  </dt>
<dd>add deprecation debug <a class="el" href="structmessage.html">message</a> for X command here </dd>
</dl>
<p><a class="anchor" id="_todo000068"></a> </p>
<dl>
<dt>File <a class="el" href="enum_8c.html">enum.c</a>  </dt>
<dd><p class="startdd">Implement a caching mechanism for multile enum lookups</p>
<ul>
<li>See <a href="http://bugs.digium.com/view.php?id=6739">http://bugs.digium.com/view.php?id=6739</a> </li>
</ul>
<p class="enddd">The service type selection needs to be redone. </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000070"></a> </p>
<dl>
<dt>Global <a class="el" href="features_8c.html#a7d36808a9da972e429854519d6ced84c">feature_exec_app</a>  </dt>
<dd><p class="startdd">XXX should probably return res </p>
<p class="enddd">XXX should probably return res </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000071"></a> </p>
<dl>
<dt>Global <a class="el" href="features_8c.html#ac2ea73c446e5630743ce9e6e90634e05">feature_request_and_dial</a>  </dt>
<dd><p class="startdd">XXX Check - this is very similar to the code in <a class="el" href="channel_8c.html" title="Channel Management.">channel.c</a> </p>
<p class="enddd">XXX Check - this is very similar to the code in <a class="el" href="channel_8c.html" title="Channel Management.">channel.c</a> </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000054"></a> </p>
<dl>
<dt>File <a class="el" href="func__devstate_8c.html">func_devstate.c</a>  </dt>
<dd><p class="startdd">Delete the entry from AstDB when set to nothing like Set(DEVICE_STATE(Custom:lamp1)=)</p>
<p class="enddd"></p>
</dd>
</dl>
<p><a class="anchor" id="_todo000041"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#ab870642d809b5db8d286b498139803d4">function_sippeer</a>  </dt>
<dd>Will be deprecated after 1.4 </dd>
</dl>
<p><a class="anchor" id="_todo000037"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a402d5d7c01742d9c2bf41c5cae859145">get_rdnis</a>  </dt>
<dd>This function does not take user-parameters into consideration. First look for @, then start looking for ; to find uri-parameters. </dd>
</dl>
<p><a class="anchor" id="_todo000022"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a2738a84cc63238aab75a72aed0b91e2e">get_transport_pvt</a>  </dt>
<dd>Fix this function to work correctly </dd>
</dl>
<p><a class="anchor" id="_todo000083"></a> </p>
<dl>
<dt>Global <a class="el" href="res__clioriginate_8c.html#af044bd740030fc7b465bcdcb84882ca1">handle_redirect</a>  </dt>
<dd>It would be nice to be able to redirect 2 <a class="el" href="structchannels.html" title="the list of channels we have. Note that the lock for this list is used for both the...">channels</a> at the same time like you can with AMI redirect. However, it is not possible to acquire two <a class="el" href="structchannels.html" title="the list of channels we have. Note that the lock for this list is used for both the...">channels</a> without the potential for a deadlock with how <a class="el" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> structs are managed today. Once <a class="el" href="structast__channel.html" title="Main Channel structure associated with a channel. This is the side of it mostly used...">ast_channel</a> is a refcounted object, this command will be able to support that. </dd>
</dl>
<p><a class="anchor" id="_todo000040"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a3723b1b38208e1bc7dc00b2c6cef55c5">handle_request_info</a>  </dt>
<dd>Note: Doesn't read the duration of the DTMF. Should be fixed. </dd>
</dl>
<p><a class="anchor" id="_todo000044"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#af876a04c08460c249269703b6deb8882">handle_request_invite</a>  </dt>
<dd>XXX This needs to be reviewed. YOu don't change the request URI really, you route the packet correctly instead... </dd>
</dl>
<p><a class="anchor" id="_todo000043"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a43b6099f402fad933e06ff28e4555bd0">handle_request_options</a>  </dt>
<dd>Fix handle_request_options device handling with optional authentication (this needs to be fixed in 1.4 as well) </dd>
</dl>
<p><a class="anchor" id="_todo000063"></a> </p>
<dl>
<dt>Global <a class="el" href="asterisk_8c.html#ad66301d131d35faea1df2e7c5b1a1bf2">handle_show_settings</a>  </dt>
<dd>we could check musiconhold, voicemail, smdi, adsi, queues </dd>
</dl>
<p><a class="anchor" id="_todo000026"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a9fb8ea049f6ddc8d9ac91397d0fca653">initreqprep</a>  </dt>
<dd>Need to add back the VXML URL here at some point, possibly use build_string for all this junk </dd>
</dl>
<p><a class="anchor" id="_todo000092"></a> </p>
<dl>
<dt>Global <a class="el" href="res__jabber_8c.html#ae61bb5ae111d446dd928959847812526">JABBER_CONFIG</a>  </dt>
<dd>This should really be renamed to xmpp.conf. For backwards compatibility, we need to read both files </dd>
</dl>
<p><a class="anchor" id="_todo000075"></a> </p>
<dl>
<dt>Global <a class="el" href="features_8c.html#aed5779f84d4ebb67745d801d3ebede43">load_config</a>  </dt>
<dd><p class="startdd">XXX var_name or app_args ? </p>
<p class="enddd">XXX var_name or app_args ? </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000050"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>  </dt>
<dd><p class="startdd">Fix this XXX This must be all wrong XXXX </p>
<p class="enddd">Leaking anything allocated by <a class="el" href="chan__h323_8c.html#aa0b7680df49f5fe40c8bb1c8f0536cc6">reload_config()</a> ... </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000009"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__dahdi_8c.html#a29baa04e5997d3badd14e3291b69196b">MAX_CHANLIST_LEN</a>  </dt>
<dd>Move definition of MAX_CHANLIST_LEN to a proper place. </dd>
</dl>
<p><a class="anchor" id="_todo000011"></a> </p>
<dl>
<dt>Global <a class="el" href="structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">mgcp_subchannel::cxident</a> [80] </dt>
<dd>FIXME txident is replaced by rqnt_ident in endpoint. This should be obsoleted </dd>
</dl>
<p><a class="anchor" id="_todo000073"></a> </p>
<dl>
<dt>Global <a class="el" href="features_8c.html#a30d20fba12b1a6a72a8fe90c6d546406">park_exec_full</a>  </dt>
<dd><p class="startdd">XXX we would like to wait on both! </p>
<p>XXX Play a <a class="el" href="structmessage.html">message</a> XXX </p>
<p>XXX we would like to wait on both! </p>
<p class="enddd">XXX Play a <a class="el" href="structmessage.html">message</a> XXX </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000042"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a25dcabb5a1800edbebe7fa3e6f5d0389">parse_moved_contact</a>  </dt>
<dd>XXX Doesn't redirect over TLS on sips: uri's. If we get a redirect to a SIPS: uri, this needs to be going back to the dialplan (this is a request for a secure signalling path). Note that transport=tls is deprecated, but we need to support it on incoming <a class="el" href="structrequests.html">requests</a>. </dd>
</dl>
<p><a class="anchor" id="_todo000030"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#abf4d1c3b841a3db0b0ed118c55b8e790">parse_register_contact</a>  </dt>
<dd><p class="startdd">Check NAPTR/SRV if we have not got a port in the URI </p>
<p class="enddd">This could come before the checking of DNS earlier on, to avoid DNS lookups where we don't need it... </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000076"></a> </p>
<dl>
<dt>Global <a class="el" href="pbx_8c.html#ae4f48a51cb2dca6080d6d8488b41d4f9">pbx_builtin_importvar</a>  </dt>
<dd>XXX should do !ast_strlen_zero(..) of the args ? </dd>
</dl>
<p><a class="anchor" id="_todo000002"></a> </p>
<dl>
<dt>Global <a class="el" href="app__directed__pickup_8c.html#a7152ec655887ca2927e647865737ba17">pickup_do</a>  </dt>
<dd>This application should return a result code, like PICKUPRESULT </dd>
</dl>
<p><a class="anchor" id="_todo000080"></a> </p>
<dl>
<dt>Global <a class="el" href="translate_8c.html#a1c7c763fec10eeb2cc2614cd229c59e1">powerof</a>  </dt>
<dd>TODO: sample frames for each supported input format. We build this on the fly, by taking an SLIN frame and using the existing converter to play with it. </dd>
</dl>
<p><a class="anchor" id="_todo000035"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a7bcba31f6e9a6258bcfff1252379c63b">register_verify</a>  </dt>
<dd><p class="startdd">XXX here too we interpret a missing  as a name-only URI, whereas the RFC says this is a domain-only uri. </p>
<p class="enddd">OEJ Remove this - there's never RTP in a REGISTER dialog... </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000081"></a> </p>
<dl>
<dt>File <a class="el" href="res__adsi_8c.html">res_adsi.c</a>  </dt>
<dd><p class="startdd">Move app_getcpeid into this module </p>
<p class="enddd">Create a core layer so that app_voicemail does not require res_adsi to load </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000082"></a> </p>
<dl>
<dt>File <a class="el" href="res__agi_8c.html">res_agi.c</a>  </dt>
<dd>Convert the rest of the AGI commands over to XML documentation </dd>
</dl>
<p><a class="anchor" id="_todo000091"></a> </p>
<dl>
<dt>File <a class="el" href="res__jabber_8c.html">res_jabber.c</a>  </dt>
<dd><p class="startdd">If you unload this module, chan_gtalk/jingle will be dead. How do we handle that? </p>
<p>Dialplan applications need RETURN variable, like JABBERSENDSTATUS</p>
<p class="enddd"></p>
</dd>
</dl>
<p><a class="anchor" id="_todo000093"></a> </p>
<dl>
<dt>File <a class="el" href="res__smdi_8c.html">res_smdi.c</a>  </dt>
<dd>This module currently has its own mailbox monitoring thread. This should be converted to MWI subscriptions and just let the optional global voicemail polling thread handle it. </dd>
</dl>
<p><a class="anchor" id="_todo000006"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__console_8c.html#a4b76a0c2859cfd819a343a780070ee2b">SAMPLE_RATE</a>  </dt>
<dd>Make this optional. If this is only going to talk to 8 kHz endpoints, then it makes sense to use 8 kHz natively. </dd>
</dl>
<p><a class="anchor" id="_todo000061"></a> </p>
<dl>
<dt>Global <a class="el" href="say_8h.html#af1676b33eedb98a437f29df092068021">SAY_INIT</a>  </dt>
<dd>XXX As the conversion from the old implementation of <a class="el" href="say_8c.html" title="Say numbers and dates (maybe words one day too).">say.c</a> to the new implementation will be completed, and the API suitably reworked by removing redundant functions and/or arguments, this mechanism may be reverted back to pure static functions, if needed. </dd>
</dl>
<p><a class="anchor" id="_todo000029"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#ad6c361243e16a01196b6697172893255">set_address_from_contact</a>  </dt>
<dd>We need to save the TRANSPORT here too </dd>
</dl>
<p><a class="anchor" id="_todo000025"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#ada017d6ddbaf9aed1e9bc8a85e3aac59">set_destination</a>  </dt>
<dd>XXX If we have use_dns on, then look for NAPTR/SRV, otherwise, just look for A records </dd>
</dl>
<p><a class="anchor" id="_todo000013"></a> </p>
<dl>
<dt>Page <a class="el" href="sip_tcp_tls.html">SIP TCP and TLS support</a>  </dt>
<dd><p class="startdd">Fix TCP/TLS handling in dialplan, SRV records, transfers and much more </p>
<p>Save TCP/TLS <a class="el" href="structsessions.html">sessions</a> in registry If someone registers a SIPS uri, this forces us to set up a TLS connection back. </p>
<p>Add TCP/TLS information to function SIPPEER and SIPCHANINFO </p>
<p>If tcpenable=yes, we must open a TCP socket on the same address as the IP for UDP. The tcpbindaddr config option should only be used to open ADDITIONAL ports So we should propably go back to bindaddr= the default address to bind to. If tcpenable=yes, then bind this to both udp and TCP if tlsenable=yes, open TLS port (provided we also have cert) tcpbindaddr = extra address for additional TCP connections tlsbindaddr = extra address for additional TCP/TLS connections udpbindaddr = extra address for additional UDP connections These three options should take multiple IP/port pairs Note: Since opening additional listen sockets is a *new* feature we do not have today the XXXbindaddr options needs to be disabled until we have support for it</p>
<p></p>
<p>We need to test TCP <a class="el" href="structsessions.html">sessions</a> with SIP proxies and in regards to the SIP outbound specs. </p>
<p>;transport=tls was deprecated in RFC3261 and should not be used at all. See section 26.2.2.</p>
<p></p>
<p>Since we have had multidomain support in Asterisk for quite a while, we need to support multiple domains in our TLS implementation, meaning one socket and one cert per <a class="el" href="structdomain.html" title="Domain data structure.">domain</a> </p>
<p>Selection of transport for a request needs to be done after we've parsed all route headers, also considering outbound proxy options. First request: Outboundproxy, routes, (reg contact or URI. If URI doesn't have port: DNS <a class="el" href="structnaptr.html">naptr</a>, srv, AAA) Intermediate <a class="el" href="structrequests.html">requests</a>: Outboundproxy(only when forced), routes, contact/uri DNS <a class="el" href="structnaptr.html">naptr</a> support is crucial. A SIP uri might lead to a TLS connection. Also note that due to outbound proxy settings, a SIPS uri might have to be sent on UDP (not to recommend though) </p>
<p>Default transports are set to UDP, which cause the wrong behaviour when contacting remote devices directly from the dialplan. UDP is only a fallback if no other method works, in order to be compatible with RFC2543 (SIP/1.0) devices. For transactions that exceed the MTU (like INIVTE with video, audio and RTT) TCP should be preferred.</p>
<p></p>
<p>re-evaluate the transport= setting in sip.conf. This is right now not well thought of. If a device in sip.conf contacts us via TCP, we should not switch transport, even if udp is the configured first transport.</p>
<p></p>
<p>Be prepared for one outbound and another incoming socket per pvt. This applies specially to communication with other <a class="el" href="structpeers.html">peers</a> (proxies). </p>
<p class="enddd">If the <a class="el" href="structmessage.html">message</a> is smaller than the given Content-length, the request should get a 400 Bad request <a class="el" href="structmessage.html">message</a>. If it's a response, it should be dropped. (RFC 3261, Section 18.3) </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000045"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#af5c9efefc4ea8d8efb923811c5485b1b">sip_prepare_socket</a>  </dt>
<dd><p class="startdd">Get socket for dialog, prepare if needed, and return file handle </p>
<p class="enddd">Check this... This might be wrong, depending on the proxy configuration If proxy is in "force" mode its correct. </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000039"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#ad9e415c2c572477b6b356303edc8fb07">sip_prune_realtime</a>  </dt>
<dd>XXXX Propably needs an overhaul after removal of the devices </dd>
</dl>
<p><a class="anchor" id="_todo000049"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a10d7969d033c53f5cbdcebd8abdd1f37">sip_sipredirect</a>  </dt>
<dd>Fix this function so that we wait for reply to the REFER and react to errors, denials or other issues the other end might have. </dd>
</dl>
<p><a class="anchor" id="_todo000017"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a9ed883470dc7cc7973e38cbf3a2561e1">SIP_TRANS_TIMEOUT</a>  </dt>
<dd>Use known T1 for timeout (peerpoke) </dd>
</dl>
<p><a class="anchor" id="_todo000019"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a3cd48935f3e388a292b6c1a3079a66a1">SUPPORTED_EXTENSIONS</a>  </dt>
<dd>We should not have "timer" if it's disabled in the configuration file. </dd>
</dl>
<p><a class="anchor" id="_todo000079"></a> </p>
<dl>
<dt>Global <a class="el" href="tdd_8h.html#a59e01081607ca5d0b2f5708d0791fb16">tdd_gen_holdtone</a>  </dt>
<dd>How big should this be??? </dd>
</dl>
<p><a class="anchor" id="_todo000034"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a7162ef5caff0e27e31fc38d1e62518f3">terminate_uri</a>  </dt>
<dd>As this function does not support user-parameters, it's considered broken and needs fixing. </dd>
</dl>
<p><a class="anchor" id="_todo000027"></a> </p>
<dl>
<dt>Global <a class="el" href="chan__sip_8c.html#a2c0ec16378b0c1d50639ea5b5d2ace94">transmit_refer</a>  </dt>
<dd><p class="startdd">Fix the <a class="el" href="chan__mgcp_8c.html#a9caa677def8fa97666646d9e2e607b7c">transfer()</a> dialplan function so that a transfer may fail </p>
<p class="enddd">In theory, we should hang around and wait for a reply, before returning to the dial plan here. Don't know really how that would affect the <a class="el" href="chan__mgcp_8c.html#a9caa677def8fa97666646d9e2e607b7c">transfer()</a> app or the pbx, but, well, to make this useful we should have a STATUS code on <a class="el" href="chan__mgcp_8c.html#a9caa677def8fa97666646d9e2e607b7c">transfer()</a>. </p>
</dd>
</dl>
<p><a class="anchor" id="_todo000062"></a> </p>
<dl>
<dt>File <a class="el" href="udptl_8h.html">udptl.h</a>  </dt>
<dd>add doxygen documentation to this file! </dd>
</dl>
<p><a class="anchor" id="_todo000051"></a> </p>
<dl>
<dt>Class <a class="el" href="structunistim__line.html">unistim_line</a>  </dt>
<dd>Convert to stringfields </dd>
</dl>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:23:36 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
