<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:23:40 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>ao2_container Struct Reference</h1><!-- doxytag: class="ao2_container" --><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbucket.html">bucket</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structao2__container.html#a2fc99909f0a5d5e8e5e6f18fbcbcdfa8">buckets</a> [0]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="astobj2_8h.html#a4de0d949b2c7e11310c21ad64a83cf72">ao2_callback_fn</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structao2__container.html#ab243d099d50c44002e75e91b0f077deb">cmp_fn</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structao2__container.html#a3c5df9c474b82fd6fbb560987c2492c8">elements</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="astobj2_8h.html#ab29eb962131d79590e1ee1f07ba41818">ao2_hash_fn</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structao2__container.html#affe6d185cf034f97d9e746dbfc8fb11c">hash_fn</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structao2__container.html#a8f8a111ea93855d31480f7a4408a5be2">n_buckets</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structao2__container.html#aad880fc4455c253781e8968f2239d56f">version</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A container; stores the hash and callback functions, information on the size, the hash <a class="el" href="structbucket.html">bucket</a> heads, and a version <a class="el" href="structnumber.html" title="Number structure.">number</a>, starting at 0 (for a newly created, empty container) and incremented every time an object is inserted or deleted. The assumption is that an object is never moved in a container, but removed and readded with the new <a class="el" href="structnumber.html" title="Number structure.">number</a>. The version <a class="el" href="structnumber.html" title="Number structure.">number</a> is especially useful when implementing iterators. In fact, we can associate a unique, monotonically increasing <a class="el" href="structnumber.html" title="Number structure.">number</a> to each object, which means that, within an iterator, we can store the version <a class="el" href="structnumber.html" title="Number structure.">number</a> of the current object, and easily look for the next one, which is the next one in the list with a higher <a class="el" href="structnumber.html" title="Number structure.">number</a>. Since all objects have a version &gt;0, we can use 0 as a marker for 'we need the first object in the bucket'.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000064">Todo:</a></b></dt><dd>Linking and unlink objects is typically expensive, as it involves a <a class="el" href="astmm_8h.html#ab8b25cd8f16d4a6552afe4e65c4f082d">malloc()</a> of a small object which is very inefficient. To optimize this, we allocate larger arrays of bucket_list's when we run out of them, and then manage our own freelist. This will be more efficient as we can do the freelist management while we hold the lock (that we need anyways). </dd></dl>

<p>Definition at line <a class="el" href="astobj2_8c_source.html#l00396">396</a> of file <a class="el" href="astobj2_8c_source.html">astobj2.c</a>.</p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="a2fc99909f0a5d5e8e5e6f18fbcbcdfa8"></a><!-- doxytag: member="ao2_container::buckets" ref="a2fc99909f0a5d5e8e5e6f18fbcbcdfa8" args="[0]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbucket.html">bucket</a> <a class="el" href="structao2__container.html#a2fc99909f0a5d5e8e5e6f18fbcbcdfa8">buckets</a>[0]<code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>variable size </p>

<p>Definition at line <a class="el" href="astobj2_8c_source.html#l00405">405</a> of file <a class="el" href="astobj2_8c_source.html">astobj2.c</a>.</p>

<p>Referenced by <a class="el" href="astobj2_8c_source.html#l00603">__ao2_callback()</a>, <a class="el" href="astobj2_8c_source.html#l00804">__ao2_iterator_next()</a>, <a class="el" href="astobj2_8c_source.html#l00910">container_destruct()</a>, and <a class="el" href="astobj2_8c_source.html#l00930">container_destruct_debug()</a>.</p>

</div>
</div>
<a class="anchor" id="ab243d099d50c44002e75e91b0f077deb"></a><!-- doxytag: member="ao2_container::cmp_fn" ref="ab243d099d50c44002e75e91b0f077deb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="astobj2_8h.html#a4de0d949b2c7e11310c21ad64a83cf72">ao2_callback_fn</a>* <a class="el" href="structao2__container.html#ab243d099d50c44002e75e91b0f077deb">cmp_fn</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="astobj2_8c_source.html#l00398">398</a> of file <a class="el" href="astobj2_8c_source.html">astobj2.c</a>.</p>

<p>Referenced by <a class="el" href="astobj2_8c_source.html#l00425">__ao2_container_alloc()</a>, <a class="el" href="astobj2_8c_source.html#l00772">_ao2_find()</a>, and <a class="el" href="astobj2_8c_source.html#l00767">_ao2_find_debug()</a>.</p>

</div>
</div>
<a class="anchor" id="a3c5df9c474b82fd6fbb560987c2492c8"></a><!-- doxytag: member="ao2_container::elements" ref="a3c5df9c474b82fd6fbb560987c2492c8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structao2__container.html#a3c5df9c474b82fd6fbb560987c2492c8">elements</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of elements in the container </p>

<p>Definition at line <a class="el" href="astobj2_8c_source.html#l00401">401</a> of file <a class="el" href="astobj2_8c_source.html">astobj2.c</a>.</p>

<p>Referenced by <a class="el" href="astobj2_8c_source.html#l00603">__ao2_callback()</a>, and <a class="el" href="astobj2_8c_source.html#l00474">ao2_container_count()</a>.</p>

</div>
</div>
<a class="anchor" id="affe6d185cf034f97d9e746dbfc8fb11c"></a><!-- doxytag: member="ao2_container::hash_fn" ref="affe6d185cf034f97d9e746dbfc8fb11c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="astobj2_8h.html#ab29eb962131d79590e1ee1f07ba41818">ao2_hash_fn</a>* <a class="el" href="structao2__container.html#affe6d185cf034f97d9e746dbfc8fb11c">hash_fn</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="astobj2_8c_source.html#l00397">397</a> of file <a class="el" href="astobj2_8c_source.html">astobj2.c</a>.</p>

<p>Referenced by <a class="el" href="astobj2_8c_source.html#l00603">__ao2_callback()</a>, and <a class="el" href="astobj2_8c_source.html#l00425">__ao2_container_alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="a8f8a111ea93855d31480f7a4408a5be2"></a><!-- doxytag: member="ao2_container::n_buckets" ref="a8f8a111ea93855d31480f7a4408a5be2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structao2__container.html#a8f8a111ea93855d31480f7a4408a5be2">n_buckets</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="astobj2_8c_source.html#l00399">399</a> of file <a class="el" href="astobj2_8c_source.html">astobj2.c</a>.</p>

<p>Referenced by <a class="el" href="astobj2_8c_source.html#l00603">__ao2_callback()</a>, <a class="el" href="astobj2_8c_source.html#l00425">__ao2_container_alloc()</a>, <a class="el" href="astobj2_8c_source.html#l00804">__ao2_iterator_next()</a>, <a class="el" href="astobj2_8c_source.html#l00910">container_destruct()</a>, and <a class="el" href="astobj2_8c_source.html#l00930">container_destruct_debug()</a>.</p>

</div>
</div>
<a class="anchor" id="aad880fc4455c253781e8968f2239d56f"></a><!-- doxytag: member="ao2_container::version" ref="aad880fc4455c253781e8968f2239d56f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structao2__container.html#aad880fc4455c253781e8968f2239d56f">version</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>described above </p>

<p>Definition at line <a class="el" href="astobj2_8c_source.html#l00403">403</a> of file <a class="el" href="astobj2_8c_source.html">astobj2.c</a>.</p>

<p>Referenced by <a class="el" href="astobj2_8c_source.html#l00603">__ao2_callback()</a>, <a class="el" href="astobj2_8c_source.html#l00425">__ao2_container_alloc()</a>, and <a class="el" href="astobj2_8c_source.html#l00804">__ao2_iterator_next()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="astobj2_8c_source.html">astobj2.c</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:23:40 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
