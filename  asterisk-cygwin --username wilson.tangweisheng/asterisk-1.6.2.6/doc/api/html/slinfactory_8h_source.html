<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:18:48 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_1ab815038f534adda65c8b4ae4993449.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_16d825f1fa9ecca2e70b1a8d9256d0e6.html">asterisk</a>
  </div>
</div>
<div class="contents">
<h1>slinfactory.h</h1><a href="slinfactory_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Asterisk -- An open source telephony toolkit.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 2005, Anthony Minessale II</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Anthony Minessale &lt;anthmct@yahoo.com&gt;</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * See http://www.asterisk.org for more information about</span>
<a name="l00009"></a>00009 <span class="comment"> * the Asterisk project. Please do not directly contact</span>
<a name="l00010"></a>00010 <span class="comment"> * any of the maintainers of this project for assistance;</span>
<a name="l00011"></a>00011 <span class="comment"> * the project provides a web site, mailing lists and IRC</span>
<a name="l00012"></a>00012 <span class="comment"> * channels for your use.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * This program is free software, distributed under the terms of</span>
<a name="l00015"></a>00015 <span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span>
<a name="l00016"></a>00016 <span class="comment"> * at the top of the source tree.</span>
<a name="l00017"></a>00017 <span class="comment"> */</span>
<a name="l00018"></a>00018 <span class="comment"></span>
<a name="l00019"></a>00019 <span class="comment">/*! \file</span>
<a name="l00020"></a>00020 <span class="comment"> * \brief A machine to gather up arbitrary frames and convert them</span>
<a name="l00021"></a>00021 <span class="comment"> * to raw slinear on demand.</span>
<a name="l00022"></a>00022 <span class="comment"> */</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#ifndef _ASTERISK_SLINFACTORY_H</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#define _ASTERISK_SLINFACTORY_H</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span>
<a name="l00027"></a>00027 <span class="preprocessor">#if defined(__cplusplus) || defined(c_plusplus)</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00029"></a>00029 <span class="preprocessor">#endif</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a><a class="code" href="slinfactory_8h.html#a156e0707db1580839637c64332098bee">00031</a> <span class="preprocessor">#define AST_SLINFACTORY_MAX_HOLD 1280</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>
<a name="l00033"></a><a class="code" href="structast__slinfactory.html">00033</a> <span class="keyword">struct </span><a class="code" href="structast__slinfactory.html">ast_slinfactory</a> {
<a name="l00034"></a><a class="code" href="structast__slinfactory.html#a26b5d863c7e0cb86c0272712fea6f996">00034</a>    <a class="code" href="linkedlists_8h.html#a117cbef6a40010cd3c84a16fd9ef4ca6" title="Defines a structure to be used to hold a list of specified type (with no lock).">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a>) <a class="code" href="structast__slinfactory.html#abbcfe8520f5236f07e7aaa90e7e9d685">queue</a>; <span class="comment">/*!&lt; A list of unaltered frames */</span>
<a name="l00035"></a><a class="code" href="structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">00035</a>    struct <a class="code" href="structast__trans__pvt.html" title="Default structure for translators, with the basic fields and buffers, all allocated...">ast_trans_pvt</a> *<a class="code" href="structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>;             <span class="comment">/*!&lt; Translation path that converts fed frames into signed linear */</span>
<a name="l00036"></a><a class="code" href="structast__slinfactory.html#adbc873a076c71ebf9935148849ebf62a">00036</a>    <span class="keywordtype">short</span> <a class="code" href="structast__slinfactory.html#adbc873a076c71ebf9935148849ebf62a">hold</a>[<a class="code" href="slinfactory_8h.html#a156e0707db1580839637c64332098bee">AST_SLINFACTORY_MAX_HOLD</a>];    <span class="comment">/*!&lt; Hold for audio that no longer belongs to a frame (ie: if only some samples were taken from a frame) */</span>
<a name="l00037"></a><a class="code" href="structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">00037</a>    <span class="keywordtype">short</span> *<a class="code" href="structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">offset</a>;                           <span class="comment">/*!&lt; Offset into the hold where audio begins */</span>
<a name="l00038"></a><a class="code" href="structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">00038</a>    <span class="keywordtype">size_t</span> <a class="code" href="structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a>;                          <span class="comment">/*!&lt; Number of samples currently in the hold */</span>
<a name="l00039"></a><a class="code" href="structast__slinfactory.html#aac913b3a1f6ef005d66bf7a84428773e">00039</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structast__slinfactory.html#aac913b3a1f6ef005d66bf7a84428773e">size</a>;                       <span class="comment">/*!&lt; Number of samples currently in the factory */</span>
<a name="l00040"></a><a class="code" href="structast__slinfactory.html#a6fea735e1b12f87689267ca76a7f4037">00040</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structast__slinfactory.html#a6fea735e1b12f87689267ca76a7f4037">format</a>;                     <span class="comment">/*!&lt; Current format the translation path is converting from */</span>
<a name="l00041"></a><a class="code" href="structast__slinfactory.html#a359559338b7592c72a7333080fca22e1">00041</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="manager_8c.html#adab978eb5c8aa199396471558598dc53">output_format</a>;       <span class="comment">/*!&lt; The output format desired */</span>
<a name="l00042"></a>00042 };
<a name="l00043"></a>00043 <span class="comment"></span>
<a name="l00044"></a>00044 <span class="comment">/*!</span>
<a name="l00045"></a>00045 <span class="comment"> * \brief Initialize a slinfactory</span>
<a name="l00046"></a>00046 <span class="comment"> *</span>
<a name="l00047"></a>00047 <span class="comment"> * \param sf The slinfactory to initialize</span>
<a name="l00048"></a>00048 <span class="comment"> *</span>
<a name="l00049"></a>00049 <span class="comment"> * \return Nothing</span>
<a name="l00050"></a>00050 <span class="comment"> */</span>
<a name="l00051"></a>00051 <span class="keywordtype">void</span> <a class="code" href="slinfactory_8h.html#a213f392fc2df73230ec61af35072c1b2" title="Initialize a slinfactory.">ast_slinfactory_init</a>(struct <a class="code" href="structast__slinfactory.html">ast_slinfactory</a> *sf);
<a name="l00052"></a>00052 <span class="comment"></span>
<a name="l00053"></a>00053 <span class="comment">/*!</span>
<a name="l00054"></a>00054 <span class="comment"> * \brief Initialize a slinfactory</span>
<a name="l00055"></a>00055 <span class="comment"> *</span>
<a name="l00056"></a>00056 <span class="comment"> * \param sf The slinfactory to initialize</span>
<a name="l00057"></a>00057 <span class="comment"> * \param sample_rate The output sample rate desired</span>
<a name="l00058"></a>00058 <span class="comment"> *</span>
<a name="l00059"></a>00059 <span class="comment"> * \return 0 on success, non-zero on failure</span>
<a name="l00060"></a>00060 <span class="comment"> */</span>
<a name="l00061"></a>00061 <span class="keywordtype">int</span> <a class="code" href="slinfactory_8h.html#ad47b0e8e9a814856dd20fe4675f46c10" title="Initialize a slinfactory.">ast_slinfactory_init_rate</a>(struct <a class="code" href="structast__slinfactory.html">ast_slinfactory</a> *sf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sample_rate);
<a name="l00062"></a>00062 <span class="comment"></span>
<a name="l00063"></a>00063 <span class="comment">/*!</span>
<a name="l00064"></a>00064 <span class="comment"> * \brief Destroy the contents of a slinfactory</span>
<a name="l00065"></a>00065 <span class="comment"> *</span>
<a name="l00066"></a>00066 <span class="comment"> * \param sf The slinfactory that is no longer needed</span>
<a name="l00067"></a>00067 <span class="comment"> *</span>
<a name="l00068"></a>00068 <span class="comment"> * This function will free any memory allocated for the contents of the</span>
<a name="l00069"></a>00069 <span class="comment"> * slinfactory.  It does not free the slinfactory itself.  If the sf is</span>
<a name="l00070"></a>00070 <span class="comment"> * malloc&apos;d, then it must be explicitly free&apos;d after calling this function.</span>
<a name="l00071"></a>00071 <span class="comment"> *</span>
<a name="l00072"></a>00072 <span class="comment"> * \return Nothing</span>
<a name="l00073"></a>00073 <span class="comment"> */</span>
<a name="l00074"></a>00074 <span class="keywordtype">void</span> <a class="code" href="slinfactory_8h.html#ab5361491bac02fb60732df5671879652" title="Destroy the contents of a slinfactory.">ast_slinfactory_destroy</a>(struct <a class="code" href="structast__slinfactory.html">ast_slinfactory</a> *sf);
<a name="l00075"></a>00075 <span class="comment"></span>
<a name="l00076"></a>00076 <span class="comment">/*!</span>
<a name="l00077"></a>00077 <span class="comment"> * \brief Feed audio into a slinfactory</span>
<a name="l00078"></a>00078 <span class="comment"> *</span>
<a name="l00079"></a>00079 <span class="comment"> * \param sf The slinfactory to feed into</span>
<a name="l00080"></a>00080 <span class="comment"> * \param f Frame containing audio to feed in</span>
<a name="l00081"></a>00081 <span class="comment"> *</span>
<a name="l00082"></a>00082 <span class="comment"> * \return Number of frames currently in factory</span>
<a name="l00083"></a>00083 <span class="comment"> */</span>
<a name="l00084"></a>00084 <span class="keywordtype">int</span> <a class="code" href="slinfactory_8h.html#a83e5056051013853a0d80fc5862a9fe8" title="Feed audio into a slinfactory.">ast_slinfactory_feed</a>(struct <a class="code" href="structast__slinfactory.html">ast_slinfactory</a> *sf, struct <a class="code" href="structast__frame.html" title="Data structure associated with a single frame of data.">ast_frame</a> *<a class="code" href="format__g726_8c.html#a6add0b75a88c25db4ccbf690acda6d7f">f</a>);
<a name="l00085"></a>00085 <span class="comment"></span>
<a name="l00086"></a>00086 <span class="comment">/*!</span>
<a name="l00087"></a>00087 <span class="comment"> * \brief Read samples from a slinfactory</span>
<a name="l00088"></a>00088 <span class="comment"> *</span>
<a name="l00089"></a>00089 <span class="comment"> * \param sf The slinfactory to read from</span>
<a name="l00090"></a>00090 <span class="comment"> * \param buf Buffer to put samples into</span>
<a name="l00091"></a>00091 <span class="comment"> * \param samples Number of samples wanted</span>
<a name="l00092"></a>00092 <span class="comment"> *</span>
<a name="l00093"></a>00093 <span class="comment"> * \return Number of samples read</span>
<a name="l00094"></a>00094 <span class="comment"> */</span>
<a name="l00095"></a>00095 <span class="keywordtype">int</span> <a class="code" href="slinfactory_8h.html#a75052c0e654e356675b26afbebe93097" title="Read samples from a slinfactory.">ast_slinfactory_read</a>(struct <a class="code" href="structast__slinfactory.html">ast_slinfactory</a> *sf, <span class="keywordtype">short</span> *<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>, <span class="keywordtype">size_t</span> samples);
<a name="l00096"></a>00096 <span class="comment"></span>
<a name="l00097"></a>00097 <span class="comment">/*!</span>
<a name="l00098"></a>00098 <span class="comment"> * \brief Retrieve number of samples currently in a slinfactory</span>
<a name="l00099"></a>00099 <span class="comment"> *</span>
<a name="l00100"></a>00100 <span class="comment"> * \param sf The slinfactory to peek into</span>
<a name="l00101"></a>00101 <span class="comment"> *</span>
<a name="l00102"></a>00102 <span class="comment"> * \return Number of samples in slinfactory</span>
<a name="l00103"></a>00103 <span class="comment"> */</span>
<a name="l00104"></a>00104 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="slinfactory_8h.html#a6c48d283b3d2bce6af0a09c3b8b7fd0e" title="Retrieve number of samples currently in a slinfactory.">ast_slinfactory_available</a>(const struct <a class="code" href="structast__slinfactory.html">ast_slinfactory</a> *sf);
<a name="l00105"></a>00105 <span class="comment"></span>
<a name="l00106"></a>00106 <span class="comment">/*!</span>
<a name="l00107"></a>00107 <span class="comment"> * \brief Flush the contents of a slinfactory</span>
<a name="l00108"></a>00108 <span class="comment"> *</span>
<a name="l00109"></a>00109 <span class="comment"> * \param sf The slinfactory to flush</span>
<a name="l00110"></a>00110 <span class="comment"> *</span>
<a name="l00111"></a>00111 <span class="comment"> * \return Nothing</span>
<a name="l00112"></a>00112 <span class="comment"> */</span>
<a name="l00113"></a>00113 <span class="keywordtype">void</span> <a class="code" href="slinfactory_8h.html#a808da481a1c8673571179c51a97fb009" title="Flush the contents of a slinfactory.">ast_slinfactory_flush</a>(struct <a class="code" href="structast__slinfactory.html">ast_slinfactory</a> *sf);
<a name="l00114"></a>00114 
<a name="l00115"></a>00115 <span class="preprocessor">#if defined(__cplusplus) || defined(c_plusplus)</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span>}
<a name="l00117"></a>00117 <span class="preprocessor">#endif</span>
<a name="l00118"></a>00118 <span class="preprocessor"></span>
<a name="l00119"></a>00119 <span class="preprocessor">#endif </span><span class="comment">/* _ASTERISK_SLINFACTORY_H */</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:18:48 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
