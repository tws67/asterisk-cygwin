<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:23:35 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="Def_Channel">Asterisk Channels </a></h1><dl class="user"><dt><b>What is a Channel?</b></dt><dd>A phone call through Asterisk consists of an incoming connection and an outbound connection. Each call comes in through a channel driver that supports one technology, like SIP, DAHDI, IAX2 etc. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>Each channel driver, technology, has it's own private channel or dialog structure, that is technology-dependent. Each private structure is "owned" by a generic Asterisk channel structure, defined in <a class="el" href="channel_8h.html" title="General Asterisk PBX channel definitions.">channel.h</a> and handled by <a class="el" href="channel_8c.html" title="Channel Management.">channel.c</a> . </dd></dl>
<dl class="user"><dt><b>Call scenario</b></dt><dd>This happens when an incoming call arrives to Asterisk<ol type="1">
<li>Call arrives on a channel driver interface</li>
<li>Channel driver creates a PBX channel and starts a pbx thread on the channel</li>
<li>The dial plan is executed</li>
<li>At this point at least two things can happen:<ol type="a">
<li>The call is answered by Asterisk and Asterisk plays a media stream or reads media</li>
<li>The dial plan forces Asterisk to create an outbound call somewhere with the dial (see <a class="el" href="app__dial_8c.html">app_dial.c</a>) application</li>
</ol>
</li>
</ol>
</dd></dl>
<dl class="user"><dt><b>Bridging channels</b></dt><dd>If Asterisk dials out this happens:<ol type="1">
<li>Dial creates an outbound PBX channel and asks one of the channel drivers to create a call</li>
<li>When the call is answered, Asterisk bridges the media streams so the caller on the first channel can speak with the callee on the second, outbound channel</li>
<li>In some cases where we have the same technology on both <a class="el" href="structchannels.html" title="the list of channels we have. Note that the lock for this list is used for both the...">channels</a> and compatible codecs, a native bridge is used. In a native bridge, the channel driver handles forwarding of incoming audio to the outbound stream internally, without sending audio frames through the PBX.</li>
<li>In SIP, theres an "external native bridge" where Asterisk redirects the endpoint, so audio flows directly between the caller's phone and the callee's phone. Signalling stays in Asterisk in order to be able to provide a proper CDR record for the call.</li>
</ol>
</dd></dl>
<dl class="user"><dt><b>Masquerading channels</b></dt><dd>In some cases, a channel can masquerade itself into another channel. This happens frequently in call transfers, where a new channel takes over a channel that is already involved in a call. The new channel sneaks in and takes over the bridge and the old channel, now a zombie, is hung up.</dd></dl>
<dl class="user"><dt><b>Reference</b></dt><dd><ul>
<li><a class="el" href="channel_8c.html" title="Channel Management.">channel.c</a> - generic functions </li>
<li><a class="el" href="channel_8h.html" title="General Asterisk PBX channel definitions.">channel.h</a> - declarations of functions, flags and structures </li>
<li><a class="el" href="translate_8h.html" title="Support for translation of data formats. translate.c.">translate.h</a> - Transcoding support functions </li>
<li><a class="el" href="group__channel__drivers.html">Module: Asterisk Channel Drivers</a> - Implemented channel drivers </li>
<li><a class="el" href="Def_Frame.html">AST Multimedia and signalling frames</a> Asterisk Multimedia Frames </li>
<li><a class="el" href="Def_Bridge.html">Asterisk Channel Bridges</a> </li>
</ul>
</dd></dl>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:23:35 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
