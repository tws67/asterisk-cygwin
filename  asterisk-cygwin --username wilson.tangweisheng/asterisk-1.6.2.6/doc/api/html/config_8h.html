<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:21:57 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_1ab815038f534adda65c8b4ae4993449.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_16d825f1fa9ecca2e70b1a8d9256d0e6.html">asterisk</a>
  </div>
</div>
<div class="contents">
<h1>config.h File Reference</h1>
<p>Configuration File Parser.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="inline__api_8h_source.html">asterisk/inline_api.h</a>&quot;</code><br/>

<p><a href="config_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structast__config__engine.html">ast_config_engine</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configuration engine structure, used to define realtime drivers.  <a href="structast__config__engine.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structast__variable.html">ast_variable</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Structure for variables, used for configurations and for channel variables.  <a href="structast__variable.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a>(filename, flags)&nbsp;&nbsp;&nbsp;ast_config_load2(filename, AST_MODULE, flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>&nbsp;&nbsp;&nbsp;(void *)-2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a>&nbsp;&nbsp;&nbsp;(void *)0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a>&nbsp;&nbsp;&nbsp;(void *)-1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#aafea033c0475a1369e75b63aa36bf4fb">CV_BOOL</a>(__x, __dst)&nbsp;&nbsp;&nbsp;CV_F(__x, (__dst) = ast_true(__val) )</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">helper macros to assign the value to a BOOL, UINT, static string and dynamic string  <a href="#aafea033c0475a1369e75b63aa36bf4fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#aa17b20d991cc5e34b6ec1a34a35fd712">CV_DSTR</a>(__x, __dst)&nbsp;&nbsp;&nbsp;CV_F(__x, if (__dst) ast_free(__dst); __dst = ast_strdup(__val))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a4529d9f44c4461f1d4b5bde4e968447e">CV_END</a>&nbsp;&nbsp;&nbsp;} while (0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">close a variable parsing block  <a href="#a4529d9f44c4461f1d4b5bde4e968447e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a573667b0b56503ba54ed0fbbb227b8ab">CV_F</a>(__pattern, __body)&nbsp;&nbsp;&nbsp;if (!strcasecmp((__var), __pattern)) { __body; break; }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">call a generic function if the name matches.  <a href="#a573667b0b56503ba54ed0fbbb227b8ab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a32da71a793e99764383cb3eb2080a346">CV_START</a>(__in_var, __in_val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the macro to open a block for variable parsing  <a href="#a32da71a793e99764383cb3eb2080a346"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a4a4b29ba86635a1575dc2c34403844eb">CV_STR</a>(__x, __dst)&nbsp;&nbsp;&nbsp;CV_F(__x, ast_copy_string(__dst, __val, sizeof(__dst)))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a41a52fecb7825ca2a3b4884777378e8d">CV_STRFIELD</a>(__x, __obj, __field)&nbsp;&nbsp;&nbsp;CV_F(__x, ast_string_field_set(__obj, __field, __val))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#ad034d966d46d0a4a8731b294262f5e4b">CV_UINT</a>(__x, __dst)&nbsp;&nbsp;&nbsp;CV_F(__x, (__dst) = strtoul(__val, NULL, 0) )</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a6065208cc8c8274a7807454204b9b859">config_load_func</a> (const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const char *configfile, struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="pbx__lua_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, struct <a class="el" href="structast__flags.html">ast_flags</a> flags, const char *suggested_include_file, const char *who_asked)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#ae528729aa8c2a97f88eeb2d3ac6de182">realtime_destroy</a> (const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const char *keyfield, const char *<a class="el" href="isdn__lib_8c.html#ad4e4601988acb4a95ecd1ec380359ae5">entity</a>, va_list ap)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#acf209fbef7d60d82f81e32fb92850f32">realtime_multi_get</a> (const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, va_list ap)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a16d6ac69ca472fa206f577ea0b0d847c">realtime_require</a> (const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, va_list ap)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function pointer called to ensure database schema is properly configured for realtime use.  <a href="#a16d6ac69ca472fa206f577ea0b0d847c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#adcbff5fa833ecbe62d72eb84694aa064">realtime_store</a> (const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, va_list ap)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a254dcb357bb147c8af0c5646521a626b">realtime_unload</a> (const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function pointer called to clear the database cache and free resources used for such.  <a href="#a254dcb357bb147c8af0c5646521a626b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a0d2ddf0f92f210648878b082bcd67c20">realtime_update</a> (const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const char *keyfield, const char *<a class="el" href="isdn__lib_8c.html#ad4e4601988acb4a95ecd1ec380359ae5">entity</a>, va_list ap)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a48e12b352733d108c03bdf74505be665">realtime_update2</a> (const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, va_list ap)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a602a9564c9fb3fa2b17efd9018e05e7f">realtime_var_get</a> (const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, va_list ap)</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="config_8h.html#a2d5492e116eebd5075f247d21fb9db26abc16a274124ae96d43f8e52e344292c3">CONFIG_FLAG_WITHCOMMENTS</a> =  (1 &lt;&lt; 0), 
<a class="el" href="config_8h.html#a2d5492e116eebd5075f247d21fb9db26afa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a> =  (1 &lt;&lt; 1), 
<a class="el" href="config_8h.html#a2d5492e116eebd5075f247d21fb9db26a3b68640f31a2c5493459c159abee08ee">CONFIG_FLAG_NOCACHE</a> =  (1 &lt;&lt; 2)
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569f">ast_parse_flags</a> { <br/>
&nbsp;&nbsp;<a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569faa9556ebb6fa5b8ccfc5b4a062070f343">PARSE_TYPE</a> =  0x000f, 
<a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fabac6774d4b76ec6847b57ccce4822738">PARSE_INT32</a> =  0x0001, 
<a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fadba5c0b0122c30502fe469a55fea3c4b">PARSE_UINT32</a> =  0x0002, 
<a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa911811e1ef2b6304138896f842ade7a6">PARSE_DOUBLE</a> =  0x0003, 
<br/>
&nbsp;&nbsp;<a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fadbbce4323faf5d2131137e15c1da10f1">PARSE_INADDR</a> =  0x000f, 
<a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569facc865488860e2c25dd9f80e5473cf760">PARSE_DEFAULT</a> =  0x0010, 
<a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a> =  0x0020, 
<a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa827151da9f1b81f3fc253fc6e5f3c11b">PARSE_OUT_RANGE</a> =  0x0040, 
<br/>
&nbsp;&nbsp;<a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa5f8a497855d42eba8c324516d21f8998">PARSE_PORT_MASK</a> =  0x0300, 
<a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d">PARSE_PORT_IGNORE</a> =  0x0100, 
<a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569faf8734b2de041808f7ad5ce81ce4fcbcb">PARSE_PORT_REQUIRE</a> =  0x0200, 
<a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a> =  0x0300
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Support code to parse config file arguments. </p>
 <a href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569f">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3">require_type</a> { <br/>
&nbsp;&nbsp;<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4">RQ_INTEGER1</a>, 
<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a>, 
<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3af1d7dd0d3aacafdef0d2f0d2db6d7112">RQ_INTEGER2</a>, 
<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3a75d046b2f103381a62aeb81f42550404">RQ_INTEGER3</a>, 
<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5">RQ_UINTEGER3</a>, 
<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3a8a9fbbd166ee4918cec8c9303fde70e8">RQ_INTEGER4</a>, 
<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be">RQ_UINTEGER4</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3aaa7be840b4634cc84021f0c20a17275b">RQ_INTEGER8</a>, 
<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3a2e4fb4c24a3958e2fbd853d5c53cfbb4">RQ_UINTEGER8</a>, 
<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3a75759a4654f061f8e7d6bd1ec7a3b4bb">RQ_CHAR</a>, 
<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3a1133e08bb8b498770188f728ca03e417">RQ_FLOAT</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3a3d3293675f377a4398a25974cba3e7e1">RQ_DATE</a>, 
<a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3acf1d0ae3a1d0e3ae12a1f05f485f07c9">RQ_DATETIME</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Types used in ast_realtime_require_field. </p>
 <a href="config_8h.html#abbca034b0a98715c687b808347af82a3">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#ab7b56ec66b058952423f313752c734e7">ast_category_append</a> (struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="pbx__lua_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, struct <a class="el" href="structast__category.html">ast_category</a> *cat)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a611776300f941a63266cb220ac62b4db">ast_category_browse</a> (struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="pbx__lua_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, const char *prev)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Goes through categories.  <a href="#a611776300f941a63266cb220ac62b4db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#ab4ab35927c1fb4ee1bddf30edf6419e3">ast_category_delete</a> (struct <a class="el" href="structast__config.html">ast_config</a> *cfg, const char *category)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#abd17f201d0e7c31c124dc0cd3a0d073b">ast_category_destroy</a> (struct <a class="el" href="structast__category.html">ast_category</a> *cat)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a1b467acf627f98175f01061b31520616">ast_category_detach_variables</a> (struct <a class="el" href="structast__category.html">ast_category</a> *cat)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#ae8eb938b00e489b467a33f836ff7d77e">ast_category_empty</a> (struct <a class="el" href="structast__config.html">ast_config</a> *cfg, const char *category)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes and destroys all variables within a category.  <a href="#ae8eb938b00e489b467a33f836ff7d77e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a66f428286e5357f6e7fd5237b03ec174">ast_category_exist</a> (const struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="pbx__lua_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, const char *category_name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check for category duplicates.  <a href="#a66f428286e5357f6e7fd5237b03ec174"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a39040e0fe9c0bac870c10ad32afbfb17">ast_category_first</a> (struct <a class="el" href="structast__category.html">ast_category</a> *cat)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">given a pointer to a category, return the root variable. This is equivalent to <a class="el" href="config_8h.html#a935ccfa153100ddd320c8918bd6e941b" title="Goes through variables Somewhat similar in intent as the ast_category_browse. List...">ast_variable_browse()</a>, but more efficient if we already have the struct <a class="el" href="structast__category.html">ast_category</a> * (e.g. from <a class="el" href="config_8h.html#a0c2db6370e5051f282b2926f5893b2ea" title="Retrieve a category if it exists.">ast_category_get()</a>)  <a href="#a39040e0fe9c0bac870c10ad32afbfb17"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a0c2db6370e5051f282b2926f5893b2ea">ast_category_get</a> (const struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="pbx__lua_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, const char *category_name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve a category if it exists.  <a href="#a0c2db6370e5051f282b2926f5893b2ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a6d12616b69bc21fea2c20a0da5ad4f20">ast_category_insert</a> (struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="pbx__lua_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, struct <a class="el" href="structast__category.html">ast_category</a> *cat, const char *match)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Inserts new category.  <a href="#a6d12616b69bc21fea2c20a0da5ad4f20"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#affebac76d69639677b677037d9871e29">ast_category_new</a> (const char *<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *in_file, int lineno)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a category structure.  <a href="#affebac76d69639677b677037d9871e29"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a2a5612ff8eb3595c1be1df75be4d870f">ast_category_rename</a> (struct <a class="el" href="structast__category.html">ast_category</a> *cat, const char *<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a3ac58442160597e19cb6f3775dbb0029">ast_category_root</a> (struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="pbx__lua_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, char *cat)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">returns the root <a class="el" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> of a config  <a href="#a3ac58442160597e19cb6f3775dbb0029"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a910f835a41772603d33e200c956549ff">ast_check_realtime</a> (const char *family)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if realtime engine is configured for family.  <a href="#a910f835a41772603d33e200c956549ff"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a710f0b2a897849572b77dd0854b8dc03">ast_config_destroy</a> (struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="pbx__lua_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys a config.  <a href="#a710f0b2a897849572b77dd0854b8dc03"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a7028ff4b11d7167ee4030b4d3e123d76">ast_config_engine_deregister</a> (struct <a class="el" href="structast__config__engine.html">ast_config_engine</a> *del)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deregister config engine.  <a href="#a7028ff4b11d7167ee4030b4d3e123d76"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#af15c271e1708b251fc938b30baba18f1">ast_config_engine_register</a> (struct <a class="el" href="structast__config__engine.html">ast_config_engine</a> *newconfig)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register config engine.  <a href="#af15c271e1708b251fc938b30baba18f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a6884d439424ba2be31ef259213da4e8b">ast_config_get_current_category</a> (const struct <a class="el" href="structast__config.html">ast_config</a> *cfg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the current category name being built. API for backend configuration <a class="el" href="structengines.html">engines</a> while building a configuration set.  <a href="#a6884d439424ba2be31ef259213da4e8b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a721d5cd60abda2bdd96838336dc09669">ast_config_internal_load</a> (const char *configfile, struct <a class="el" href="structast__config.html">ast_config</a> *cfg, struct <a class="el" href="structast__flags.html">ast_flags</a> flags, const char *suggested_incl_file, const char *who_asked)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a> (const char *filename, const char *who_asked, struct <a class="el" href="structast__flags.html">ast_flags</a> flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load a config file.  <a href="#aab3eac8fa82a86a93c074deb7b77dbc9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a45e1a284d7d84c4b4a316764fbb887fb">ast_config_new</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new base configuration structure.  <a href="#a45e1a284d7d84c4b4a316764fbb887fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#ad9fd2625614158b152434e45acf1d78b">ast_config_option</a> (struct <a class="el" href="structast__config.html">ast_config</a> *cfg, const char *cat, const char *var)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve a configuration variable within the configuration set. Retrieves the named variable <code>var</code> within category <code>cat</code> of configuration set <code>cfg</code>. If not found, attempts to retrieve the named variable <code>var</code> from within category <em>general</em>.  <a href="#ad9fd2625614158b152434e45acf1d78b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a781df2d99cdb5c37b7028be1bea7c3bf">ast_config_set_current_category</a> (struct <a class="el" href="structast__config.html">ast_config</a> *cfg, const struct <a class="el" href="structast__category.html">ast_category</a> *cat)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the category within the configuration as being current. API for backend configuration <a class="el" href="structengines.html">engines</a> while building a configuration set.  <a href="#a781df2d99cdb5c37b7028be1bea7c3bf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a473721b764b20c167c95b99239bc0654">ast_config_text_file_save</a> (const char *filename, const struct <a class="el" href="structast__config.html">ast_config</a> *cfg, const char *<a class="el" href="app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a944fdb5d328401dee4c35ebd413d3bc3">ast_destroy_realtime</a> (const char *family, const char *keyfield, const char *lookup,...) attribute_sentinel</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy realtime configuration.  <a href="#a944fdb5d328401dee4c35ebd413d3bc3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__config__include.html">ast_config_include</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a7a653e8d3b6e1696e58f52a0534aff80">ast_include_find</a> (struct <a class="el" href="structast__config.html">ast_config</a> *conf, const char *included_file)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__config__include.html">ast_config_include</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#ada3b4df6e8ca0a7408e66bd9761a1339">ast_include_new</a> (struct <a class="el" href="structast__config.html">ast_config</a> *conf, const char *from_file, const char *included_file, int is_exec, const char *exec_file, int from_lineno, char *real_included_file_name, int real_included_file_name_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a008dccc13b0342d21fa91bf5c26bbcba">ast_include_rename</a> (struct <a class="el" href="structast__config.html">ast_config</a> *conf, const char *from_file, const char *to_file)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a1a03993603e2bc2463153857836645bb">ast_load_realtime</a> (const char *family,...) attribute_sentinel</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve realtime configuration.  <a href="#a1a03993603e2bc2463153857836645bb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a24f08a53aeabb2db90aa2b98dc485691">ast_load_realtime_all</a> (const char *family,...) attribute_sentinel</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a29ff8cd717c0c0bac60abbd827fec409">ast_load_realtime_multientry</a> (const char *family,...) attribute_sentinel</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve realtime configuration.  <a href="#a29ff8cd717c0c0bac60abbd827fec409"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a7e9aea581abeaae5d3799367d95284ac">ast_parse_arg</a> (const char *arg, enum <a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569f">ast_parse_flags</a> flags, void *result,...)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The argument parsing routine.  <a href="#a7e9aea581abeaae5d3799367d95284ac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a6344200b56202a76de8db05af680f3ac">ast_realtime_enabled</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if there's any realtime <a class="el" href="structengines.html">engines</a> loaded.  <a href="#a6344200b56202a76de8db05af680f3ac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a403ec8b49645ea204e82cb72bb8cf9f4">ast_realtime_require_field</a> (const char *family,...) attribute_sentinel</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Inform realtime what fields that may be stored.  <a href="#a403ec8b49645ea204e82cb72bb8cf9f4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#abbd9786e26d09dce06c32a53fd3c0cc2">ast_store_realtime</a> (const char *family,...) attribute_sentinel</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create realtime configuration.  <a href="#abbd9786e26d09dce06c32a53fd3c0cc2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a66b6af9ceef39cb23b48501efe87219f">ast_unload_realtime</a> (const char *family)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release any resources cached for a realtime family.  <a href="#a66b6af9ceef39cb23b48501efe87219f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a30c75d60cfd1f61e41c7275bb30c77f6">ast_update2_realtime</a> (const char *family,...) attribute_sentinel</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update realtime configuration.  <a href="#a30c75d60cfd1f61e41c7275bb30c77f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#ab845019b2f1bb324ff57e14192d62c39">ast_update_realtime</a> (const char *family, const char *keyfield, const char *lookup,...) attribute_sentinel</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update realtime configuration.  <a href="#ab845019b2f1bb324ff57e14192d62c39"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a132ddbd39dd9d26395c410f7647f76db">ast_variable_append</a> (struct <a class="el" href="structast__category.html">ast_category</a> *category, struct <a class="el" href="structast__variable.html">ast_variable</a> *variable)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a935ccfa153100ddd320c8918bd6e941b">ast_variable_browse</a> (const struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="pbx__lua_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, const char *category)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Goes through variables Somewhat similar in intent as the ast_category_browse. List variables of config file category.  <a href="#a935ccfa153100ddd320c8918bd6e941b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a387af9887266a55f3dcbbf3c12d4ccba">ast_variable_delete</a> (struct <a class="el" href="structast__category.html">ast_category</a> *category, const char *variable, const char *match, const char *line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#ad12cd7f4f5efe4a460c1aaed0ac488d5">ast_variable_insert</a> (struct <a class="el" href="structast__category.html">ast_category</a> *category, struct <a class="el" href="structast__variable.html">ast_variable</a> *variable, const char *line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a08e94d96f459e7301a74daf32035423b">ast_variable_new</a> (const char *<a class="el" href="channel_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *value, const char *filename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#ab87fa38c79226e5a0105ad9d2e2e9ae5">ast_variable_retrieve</a> (const struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="pbx__lua_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, const char *category, const char *variable)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets a variable.  <a href="#ab87fa38c79226e5a0105ad9d2e2e9ae5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a61b77e9b543a66af82d7ac7d4d6b4ac8">ast_variable_update</a> (struct <a class="el" href="structast__category.html">ast_category</a> *category, const char *variable, const char *value, const char *match, unsigned int object)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update variable value within a config.  <a href="#a61b77e9b543a66af82d7ac7d4d6b4ac8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#ad3d8122172af6f13687a07840411d65d">ast_variables_destroy</a> (struct <a class="el" href="structast__variable.html">ast_variable</a> *var)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free variable list.  <a href="#ad3d8122172af6f13687a07840411d65d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a35ece6ecbe9e41c18e58cc02a0db898a">config_text_file_save</a> (const char *filename, const struct <a class="el" href="structast__config.html">ast_config</a> *cfg, const char *<a class="el" href="app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#a07c61425fd6ef97bb27383e493fdf553">read_config_maps</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Exposed re-initialization method for core process This method is intended for use only with the core re-initialization and is not designed to be called from any <a class="el" href="structuser.html" title="structure to hold users read from users.conf">user</a> applications.  <a href="#a07c61425fd6ef97bb27383e493fdf553"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8h.html#afd849f1845a148b2ea62cbd92c0112db">register_config_cli</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Exposed initialization method for core process This method is intended for use only with the core initialization and is not designed to be called from any <a class="el" href="structuser.html" title="structure to hold users read from users.conf">user</a> applications.  <a href="#afd849f1845a148b2ea62cbd92c0112db"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Configuration File Parser. </p>

<p>Definition in file <a class="el" href="config_8h_source.html">config.h</a>.</p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a0a07ddd6bbcf44485e01c14c96109482"></a><!-- doxytag: member="config.h::ast_config_load" ref="a0a07ddd6bbcf44485e01c14c96109482" args="(filename, flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_config_load</td>
          <td>(</td>
          <td class="paramtype">filename, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">flags&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;ast_config_load2(filename, AST_MODULE, flags)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00139">139</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p>Referenced by <a class="el" href="res__adsi_8c_source.html#l01015">adsi_load()</a>, <a class="el" href="app__voicemail_8c_source.html#l11416">advanced_options()</a>, <a class="el" href="res__jabber_8c_source.html#l02907">aji_load_config()</a>, <a class="el" href="app__meetme_8c_source.html#l03696">conf_exec()</a>, <a class="el" href="func__config_8c_source.html#l00064">config_function_read()</a>, <a class="el" href="chan__skinny_8c_source.html#l07053">config_load()</a>, <a class="el" href="cdr__pgsql_8c_source.html#l00362">config_module()</a>, <a class="el" href="app__directory_8c_source.html#l00723">directory_exec()</a>, <a class="el" href="app__festival_8c_source.html#l00268">festival_exec()</a>, <a class="el" href="app__meetme_8c_source.html#l03546">find_conf()</a>, <a class="el" href="chan__gtalk_8c_source.html#l01901">gtalk_load_config()</a>, <a class="el" href="pbx__config_8c_source.html#l00672">handle_cli_dialplan_save()</a>, <a class="el" href="chan__jingle_8c_source.html#l01724">jingle_load_config()</a>, <a class="el" href="app__alarmreceiver_8c_source.html#l00639">load_config()</a>, <a class="el" href="app__meetme_8c_source.html#l04446">load_config_meetme()</a>, <a class="el" href="app__festival_8c_source.html#l00542">load_module()</a>, <a class="el" href="res__musiconhold_8c_source.html#l01549">load_moh_classes()</a>, <a class="el" href="res__odbc_8c_source.html#l00730">load_odbc_config()</a>, <a class="el" href="app__rpt_8c_source.html#l02224">load_rpt_vars()</a>, <a class="el" href="app__voicemail_8c_source.html#l04163">make_email_file()</a>, <a class="el" href="app__rpt_8c_source.html#l01984">node_lookup()</a>, <a class="el" href="cdr__odbc_8c_source.html#l00152">odbc_load_module()</a>, <a class="el" href="app__osplookup_8c_source.html#l01772">osp_load()</a>, <a class="el" href="codec__adpcm_8c_source.html#l00311">parse_config()</a>, <a class="el" href="pbx__config_8c_source.html#l01367">pbx_load_config()</a>, <a class="el" href="pbx__config_8c_source.html#l01608">pbx_load_users()</a>, <a class="el" href="app__voicemail_8c_source.html#l07051">play_message()</a>, <a class="el" href="app__voicemail_8c_source.html#l03977">prep_email_sub_vars()</a>, <a class="el" href="chan__agent_8c_source.html#l01180">read_agent_config()</a>, <a class="el" href="app__directory_8c_source.html#l00382">realtime_directory()</a>, <a class="el" href="app__playback_8c_source.html#l00482">reload()</a>, <a class="el" href="chan__h323_8c_source.html#l02832">reload_config()</a>, <a class="el" href="app__followme_8c_source.html#l00297">reload_followme()</a>, <a class="el" href="app__queue_8c_source.html#l05650">reload_queue_rules()</a>, <a class="el" href="app__queue_8c_source.html#l05964">reload_queues()</a>, <a class="el" href="app__rpt_8c_source.html#l12919">rpt_master()</a>, <a class="el" href="chan__iax2_8c_source.html#l12493">set_config()</a>, <a class="el" href="chan__dahdi_8c_source.html#l17079">setup_dahdi()</a>, <a class="el" href="app__meetme_8c_source.html#l06285">sla_load_config()</a>, <a class="el" href="res__smdi_8c_source.html#l00861">smdi_load()</a>, <a class="el" href="chan__usbradio_8c_source.html#l03406">store_config()</a>, <a class="el" href="cdr__tds_8c_source.html#l00422">tds_load_module()</a>, <a class="el" href="app__voicemail_8c_source.html#l01357">vm_change_password()</a>, and <a class="el" href="app__voicemail_8c_source.html#l06307">vm_forwardoptions()</a>.</p>

</div>
</div>
<a class="anchor" id="a8d1a63cdf2c7aff22a77b6e75d93b377"></a><!-- doxytag: member="config.h::CONFIG_STATUS_FILEINVALID" ref="a8d1a63cdf2c7aff22a77b6e75d93b377" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_STATUS_FILEINVALID&nbsp;&nbsp;&nbsp;(void *)-2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00050">50</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p>Referenced by <a class="el" href="http_8c_source.html#l00848">__ast_http_load()</a>, <a class="el" href="res__http__post_8c_source.html#l00408">__ast_http_post_load()</a>, <a class="el" href="rtp_8c_source.html#l04739">__ast_rtp_reload()</a>, <a class="el" href="udptl_8c_source.html#l01342">__ast_udptl_reload()</a>, <a class="el" href="manager_8c_source.html#l04061">__init_manager()</a>, <a class="el" href="dsp_8c_source.html#l01681">_dsp_init()</a>, <a class="el" href="manager_8c_source.html#l01156">action_getconfig()</a>, <a class="el" href="manager_8c_source.html#l01257">action_getconfigjson()</a>, <a class="el" href="manager_8c_source.html#l01204">action_listcategories()</a>, <a class="el" href="manager_8c_source.html#l01481">action_updateconfig()</a>, <a class="el" href="res__adsi_8c_source.html#l01015">adsi_load()</a>, <a class="el" href="app__voicemail_8c_source.html#l11416">advanced_options()</a>, <a class="el" href="res__jabber_8c_source.html#l02907">aji_load_config()</a>, <a class="el" href="config_8c_source.html#l02031">ast_config_internal_load()</a>, <a class="el" href="config_8c_source.html#l02071">ast_config_load2()</a>, <a class="el" href="asterisk_8c_source.html#l02784">ast_readconfig()</a>, <a class="el" href="xmldoc_8c_source.html#l01765">ast_xmldoc_load_documentation()</a>, <a class="el" href="app__meetme_8c_source.html#l03696">conf_exec()</a>, <a class="el" href="func__config_8c_source.html#l00064">config_function_read()</a>, <a class="el" href="chan__skinny_8c_source.html#l07053">config_load()</a>, <a class="el" href="cdr__pgsql_8c_source.html#l00362">config_module()</a>, <a class="el" href="config_8c_source.html#l01176">config_text_file_load()</a>, <a class="el" href="app__directory_8c_source.html#l00723">directory_exec()</a>, <a class="el" href="cdr_8c_source.html#l01396">do_reload()</a>, <a class="el" href="app__festival_8c_source.html#l00268">festival_exec()</a>, <a class="el" href="app__meetme_8c_source.html#l03546">find_conf()</a>, <a class="el" href="chan__gtalk_8c_source.html#l01901">gtalk_load_config()</a>, <a class="el" href="iax2-provision_8c_source.html#l00522">iax_provision_reload()</a>, <a class="el" href="logger_8c_source.html#l00320">init_logger_chain()</a>, <a class="el" href="chan__jingle_8c_source.html#l01724">jingle_load_config()</a>, <a class="el" href="app__alarmreceiver_8c_source.html#l00639">load_config()</a>, <a class="el" href="app__meetme_8c_source.html#l04446">load_config_meetme()</a>, <a class="el" href="indications_8c_source.html#l01030">load_indications()</a>, <a class="el" href="app__festival_8c_source.html#l00542">load_module()</a>, <a class="el" href="loader_8c_source.html#l00941">load_modules()</a>, <a class="el" href="res__musiconhold_8c_source.html#l01549">load_moh_classes()</a>, <a class="el" href="res__odbc_8c_source.html#l00730">load_odbc_config()</a>, <a class="el" href="app__rpt_8c_source.html#l02224">load_rpt_vars()</a>, <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>, <a class="el" href="app__rpt_8c_source.html#l01984">node_lookup()</a>, <a class="el" href="cdr__odbc_8c_source.html#l00152">odbc_load_module()</a>, <a class="el" href="app__osplookup_8c_source.html#l01772">osp_load()</a>, <a class="el" href="codec__adpcm_8c_source.html#l00311">parse_config()</a>, <a class="el" href="pbx__config_8c_source.html#l01367">pbx_load_config()</a>, <a class="el" href="app__voicemail_8c_source.html#l07051">play_message()</a>, <a class="el" href="enum_8c_source.html#l00959">private_enum_init()</a>, <a class="el" href="chan__agent_8c_source.html#l01180">read_agent_config()</a>, <a class="el" href="app__directory_8c_source.html#l00382">realtime_directory()</a>, <a class="el" href="app__playback_8c_source.html#l00482">reload()</a>, <a class="el" href="chan__h323_8c_source.html#l02832">reload_config()</a>, <a class="el" href="app__followme_8c_source.html#l00297">reload_followme()</a>, <a class="el" href="app__queue_8c_source.html#l05650">reload_queue_rules()</a>, <a class="el" href="app__queue_8c_source.html#l05964">reload_queues()</a>, <a class="el" href="app__rpt_8c_source.html#l12919">rpt_master()</a>, <a class="el" href="asterisk_8c_source.html#l03067">run_startup_commands()</a>, <a class="el" href="chan__iax2_8c_source.html#l12493">set_config()</a>, <a class="el" href="chan__dahdi_8c_source.html#l17079">setup_dahdi()</a>, <a class="el" href="app__meetme_8c_source.html#l06285">sla_load_config()</a>, <a class="el" href="res__smdi_8c_source.html#l00861">smdi_load()</a>, <a class="el" href="chan__usbradio_8c_source.html#l03406">store_config()</a>, <a class="el" href="cdr__tds_8c_source.html#l00422">tds_load_module()</a>, <a class="el" href="app__voicemail_8c_source.html#l01357">vm_change_password()</a>, and <a class="el" href="app__voicemail_8c_source.html#l06307">vm_forwardoptions()</a>.</p>

</div>
</div>
<a class="anchor" id="a39bacaabcacf47583204c7634e64a2a0"></a><!-- doxytag: member="config.h::CONFIG_STATUS_FILEMISSING" ref="a39bacaabcacf47583204c7634e64a2a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_STATUS_FILEMISSING&nbsp;&nbsp;&nbsp;(void *)0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00048">48</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p>Referenced by <a class="el" href="http_8c_source.html#l00848">__ast_http_load()</a>, <a class="el" href="res__http__post_8c_source.html#l00408">__ast_http_post_load()</a>, <a class="el" href="rtp_8c_source.html#l04739">__ast_rtp_reload()</a>, <a class="el" href="udptl_8c_source.html#l01342">__ast_udptl_reload()</a>, <a class="el" href="dsp_8c_source.html#l01681">_dsp_init()</a>, <a class="el" href="manager_8c_source.html#l01156">action_getconfig()</a>, <a class="el" href="res__adsi_8c_source.html#l01015">adsi_load()</a>, <a class="el" href="res__jabber_8c_source.html#l02907">aji_load_config()</a>, <a class="el" href="asterisk_8c_source.html#l02784">ast_readconfig()</a>, <a class="el" href="cdr_8c_source.html#l01396">do_reload()</a>, <a class="el" href="cdr__sqlite3__custom_8c_source.html#l00151">load_config()</a>, <a class="el" href="indications_8c_source.html#l01030">load_indications()</a>, <a class="el" href="loader_8c_source.html#l00941">load_modules()</a>, <a class="el" href="res__musiconhold_8c_source.html#l01549">load_moh_classes()</a>, <a class="el" href="res__odbc_8c_source.html#l00730">load_odbc_config()</a>, <a class="el" href="codec__adpcm_8c_source.html#l00311">parse_config()</a>, <a class="el" href="enum_8c_source.html#l00959">private_enum_init()</a>, and <a class="el" href="asterisk_8c_source.html#l03067">run_startup_commands()</a>.</p>

</div>
</div>
<a class="anchor" id="a846844eb2c4eb44554445936b3770711"></a><!-- doxytag: member="config.h::CONFIG_STATUS_FILEUNCHANGED" ref="a846844eb2c4eb44554445936b3770711" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_STATUS_FILEUNCHANGED&nbsp;&nbsp;&nbsp;(void *)-1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00049">49</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p>Referenced by <a class="el" href="http_8c_source.html#l00848">__ast_http_load()</a>, <a class="el" href="res__http__post_8c_source.html#l00408">__ast_http_post_load()</a>, <a class="el" href="rtp_8c_source.html#l04739">__ast_rtp_reload()</a>, <a class="el" href="udptl_8c_source.html#l01342">__ast_udptl_reload()</a>, <a class="el" href="manager_8c_source.html#l04061">__init_manager()</a>, <a class="el" href="dsp_8c_source.html#l01681">_dsp_init()</a>, <a class="el" href="res__adsi_8c_source.html#l01015">adsi_load()</a>, <a class="el" href="res__jabber_8c_source.html#l02907">aji_load_config()</a>, <a class="el" href="cli_8c_source.html#l01554">ast_cli_perms_init()</a>, <a class="el" href="config_8c_source.html#l02031">ast_config_internal_load()</a>, <a class="el" href="config_8c_source.html#l02071">ast_config_load2()</a>, <a class="el" href="asterisk_8c_source.html#l02784">ast_readconfig()</a>, <a class="el" href="func__config_8c_source.html#l00064">config_function_read()</a>, <a class="el" href="cdr__pgsql_8c_source.html#l00362">config_module()</a>, <a class="el" href="config_8c_source.html#l01176">config_text_file_load()</a>, <a class="el" href="cdr_8c_source.html#l01396">do_reload()</a>, <a class="el" href="iax2-provision_8c_source.html#l00522">iax_provision_reload()</a>, <a class="el" href="app__amd_8c_source.html#l00415">load_config()</a>, <a class="el" href="indications_8c_source.html#l01030">load_indications()</a>, <a class="el" href="res__musiconhold_8c_source.html#l01549">load_moh_classes()</a>, <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>, <a class="el" href="cdr__odbc_8c_source.html#l00152">odbc_load_module()</a>, <a class="el" href="app__osplookup_8c_source.html#l01772">osp_load()</a>, <a class="el" href="codec__adpcm_8c_source.html#l00311">parse_config()</a>, <a class="el" href="enum_8c_source.html#l00959">private_enum_init()</a>, <a class="el" href="chan__agent_8c_source.html#l01180">read_agent_config()</a>, <a class="el" href="app__playback_8c_source.html#l00482">reload()</a>, <a class="el" href="chan__h323_8c_source.html#l02832">reload_config()</a>, <a class="el" href="app__followme_8c_source.html#l00297">reload_followme()</a>, <a class="el" href="app__queue_8c_source.html#l05650">reload_queue_rules()</a>, <a class="el" href="app__queue_8c_source.html#l05964">reload_queues()</a>, <a class="el" href="asterisk_8c_source.html#l03067">run_startup_commands()</a>, <a class="el" href="chan__iax2_8c_source.html#l12493">set_config()</a>, <a class="el" href="chan__dahdi_8c_source.html#l17079">setup_dahdi()</a>, <a class="el" href="app__meetme_8c_source.html#l06285">sla_load_config()</a>, <a class="el" href="res__smdi_8c_source.html#l00861">smdi_load()</a>, and <a class="el" href="cdr__tds_8c_source.html#l00422">tds_load_module()</a>.</p>

</div>
</div>
<a class="anchor" id="aafea033c0475a1369e75b63aa36bf4fb"></a><!-- doxytag: member="config.h::CV_BOOL" ref="aafea033c0475a1369e75b63aa36bf4fb" args="(__x, __dst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CV_BOOL</td>
          <td>(</td>
          <td class="paramtype">__x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__dst&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;CV_F(__x, (__dst) = ast_true(__val) )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>helper macros to assign the value to a BOOL, UINT, static string and dynamic string </p>

<p>Definition at line <a class="el" href="config_8h_source.html#l00581">581</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p>Referenced by <a class="el" href="chan__console_8c_source.html#l01277">store_config_core()</a>.</p>

</div>
</div>
<a class="anchor" id="aa17b20d991cc5e34b6ec1a34a35fd712"></a><!-- doxytag: member="config.h::CV_DSTR" ref="aa17b20d991cc5e34b6ec1a34a35fd712" args="(__x, __dst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CV_DSTR</td>
          <td>(</td>
          <td class="paramtype">__x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__dst&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;CV_F(__x, if (__dst) ast_free(__dst); __dst = ast_strdup(__val))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00584">584</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4529d9f44c4461f1d4b5bde4e968447e"></a><!-- doxytag: member="config.h::CV_END" ref="a4529d9f44c4461f1d4b5bde4e968447e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CV_END&nbsp;&nbsp;&nbsp;} while (0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>close a variable parsing block </p>

<p>Definition at line <a class="el" href="config_8h_source.html#l00573">573</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p>Referenced by <a class="el" href="chan__console_8c_source.html#l01277">store_config_core()</a>, and <a class="el" href="indications_8c_source.html#l00914">store_config_tone_zone()</a>.</p>

</div>
</div>
<a class="anchor" id="a573667b0b56503ba54ed0fbbb227b8ab"></a><!-- doxytag: member="config.h::CV_F" ref="a573667b0b56503ba54ed0fbbb227b8ab" args="(__pattern, __body)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CV_F</td>
          <td>(</td>
          <td class="paramtype">__pattern, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__body&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;if (!strcasecmp((__var), __pattern)) { __body; break; }</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>call a generic function if the name matches. </p>

<p>Definition at line <a class="el" href="config_8h_source.html#l00576">576</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p>Referenced by <a class="el" href="chan__console_8c_source.html#l01277">store_config_core()</a>, and <a class="el" href="indications_8c_source.html#l00914">store_config_tone_zone()</a>.</p>

</div>
</div>
<a class="anchor" id="a32da71a793e99764383cb3eb2080a346"></a><!-- doxytag: member="config.h::CV_START" ref="a32da71a793e99764383cb3eb2080a346" args="(__in_var, __in_val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CV_START</td>
          <td>(</td>
          <td class="paramtype">__in_var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in_val&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {              \
      <span class="keyword">const</span> <span class="keywordtype">char</span> *__var = __in_var; \
      <span class="keyword">const</span> <span class="keywordtype">char</span> *__val = __in_val;
</pre></div>
<p>the macro to open a block for variable parsing </p>

<p>Definition at line <a class="el" href="config_8h_source.html#l00567">567</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p>Referenced by <a class="el" href="chan__console_8c_source.html#l01277">store_config_core()</a>, and <a class="el" href="indications_8c_source.html#l00914">store_config_tone_zone()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a4b29ba86635a1575dc2c34403844eb"></a><!-- doxytag: member="config.h::CV_STR" ref="a4a4b29ba86635a1575dc2c34403844eb" args="(__x, __dst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CV_STR</td>
          <td>(</td>
          <td class="paramtype">__x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__dst&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;CV_F(__x, ast_copy_string(__dst, __val, sizeof(__dst)))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00583">583</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p>Referenced by <a class="el" href="chan__oss_8c_source.html#l01317">store_config_core()</a>, and <a class="el" href="indications_8c_source.html#l00914">store_config_tone_zone()</a>.</p>

</div>
</div>
<a class="anchor" id="a41a52fecb7825ca2a3b4884777378e8d"></a><!-- doxytag: member="config.h::CV_STRFIELD" ref="a41a52fecb7825ca2a3b4884777378e8d" args="(__x, __obj, __field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CV_STRFIELD</td>
          <td>(</td>
          <td class="paramtype">__x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__field&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;CV_F(__x, ast_string_field_set(__obj, __field, __val))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00585">585</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p>Referenced by <a class="el" href="chan__console_8c_source.html#l01277">store_config_core()</a>.</p>

</div>
</div>
<a class="anchor" id="ad034d966d46d0a4a8731b294262f5e4b"></a><!-- doxytag: member="config.h::CV_UINT" ref="ad034d966d46d0a4a8731b294262f5e4b" args="(__x, __dst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CV_UINT</td>
          <td>(</td>
          <td class="paramtype">__x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__dst&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;CV_F(__x, (__dst) = strtoul(__val, NULL, 0) )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00582">582</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p>Referenced by <a class="el" href="chan__oss_8c_source.html#l01317">store_config_core()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a6065208cc8c8274a7807454204b9b859"></a><!-- doxytag: member="config.h::config_load_func" ref="a6065208cc8c8274a7807454204b9b859" args="(const char *database, const char *table, const char *configfile, struct ast_config *config, struct ast_flags flags, const char *suggested_include_file, const char *who_asked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structast__config.html">ast_config</a>* <a class="el" href="config_8h.html#a6065208cc8c8274a7807454204b9b859">config_load_func</a>(const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const char *configfile, struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="pbx__lua_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, struct <a class="el" href="structast__flags.html">ast_flags</a> flags, const char *suggested_include_file, const char *who_asked)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00090">90</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae528729aa8c2a97f88eeb2d3ac6de182"></a><!-- doxytag: member="config.h::realtime_destroy" ref="ae528729aa8c2a97f88eeb2d3ac6de182" args="(const char *database, const char *table, const char *keyfield, const char *entity, va_list ap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int <a class="el" href="config_8h.html#ae528729aa8c2a97f88eeb2d3ac6de182">realtime_destroy</a>(const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const char *keyfield, const char *<a class="el" href="isdn__lib_8c.html#ad4e4601988acb4a95ecd1ec380359ae5">entity</a>, va_list ap)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00096">96</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

</div>
</div>
<a class="anchor" id="acf209fbef7d60d82f81e32fb92850f32"></a><!-- doxytag: member="config.h::realtime_multi_get" ref="acf209fbef7d60d82f81e32fb92850f32" args="(const char *database, const char *table, va_list ap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structast__config.html">ast_config</a>* <a class="el" href="config_8h.html#acf209fbef7d60d82f81e32fb92850f32">realtime_multi_get</a>(const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, va_list ap)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00092">92</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

</div>
</div>
<a class="anchor" id="a16d6ac69ca472fa206f577ea0b0d847c"></a><!-- doxytag: member="config.h::realtime_require" ref="a16d6ac69ca472fa206f577ea0b0d847c" args="(const char *database, const char *table, va_list ap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int <a class="el" href="config_8h.html#a16d6ac69ca472fa206f577ea0b0d847c">realtime_require</a>(const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, va_list ap)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function pointer called to ensure database schema is properly configured for realtime use. </p>
<dl class="since"><dt><b>Since:</b></dt><dd>1.6.1 </dd></dl>

<p>Definition at line <a class="el" href="config_8h_source.html#l00102">102</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

</div>
</div>
<a class="anchor" id="adcbff5fa833ecbe62d72eb84694aa064"></a><!-- doxytag: member="config.h::realtime_store" ref="adcbff5fa833ecbe62d72eb84694aa064" args="(const char *database, const char *table, va_list ap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int <a class="el" href="config_8h.html#adcbff5fa833ecbe62d72eb84694aa064">realtime_store</a>(const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, va_list ap)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00095">95</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

</div>
</div>
<a class="anchor" id="a254dcb357bb147c8af0c5646521a626b"></a><!-- doxytag: member="config.h::realtime_unload" ref="a254dcb357bb147c8af0c5646521a626b" args="(const char *database, const char *table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int <a class="el" href="config_8h.html#a254dcb357bb147c8af0c5646521a626b">realtime_unload</a>(const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function pointer called to clear the database cache and free resources used for such. </p>
<dl class="since"><dt><b>Since:</b></dt><dd>1.6.1 </dd></dl>

<p>Definition at line <a class="el" href="config_8h_source.html#l00108">108</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0d2ddf0f92f210648878b082bcd67c20"></a><!-- doxytag: member="config.h::realtime_update" ref="a0d2ddf0f92f210648878b082bcd67c20" args="(const char *database, const char *table, const char *keyfield, const char *entity, va_list ap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int <a class="el" href="config_8h.html#a0d2ddf0f92f210648878b082bcd67c20">realtime_update</a>(const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const char *keyfield, const char *<a class="el" href="isdn__lib_8c.html#ad4e4601988acb4a95ecd1ec380359ae5">entity</a>, va_list ap)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00093">93</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

</div>
</div>
<a class="anchor" id="a48e12b352733d108c03bdf74505be665"></a><!-- doxytag: member="config.h::realtime_update2" ref="a48e12b352733d108c03bdf74505be665" args="(const char *database, const char *table, va_list ap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int <a class="el" href="config_8h.html#a48e12b352733d108c03bdf74505be665">realtime_update2</a>(const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, va_list ap)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00094">94</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

</div>
</div>
<a class="anchor" id="a602a9564c9fb3fa2b17efd9018e05e7f"></a><!-- doxytag: member="config.h::realtime_var_get" ref="a602a9564c9fb3fa2b17efd9018e05e7f" args="(const char *database, const char *table, va_list ap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structast__variable.html">ast_variable</a>* <a class="el" href="config_8h.html#a602a9564c9fb3fa2b17efd9018e05e7f">realtime_var_get</a>(const char *database, const char *<a class="el" href="cdr__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, va_list ap)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8h_source.html#l00091">91</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a2d5492e116eebd5075f247d21fb9db26"></a><!-- doxytag: member="config.h::@99" ref="a2d5492e116eebd5075f247d21fb9db26" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Options for <a class="el" href="config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load()</a> </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a2d5492e116eebd5075f247d21fb9db26abc16a274124ae96d43f8e52e344292c3"></a><!-- doxytag: member="CONFIG_FLAG_WITHCOMMENTS" ref="a2d5492e116eebd5075f247d21fb9db26abc16a274124ae96d43f8e52e344292c3" args="" -->CONFIG_FLAG_WITHCOMMENTS</em>&nbsp;</td><td>
<p>Load the configuration, including comments </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a2d5492e116eebd5075f247d21fb9db26afa887389dc380bbdcffb65fec379f037"></a><!-- doxytag: member="CONFIG_FLAG_FILEUNCHANGED" ref="a2d5492e116eebd5075f247d21fb9db26afa887389dc380bbdcffb65fec379f037" args="" -->CONFIG_FLAG_FILEUNCHANGED</em>&nbsp;</td><td>
<p>On a reload, give us a -1 if the file hasn't changed. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a2d5492e116eebd5075f247d21fb9db26a3b68640f31a2c5493459c159abee08ee"></a><!-- doxytag: member="CONFIG_FLAG_NOCACHE" ref="a2d5492e116eebd5075f247d21fb9db26a3b68640f31a2c5493459c159abee08ee" args="" -->CONFIG_FLAG_NOCACHE</em>&nbsp;</td><td>
<p>Don't attempt to cache mtime on this config file. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="config_8h_source.html#l00039">39</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00039"></a>00039      {<span class="comment"></span>
<a name="l00040"></a>00040 <span class="comment">   /*! Load the configuration, including comments */</span>
<a name="l00041"></a>00041    <a class="code" href="config_8h.html#a2d5492e116eebd5075f247d21fb9db26abc16a274124ae96d43f8e52e344292c3">CONFIG_FLAG_WITHCOMMENTS</a>  = (1 &lt;&lt; 0),<span class="comment"></span>
<a name="l00042"></a>00042 <span class="comment">   /*! On a reload, give us a -1 if the file hasn&apos;t changed. */</span>
<a name="l00043"></a>00043    <a class="code" href="config_8h.html#a2d5492e116eebd5075f247d21fb9db26afa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a> = (1 &lt;&lt; 1),<span class="comment"></span>
<a name="l00044"></a>00044 <span class="comment">   /*! Don&apos;t attempt to cache mtime on this config file. */</span>
<a name="l00045"></a>00045    <a class="code" href="config_8h.html#a2d5492e116eebd5075f247d21fb9db26a3b68640f31a2c5493459c159abee08ee">CONFIG_FLAG_NOCACHE</a>       = (1 &lt;&lt; 2),
<a name="l00046"></a>00046 };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569f"></a><!-- doxytag: member="config.h::ast_parse_flags" ref="ad60d9d8c34b4f61493c1d85ae02d569f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569f">ast_parse_flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Support code to parse config file arguments. </p>
<p>The function <a class="el" href="config_8h.html#a7e9aea581abeaae5d3799367d95284ac" title="The argument parsing routine.">ast_parse_arg()</a> provides a generic interface to parse strings (e.g. numbers, network addresses and so on) in a flexible way, e.g. by doing proper error and bound checks, provide default <a class="el" href="structvalues.html">values</a>, and so on. The function (described later) takes a string as an argument, a set of flags to specify the result format and checks to perform, a pointer to the result, and optionally some additional arguments. It returns 0 on success, != 0 otherwise. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569faa9556ebb6fa5b8ccfc5b4a062070f343"></a><!-- doxytag: member="PARSE_TYPE" ref="ad60d9d8c34b4f61493c1d85ae02d569faa9556ebb6fa5b8ccfc5b4a062070f343" args="" -->PARSE_TYPE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569fabac6774d4b76ec6847b57ccce4822738"></a><!-- doxytag: member="PARSE_INT32" ref="ad60d9d8c34b4f61493c1d85ae02d569fabac6774d4b76ec6847b57ccce4822738" args="" -->PARSE_INT32</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569fadba5c0b0122c30502fe469a55fea3c4b"></a><!-- doxytag: member="PARSE_UINT32" ref="ad60d9d8c34b4f61493c1d85ae02d569fadba5c0b0122c30502fe469a55fea3c4b" args="" -->PARSE_UINT32</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569fa911811e1ef2b6304138896f842ade7a6"></a><!-- doxytag: member="PARSE_DOUBLE" ref="ad60d9d8c34b4f61493c1d85ae02d569fa911811e1ef2b6304138896f842ade7a6" args="" -->PARSE_DOUBLE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569fadbbce4323faf5d2131137e15c1da10f1"></a><!-- doxytag: member="PARSE_INADDR" ref="ad60d9d8c34b4f61493c1d85ae02d569fadbbce4323faf5d2131137e15c1da10f1" args="" -->PARSE_INADDR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569facc865488860e2c25dd9f80e5473cf760"></a><!-- doxytag: member="PARSE_DEFAULT" ref="ad60d9d8c34b4f61493c1d85ae02d569facc865488860e2c25dd9f80e5473cf760" args="" -->PARSE_DEFAULT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585"></a><!-- doxytag: member="PARSE_IN_RANGE" ref="ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585" args="" -->PARSE_IN_RANGE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569fa827151da9f1b81f3fc253fc6e5f3c11b"></a><!-- doxytag: member="PARSE_OUT_RANGE" ref="ad60d9d8c34b4f61493c1d85ae02d569fa827151da9f1b81f3fc253fc6e5f3c11b" args="" -->PARSE_OUT_RANGE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569fa5f8a497855d42eba8c324516d21f8998"></a><!-- doxytag: member="PARSE_PORT_MASK" ref="ad60d9d8c34b4f61493c1d85ae02d569fa5f8a497855d42eba8c324516d21f8998" args="" -->PARSE_PORT_MASK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d"></a><!-- doxytag: member="PARSE_PORT_IGNORE" ref="ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d" args="" -->PARSE_PORT_IGNORE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569faf8734b2de041808f7ad5ce81ce4fcbcb"></a><!-- doxytag: member="PARSE_PORT_REQUIRE" ref="ad60d9d8c34b4f61493c1d85ae02d569faf8734b2de041808f7ad5ce81ce4fcbcb" args="" -->PARSE_PORT_REQUIRE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3"></a><!-- doxytag: member="PARSE_PORT_FORBID" ref="ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3" args="" -->PARSE_PORT_FORBID</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="config_8h_source.html#l00472">472</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00472"></a>00472                      {
<a name="l00473"></a>00473    <span class="comment">/* low 4 bits of flags are used for the operand type */</span>
<a name="l00474"></a>00474    <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569faa9556ebb6fa5b8ccfc5b4a062070f343">PARSE_TYPE</a>  =  0x000f,
<a name="l00475"></a>00475    <span class="comment">/* numeric types, with optional default value and bound checks.</span>
<a name="l00476"></a>00476 <span class="comment">    * Additional arguments are passed by value.</span>
<a name="l00477"></a>00477 <span class="comment">    */</span>
<a name="l00478"></a>00478    <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fabac6774d4b76ec6847b57ccce4822738">PARSE_INT32</a> =  0x0001,
<a name="l00479"></a>00479    <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fadba5c0b0122c30502fe469a55fea3c4b">PARSE_UINT32</a>   =  0x0002,
<a name="l00480"></a>00480    <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa911811e1ef2b6304138896f842ade7a6">PARSE_DOUBLE</a>   =  0x0003,
<a name="l00481"></a>00481 <span class="preprocessor">#if 0 </span><span class="comment">/* not supported yet */</span>
<a name="l00482"></a>00482    PARSE_INT16 =  0x0004,
<a name="l00483"></a>00483    PARSE_UINT16   =  0x0005,
<a name="l00484"></a>00484 <span class="preprocessor">#endif</span>
<a name="l00485"></a>00485 <span class="preprocessor"></span>   <span class="comment">/* Returns a struct sockaddr_in, with optional default value</span>
<a name="l00486"></a>00486 <span class="comment">    * (passed by reference) and port handling (accept, ignore,</span>
<a name="l00487"></a>00487 <span class="comment">    * require, forbid). The format is &apos;host.name[:port]&apos;</span>
<a name="l00488"></a>00488 <span class="comment">    */</span>
<a name="l00489"></a>00489    <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fadbbce4323faf5d2131137e15c1da10f1">PARSE_INADDR</a>   =  0x000f,
<a name="l00490"></a>00490 
<a name="l00491"></a>00491    <span class="comment">/* Other data types can be added as needed */</span>
<a name="l00492"></a>00492 
<a name="l00493"></a>00493    <span class="comment">/* If PARSE_DEFAULT is set, next argument is a default value</span>
<a name="l00494"></a>00494 <span class="comment">    * which is returned in case of error. The argument is passed</span>
<a name="l00495"></a>00495 <span class="comment">    * by value in case of numeric types, by reference in other cases.</span>
<a name="l00496"></a>00496 <span class="comment">    */</span>
<a name="l00497"></a>00497    <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569facc865488860e2c25dd9f80e5473cf760">PARSE_DEFAULT</a>  =  0x0010,  <span class="comment">/* assign default on error */</span>
<a name="l00498"></a>00498 
<a name="l00499"></a>00499    <span class="comment">/* Request a range check, applicable to numbers. Two additional</span>
<a name="l00500"></a>00500 <span class="comment">    * arguments are passed by value, specifying the low-high end of</span>
<a name="l00501"></a>00501 <span class="comment">    * the range (inclusive). An error is returned if the value</span>
<a name="l00502"></a>00502 <span class="comment">    * is outside or inside the range, respectively.</span>
<a name="l00503"></a>00503 <span class="comment">    */</span>
<a name="l00504"></a>00504    <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a> =  0x0020,  <span class="comment">/* accept values inside a range */</span>
<a name="l00505"></a>00505    <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa827151da9f1b81f3fc253fc6e5f3c11b">PARSE_OUT_RANGE</a> = 0x0040,  <span class="comment">/* accept values outside a range */</span>
<a name="l00506"></a>00506 
<a name="l00507"></a>00507    <span class="comment">/* Port handling, for sockaddr_in. accept/ignore/require/forbid</span>
<a name="l00508"></a>00508 <span class="comment">    * port number after the hostname or address.</span>
<a name="l00509"></a>00509 <span class="comment">    */</span>
<a name="l00510"></a>00510    <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa5f8a497855d42eba8c324516d21f8998">PARSE_PORT_MASK</a> = 0x0300, <span class="comment">/* 0x000: accept port if present */</span>
<a name="l00511"></a>00511    <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d">PARSE_PORT_IGNORE</a> =  0x0100, <span class="comment">/* 0x100: ignore port if present */</span>
<a name="l00512"></a>00512    <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569faf8734b2de041808f7ad5ce81ce4fcbcb">PARSE_PORT_REQUIRE</a> = 0x0200, <span class="comment">/* 0x200: require port number */</span>
<a name="l00513"></a>00513    <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a> =  0x0300, <span class="comment">/* 0x100: forbid port number */</span>
<a name="l00514"></a>00514 };
</pre></div></p>

</div>
</div>
<a class="anchor" id="abbca034b0a98715c687b808347af82a3"></a><!-- doxytag: member="config.h::require_type" ref="abbca034b0a98715c687b808347af82a3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="config_8h.html#abbca034b0a98715c687b808347af82a3">require_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Types used in ast_realtime_require_field. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4"></a><!-- doxytag: member="RQ_INTEGER1" ref="abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4" args="" -->RQ_INTEGER1</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9"></a><!-- doxytag: member="RQ_UINTEGER1" ref="abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9" args="" -->RQ_UINTEGER1</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3af1d7dd0d3aacafdef0d2f0d2db6d7112"></a><!-- doxytag: member="RQ_INTEGER2" ref="abbca034b0a98715c687b808347af82a3af1d7dd0d3aacafdef0d2f0d2db6d7112" args="" -->RQ_INTEGER2</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1"></a><!-- doxytag: member="RQ_UINTEGER2" ref="abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1" args="" -->RQ_UINTEGER2</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3a75d046b2f103381a62aeb81f42550404"></a><!-- doxytag: member="RQ_INTEGER3" ref="abbca034b0a98715c687b808347af82a3a75d046b2f103381a62aeb81f42550404" args="" -->RQ_INTEGER3</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5"></a><!-- doxytag: member="RQ_UINTEGER3" ref="abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5" args="" -->RQ_UINTEGER3</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3a8a9fbbd166ee4918cec8c9303fde70e8"></a><!-- doxytag: member="RQ_INTEGER4" ref="abbca034b0a98715c687b808347af82a3a8a9fbbd166ee4918cec8c9303fde70e8" args="" -->RQ_INTEGER4</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be"></a><!-- doxytag: member="RQ_UINTEGER4" ref="abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be" args="" -->RQ_UINTEGER4</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3aaa7be840b4634cc84021f0c20a17275b"></a><!-- doxytag: member="RQ_INTEGER8" ref="abbca034b0a98715c687b808347af82a3aaa7be840b4634cc84021f0c20a17275b" args="" -->RQ_INTEGER8</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3a2e4fb4c24a3958e2fbd853d5c53cfbb4"></a><!-- doxytag: member="RQ_UINTEGER8" ref="abbca034b0a98715c687b808347af82a3a2e4fb4c24a3958e2fbd853d5c53cfbb4" args="" -->RQ_UINTEGER8</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3a75759a4654f061f8e7d6bd1ec7a3b4bb"></a><!-- doxytag: member="RQ_CHAR" ref="abbca034b0a98715c687b808347af82a3a75759a4654f061f8e7d6bd1ec7a3b4bb" args="" -->RQ_CHAR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3a1133e08bb8b498770188f728ca03e417"></a><!-- doxytag: member="RQ_FLOAT" ref="abbca034b0a98715c687b808347af82a3a1133e08bb8b498770188f728ca03e417" args="" -->RQ_FLOAT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3a3d3293675f377a4398a25974cba3e7e1"></a><!-- doxytag: member="RQ_DATE" ref="abbca034b0a98715c687b808347af82a3a3d3293675f377a4398a25974cba3e7e1" args="" -->RQ_DATE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="abbca034b0a98715c687b808347af82a3acf1d0ae3a1d0e3ae12a1f05f485f07c9"></a><!-- doxytag: member="RQ_DATETIME" ref="abbca034b0a98715c687b808347af82a3acf1d0ae3a1d0e3ae12a1f05f485f07c9" args="" -->RQ_DATETIME</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="config_8h_source.html#l00055">55</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00055"></a>00055              {
<a name="l00056"></a>00056    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4">RQ_INTEGER1</a>,
<a name="l00057"></a>00057    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a>,
<a name="l00058"></a>00058    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3af1d7dd0d3aacafdef0d2f0d2db6d7112">RQ_INTEGER2</a>,
<a name="l00059"></a>00059    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a>,
<a name="l00060"></a>00060    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3a75d046b2f103381a62aeb81f42550404">RQ_INTEGER3</a>,
<a name="l00061"></a>00061    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5">RQ_UINTEGER3</a>,
<a name="l00062"></a>00062    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3a8a9fbbd166ee4918cec8c9303fde70e8">RQ_INTEGER4</a>,
<a name="l00063"></a>00063    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be">RQ_UINTEGER4</a>,
<a name="l00064"></a>00064    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3aaa7be840b4634cc84021f0c20a17275b">RQ_INTEGER8</a>,
<a name="l00065"></a>00065    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3a2e4fb4c24a3958e2fbd853d5c53cfbb4">RQ_UINTEGER8</a>,
<a name="l00066"></a>00066    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3a75759a4654f061f8e7d6bd1ec7a3b4bb">RQ_CHAR</a>,
<a name="l00067"></a>00067    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3a1133e08bb8b498770188f728ca03e417">RQ_FLOAT</a>,
<a name="l00068"></a>00068    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3a3d3293675f377a4398a25974cba3e7e1">RQ_DATE</a>,
<a name="l00069"></a>00069    <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3acf1d0ae3a1d0e3ae12a1f05f485f07c9">RQ_DATETIME</a>,
<a name="l00070"></a>00070 } <a class="code" href="config_8h.html#abbca034b0a98715c687b808347af82a3" title="Types used in ast_realtime_require_field.">require_type</a>;
</pre></div></p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ab7b56ec66b058952423f313752c734e7"></a><!-- doxytag: member="config.h::ast_category_append" ref="ab7b56ec66b058952423f313752c734e7" args="(struct ast_config *config, struct ast_category *cat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_category_append </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="paramname"> <em>cat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l00522">522</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00201">ast_config::current</a>, <a class="el" href="config_8c_source.html#l00203">ast_config::include_level</a>, <a class="el" href="config_8c_source.html#l00186">ast_category::include_level</a>, <a class="el" href="config_8c_source.html#l00200">ast_config::last</a>, <a class="el" href="config_8c_source.html#l00195">ast_category::next</a>, and <a class="el" href="config_8c_source.html#l00199">ast_config::root</a>.</p>

<p>Referenced by <a class="el" href="res__config__sqlite_8c_source.html#l00851">add_cfg_entry()</a>, <a class="el" href="res__config__sqlite_8c_source.html#l01118">add_rt_multi_cfg_entry()</a>, <a class="el" href="res__config__curl_8c_source.html#l00518">config_curl()</a>, <a class="el" href="res__config__ldap_8c_source.html#l01015">config_ldap()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00797">config_odbc()</a>, <a class="el" href="res__config__pgsql_8c_source.html#l01030">config_pgsql()</a>, <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>, <a class="el" href="config_8c_source.html#l00922">process_text_line()</a>, <a class="el" href="app__directory_8c_source.html#l00382">realtime_directory()</a>, <a class="el" href="res__config__curl_8c_source.html#l00128">realtime_multi_curl()</a>, <a class="el" href="res__config__ldap_8c_source.html#l00939">realtime_multi_ldap()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00256">realtime_multi_odbc()</a>, and <a class="el" href="res__config__pgsql_8c_source.html#l00418">realtime_multi_pgsql()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00523"></a>00523 {
<a name="l00524"></a>00524    <span class="keywordflow">if</span> (config-&gt;<a class="code" href="structast__config.html#a3419d1f39268adeeb95610eaf215952d">last</a>)
<a name="l00525"></a>00525       config-&gt;<a class="code" href="structast__config.html#a3419d1f39268adeeb95610eaf215952d">last</a>-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a> = category;
<a name="l00526"></a>00526    <span class="keywordflow">else</span>
<a name="l00527"></a>00527       config-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a> = category;
<a name="l00528"></a>00528    category-&gt;<a class="code" href="structast__category.html#a9889e4b9ce57e4055f9c11bacf89e50a">include_level</a> = config-&gt;<a class="code" href="structast__config.html#a9889e4b9ce57e4055f9c11bacf89e50a">include_level</a>;
<a name="l00529"></a>00529    config-&gt;<a class="code" href="structast__config.html#a3419d1f39268adeeb95610eaf215952d">last</a> = category;
<a name="l00530"></a>00530    config-&gt;<a class="code" href="structast__config.html#a204ede9a191a91abc1968f94973de556">current</a> = category;
<a name="l00531"></a>00531 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a611776300f941a63266cb220ac62b4db"></a><!-- doxytag: member="config.h::ast_category_browse" ref="a611776300f941a63266cb220ac62b4db" args="(struct ast_config *config, const char *prev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_category_browse </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prev</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Goes through categories. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>Which config structure you wish to "browse" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prev</em>&nbsp;</td><td>A pointer to a previous category. This function is kind of non-intuitive in it's use. To begin, one passes NULL as the second argument. It will return a pointer to the string of the first category in the file. From here on after, one must then pass the previous usage's return value as the second pointer, and it will return a pointer to the category name afterwards.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>a</em>&nbsp;</td><td>category on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>on failure/no-more-categories </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l00613">613</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00202">ast_config::last_browse</a>, <a class="el" href="config_8c_source.html#l00184">ast_category::name</a>, <a class="el" href="config_8c_source.html#l00195">ast_category::next</a>, <a class="el" href="config_8c_source.html#l00591">next_available_category()</a>, and <a class="el" href="config_8c_source.html#l00199">ast_config::root</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l04061">__init_manager()</a>, <a class="el" href="app__queue_8c_source.html#l06083">__queues_show()</a>, <a class="el" href="manager_8c_source.html#l01156">action_getconfig()</a>, <a class="el" href="manager_8c_source.html#l01257">action_getconfigjson()</a>, <a class="el" href="manager_8c_source.html#l01204">action_listcategories()</a>, <a class="el" href="res__jabber_8c_source.html#l02907">aji_load_config()</a>, <a class="el" href="cli_8c_source.html#l01554">ast_cli_perms_init()</a>, <a class="el" href="app__directory_8c_source.html#l00505">AST_LIST_HEAD_NOLOCK()</a>, <a class="el" href="chan__sip_8c_source.html#l16385">complete_sipnotify()</a>, <a class="el" href="chan__skinny_8c_source.html#l07053">config_load()</a>, <a class="el" href="app__queue_8c_source.html#l01696">find_queue_by_name_rt()</a>, <a class="el" href="app__followme_8c_source.html#l00917">find_realtime()</a>, <a class="el" href="chan__sip_8c_source.html#l04706">get_insecure_variable_from_config()</a>, <a class="el" href="chan__gtalk_8c_source.html#l01901">gtalk_load_config()</a>, <a class="el" href="iax2-provision_8c_source.html#l00522">iax_provision_reload()</a>, <a class="el" href="chan__jingle_8c_source.html#l01724">jingle_load_config()</a>, <a class="el" href="app__amd_8c_source.html#l00415">load_config()</a>, <a class="el" href="indications_8c_source.html#l01030">load_indications()</a>, <a class="el" href="chan__oss_8c_source.html#l01425">load_module()</a>, <a class="el" href="res__musiconhold_8c_source.html#l01549">load_moh_classes()</a>, <a class="el" href="res__odbc_8c_source.html#l00730">load_odbc_config()</a>, <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>, <a class="el" href="app__osplookup_8c_source.html#l01772">osp_load()</a>, <a class="el" href="res__config__ldap_8c_source.html#l01577">parse_config()</a>, <a class="el" href="pbx__config_8c_source.html#l01367">pbx_load_config()</a>, <a class="el" href="pbx__config_8c_source.html#l01608">pbx_load_users()</a>, <a class="el" href="chan__agent_8c_source.html#l01180">read_agent_config()</a>, <a class="el" href="app__directory_8c_source.html#l00382">realtime_directory()</a>, <a class="el" href="pbx__realtime_8c_source.html#l00079">realtime_switch_common()</a>, <a class="el" href="func__odbc_8c_source.html#l01394">reload()</a>, <a class="el" href="chan__h323_8c_source.html#l02832">reload_config()</a>, <a class="el" href="app__followme_8c_source.html#l00297">reload_followme()</a>, <a class="el" href="app__queue_8c_source.html#l05650">reload_queue_rules()</a>, <a class="el" href="app__queue_8c_source.html#l05964">reload_queues()</a>, <a class="el" href="app__rpt_8c_source.html#l12919">rpt_master()</a>, <a class="el" href="app__directory_8c_source.html#l00582">search_directory()</a>, <a class="el" href="chan__iax2_8c_source.html#l12493">set_config()</a>, <a class="el" href="chan__dahdi_8c_source.html#l17079">setup_dahdi()</a>, <a class="el" href="app__voicemail_8c_source.html#l10042">show_users_realtime()</a>, <a class="el" href="app__meetme_8c_source.html#l06285">sla_load_config()</a>, <a class="el" href="app__queue_8c_source.html#l01906">update_realtime_members()</a>, and <a class="el" href="app__voicemail_8c_source.html#l01357">vm_change_password()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00614"></a>00614 {  
<a name="l00615"></a>00615    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat = NULL;
<a name="l00616"></a>00616 
<a name="l00617"></a>00617    <span class="keywordflow">if</span> (prev &amp;&amp; config-&gt;<a class="code" href="structast__config.html#acd249676fca8f438f6762b26fb92f712">last_browse</a> &amp;&amp; (config-&gt;<a class="code" href="structast__config.html#acd249676fca8f438f6762b26fb92f712">last_browse</a>-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a> == prev))
<a name="l00618"></a>00618       cat = config-&gt;<a class="code" href="structast__config.html#acd249676fca8f438f6762b26fb92f712">last_browse</a>-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>;
<a name="l00619"></a>00619    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!prev &amp;&amp; config-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>)
<a name="l00620"></a>00620       cat = config-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>;
<a name="l00621"></a>00621    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prev) {
<a name="l00622"></a>00622       <span class="keywordflow">for</span> (cat = config-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>; cat; cat = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>) {
<a name="l00623"></a>00623          <span class="keywordflow">if</span> (cat-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a> == prev) {
<a name="l00624"></a>00624             cat = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>;
<a name="l00625"></a>00625             <span class="keywordflow">break</span>;
<a name="l00626"></a>00626          }
<a name="l00627"></a>00627       }
<a name="l00628"></a>00628       <span class="keywordflow">if</span> (!cat) {
<a name="l00629"></a>00629          <span class="keywordflow">for</span> (cat = config-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>; cat; cat = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>) {
<a name="l00630"></a>00630             <span class="keywordflow">if</span> (!strcasecmp(cat-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a>, prev)) {
<a name="l00631"></a>00631                cat = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>;
<a name="l00632"></a>00632                <span class="keywordflow">break</span>;
<a name="l00633"></a>00633             }
<a name="l00634"></a>00634          }
<a name="l00635"></a>00635       }
<a name="l00636"></a>00636    }
<a name="l00637"></a>00637    
<a name="l00638"></a>00638    <span class="keywordflow">if</span> (cat)
<a name="l00639"></a>00639       cat = <a class="code" href="config_8c.html#ade468175b713e3cb13443b97f3d5b4c6">next_available_category</a>(cat);
<a name="l00640"></a>00640 
<a name="l00641"></a>00641    config-&gt;<a class="code" href="structast__config.html#acd249676fca8f438f6762b26fb92f712">last_browse</a> = cat;
<a name="l00642"></a>00642    <span class="keywordflow">return</span> (cat) ? cat-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a> : NULL;
<a name="l00643"></a>00643 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab4ab35927c1fb4ee1bddf30edf6419e3"></a><!-- doxytag: member="config.h::ast_category_delete" ref="ab4ab35927c1fb4ee1bddf30edf6419e3" args="(struct ast_config *cfg, const char *category)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_category_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>category</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l00766">766</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00561">ast_category_destroy()</a>, <a class="el" href="config_8c_source.html#l00200">ast_config::last</a>, <a class="el" href="config_8c_source.html#l00195">ast_category::next</a>, and <a class="el" href="config_8c_source.html#l00199">ast_config::root</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00767"></a>00767 {
<a name="l00768"></a>00768    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *prev=NULL, *cat;
<a name="l00769"></a>00769 
<a name="l00770"></a>00770    cat = cfg-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>;
<a name="l00771"></a>00771    <span class="keywordflow">while</span> (cat) {
<a name="l00772"></a>00772       <span class="keywordflow">if</span> (cat-&gt;name == category) {
<a name="l00773"></a>00773          <span class="keywordflow">if</span> (prev) {
<a name="l00774"></a>00774             prev-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a> = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>;
<a name="l00775"></a>00775             <span class="keywordflow">if</span> (cat == cfg-&gt;<a class="code" href="structast__config.html#a3419d1f39268adeeb95610eaf215952d">last</a>)
<a name="l00776"></a>00776                cfg-&gt;<a class="code" href="structast__config.html#a3419d1f39268adeeb95610eaf215952d">last</a> = prev;
<a name="l00777"></a>00777          } <span class="keywordflow">else</span> {
<a name="l00778"></a>00778             cfg-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a> = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>;
<a name="l00779"></a>00779             <span class="keywordflow">if</span> (cat == cfg-&gt;<a class="code" href="structast__config.html#a3419d1f39268adeeb95610eaf215952d">last</a>)
<a name="l00780"></a>00780                cfg-&gt;<a class="code" href="structast__config.html#a3419d1f39268adeeb95610eaf215952d">last</a> = NULL;
<a name="l00781"></a>00781          }
<a name="l00782"></a>00782          <a class="code" href="config_8h.html#abd17f201d0e7c31c124dc0cd3a0d073b">ast_category_destroy</a>(cat);
<a name="l00783"></a>00783          <span class="keywordflow">return</span> 0;
<a name="l00784"></a>00784       }
<a name="l00785"></a>00785       prev = cat;
<a name="l00786"></a>00786       cat = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>;
<a name="l00787"></a>00787    }
<a name="l00788"></a>00788 
<a name="l00789"></a>00789    prev = NULL;
<a name="l00790"></a>00790    cat = cfg-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>;
<a name="l00791"></a>00791    <span class="keywordflow">while</span> (cat) {
<a name="l00792"></a>00792       <span class="keywordflow">if</span> (!strcasecmp(cat-&gt;name, category)) {
<a name="l00793"></a>00793          <span class="keywordflow">if</span> (prev) {
<a name="l00794"></a>00794             prev-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a> = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>;
<a name="l00795"></a>00795             <span class="keywordflow">if</span> (cat == cfg-&gt;<a class="code" href="structast__config.html#a3419d1f39268adeeb95610eaf215952d">last</a>)
<a name="l00796"></a>00796                cfg-&gt;<a class="code" href="structast__config.html#a3419d1f39268adeeb95610eaf215952d">last</a> = prev;
<a name="l00797"></a>00797          } <span class="keywordflow">else</span> {
<a name="l00798"></a>00798             cfg-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a> = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>;
<a name="l00799"></a>00799             <span class="keywordflow">if</span> (cat == cfg-&gt;<a class="code" href="structast__config.html#a3419d1f39268adeeb95610eaf215952d">last</a>)
<a name="l00800"></a>00800                cfg-&gt;<a class="code" href="structast__config.html#a3419d1f39268adeeb95610eaf215952d">last</a> = NULL;
<a name="l00801"></a>00801          }
<a name="l00802"></a>00802          <a class="code" href="config_8h.html#abd17f201d0e7c31c124dc0cd3a0d073b">ast_category_destroy</a>(cat);
<a name="l00803"></a>00803          <span class="keywordflow">return</span> 0;
<a name="l00804"></a>00804       }
<a name="l00805"></a>00805       prev = cat;
<a name="l00806"></a>00806       cat = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>;
<a name="l00807"></a>00807    }
<a name="l00808"></a>00808    <span class="keywordflow">return</span> -1;
<a name="l00809"></a>00809 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abd17f201d0e7c31c124dc0cd3a0d073b"></a><!-- doxytag: member="config.h::ast_category_destroy" ref="abd17f201d0e7c31c124dc0cd3a0d073b" args="(struct ast_category *cat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_category_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="paramname"> <em>cat</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l00561">561</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00385">ast_comment_destroy()</a>, <a class="el" href="config_8c_source.html#l00553">ast_destroy_template_list()</a>, <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="config_8c_source.html#l00397">ast_variables_destroy()</a>, <a class="el" href="config_8c_source.html#l00187">ast_category::file</a>, <a class="el" href="astmm_8h_source.html#l00084">free</a>, <a class="el" href="config_8c_source.html#l00190">ast_category::precomments</a>, <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>, <a class="el" href="config_8c_source.html#l00191">ast_category::sameline</a>, and <a class="el" href="config_8c_source.html#l00192">ast_category::trailing</a>.</p>

<p>Referenced by <a class="el" href="res__config__sqlite_8c_source.html#l00851">add_cfg_entry()</a>, <a class="el" href="config_8c_source.html#l00766">ast_category_delete()</a>, <a class="el" href="config_8c_source.html#l00827">ast_config_destroy()</a>, <a class="el" href="config_8c_source.html#l00922">process_text_line()</a>, and <a class="el" href="res__config__odbc_8c_source.html#l00256">realtime_multi_odbc()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00562"></a>00562 {
<a name="l00563"></a>00563    <a class="code" href="config_8h.html#ad3d8122172af6f13687a07840411d65d" title="Free variable list.">ast_variables_destroy</a>(cat-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>);
<a name="l00564"></a>00564    <span class="keywordflow">if</span> (cat-&gt;<a class="code" href="structast__category.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>) {
<a name="l00565"></a>00565       <a class="code" href="astmm_8h.html#aa7157aa9480bb73f090dca36776419bf">free</a>(cat-&gt;<a class="code" href="structast__category.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>);
<a name="l00566"></a>00566       cat-&gt;<a class="code" href="structast__category.html#adf16cd437526a5c5e0e0af87745acbb8">file</a> = 0;
<a name="l00567"></a>00567    }
<a name="l00568"></a>00568    <a class="code" href="config_8c.html#aa1eb8eebadbdaf6ffacdd744a5686aa6">ast_comment_destroy</a>(&amp;cat-&gt;<a class="code" href="structast__category.html#a80bf10e9bcb9c00a7a59051a77a620cf">precomments</a>);
<a name="l00569"></a>00569    <a class="code" href="config_8c.html#aa1eb8eebadbdaf6ffacdd744a5686aa6">ast_comment_destroy</a>(&amp;cat-&gt;<a class="code" href="structast__category.html#a6e4312227f9a7570709abf7f686f1cfe">sameline</a>);
<a name="l00570"></a>00570    <a class="code" href="config_8c.html#aa1eb8eebadbdaf6ffacdd744a5686aa6">ast_comment_destroy</a>(&amp;cat-&gt;<a class="code" href="structast__category.html#ab09dbd177767543015efa3ba28fab03a">trailing</a>);
<a name="l00571"></a>00571    <a class="code" href="config_8c.html#a8bb6ada632d03a8b632dd6e6ad8178d0">ast_destroy_template_list</a>(cat);
<a name="l00572"></a>00572    <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cat);
<a name="l00573"></a>00573 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1b467acf627f98175f01061b31520616"></a><!-- doxytag: member="config.h::ast_category_detach_variables" ref="a1b467acf627f98175f01061b31520616" args="(struct ast_category *cat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_category_detach_variables </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="paramname"> <em>cat</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l00645">645</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00194">ast_category::last</a>, and <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>.</p>

<p>Referenced by <a class="el" href="pbx__realtime_8c_source.html#l00079">realtime_switch_common()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00646"></a>00646 {
<a name="l00647"></a>00647    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *v;
<a name="l00648"></a>00648 
<a name="l00649"></a>00649    v = cat-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>;
<a name="l00650"></a>00650    cat-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a> = NULL;
<a name="l00651"></a>00651    cat-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a> = NULL;
<a name="l00652"></a>00652 
<a name="l00653"></a>00653    <span class="keywordflow">return</span> v;
<a name="l00654"></a>00654 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae8eb938b00e489b467a33f836ff7d77e"></a><!-- doxytag: member="config.h::ast_category_empty" ref="ae8eb938b00e489b467a33f836ff7d77e" args="(struct ast_config *cfg, const char *category)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_category_empty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>category</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes and destroys all variables within a category. </p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the category was found and emptied </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if the category was not found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l00811">811</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00397">ast_variables_destroy()</a>, <a class="el" href="config_8c_source.html#l00194">ast_category::last</a>, <a class="el" href="config_8c_source.html#l00184">ast_category::name</a>, <a class="el" href="config_8c_source.html#l00195">ast_category::next</a>, <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>, and <a class="el" href="config_8c_source.html#l00199">ast_config::root</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00812"></a>00812 {
<a name="l00813"></a>00813    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat;
<a name="l00814"></a>00814 
<a name="l00815"></a>00815    <span class="keywordflow">for</span> (cat = cfg-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>; cat; cat = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>) {
<a name="l00816"></a>00816       <span class="keywordflow">if</span> (!strcasecmp(cat-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a>, category))
<a name="l00817"></a>00817          <span class="keywordflow">continue</span>;
<a name="l00818"></a>00818       <a class="code" href="config_8h.html#ad3d8122172af6f13687a07840411d65d" title="Free variable list.">ast_variables_destroy</a>(cat-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>);
<a name="l00819"></a>00819       cat-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a> = NULL;
<a name="l00820"></a>00820       cat-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a> = NULL;
<a name="l00821"></a>00821       <span class="keywordflow">return</span> 0;
<a name="l00822"></a>00822    }
<a name="l00823"></a>00823 
<a name="l00824"></a>00824    <span class="keywordflow">return</span> -1;
<a name="l00825"></a>00825 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a66f428286e5357f6e7fd5237b03ec174"></a><!-- doxytag: member="config.h::ast_category_exist" ref="a66f428286e5357f6e7fd5237b03ec174" args="(const struct ast_config *config, const char *category_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_category_exist </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>category_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check for category duplicates. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>which config to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>category_name</em>&nbsp;</td><td>name of the category you're looking for This will search through the categories within a given config file for a match.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>non-zero if found </dd></dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l00517">517</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00512">ast_category_get()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00518"></a>00518 {
<a name="l00519"></a>00519    <span class="keywordflow">return</span> !!<a class="code" href="config_8h.html#a0c2db6370e5051f282b2926f5893b2ea" title="Retrieve a category if it exists.">ast_category_get</a>(config, category_name);
<a name="l00520"></a>00520 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a39040e0fe9c0bac870c10ad32afbfb17"></a><!-- doxytag: member="config.h::ast_category_first" ref="a39040e0fe9c0bac870c10ad32afbfb17" args="(struct ast_category *cat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_category_first </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="paramname"> <em>cat</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>given a pointer to a category, return the root variable. This is equivalent to <a class="el" href="config_8h.html#a935ccfa153100ddd320c8918bd6e941b" title="Goes through variables Somewhat similar in intent as the ast_category_browse. List...">ast_variable_browse()</a>, but more efficient if we already have the struct <a class="el" href="structast__category.html">ast_category</a> * (e.g. from <a class="el" href="config_8h.html#a0c2db6370e5051f282b2926f5893b2ea" title="Retrieve a category if it exists.">ast_category_get()</a>) </p>
<p>return the first var of a category </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l00599">599</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>.</p>

<p>Referenced by <a class="el" href="config_8c_source.html#l00922">process_text_line()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00600"></a>00600 {
<a name="l00601"></a>00601    <span class="keywordflow">return</span> (cat) ? cat-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a> : NULL;
<a name="l00602"></a>00602 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0c2db6370e5051f282b2926f5893b2ea"></a><!-- doxytag: member="config.h::ast_category_get" ref="a0c2db6370e5051f282b2926f5893b2ea" args="(const struct ast_config *config, const char *category_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__category.html">ast_category</a>* ast_category_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>category_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve a category if it exists. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>which config to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>category_name</em>&nbsp;</td><td>name of the category you're looking for This will search through the categories within a given config file for a match.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pointer</em>&nbsp;</td><td>to category if found </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>if not. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l00512">512</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00494">category_get()</a>.</p>

<p>Referenced by <a class="el" href="config_8c_source.html#l00517">ast_category_exist()</a>, <a class="el" href="config_8c_source.html#l00604">ast_category_root()</a>, <a class="el" href="config_8c_source.html#l00411">ast_variable_browse()</a>, <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>, <a class="el" href="app__directory_8c_source.html#l00382">realtime_directory()</a>, <a class="el" href="pbx__realtime_8c_source.html#l00079">realtime_switch_common()</a>, <a class="el" href="app__voicemail_8c_source.html#l01357">vm_change_password()</a>, and <a class="el" href="app__voicemail_8c_source.html#l06307">vm_forwardoptions()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00513"></a>00513 {
<a name="l00514"></a>00514    <span class="keywordflow">return</span> <a class="code" href="config_8c.html#a4aaa75745aa4cf044419763d53bbb4a8">category_get</a>(config, category_name, 0);
<a name="l00515"></a>00515 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6d12616b69bc21fea2c20a0da5ad4f20"></a><!-- doxytag: member="config.h::ast_category_insert" ref="a6d12616b69bc21fea2c20a0da5ad4f20" args="(struct ast_config *config, struct ast_category *cat, const char *match)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_category_insert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="paramname"> <em>cat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>match</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Inserts new category. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>which config to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cat</em>&nbsp;</td><td>newly created category to insert </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>match</em>&nbsp;</td><td>which category to insert above This function is used to insert a new category above another category matching the match parameter. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l00533">533</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00184">ast_category::name</a>, <a class="el" href="config_8c_source.html#l00195">ast_category::next</a>, and <a class="el" href="config_8c_source.html#l00199">ast_config::root</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00534"></a>00534 {
<a name="l00535"></a>00535    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cur_category;
<a name="l00536"></a>00536 
<a name="l00537"></a>00537    <span class="keywordflow">if</span> (!cat || !<a class="code" href="chan__iax2_8c.html#aa27930d6214f6421994d6bef51efb7aa">match</a>)
<a name="l00538"></a>00538       <span class="keywordflow">return</span>;
<a name="l00539"></a>00539    <span class="keywordflow">if</span> (!strcasecmp(config-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a>, <a class="code" href="chan__iax2_8c.html#aa27930d6214f6421994d6bef51efb7aa">match</a>)) {
<a name="l00540"></a>00540       cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a> = config-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>;
<a name="l00541"></a>00541       config-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a> = cat;
<a name="l00542"></a>00542       <span class="keywordflow">return</span>;
<a name="l00543"></a>00543    } 
<a name="l00544"></a>00544    <span class="keywordflow">for</span> (cur_category = config-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>; cur_category; cur_category = cur_category-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>) {
<a name="l00545"></a>00545       <span class="keywordflow">if</span> (!strcasecmp(cur_category-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a>, <a class="code" href="chan__iax2_8c.html#aa27930d6214f6421994d6bef51efb7aa">match</a>)) {
<a name="l00546"></a>00546          cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a> = cur_category-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>;
<a name="l00547"></a>00547          cur_category-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a> = cat;
<a name="l00548"></a>00548          <span class="keywordflow">break</span>;
<a name="l00549"></a>00549       }
<a name="l00550"></a>00550    }
<a name="l00551"></a>00551 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="affebac76d69639677b677037d9871e29"></a><!-- doxytag: member="config.h::ast_category_new" ref="affebac76d69639677b677037d9871e29" args="(const char *name, const char *in_file, int lineno)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__category.html">ast_category</a>* ast_category_new </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>in_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>lineno</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a category structure. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l00483">483</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00072">ast_calloc</a>, <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="config_8c_source.html#l00187">ast_category::file</a>, <a class="el" href="config_8c_source.html#l00188">ast_category::lineno</a>, <a class="el" href="config_8c_source.html#l00184">ast_category::name</a>, and <a class="el" href="astmm_8h_source.html#l00096">strdup</a>.</p>

<p>Referenced by <a class="el" href="res__config__sqlite_8c_source.html#l00851">add_cfg_entry()</a>, <a class="el" href="res__config__sqlite_8c_source.html#l01118">add_rt_multi_cfg_entry()</a>, <a class="el" href="res__config__curl_8c_source.html#l00518">config_curl()</a>, <a class="el" href="res__config__ldap_8c_source.html#l01015">config_ldap()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00797">config_odbc()</a>, <a class="el" href="res__config__pgsql_8c_source.html#l01030">config_pgsql()</a>, <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>, <a class="el" href="config_8c_source.html#l00922">process_text_line()</a>, <a class="el" href="app__directory_8c_source.html#l00382">realtime_directory()</a>, <a class="el" href="res__config__curl_8c_source.html#l00128">realtime_multi_curl()</a>, <a class="el" href="res__config__ldap_8c_source.html#l00939">realtime_multi_ldap()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00256">realtime_multi_odbc()</a>, and <a class="el" href="res__config__pgsql_8c_source.html#l00418">realtime_multi_pgsql()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00484"></a>00484 {
<a name="l00485"></a>00485    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *category;
<a name="l00486"></a>00486 
<a name="l00487"></a>00487    <span class="keywordflow">if</span> ((category = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*category))))
<a name="l00488"></a>00488       <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(category-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a>, <a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="keyword">sizeof</span>(category-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a>));
<a name="l00489"></a>00489    category-&gt;<a class="code" href="structast__category.html#adf16cd437526a5c5e0e0af87745acbb8">file</a> = <a class="code" href="astmm_8h.html#a33bc8f85636226ba23bf348f78352aef">strdup</a>(in_file);
<a name="l00490"></a>00490    category-&gt;<a class="code" href="structast__category.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a> = <a class="code" href="structast__category.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>; <span class="comment">/* if you don&apos;t know the lineno, set it to 999999 or something real big */</span>
<a name="l00491"></a>00491    <span class="keywordflow">return</span> category;
<a name="l00492"></a>00492 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2a5612ff8eb3595c1be1df75be4d870f"></a><!-- doxytag: member="config.h::ast_category_rename" ref="a2a5612ff8eb3595c1be1df75be4d870f" args="(struct ast_category *cat, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_category_rename </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="paramname"> <em>cat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l00656">656</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, and <a class="el" href="config_8c_source.html#l00184">ast_category::name</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>, <a class="el" href="res__config__curl_8c_source.html#l00128">realtime_multi_curl()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00256">realtime_multi_odbc()</a>, and <a class="el" href="res__config__pgsql_8c_source.html#l00418">realtime_multi_pgsql()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00657"></a>00657 {
<a name="l00658"></a>00658    <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(cat-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a>, <a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="keyword">sizeof</span>(cat-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a>));
<a name="l00659"></a>00659 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3ac58442160597e19cb6f3775dbb0029"></a><!-- doxytag: member="config.h::ast_category_root" ref="a3ac58442160597e19cb6f3775dbb0029" args="(struct ast_config *config, char *cat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_category_root </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>cat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns the root <a class="el" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> of a config </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>pointer to an <a class="el" href="structast__config.html">ast_config</a> data structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cat</em>&nbsp;</td><td>name of the category for which you want the root</td></tr>
  </table>
  </dd>
</dl>
<p>Returns the category specified </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l00604">604</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00512">ast_category_get()</a>, and <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>.</p>

<p>Referenced by <a class="el" href="chan__sip_8c_source.html#l04706">get_insecure_variable_from_config()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00605"></a>00605 {
<a name="l00606"></a>00606    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *category = <a class="code" href="config_8h.html#a0c2db6370e5051f282b2926f5893b2ea" title="Retrieve a category if it exists.">ast_category_get</a>(config, cat);
<a name="l00607"></a>00607 
<a name="l00608"></a>00608    <span class="keywordflow">if</span> (category)
<a name="l00609"></a>00609       <span class="keywordflow">return</span> category-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>;
<a name="l00610"></a>00610    <span class="keywordflow">return</span> NULL;
<a name="l00611"></a>00611 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a910f835a41772603d33e200c956549ff"></a><!-- doxytag: member="config.h::ast_check_realtime" ref="a910f835a41772603d33e200c956549ff" args="(const char *family)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_check_realtime </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>family</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if realtime engine is configured for family. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if family is configured in realtime and engine exists </dd></dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l02147">2147</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l02161">ast_realtime_enabled()</a>, and <a class="el" href="config_8c_source.html#l01992">find_engine()</a>.</p>

<p>Referenced by <a class="el" href="app__queue_8c_source.html#l06083">__queues_show()</a>, <a class="el" href="chan__sip_8c_source.html#l15349">_sip_show_peer()</a>, <a class="el" href="chan__sip_8c_source.html#l14666">_sip_show_peers()</a>, <a class="el" href="logger_8c_source.html#l00465">ast_queue_log()</a>, <a class="el" href="app__voicemail_8c_source.html#l07296">close_mailbox()</a>, <a class="el" href="app__voicemail_8c_source.html#l03783">copy_plain_file()</a>, <a class="el" href="chan__sip_8c_source.html#l11990">destroy_association()</a>, <a class="el" href="chan__sip_8c_source.html#l18198">handle_response_peerpoke()</a>, <a class="el" href="app__voicemail_8c_source.html#l10106">handle_voicemail_show_users()</a>, <a class="el" href="app__voicemail_8c_source.html#l05141">leave_voicemail()</a>, <a class="el" href="chan__sip_8c_source.html#l25736">load_module()</a>, <a class="el" href="res__musiconhold_8c_source.html#l01223">local_ast_moh_start()</a>, <a class="el" href="chan__sip_8c_source.html#l04739">realtime_peer()</a>, <a class="el" href="chan__sip_8c_source.html#l04541">realtime_update_peer()</a>, <a class="el" href="app__voicemail_8c_source.html#l03657">rename_file()</a>, <a class="el" href="chan__sip_8c_source.html#l22832">sip_poke_noanswer()</a>, <a class="el" href="chan__sip_8c_source.html#l15919">sip_show_settings()</a>, and <a class="el" href="app__voicemail_8c_source.html#l03834">vm_delete()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02148"></a>02148 {
<a name="l02149"></a>02149    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html" title="Configuration engine structure, used to define realtime drivers.">ast_config_engine</a> *eng;
<a name="l02150"></a>02150    <span class="keywordflow">if</span> (!<a class="code" href="config_8h.html#a6344200b56202a76de8db05af680f3ac" title="Check if there&amp;#39;s any realtime engines loaded.">ast_realtime_enabled</a>()) {
<a name="l02151"></a>02151       <span class="keywordflow">return</span> 0;   <span class="comment">/* There are no engines at all so fail early */</span>
<a name="l02152"></a>02152    }
<a name="l02153"></a>02153 
<a name="l02154"></a>02154    eng = <a class="code" href="config_8c.html#a8cf64b0a69a5440faa7f1c01e6232cfa" title="Find realtime engine for realtime family.">find_engine</a>(family, NULL, 0, NULL, 0);
<a name="l02155"></a>02155    <span class="keywordflow">if</span> (eng)
<a name="l02156"></a>02156       <span class="keywordflow">return</span> 1;
<a name="l02157"></a>02157    <span class="keywordflow">return</span> 0;
<a name="l02158"></a>02158 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a710f0b2a897849572b77dd0854b8dc03"></a><!-- doxytag: member="config.h::ast_config_destroy" ref="a710f0b2a897849572b77dd0854b8dc03" args="(struct ast_config *config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_config_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroys a config. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>pointer to config data structure Free memory associated with a given config </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l00827">827</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00561">ast_category_destroy()</a>, <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="config_8c_source.html#l00575">ast_includes_destroy()</a>, <a class="el" href="config_8c_source.html#l00205">ast_config::includes</a>, <a class="el" href="config_8c_source.html#l00195">ast_category::next</a>, and <a class="el" href="config_8c_source.html#l00199">ast_config::root</a>.</p>

<p>Referenced by <a class="el" href="http_8c_source.html#l00848">__ast_http_load()</a>, <a class="el" href="res__http__post_8c_source.html#l00408">__ast_http_post_load()</a>, <a class="el" href="rtp_8c_source.html#l04739">__ast_rtp_reload()</a>, <a class="el" href="udptl_8c_source.html#l01342">__ast_udptl_reload()</a>, <a class="el" href="manager_8c_source.html#l04061">__init_manager()</a>, <a class="el" href="app__queue_8c_source.html#l06083">__queues_show()</a>, <a class="el" href="dsp_8c_source.html#l01681">_dsp_init()</a>, <a class="el" href="manager_8c_source.html#l01156">action_getconfig()</a>, <a class="el" href="manager_8c_source.html#l01257">action_getconfigjson()</a>, <a class="el" href="manager_8c_source.html#l01204">action_listcategories()</a>, <a class="el" href="manager_8c_source.html#l01481">action_updateconfig()</a>, <a class="el" href="res__adsi_8c_source.html#l01015">adsi_load()</a>, <a class="el" href="app__voicemail_8c_source.html#l11416">advanced_options()</a>, <a class="el" href="res__jabber_8c_source.html#l02907">aji_load_config()</a>, <a class="el" href="cli_8c_source.html#l01554">ast_cli_perms_init()</a>, <a class="el" href="config_8c_source.html#l02071">ast_config_load2()</a>, <a class="el" href="asterisk_8c_source.html#l02784">ast_readconfig()</a>, <a class="el" href="xmldoc_8c_source.html#l01765">ast_xmldoc_load_documentation()</a>, <a class="el" href="app__meetme_8c_source.html#l03696">conf_exec()</a>, <a class="el" href="func__config_8c_source.html#l00064">config_function_read()</a>, <a class="el" href="chan__skinny_8c_source.html#l07053">config_load()</a>, <a class="el" href="cdr__pgsql_8c_source.html#l00362">config_module()</a>, <a class="el" href="app__directory_8c_source.html#l00723">directory_exec()</a>, <a class="el" href="cdr_8c_source.html#l01396">do_reload()</a>, <a class="el" href="app__festival_8c_source.html#l00268">festival_exec()</a>, <a class="el" href="app__meetme_8c_source.html#l03546">find_conf()</a>, <a class="el" href="app__followme_8c_source.html#l00917">find_realtime()</a>, <a class="el" href="pbx__config_8c_source.html#l00672">handle_cli_dialplan_save()</a>, <a class="el" href="iax2-provision_8c_source.html#l00522">iax_provision_reload()</a>, <a class="el" href="logger_8c_source.html#l00320">init_logger_chain()</a>, <a class="el" href="app__alarmreceiver_8c_source.html#l00639">load_config()</a>, <a class="el" href="app__meetme_8c_source.html#l04446">load_config_meetme()</a>, <a class="el" href="indications_8c_source.html#l01030">load_indications()</a>, <a class="el" href="app__festival_8c_source.html#l00542">load_module()</a>, <a class="el" href="loader_8c_source.html#l00941">load_modules()</a>, <a class="el" href="res__musiconhold_8c_source.html#l01549">load_moh_classes()</a>, <a class="el" href="res__odbc_8c_source.html#l00730">load_odbc_config()</a>, <a class="el" href="app__queue_8c_source.html#l01830">load_realtime_queue()</a>, <a class="el" href="app__rpt_8c_source.html#l02224">load_rpt_vars()</a>, <a class="el" href="app__voicemail_8c_source.html#l04163">make_email_file()</a>, <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>, <a class="el" href="app__rpt_8c_source.html#l01984">node_lookup()</a>, <a class="el" href="cdr__odbc_8c_source.html#l00152">odbc_load_module()</a>, <a class="el" href="app__osplookup_8c_source.html#l01772">osp_load()</a>, <a class="el" href="codec__adpcm_8c_source.html#l00311">parse_config()</a>, <a class="el" href="pbx__config_8c_source.html#l01367">pbx_load_config()</a>, <a class="el" href="pbx__config_8c_source.html#l01608">pbx_load_users()</a>, <a class="el" href="app__voicemail_8c_source.html#l07051">play_message()</a>, <a class="el" href="app__voicemail_8c_source.html#l03977">prep_email_sub_vars()</a>, <a class="el" href="enum_8c_source.html#l00959">private_enum_init()</a>, <a class="el" href="chan__agent_8c_source.html#l01180">read_agent_config()</a>, <a class="el" href="config_8c_source.html#l01879">read_config_maps()</a>, <a class="el" href="app__directory_8c_source.html#l00382">realtime_directory()</a>, <a class="el" href="res__config__sqlite_8c_source.html#l01166">realtime_multi_handler()</a>, <a class="el" href="chan__sip_8c_source.html#l04739">realtime_peer()</a>, <a class="el" href="pbx__realtime_8c_source.html#l00079">realtime_switch_common()</a>, <a class="el" href="app__playback_8c_source.html#l00482">reload()</a>, <a class="el" href="chan__h323_8c_source.html#l02832">reload_config()</a>, <a class="el" href="app__followme_8c_source.html#l00297">reload_followme()</a>, <a class="el" href="app__queue_8c_source.html#l05650">reload_queue_rules()</a>, <a class="el" href="app__queue_8c_source.html#l05964">reload_queues()</a>, <a class="el" href="app__rpt_8c_source.html#l12919">rpt_master()</a>, <a class="el" href="asterisk_8c_source.html#l03067">run_startup_commands()</a>, <a class="el" href="chan__iax2_8c_source.html#l12493">set_config()</a>, <a class="el" href="chan__dahdi_8c_source.html#l17079">setup_dahdi()</a>, <a class="el" href="app__voicemail_8c_source.html#l10042">show_users_realtime()</a>, <a class="el" href="app__meetme_8c_source.html#l06285">sla_load_config()</a>, <a class="el" href="res__smdi_8c_source.html#l00861">smdi_load()</a>, <a class="el" href="chan__usbradio_8c_source.html#l03406">store_config()</a>, <a class="el" href="cdr__tds_8c_source.html#l00422">tds_load_module()</a>, <a class="el" href="app__playback_8c_source.html#l00517">unload_module()</a>, <a class="el" href="app__queue_8c_source.html#l01906">update_realtime_members()</a>, and <a class="el" href="app__voicemail_8c_source.html#l06307">vm_forwardoptions()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00828"></a>00828 {
<a name="l00829"></a>00829    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat, *catn;
<a name="l00830"></a>00830 
<a name="l00831"></a>00831    <span class="keywordflow">if</span> (!cfg)
<a name="l00832"></a>00832       <span class="keywordflow">return</span>;
<a name="l00833"></a>00833 
<a name="l00834"></a>00834    <a class="code" href="config_8c.html#a17aa91aa71dc55b7e95bab4bc8e4cb49">ast_includes_destroy</a>(cfg-&gt;includes);
<a name="l00835"></a>00835 
<a name="l00836"></a>00836    cat = cfg-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>;
<a name="l00837"></a>00837    <span class="keywordflow">while</span> (cat) {
<a name="l00838"></a>00838       catn = cat;
<a name="l00839"></a>00839       cat = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>;
<a name="l00840"></a>00840       <a class="code" href="config_8h.html#abd17f201d0e7c31c124dc0cd3a0d073b">ast_category_destroy</a>(catn);
<a name="l00841"></a>00841    }
<a name="l00842"></a>00842    <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cfg);
<a name="l00843"></a>00843 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7028ff4b11d7167ee4030b4d3e123d76"></a><!-- doxytag: member="config.h::ast_config_engine_deregister" ref="a7028ff4b11d7167ee4030b4d3e123d76" args="(struct ast_config_engine *del)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_config_engine_deregister </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config__engine.html">ast_config_engine</a> *&nbsp;</td>
          <td class="paramname"> <em>del</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deregister config engine. </p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>Always </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l01969">1969</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="lock_8h_source.html#l01717">ast_mutex_lock()</a>, <a class="el" href="lock_8h_source.html#l01707">ast_mutex_unlock()</a>, <a class="el" href="config_8c_source.html#l00172">config_lock</a>, <a class="el" href="devicestate_8c_source.html#l00198">last</a>, and <a class="el" href="config_8h_source.html#l00122">ast_config_engine::next</a>.</p>

<p>Referenced by <a class="el" href="res__config__curl_8c_source.html#l00605">unload_module()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01970"></a>01970 {
<a name="l01971"></a>01971    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html" title="Configuration engine structure, used to define realtime drivers.">ast_config_engine</a> *ptr, *<a class="code" href="devicestate_8c.html#a43a8def62ee15449794285cbbc0f79af">last</a>=NULL;
<a name="l01972"></a>01972 
<a name="l01973"></a>01973    <a class="code" href="lock_8h.html#ad941566de4050aa7358493af94d2ba4d">ast_mutex_lock</a>(&amp;<a class="code" href="config_8c.html#a502fc4d80b1f4d10bc516dbd85f9bd93">config_lock</a>);
<a name="l01974"></a>01974 
<a name="l01975"></a>01975    <span class="keywordflow">for</span> (ptr = <a class="code" href="config_8c.html#ae180c3d9beab00be39309fe36c32aebb">config_engine_list</a>; ptr; ptr=ptr-&gt;<a class="code" href="structast__config__engine.html#a2fccbe2a64d67715a7e133fbd4078902">next</a>) {
<a name="l01976"></a>01976       <span class="keywordflow">if</span> (ptr == del) {
<a name="l01977"></a>01977          <span class="keywordflow">if</span> (last)
<a name="l01978"></a>01978             last-&gt;<a class="code" href="structast__config__engine.html#a2fccbe2a64d67715a7e133fbd4078902">next</a> = ptr-&gt;<a class="code" href="structast__config__engine.html#a2fccbe2a64d67715a7e133fbd4078902">next</a>;
<a name="l01979"></a>01979          <span class="keywordflow">else</span>
<a name="l01980"></a>01980             <a class="code" href="config_8c.html#ae180c3d9beab00be39309fe36c32aebb">config_engine_list</a> = ptr-&gt;<a class="code" href="structast__config__engine.html#a2fccbe2a64d67715a7e133fbd4078902">next</a>;
<a name="l01981"></a>01981          <span class="keywordflow">break</span>;
<a name="l01982"></a>01982       }
<a name="l01983"></a>01983       last = ptr;
<a name="l01984"></a>01984    }
<a name="l01985"></a>01985 
<a name="l01986"></a>01986    <a class="code" href="lock_8h.html#aa9b39f0e22f44a7e7f587d4252e41a0b">ast_mutex_unlock</a>(&amp;<a class="code" href="config_8c.html#a502fc4d80b1f4d10bc516dbd85f9bd93">config_lock</a>);
<a name="l01987"></a>01987 
<a name="l01988"></a>01988    <span class="keywordflow">return</span> 0;
<a name="l01989"></a>01989 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af15c271e1708b251fc938b30baba18f1"></a><!-- doxytag: member="config.h::ast_config_engine_register" ref="af15c271e1708b251fc938b30baba18f1" args="(struct ast_config_engine *newconfig)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_config_engine_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config__engine.html">ast_config_engine</a> *&nbsp;</td>
          <td class="paramname"> <em>newconfig</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register config engine. </p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>1</em>&nbsp;</td><td>Always </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l01950">1950</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="lock_8h_source.html#l01717">ast_mutex_lock()</a>, <a class="el" href="lock_8h_source.html#l01707">ast_mutex_unlock()</a>, <a class="el" href="config_8c_source.html#l00172">config_lock</a>, <a class="el" href="logger_8h_source.html#l00141">LOG_NOTICE</a>, and <a class="el" href="config_8h_source.html#l00122">ast_config_engine::next</a>.</p>

<p>Referenced by <a class="el" href="res__config__curl_8c_source.html#l00612">load_module()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01951"></a>01951 {
<a name="l01952"></a>01952    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html" title="Configuration engine structure, used to define realtime drivers.">ast_config_engine</a> *ptr;
<a name="l01953"></a>01953 
<a name="l01954"></a>01954    <a class="code" href="lock_8h.html#ad941566de4050aa7358493af94d2ba4d">ast_mutex_lock</a>(&amp;<a class="code" href="config_8c.html#a502fc4d80b1f4d10bc516dbd85f9bd93">config_lock</a>);
<a name="l01955"></a>01955 
<a name="l01956"></a>01956    <span class="keywordflow">if</span> (!<a class="code" href="config_8c.html#ae180c3d9beab00be39309fe36c32aebb">config_engine_list</a>) {
<a name="l01957"></a>01957       <a class="code" href="config_8c.html#ae180c3d9beab00be39309fe36c32aebb">config_engine_list</a> = <span class="keyword">new</span>;
<a name="l01958"></a>01958    } <span class="keywordflow">else</span> {
<a name="l01959"></a>01959       <span class="keywordflow">for</span> (ptr = <a class="code" href="config_8c.html#ae180c3d9beab00be39309fe36c32aebb">config_engine_list</a>; ptr-&gt;<a class="code" href="structast__config__engine.html#a2fccbe2a64d67715a7e133fbd4078902">next</a>; ptr=ptr-&gt;<a class="code" href="structast__config__engine.html#a2fccbe2a64d67715a7e133fbd4078902">next</a>);
<a name="l01960"></a>01960       ptr-&gt;<a class="code" href="structast__config__engine.html#a2fccbe2a64d67715a7e133fbd4078902">next</a> = <span class="keyword">new</span>;
<a name="l01961"></a>01961    }
<a name="l01962"></a>01962 
<a name="l01963"></a>01963    <a class="code" href="lock_8h.html#aa9b39f0e22f44a7e7f587d4252e41a0b">ast_mutex_unlock</a>(&amp;<a class="code" href="config_8c.html#a502fc4d80b1f4d10bc516dbd85f9bd93">config_lock</a>);
<a name="l01964"></a>01964    <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>,<span class="stringliteral">&quot;Registered Config Engine %s\n&quot;</span>, new-&gt;name);
<a name="l01965"></a>01965 
<a name="l01966"></a>01966    <span class="keywordflow">return</span> 1;
<a name="l01967"></a>01967 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6884d439424ba2be31ef259213da4e8b"></a><!-- doxytag: member="config.h::ast_config_get_current_category" ref="a6884d439424ba2be31ef259213da4e8b" args="(const struct ast_config *cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__category.html">ast_category</a>* ast_config_get_current_category </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the current category name being built. API for backend configuration <a class="el" href="structengines.html">engines</a> while building a configuration set. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l00845">845</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00201">ast_config::current</a>.</p>

<p>Referenced by <a class="el" href="res__config__curl_8c_source.html#l00518">config_curl()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00797">config_odbc()</a>, and <a class="el" href="config_8c_source.html#l01176">config_text_file_load()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00846"></a>00846 {
<a name="l00847"></a>00847    <span class="keywordflow">return</span> cfg-&gt;<a class="code" href="structast__config.html#a204ede9a191a91abc1968f94973de556">current</a>;
<a name="l00848"></a>00848 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a721d5cd60abda2bdd96838336dc09669"></a><!-- doxytag: member="config.h::ast_config_internal_load" ref="a721d5cd60abda2bdd96838336dc09669" args="(const char *configfile, struct ast_config *cfg, struct ast_flags flags, const char *suggested_incl_file, const char *who_asked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__config.html">ast_config</a>* ast_config_internal_load </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>configfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structast__flags.html">ast_flags</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>suggested_incl_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>who_asked</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l02031">2031</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="config_8h_source.html#l00050">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="config_8h_source.html#l00049">CONFIG_STATUS_FILEUNCHANGED</a>, <a class="el" href="cdr__sqlite_8c_source.html#l00059">db</a>, <a class="el" href="config_8c_source.html#l01992">find_engine()</a>, <a class="el" href="config_8c_source.html#l00203">ast_config::include_level</a>, <a class="el" href="config_8h_source.html#l00113">ast_config_engine::load_func</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="config_8c_source.html#l00204">ast_config::max_include_level</a>, and <a class="el" href="cdr__odbc_8c_source.html#l00052">table</a>.</p>

<p>Referenced by <a class="el" href="res__config__sqlite_8c_source.html#l00851">add_cfg_entry()</a>, <a class="el" href="config_8c_source.html#l02071">ast_config_load2()</a>, <a class="el" href="res__config__curl_8c_source.html#l00518">config_curl()</a>, <a class="el" href="res__config__ldap_8c_source.html#l01015">config_ldap()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00797">config_odbc()</a>, <a class="el" href="res__config__pgsql_8c_source.html#l01030">config_pgsql()</a>, <a class="el" href="config_8c_source.html#l00922">process_text_line()</a>, and <a class="el" href="config_8c_source.html#l01879">read_config_maps()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02032"></a>02032 {
<a name="l02033"></a>02033    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>[256];
<a name="l02034"></a>02034    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>[256];
<a name="l02035"></a>02035    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html" title="Configuration engine structure, used to define realtime drivers.">ast_config_engine</a> *loader = &amp;<a class="code" href="config_8c.html#afbb92ca9cc023bb4f0ffdf3203b7de98">text_file_engine</a>;
<a name="l02036"></a>02036    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *result; 
<a name="l02037"></a>02037 
<a name="l02038"></a>02038    <span class="comment">/* The config file itself bumps include_level by 1 */</span>
<a name="l02039"></a>02039    <span class="keywordflow">if</span> (cfg-&gt;<a class="code" href="structast__config.html#a98a1a362d95d774ba9bf42efd1706700">max_include_level</a> &gt; 0 &amp;&amp; cfg-&gt;<a class="code" href="structast__config.html#a9889e4b9ce57e4055f9c11bacf89e50a">include_level</a> == cfg-&gt;<a class="code" href="structast__config.html#a98a1a362d95d774ba9bf42efd1706700">max_include_level</a> + 1) {
<a name="l02040"></a>02040       <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Maximum Include level (%d) exceeded\n&quot;</span>, cfg-&gt;<a class="code" href="structast__config.html#a98a1a362d95d774ba9bf42efd1706700">max_include_level</a>);
<a name="l02041"></a>02041       <span class="keywordflow">return</span> NULL;
<a name="l02042"></a>02042    }
<a name="l02043"></a>02043 
<a name="l02044"></a>02044    cfg-&gt;<a class="code" href="structast__config.html#a9889e4b9ce57e4055f9c11bacf89e50a">include_level</a>++;
<a name="l02045"></a>02045 
<a name="l02046"></a>02046    <span class="keywordflow">if</span> (strcmp(filename, <a class="code" href="config_8c.html#ad7d518478e64aef37f9e57f74a0ec12a">extconfig_conf</a>) &amp;&amp; strcmp(filename, <span class="stringliteral">&quot;asterisk.conf&quot;</span>) &amp;&amp; <a class="code" href="config_8c.html#ae180c3d9beab00be39309fe36c32aebb">config_engine_list</a>) {
<a name="l02047"></a>02047       <span class="keyword">struct </span><a class="code" href="structast__config__engine.html" title="Configuration engine structure, used to define realtime drivers.">ast_config_engine</a> *eng;
<a name="l02048"></a>02048 
<a name="l02049"></a>02049       eng = <a class="code" href="config_8c.html#a8cf64b0a69a5440faa7f1c01e6232cfa" title="Find realtime engine for realtime family.">find_engine</a>(filename, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l02050"></a>02050 
<a name="l02051"></a>02051 
<a name="l02052"></a>02052       <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#a23dbd2b9dbb0dae32ee8e4a89674c954">load_func</a>) {
<a name="l02053"></a>02053          loader = eng;
<a name="l02054"></a>02054       } <span class="keywordflow">else</span> {
<a name="l02055"></a>02055          eng = <a class="code" href="config_8c.html#a8cf64b0a69a5440faa7f1c01e6232cfa" title="Find realtime engine for realtime family.">find_engine</a>(<span class="stringliteral">&quot;global&quot;</span>, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l02056"></a>02056          <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#a23dbd2b9dbb0dae32ee8e4a89674c954">load_func</a>)
<a name="l02057"></a>02057             loader = eng;
<a name="l02058"></a>02058       }
<a name="l02059"></a>02059    }
<a name="l02060"></a>02060 
<a name="l02061"></a>02061    result = loader-&gt;<a class="code" href="structast__config__engine.html#a23dbd2b9dbb0dae32ee8e4a89674c954">load_func</a>(db, table, filename, cfg, flags, suggested_include_file, who_asked);
<a name="l02062"></a>02062 
<a name="l02063"></a>02063    <span class="keywordflow">if</span> (result &amp;&amp; result != <a class="code" href="config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a> &amp;&amp; result != <a class="code" href="config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a>)
<a name="l02064"></a>02064       result-&gt;<a class="code" href="structast__config.html#a9889e4b9ce57e4055f9c11bacf89e50a">include_level</a>--;
<a name="l02065"></a>02065    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (result != <a class="code" href="config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>)
<a name="l02066"></a>02066       cfg-&gt;<a class="code" href="structast__config.html#a9889e4b9ce57e4055f9c11bacf89e50a">include_level</a>--;
<a name="l02067"></a>02067 
<a name="l02068"></a>02068    <span class="keywordflow">return</span> result;
<a name="l02069"></a>02069 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aab3eac8fa82a86a93c074deb7b77dbc9"></a><!-- doxytag: member="config.h::ast_config_load2" ref="aab3eac8fa82a86a93c074deb7b77dbc9" args="(const char *filename, const char *who_asked, struct ast_flags flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__config.html">ast_config</a>* ast_config_load2 </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>who_asked</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structast__flags.html">ast_flags</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load a config file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>path of file to open. If no preceding '/' character, path is considered relative to AST_CONFIG_DIR Create a config structure from a given configuration file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>who_asked</em>&nbsp;</td><td>The module which is making this request. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Optional flags: CONFIG_FLAG_WITHCOMMENTS - load the file with comments intact; CONFIG_FLAG_FILEUNCHANGED - check the file mtime and return CONFIG_STATUS_FILEUNCHANGED if the mtime is the same; or CONFIG_FLAG_NOCACHE - don't cache file mtime (main purpose of this option is to save memory on temporary files).</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>an <a class="el" href="structast__config.html">ast_config</a> data structure on success </dd></dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l02071">2071</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00827">ast_config_destroy()</a>, <a class="el" href="config_8c_source.html#l02031">ast_config_internal_load()</a>, <a class="el" href="config_8c_source.html#l00673">ast_config_new()</a>, <a class="el" href="config_8h_source.html#l00050">CONFIG_STATUS_FILEINVALID</a>, and <a class="el" href="config_8h_source.html#l00049">CONFIG_STATUS_FILEUNCHANGED</a>.</p>

<p>Referenced by <a class="el" href="http_8c_source.html#l00848">__ast_http_load()</a>, <a class="el" href="res__http__post_8c_source.html#l00408">__ast_http_post_load()</a>, <a class="el" href="rtp_8c_source.html#l04739">__ast_rtp_reload()</a>, <a class="el" href="udptl_8c_source.html#l01342">__ast_udptl_reload()</a>, <a class="el" href="manager_8c_source.html#l04061">__init_manager()</a>, <a class="el" href="dsp_8c_source.html#l01681">_dsp_init()</a>, <a class="el" href="manager_8c_source.html#l01156">action_getconfig()</a>, <a class="el" href="manager_8c_source.html#l01257">action_getconfigjson()</a>, <a class="el" href="manager_8c_source.html#l01204">action_listcategories()</a>, <a class="el" href="manager_8c_source.html#l01481">action_updateconfig()</a>, <a class="el" href="cli_8c_source.html#l01554">ast_cli_perms_init()</a>, <a class="el" href="asterisk_8c_source.html#l02784">ast_readconfig()</a>, <a class="el" href="xmldoc_8c_source.html#l01765">ast_xmldoc_load_documentation()</a>, <a class="el" href="cdr_8c_source.html#l01396">do_reload()</a>, <a class="el" href="iax2-provision_8c_source.html#l00522">iax_provision_reload()</a>, <a class="el" href="logger_8c_source.html#l00320">init_logger_chain()</a>, <a class="el" href="features_8c_source.html#l03672">load_config()</a>, <a class="el" href="indications_8c_source.html#l01030">load_indications()</a>, <a class="el" href="loader_8c_source.html#l00941">load_modules()</a>, <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>, <a class="el" href="enum_8c_source.html#l00959">private_enum_init()</a>, and <a class="el" href="asterisk_8c_source.html#l03067">run_startup_commands()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02072"></a>02072 {
<a name="l02073"></a>02073    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *cfg;
<a name="l02074"></a>02074    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *result;
<a name="l02075"></a>02075 
<a name="l02076"></a>02076    cfg = <a class="code" href="config_8h.html#a45e1a284d7d84c4b4a316764fbb887fb" title="Create a new base configuration structure.">ast_config_new</a>();
<a name="l02077"></a>02077    <span class="keywordflow">if</span> (!cfg)
<a name="l02078"></a>02078       <span class="keywordflow">return</span> NULL;
<a name="l02079"></a>02079 
<a name="l02080"></a>02080    result = <a class="code" href="config_8h.html#a721d5cd60abda2bdd96838336dc09669">ast_config_internal_load</a>(filename, cfg, flags, <span class="stringliteral">&quot;&quot;</span>, who_asked);
<a name="l02081"></a>02081    <span class="keywordflow">if</span> (!result || result == <a class="code" href="config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a> || result == <a class="code" href="config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>)
<a name="l02082"></a>02082       <a class="code" href="config_8h.html#a710f0b2a897849572b77dd0854b8dc03" title="Destroys a config.">ast_config_destroy</a>(cfg);
<a name="l02083"></a>02083 
<a name="l02084"></a>02084    <span class="keywordflow">return</span> result;
<a name="l02085"></a>02085 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a45e1a284d7d84c4b4a316764fbb887fb"></a><!-- doxytag: member="config.h::ast_config_new" ref="a45e1a284d7d84c4b4a316764fbb887fb" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__config.html">ast_config</a>* ast_config_new </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new base configuration structure. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l00673">673</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00072">ast_calloc</a>, <a class="el" href="cdr__csv_8c_source.html#l00054">config</a>, <a class="el" href="config_8c_source.html#l00175">MAX_INCLUDE_LEVEL</a>, and <a class="el" href="config_8c_source.html#l00204">ast_config::max_include_level</a>.</p>

<p>Referenced by <a class="el" href="config_8c_source.html#l02071">ast_config_load2()</a>, <a class="el" href="config_8c_source.html#l01879">read_config_maps()</a>, <a class="el" href="res__config__curl_8c_source.html#l00128">realtime_multi_curl()</a>, <a class="el" href="res__config__sqlite_8c_source.html#l01166">realtime_multi_handler()</a>, <a class="el" href="res__config__ldap_8c_source.html#l00939">realtime_multi_ldap()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00256">realtime_multi_odbc()</a>, and <a class="el" href="res__config__pgsql_8c_source.html#l00418">realtime_multi_pgsql()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00674"></a>00674 {
<a name="l00675"></a>00675    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *<a class="code" href="cdr__csv_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>;
<a name="l00676"></a>00676 
<a name="l00677"></a>00677    <span class="keywordflow">if</span> ((config = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*config))))
<a name="l00678"></a>00678       config-&gt;<a class="code" href="structast__config.html#a98a1a362d95d774ba9bf42efd1706700">max_include_level</a> = <a class="code" href="config_8c.html#aafe4bba8deb3c1d5d016032a4c1abc14">MAX_INCLUDE_LEVEL</a>;
<a name="l00679"></a>00679    <span class="keywordflow">return</span> config;
<a name="l00680"></a>00680 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad9fd2625614158b152434e45acf1d78b"></a><!-- doxytag: member="config.h::ast_config_option" ref="ad9fd2625614158b152434e45acf1d78b" args="(struct ast_config *cfg, const char *cat, const char *var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_config_option </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>cat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve a configuration variable within the configuration set. Retrieves the named variable <code>var</code> within category <code>cat</code> of configuration set <code>cfg</code>. If not found, attempts to retrieve the named variable <code>var</code> from within category <em>general</em>. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Value of <code>var</code>, or NULL if not found. </dd></dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l00424">424</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00435">ast_variable_retrieve()</a>.</p>

<p>Referenced by <a class="el" href="app__directory_8c_source.html#l00505">AST_LIST_HEAD_NOLOCK()</a>, <a class="el" href="app__voicemail_8c_source.html#l10603">load_config()</a>, and <a class="el" href="pbx__config_8c_source.html#l01608">pbx_load_users()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00425"></a>00425 {
<a name="l00426"></a>00426    <span class="keyword">const</span> <span class="keywordtype">char</span> *tmp;
<a name="l00427"></a>00427    tmp = <a class="code" href="config_8h.html#ab87fa38c79226e5a0105ad9d2e2e9ae5" title="Gets a variable.">ast_variable_retrieve</a>(cfg, cat, <a class="code" href="ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>);
<a name="l00428"></a>00428    <span class="keywordflow">if</span> (!tmp) {
<a name="l00429"></a>00429       tmp = <a class="code" href="config_8h.html#ab87fa38c79226e5a0105ad9d2e2e9ae5" title="Gets a variable.">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <a class="code" href="ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>);
<a name="l00430"></a>00430    }
<a name="l00431"></a>00431    <span class="keywordflow">return</span> tmp;
<a name="l00432"></a>00432 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a781df2d99cdb5c37b7028be1bea7c3bf"></a><!-- doxytag: member="config.h::ast_config_set_current_category" ref="a781df2d99cdb5c37b7028be1bea7c3bf" args="(struct ast_config *cfg, const struct ast_category *cat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_config_set_current_category </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="paramname"> <em>cat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the category within the configuration as being current. API for backend configuration <a class="el" href="structengines.html">engines</a> while building a configuration set. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l00850">850</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00201">ast_config::current</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00851"></a>00851 {
<a name="l00852"></a>00852    <span class="comment">/* cast below is just to silence compiler warning about dropping &quot;const&quot; */</span>
<a name="l00853"></a>00853    cfg-&gt;<a class="code" href="structast__config.html#a204ede9a191a91abc1968f94973de556">current</a> = (<span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *) cat;
<a name="l00854"></a>00854 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a473721b764b20c167c95b99239bc0654"></a><!-- doxytag: member="config.h::ast_config_text_file_save" ref="a473721b764b20c167c95b99239bc0654" args="(const char *filename, const struct ast_config *cfg, const char *generator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_config_text_file_save </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>generator</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l01591">1591</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="astobj2_8h_source.html#l00727">ao2_container_alloc</a>, <a class="el" href="astobj2_8h_source.html#l00459">ao2_ref</a>, <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="linkedlists_8h_source.html#l00428">AST_LIST_LAST</a>, <a class="el" href="linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="logger_8h_source.html#l00220">ast_verb</a>, <a class="el" href="config_8h_source.html#l00083">ast_variable::blanklines</a>, <a class="el" href="config_8c_source.html#l00063">ast_comment::cmt</a>, <a class="el" href="private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="config_8c_source.html#l00211">ast_config_include::exec</a>, <a class="el" href="config_8c_source.html#l00212">ast_config_include::exec_file</a>, <a class="el" href="format__g726_8c_source.html#l00177">f</a>, <a class="el" href="config_8h_source.html#l00079">ast_variable::file</a>, <a class="el" href="config_8c_source.html#l00187">ast_category::file</a>, <a class="el" href="config_8c_source.html#l01492">gen_header()</a>, <a class="el" href="config_8c_source.html#l00137">hash_string()</a>, <a class="el" href="config_8c_source.html#l00157">hashtab_compare_strings()</a>, <a class="el" href="config_8c_source.html#l00185">ast_category::ignored</a>, <a class="el" href="config_8c_source.html#l00209">ast_config_include::include_location_file</a>, <a class="el" href="config_8c_source.html#l00210">ast_config_include::include_location_lineno</a>, <a class="el" href="config_8c_source.html#l00213">ast_config_include::included_file</a>, <a class="el" href="config_8c_source.html#l00205">ast_config::includes</a>, <a class="el" href="config_8c_source.html#l01568">insert_leading_blank_lines()</a>, <a class="el" href="config_8c_source.html#l00179">ast_category_template_instance::inst</a>, <a class="el" href="config_8h_source.html#l00081">ast_variable::lineno</a>, <a class="el" href="config_8c_source.html#l00188">ast_category::lineno</a>, <a class="el" href="config_8h_source.html#l00075">ast_variable::name</a>, <a class="el" href="config_8c_source.html#l00178">ast_category_template_instance::name</a>, <a class="el" href="config_8c_source.html#l00184">ast_category::name</a>, <a class="el" href="config_8c_source.html#l00195">ast_category::next</a>, <a class="el" href="config_8h_source.html#l00077">ast_variable::next</a>, <a class="el" href="config_8c_source.html#l00062">ast_comment::next</a>, <a class="el" href="config_8c_source.html#l00217">ast_config_include::next</a>, <a class="el" href="config_8h_source.html#l00082">ast_variable::object</a>, <a class="el" href="asterisk_8c_source.html#l00175">option_debug</a>, <a class="el" href="config_8c_source.html#l00216">ast_config_include::output</a>, <a class="el" href="config_8h_source.html#l00084">ast_variable::precomments</a>, <a class="el" href="config_8c_source.html#l00190">ast_category::precomments</a>, <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>, <a class="el" href="config_8c_source.html#l00199">ast_config::root</a>, <a class="el" href="config_8h_source.html#l00085">ast_variable::sameline</a>, <a class="el" href="config_8c_source.html#l00191">ast_category::sameline</a>, <a class="el" href="config_8c_source.html#l01520">set_fn()</a>, <a class="el" href="structast__category.html#aae97cd31a5d99cca5025058686aac6d7">ast_category::template_instances</a>, <a class="el" href="config_8h_source.html#l00086">ast_variable::trailing</a>, <a class="el" href="config_8c_source.html#l00192">ast_category::trailing</a>, <a class="el" href="config_8h_source.html#l00076">ast_variable::value</a>, and <a class="el" href="ast__expr2f_8c_source.html#l00613">var</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l01481">action_updateconfig()</a>, <a class="el" href="config_8c_source.html#l01586">config_text_file_save()</a>, <a class="el" href="app__voicemail_8c_source.html#l01357">vm_change_password()</a>, and <a class="el" href="app__voicemail_8c_source.html#l06307">vm_forwardoptions()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01592"></a>01592 {
<a name="l01593"></a>01593    FILE *<a class="code" href="format__g726_8c.html#a6add0b75a88c25db4ccbf690acda6d7f">f</a>;
<a name="l01594"></a>01594    <span class="keywordtype">char</span> fn[256];
<a name="l01595"></a>01595    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *<a class="code" href="ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;
<a name="l01596"></a>01596    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat;
<a name="l01597"></a>01597    <span class="keyword">struct </span><a class="code" href="structast__comment.html" title="Structure to keep comments for rewriting configuration files.">ast_comment</a> *<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>;
<a name="l01598"></a>01598    <span class="keyword">struct </span><a class="code" href="structast__config__include.html">ast_config_include</a> *incl;
<a name="l01599"></a>01599    <span class="keywordtype">int</span> blanklines = 0;
<a name="l01600"></a>01600    <span class="keyword">struct </span><a class="code" href="structao2__container.html">ao2_container</a> *fileset = <a class="code" href="astobj2_8h.html#a82534c91be59ec9a3d3318ec85ac5695">ao2_container_alloc</a>(180000, <a class="code" href="config_8c.html#aad5ce0e28669396c43aae46f17a3453a">hash_string</a>, <a class="code" href="config_8c.html#a6da577f4b98c9ab78c60c829375acaa1">hashtab_compare_strings</a>);
<a name="l01601"></a>01601    <span class="keyword">struct </span><a class="code" href="structinclfile.html">inclfile</a> *fi = 0;
<a name="l01602"></a>01602 
<a name="l01603"></a>01603    <span class="comment">/* reset all the output flags, in case this isn&apos;t our first time saving this data */</span>
<a name="l01604"></a>01604 
<a name="l01605"></a>01605    <span class="keywordflow">for</span> (incl=cfg-&gt;<a class="code" href="structast__config.html#acb049f8b410c47aebfde624a7de10819">includes</a>; incl; incl = incl-&gt;<a class="code" href="structast__config__include.html#ae2104fb51ee9f10eb0006df77fb8d504">next</a>)
<a name="l01606"></a>01606       incl-&gt;<a class="code" href="structast__config__include.html#a76a055a540e12c7206a5004afea1f66e">output</a> = 0;
<a name="l01607"></a>01607 
<a name="l01608"></a>01608    <span class="comment">/* go thru all the inclusions and make sure all the files involved (configfile plus all its inclusions)</span>
<a name="l01609"></a>01609 <span class="comment">      are all truncated to zero bytes and have that nice header*/</span>
<a name="l01610"></a>01610 
<a name="l01611"></a>01611    <span class="keywordflow">for</span> (incl=cfg-&gt;<a class="code" href="structast__config.html#acb049f8b410c47aebfde624a7de10819">includes</a>; incl; incl = incl-&gt;<a class="code" href="structast__config__include.html#ae2104fb51ee9f10eb0006df77fb8d504">next</a>)
<a name="l01612"></a>01612    {
<a name="l01613"></a>01613       <span class="keywordflow">if</span> (!incl-&gt;<a class="code" href="structast__config__include.html#a4fb0f078574c9bdeeaee433d411298c9">exec</a>) { <span class="comment">/* leave the execs alone -- we&apos;ll write out the #exec directives, but won&apos;t zero out the include files or exec files*/</span>
<a name="l01614"></a>01614          FILE *f1;
<a name="l01615"></a>01615 
<a name="l01616"></a>01616          <a class="code" href="config_8c.html#ac254b8e1045d65f111e303ccdc14c437">set_fn</a>(fn, <span class="keyword">sizeof</span>(fn), incl-&gt;<a class="code" href="structast__config__include.html#a5d894d3ac3a63ddbe13305c29b0aceb8">included_file</a>, configfile, fileset, &amp;fi); <span class="comment">/* normally, fn is just set to incl-&gt;included_file, prepended with config dir if relative */</span>
<a name="l01617"></a>01617          f1 = fopen(fn,<span class="stringliteral">&quot;w&quot;</span>);
<a name="l01618"></a>01618          <span class="keywordflow">if</span> (f1) {
<a name="l01619"></a>01619             <a class="code" href="config_8c.html#a89aa1c2a335e01661693101115778a9a">gen_header</a>(f1, configfile, fn, <a class="code" href="app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a>);
<a name="l01620"></a>01620             fclose(f1); <span class="comment">/* this should zero out the file */</span>
<a name="l01621"></a>01621          } <span class="keywordflow">else</span> {
<a name="l01622"></a>01622             <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Unable to open for writing: %s\n&quot;</span>, fn);
<a name="l01623"></a>01623             <a class="code" href="logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Unable to write %s (%s)&quot;</span>, fn, strerror(errno));
<a name="l01624"></a>01624          }
<a name="l01625"></a>01625          <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fi,-1); <span class="comment">/* we are giving up this reference to the object ptd to by fi */</span>
<a name="l01626"></a>01626          fi = 0;
<a name="l01627"></a>01627       }
<a name="l01628"></a>01628    }
<a name="l01629"></a>01629 
<a name="l01630"></a>01630    <a class="code" href="config_8c.html#ac254b8e1045d65f111e303ccdc14c437">set_fn</a>(fn, <span class="keyword">sizeof</span>(fn), 0, configfile, fileset, &amp;fi); <span class="comment">/* just set fn to absolute ver of configfile */</span>
<a name="l01631"></a>01631 <span class="preprocessor">#ifdef __CYGWIN__ </span>
<a name="l01632"></a>01632 <span class="preprocessor"></span>   <span class="keywordflow">if</span> ((f = fopen(fn, <span class="stringliteral">&quot;w+&quot;</span>))) {
<a name="l01633"></a>01633 <span class="preprocessor">#else</span>
<a name="l01634"></a>01634 <span class="preprocessor"></span>   <span class="keywordflow">if</span> ((f = fopen(fn, <span class="stringliteral">&quot;w&quot;</span>))) {
<a name="l01635"></a>01635 <span class="preprocessor">#endif       </span>
<a name="l01636"></a>01636 <span class="preprocessor"></span>      <a class="code" href="logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Saving &apos;%s&apos;: &quot;</span>, fn);
<a name="l01637"></a>01637       <a class="code" href="config_8c.html#a89aa1c2a335e01661693101115778a9a">gen_header</a>(f, configfile, fn, <a class="code" href="app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a>);
<a name="l01638"></a>01638       cat = cfg-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>;
<a name="l01639"></a>01639       fclose(f);
<a name="l01640"></a>01640       <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fi,-1); <span class="comment">/* we are giving up this reference to the object ptd to by fi */</span>
<a name="l01641"></a>01641       
<a name="l01642"></a>01642       <span class="comment">/* from here out, we open each involved file and concat the stuff we need to add to the end and immediately close... */</span>
<a name="l01643"></a>01643       <span class="comment">/* since each var, cat, and associated comments can come from any file, we have to be </span>
<a name="l01644"></a>01644 <span class="comment">         mobile, and open each file, print, and close it on an entry-by-entry basis */</span>
<a name="l01645"></a>01645 
<a name="l01646"></a>01646       <span class="keywordflow">while</span> (cat) {
<a name="l01647"></a>01647          <a class="code" href="config_8c.html#ac254b8e1045d65f111e303ccdc14c437">set_fn</a>(fn, <span class="keyword">sizeof</span>(fn), cat-&gt;<a class="code" href="structast__category.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>, configfile, fileset, &amp;fi);
<a name="l01648"></a>01648          f = fopen(fn, <span class="stringliteral">&quot;a&quot;</span>);
<a name="l01649"></a>01649          <span class="keywordflow">if</span> (!f)
<a name="l01650"></a>01650          {
<a name="l01651"></a>01651             <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Unable to open for writing: %s\n&quot;</span>, fn);
<a name="l01652"></a>01652             <a class="code" href="logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Unable to write %s (%s)&quot;</span>, fn, strerror(errno));
<a name="l01653"></a>01653             <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fileset, -1);
<a name="l01654"></a>01654             <span class="keywordflow">return</span> -1;
<a name="l01655"></a>01655          }
<a name="l01656"></a>01656 
<a name="l01657"></a>01657          <span class="comment">/* dump any includes that happen before this category header */</span>
<a name="l01658"></a>01658          <span class="keywordflow">for</span> (incl=cfg-&gt;<a class="code" href="structast__config.html#acb049f8b410c47aebfde624a7de10819">includes</a>; incl; incl = incl-&gt;<a class="code" href="structast__config__include.html#ae2104fb51ee9f10eb0006df77fb8d504">next</a>) {
<a name="l01659"></a>01659             <span class="keywordflow">if</span> (strcmp(incl-&gt;<a class="code" href="structast__config__include.html#ad2a400871412e45079d5b0b09dbe34be">include_location_file</a>, cat-&gt;<a class="code" href="structast__category.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>) == 0){
<a name="l01660"></a>01660                <span class="keywordflow">if</span> (cat-&gt;<a class="code" href="structast__category.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a> &gt; incl-&gt;<a class="code" href="structast__config__include.html#ae2135f6bf6382a1e687d07ccdf811d64">include_location_lineno</a> &amp;&amp; !incl-&gt;<a class="code" href="structast__config__include.html#a76a055a540e12c7206a5004afea1f66e">output</a>) {
<a name="l01661"></a>01661                   <span class="keywordflow">if</span> (incl-&gt;<a class="code" href="structast__config__include.html#a4fb0f078574c9bdeeaee433d411298c9">exec</a>)
<a name="l01662"></a>01662                      fprintf(f,<span class="stringliteral">&quot;#exec \&quot;%s\&quot;\n&quot;</span>, incl-&gt;<a class="code" href="structast__config__include.html#ac06a64b674f41fa8d0d3c86b9dffa3c4">exec_file</a>);
<a name="l01663"></a>01663                   <span class="keywordflow">else</span>
<a name="l01664"></a>01664                      fprintf(f,<span class="stringliteral">&quot;#include \&quot;%s\&quot;\n&quot;</span>, incl-&gt;<a class="code" href="structast__config__include.html#a5d894d3ac3a63ddbe13305c29b0aceb8">included_file</a>);
<a name="l01665"></a>01665                   incl-&gt;<a class="code" href="structast__config__include.html#a76a055a540e12c7206a5004afea1f66e">output</a> = 1;
<a name="l01666"></a>01666                }
<a name="l01667"></a>01667             }
<a name="l01668"></a>01668          }
<a name="l01669"></a>01669 
<a name="l01670"></a>01670          <a class="code" href="config_8c.html#a6cb06877fd5a30e2e1e972b9de02894f">insert_leading_blank_lines</a>(f, fi, cat-&gt;<a class="code" href="structast__category.html#a80bf10e9bcb9c00a7a59051a77a620cf">precomments</a>, cat-&gt;<a class="code" href="structast__category.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);
<a name="l01671"></a>01671          <span class="comment">/* Dump section with any appropriate comment */</span>
<a name="l01672"></a>01672          <span class="keywordflow">for</span> (cmt = cat-&gt;<a class="code" href="structast__category.html#a80bf10e9bcb9c00a7a59051a77a620cf">precomments</a>; cmt; cmt=cmt-&gt;<a class="code" href="structast__comment.html#adab84eadfeb3d2c35ac0a185b9345e8f">next</a>) {
<a name="l01673"></a>01673             <span class="keywordtype">char</span> *cmtp = cmt-&gt;<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>;
<a name="l01674"></a>01674             <span class="keywordflow">while</span> (*cmtp == <span class="charliteral">&apos;;&apos;</span> &amp;&amp; *(cmtp+1) == <span class="charliteral">&apos;!&apos;</span>) {
<a name="l01675"></a>01675                <span class="keywordtype">char</span> *cmtp2 = strchr(cmtp+1, <span class="charliteral">&apos;\n&apos;</span>);
<a name="l01676"></a>01676                <span class="keywordflow">if</span> (cmtp2)
<a name="l01677"></a>01677                   cmtp = cmtp2+1;
<a name="l01678"></a>01678                <span class="keywordflow">else</span> cmtp = 0;
<a name="l01679"></a>01679             }
<a name="l01680"></a>01680             <span class="keywordflow">if</span> (cmtp)
<a name="l01681"></a>01681                fprintf(f,<span class="stringliteral">&quot;%s&quot;</span>, cmtp);
<a name="l01682"></a>01682          }
<a name="l01683"></a>01683          fprintf(f, <span class="stringliteral">&quot;[%s]&quot;</span>, cat-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a>);
<a name="l01684"></a>01684          <span class="keywordflow">if</span> (cat-&gt;<a class="code" href="structast__category.html#a973274447fb1c6eb9b27c5a54505bb69">ignored</a> || !<a class="code" href="linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05" title="Checks whether the specified list contains any entries.">AST_LIST_EMPTY</a>(&amp;cat-&gt;<a class="code" href="structast__category.html#aae97cd31a5d99cca5025058686aac6d7">template_instances</a>)) {
<a name="l01685"></a>01685             fprintf(f, <span class="stringliteral">&quot;(&quot;</span>);
<a name="l01686"></a>01686             <span class="keywordflow">if</span> (cat-&gt;<a class="code" href="structast__category.html#a973274447fb1c6eb9b27c5a54505bb69">ignored</a>) {
<a name="l01687"></a>01687                fprintf(f, <span class="stringliteral">&quot;!&quot;</span>);
<a name="l01688"></a>01688             }
<a name="l01689"></a>01689             <span class="keywordflow">if</span> (cat-&gt;<a class="code" href="structast__category.html#a973274447fb1c6eb9b27c5a54505bb69">ignored</a> &amp;&amp; !<a class="code" href="linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05" title="Checks whether the specified list contains any entries.">AST_LIST_EMPTY</a>(&amp;cat-&gt;<a class="code" href="structast__category.html#aae97cd31a5d99cca5025058686aac6d7">template_instances</a>)) {
<a name="l01690"></a>01690                fprintf(f, <span class="stringliteral">&quot;,&quot;</span>);
<a name="l01691"></a>01691             }
<a name="l01692"></a>01692             <span class="keywordflow">if</span> (!<a class="code" href="linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05" title="Checks whether the specified list contains any entries.">AST_LIST_EMPTY</a>(&amp;cat-&gt;<a class="code" href="structast__category.html#aae97cd31a5d99cca5025058686aac6d7">template_instances</a>)) {
<a name="l01693"></a>01693                <span class="keyword">struct </span><a class="code" href="structast__category__template__instance.html">ast_category_template_instance</a> *x;
<a name="l01694"></a>01694                <a class="code" href="linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef" title="Loops over (traverses) the entries in a list.">AST_LIST_TRAVERSE</a>(&amp;cat-&gt;<a class="code" href="structast__category.html#aae97cd31a5d99cca5025058686aac6d7">template_instances</a>, x, <a class="code" href="structast__category__template__instance.html#ae8ee399f9e4434148eedc7de9c63bf18">next</a>) {
<a name="l01695"></a>01695                   fprintf(f,<span class="stringliteral">&quot;%s&quot;</span>,x-&gt;<a class="code" href="structast__category__template__instance.html#a3777dbae63a15da001b2baa317a25149">name</a>);
<a name="l01696"></a>01696                   <span class="keywordflow">if</span> (x != <a class="code" href="linkedlists_8h.html#a1e37109bb72d95999821eb45f28c261c" title="Returns the last entry contained in a list.">AST_LIST_LAST</a>(&amp;cat-&gt;<a class="code" href="structast__category.html#aae97cd31a5d99cca5025058686aac6d7">template_instances</a>))
<a name="l01697"></a>01697                      fprintf(f,<span class="stringliteral">&quot;,&quot;</span>);
<a name="l01698"></a>01698                }
<a name="l01699"></a>01699             }
<a name="l01700"></a>01700             fprintf(f, <span class="stringliteral">&quot;)&quot;</span>);
<a name="l01701"></a>01701          }
<a name="l01702"></a>01702          <span class="keywordflow">for</span>(cmt = cat-&gt;<a class="code" href="structast__category.html#a6e4312227f9a7570709abf7f686f1cfe">sameline</a>; cmt; cmt=cmt-&gt;<a class="code" href="structast__comment.html#adab84eadfeb3d2c35ac0a185b9345e8f">next</a>)
<a name="l01703"></a>01703          {
<a name="l01704"></a>01704             fprintf(f,<span class="stringliteral">&quot;%s&quot;</span>, cmt-&gt;<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>);
<a name="l01705"></a>01705          }
<a name="l01706"></a>01706          <span class="keywordflow">if</span> (!cat-&gt;<a class="code" href="structast__category.html#a6e4312227f9a7570709abf7f686f1cfe">sameline</a>)
<a name="l01707"></a>01707             fprintf(f,<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01708"></a>01708          <span class="keywordflow">for</span> (cmt = cat-&gt;<a class="code" href="structast__category.html#ab09dbd177767543015efa3ba28fab03a">trailing</a>; cmt; cmt=cmt-&gt;<a class="code" href="structast__comment.html#adab84eadfeb3d2c35ac0a185b9345e8f">next</a>) {
<a name="l01709"></a>01709             <span class="keywordflow">if</span> (cmt-&gt;<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>[0] != <span class="charliteral">&apos;;&apos;</span> || cmt-&gt;<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>[1] != <span class="charliteral">&apos;!&apos;</span>)
<a name="l01710"></a>01710                fprintf(f,<span class="stringliteral">&quot;%s&quot;</span>, cmt-&gt;<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>);
<a name="l01711"></a>01711          }
<a name="l01712"></a>01712          fclose(f);
<a name="l01713"></a>01713          <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fi,-1); <span class="comment">/* we are giving up this reference to the object ptd to by fi */</span>
<a name="l01714"></a>01714          fi = 0;
<a name="l01715"></a>01715          
<a name="l01716"></a>01716          var = cat-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>;
<a name="l01717"></a>01717          <span class="keywordflow">while</span> (var) {
<a name="l01718"></a>01718             <span class="keyword">struct </span><a class="code" href="structast__category__template__instance.html">ast_category_template_instance</a> *x;
<a name="l01719"></a>01719             <span class="keywordtype">int</span> found = 0;
<a name="l01720"></a>01720             <a class="code" href="linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef" title="Loops over (traverses) the entries in a list.">AST_LIST_TRAVERSE</a>(&amp;cat-&gt;<a class="code" href="structast__category.html#aae97cd31a5d99cca5025058686aac6d7">template_instances</a>, x, <a class="code" href="structast__category__template__instance.html#ae8ee399f9e4434148eedc7de9c63bf18">next</a>) {
<a name="l01721"></a>01721                <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *v;
<a name="l01722"></a>01722                <span class="keywordflow">for</span> (v = x-&gt;<a class="code" href="structast__category__template__instance.html#a4a795962dfc694a64a8c88bcb097b282">inst</a>-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>; v; v = v-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>) {
<a name="l01723"></a>01723                   <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>) &amp;&amp; !strcmp(var-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>)) {
<a name="l01724"></a>01724                      found = 1;
<a name="l01725"></a>01725                      <span class="keywordflow">break</span>;
<a name="l01726"></a>01726                   }
<a name="l01727"></a>01727                }
<a name="l01728"></a>01728                <span class="keywordflow">if</span> (found)
<a name="l01729"></a>01729                   <span class="keywordflow">break</span>;
<a name="l01730"></a>01730             }
<a name="l01731"></a>01731             <span class="keywordflow">if</span> (found) {
<a name="l01732"></a>01732                var = var-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l01733"></a>01733                <span class="keywordflow">continue</span>;
<a name="l01734"></a>01734             }
<a name="l01735"></a>01735             <a class="code" href="config_8c.html#ac254b8e1045d65f111e303ccdc14c437">set_fn</a>(fn, <span class="keyword">sizeof</span>(fn), var-&gt;<a class="code" href="structast__variable.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>, configfile, fileset, &amp;fi);
<a name="l01736"></a>01736             f = fopen(fn, <span class="stringliteral">&quot;a&quot;</span>);
<a name="l01737"></a>01737             <span class="keywordflow">if</span> (!f)
<a name="l01738"></a>01738             {
<a name="l01739"></a>01739                <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Unable to open for writing: %s\n&quot;</span>, fn);
<a name="l01740"></a>01740                <a class="code" href="logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Unable to write %s (%s)&quot;</span>, fn, strerror(errno));
<a name="l01741"></a>01741                <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fi,-1); <span class="comment">/* we are giving up this reference to the object ptd to by fi */</span>
<a name="l01742"></a>01742                fi = 0;
<a name="l01743"></a>01743                <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fileset, -1);
<a name="l01744"></a>01744                <span class="keywordflow">return</span> -1;
<a name="l01745"></a>01745             }
<a name="l01746"></a>01746             
<a name="l01747"></a>01747             <span class="comment">/* dump any includes that happen before this category header */</span>
<a name="l01748"></a>01748             <span class="keywordflow">for</span> (incl=cfg-&gt;<a class="code" href="structast__config.html#acb049f8b410c47aebfde624a7de10819">includes</a>; incl; incl = incl-&gt;<a class="code" href="structast__config__include.html#ae2104fb51ee9f10eb0006df77fb8d504">next</a>) {
<a name="l01749"></a>01749                <span class="keywordflow">if</span> (strcmp(incl-&gt;<a class="code" href="structast__config__include.html#ad2a400871412e45079d5b0b09dbe34be">include_location_file</a>, var-&gt;<a class="code" href="structast__variable.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>) == 0){
<a name="l01750"></a>01750                   <span class="keywordflow">if</span> (var-&gt;<a class="code" href="structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a> &gt; incl-&gt;<a class="code" href="structast__config__include.html#ae2135f6bf6382a1e687d07ccdf811d64">include_location_lineno</a> &amp;&amp; !incl-&gt;<a class="code" href="structast__config__include.html#a76a055a540e12c7206a5004afea1f66e">output</a>) {
<a name="l01751"></a>01751                      <span class="keywordflow">if</span> (incl-&gt;<a class="code" href="structast__config__include.html#a4fb0f078574c9bdeeaee433d411298c9">exec</a>)
<a name="l01752"></a>01752                         fprintf(f,<span class="stringliteral">&quot;#exec \&quot;%s\&quot;\n&quot;</span>, incl-&gt;<a class="code" href="structast__config__include.html#ac06a64b674f41fa8d0d3c86b9dffa3c4">exec_file</a>);
<a name="l01753"></a>01753                      <span class="keywordflow">else</span>
<a name="l01754"></a>01754                         fprintf(f,<span class="stringliteral">&quot;#include \&quot;%s\&quot;\n&quot;</span>, incl-&gt;<a class="code" href="structast__config__include.html#a5d894d3ac3a63ddbe13305c29b0aceb8">included_file</a>);
<a name="l01755"></a>01755                      incl-&gt;<a class="code" href="structast__config__include.html#a76a055a540e12c7206a5004afea1f66e">output</a> = 1;
<a name="l01756"></a>01756                   }
<a name="l01757"></a>01757                }
<a name="l01758"></a>01758             }
<a name="l01759"></a>01759             
<a name="l01760"></a>01760             <a class="code" href="config_8c.html#a6cb06877fd5a30e2e1e972b9de02894f">insert_leading_blank_lines</a>(f, fi, var-&gt;<a class="code" href="structast__variable.html#a80bf10e9bcb9c00a7a59051a77a620cf">precomments</a>, var-&gt;<a class="code" href="structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);
<a name="l01761"></a>01761             <span class="keywordflow">for</span> (cmt = var-&gt;<a class="code" href="structast__variable.html#a80bf10e9bcb9c00a7a59051a77a620cf">precomments</a>; cmt; cmt=cmt-&gt;<a class="code" href="structast__comment.html#adab84eadfeb3d2c35ac0a185b9345e8f">next</a>) {
<a name="l01762"></a>01762                <span class="keywordflow">if</span> (cmt-&gt;<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>[0] != <span class="charliteral">&apos;;&apos;</span> || cmt-&gt;<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>[1] != <span class="charliteral">&apos;!&apos;</span>)
<a name="l01763"></a>01763                   fprintf(f,<span class="stringliteral">&quot;%s&quot;</span>, cmt-&gt;<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>);
<a name="l01764"></a>01764             }
<a name="l01765"></a>01765             <span class="keywordflow">if</span> (var-&gt;<a class="code" href="structast__variable.html#a6e4312227f9a7570709abf7f686f1cfe">sameline</a>) 
<a name="l01766"></a>01766                fprintf(f, <span class="stringliteral">&quot;%s %s %s  %s&quot;</span>, var-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, (var-&gt;<a class="code" href="structast__variable.html#a328cd221e75f4bd92e3ccf406f0d0441">object</a> ? <span class="stringliteral">&quot;=&gt;&quot;</span> : <span class="stringliteral">&quot;=&quot;</span>), var-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, var-&gt;<a class="code" href="structast__variable.html#a6e4312227f9a7570709abf7f686f1cfe">sameline</a>-&gt;<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>);
<a name="l01767"></a>01767             <span class="keywordflow">else</span>  
<a name="l01768"></a>01768                fprintf(f, <span class="stringliteral">&quot;%s %s %s\n&quot;</span>, var-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, (var-&gt;<a class="code" href="structast__variable.html#a328cd221e75f4bd92e3ccf406f0d0441">object</a> ? <span class="stringliteral">&quot;=&gt;&quot;</span> : <span class="stringliteral">&quot;=&quot;</span>), var-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);
<a name="l01769"></a>01769             <span class="keywordflow">for</span> (cmt = var-&gt;<a class="code" href="structast__variable.html#ab09dbd177767543015efa3ba28fab03a">trailing</a>; cmt; cmt=cmt-&gt;<a class="code" href="structast__comment.html#adab84eadfeb3d2c35ac0a185b9345e8f">next</a>) {
<a name="l01770"></a>01770                <span class="keywordflow">if</span> (cmt-&gt;<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>[0] != <span class="charliteral">&apos;;&apos;</span> || cmt-&gt;<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>[1] != <span class="charliteral">&apos;!&apos;</span>)
<a name="l01771"></a>01771                   fprintf(f,<span class="stringliteral">&quot;%s&quot;</span>, cmt-&gt;<a class="code" href="structast__comment.html#adfc7bf9f42a9a3b2a61d704e97853ba6">cmt</a>);
<a name="l01772"></a>01772             }
<a name="l01773"></a>01773             <span class="keywordflow">if</span> (var-&gt;<a class="code" href="structast__variable.html#ade071f6f4a7bc0deb43008bd448ac46e">blanklines</a>) {
<a name="l01774"></a>01774                blanklines = var-&gt;<a class="code" href="structast__variable.html#ade071f6f4a7bc0deb43008bd448ac46e">blanklines</a>;
<a name="l01775"></a>01775                <span class="keywordflow">while</span> (blanklines--)
<a name="l01776"></a>01776                   fprintf(f, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01777"></a>01777             }
<a name="l01778"></a>01778             
<a name="l01779"></a>01779             fclose(f);
<a name="l01780"></a>01780             <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fi,-1); <span class="comment">/* we are giving up this reference to the object ptd to by fi */</span>
<a name="l01781"></a>01781             fi = 0;
<a name="l01782"></a>01782             
<a name="l01783"></a>01783             var = var-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l01784"></a>01784          }
<a name="l01785"></a>01785          cat = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>;
<a name="l01786"></a>01786       }
<a name="l01787"></a>01787       <span class="keywordflow">if</span> (!<a class="code" href="group__main__options.html#ga40f8fb2e731031d99f732f515cec680f">option_debug</a>)
<a name="l01788"></a>01788          <a class="code" href="logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Saved\n&quot;</span>);
<a name="l01789"></a>01789    } <span class="keywordflow">else</span> {
<a name="l01790"></a>01790       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Unable to open for writing: %s\n&quot;</span>, fn);
<a name="l01791"></a>01791       <a class="code" href="logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Unable to write (%s)&quot;</span>, strerror(errno));
<a name="l01792"></a>01792       <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fi,-1); <span class="comment">/* we are giving up this reference to the object ptd to by fi */</span>
<a name="l01793"></a>01793       <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fileset, -1);
<a name="l01794"></a>01794       <span class="keywordflow">return</span> -1;
<a name="l01795"></a>01795    }
<a name="l01796"></a>01796 
<a name="l01797"></a>01797    <span class="comment">/* Now, for files with trailing #include/#exec statements,</span>
<a name="l01798"></a>01798 <span class="comment">      we have to make sure every entry is output */</span>
<a name="l01799"></a>01799 
<a name="l01800"></a>01800    <span class="keywordflow">for</span> (incl=cfg-&gt;<a class="code" href="structast__config.html#acb049f8b410c47aebfde624a7de10819">includes</a>; incl; incl = incl-&gt;<a class="code" href="structast__config__include.html#ae2104fb51ee9f10eb0006df77fb8d504">next</a>) {
<a name="l01801"></a>01801       <span class="keywordflow">if</span> (!incl-&gt;<a class="code" href="structast__config__include.html#a76a055a540e12c7206a5004afea1f66e">output</a>) {
<a name="l01802"></a>01802          <span class="comment">/* open the respective file */</span>
<a name="l01803"></a>01803          <a class="code" href="config_8c.html#ac254b8e1045d65f111e303ccdc14c437">set_fn</a>(fn, <span class="keyword">sizeof</span>(fn), incl-&gt;<a class="code" href="structast__config__include.html#ad2a400871412e45079d5b0b09dbe34be">include_location_file</a>, configfile, fileset, &amp;fi);
<a name="l01804"></a>01804          f = fopen(fn, <span class="stringliteral">&quot;a&quot;</span>);
<a name="l01805"></a>01805          <span class="keywordflow">if</span> (!f)
<a name="l01806"></a>01806          {
<a name="l01807"></a>01807             <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(1, <span class="stringliteral">&quot;Unable to open for writing: %s\n&quot;</span>, fn);
<a name="l01808"></a>01808             <a class="code" href="logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Unable to write %s (%s)&quot;</span>, fn, strerror(errno));
<a name="l01809"></a>01809             <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fi,-1); <span class="comment">/* we are giving up this reference to the object ptd to by fi */</span>
<a name="l01810"></a>01810             fi = 0;
<a name="l01811"></a>01811             <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fileset, -1);
<a name="l01812"></a>01812             <span class="keywordflow">return</span> -1;
<a name="l01813"></a>01813          }
<a name="l01814"></a>01814          
<a name="l01815"></a>01815          <span class="comment">/* output the respective include */</span>
<a name="l01816"></a>01816          <span class="keywordflow">if</span> (incl-&gt;<a class="code" href="structast__config__include.html#a4fb0f078574c9bdeeaee433d411298c9">exec</a>)
<a name="l01817"></a>01817             fprintf(f,<span class="stringliteral">&quot;#exec \&quot;%s\&quot;\n&quot;</span>, incl-&gt;<a class="code" href="structast__config__include.html#ac06a64b674f41fa8d0d3c86b9dffa3c4">exec_file</a>);
<a name="l01818"></a>01818          <span class="keywordflow">else</span>
<a name="l01819"></a>01819             fprintf(f,<span class="stringliteral">&quot;#include \&quot;%s\&quot;\n&quot;</span>, incl-&gt;<a class="code" href="structast__config__include.html#a5d894d3ac3a63ddbe13305c29b0aceb8">included_file</a>);
<a name="l01820"></a>01820          fclose(f);
<a name="l01821"></a>01821          incl-&gt;<a class="code" href="structast__config__include.html#a76a055a540e12c7206a5004afea1f66e">output</a> = 1;
<a name="l01822"></a>01822          <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fi,-1); <span class="comment">/* we are giving up this reference to the object ptd to by fi */</span>
<a name="l01823"></a>01823          fi = 0;
<a name="l01824"></a>01824       }
<a name="l01825"></a>01825    }
<a name="l01826"></a>01826    <a class="code" href="astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fileset, -1); <span class="comment">/* this should destroy the hash container */</span>
<a name="l01827"></a>01827             
<a name="l01828"></a>01828    <span class="keywordflow">return</span> 0;
<a name="l01829"></a>01829 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a944fdb5d328401dee4c35ebd413d3bc3"></a><!-- doxytag: member="config.h::ast_destroy_realtime" ref="a944fdb5d328401dee4c35ebd413d3bc3" args="(const char *family, const char *keyfield, const char *lookup,...) attribute_sentinel" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_destroy_realtime </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>keyfield</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lookup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroy realtime configuration. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to be destroyed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>keyfield</em>&nbsp;</td><td>which field to use as the key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lookup</em>&nbsp;</td><td>which value to look for in the key field to match the entry. This function is used to destroy an entry in realtime configuration space. Additional params are used as <a class="el" href="structkeys.html">keys</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of rows affected, or -1 on error.</dd></dl>
<p>Note that you should use the constant SENTINEL to terminate arguments, in order to preserve cross-platform compatibility. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l02266">2266</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="cdr__sqlite_8c_source.html#l00059">db</a>, <a class="el" href="config_8h_source.html#l00119">ast_config_engine::destroy_func</a>, <a class="el" href="config_8c_source.html#l01992">find_engine()</a>, and <a class="el" href="cdr__odbc_8c_source.html#l00052">table</a>.</p>

<p>Referenced by <a class="el" href="res__realtime_8c_source.html#l00206">cli_realtime_destroy()</a>, <a class="el" href="func__realtime_8c_source.html#l00357">function_realtime_readdestroy()</a>, <a class="el" href="app__voicemail_8c_source.html#l05141">leave_voicemail()</a>, and <a class="el" href="app__voicemail_8c_source.html#l03834">vm_delete()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02267"></a>02267 {
<a name="l02268"></a>02268    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html" title="Configuration engine structure, used to define realtime drivers.">ast_config_engine</a> *eng;
<a name="l02269"></a>02269    <span class="keywordtype">int</span> res = -1;
<a name="l02270"></a>02270    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>[256];
<a name="l02271"></a>02271    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>[256];
<a name="l02272"></a>02272    va_list ap;
<a name="l02273"></a>02273 
<a name="l02274"></a>02274    va_start(ap, lookup);
<a name="l02275"></a>02275    eng = <a class="code" href="config_8c.html#a8cf64b0a69a5440faa7f1c01e6232cfa" title="Find realtime engine for realtime family.">find_engine</a>(family, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l02276"></a>02276    <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#a63baed1acfa0e81b3d6fa172055bcb98">destroy_func</a>) 
<a name="l02277"></a>02277       res = eng-&gt;<a class="code" href="structast__config__engine.html#a63baed1acfa0e81b3d6fa172055bcb98">destroy_func</a>(db, table, keyfield, lookup, ap);
<a name="l02278"></a>02278    va_end(ap);
<a name="l02279"></a>02279 
<a name="l02280"></a>02280    <span class="keywordflow">return</span> res;
<a name="l02281"></a>02281 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7a653e8d3b6e1696e58f52a0534aff80"></a><!-- doxytag: member="config.h::ast_include_find" ref="a7a653e8d3b6e1696e58f52a0534aff80" args="(struct ast_config *conf, const char *included_file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__config__include.html">ast_config_include</a>* ast_include_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>included_file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l00337">337</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00213">ast_config_include::included_file</a>, <a class="el" href="config_8c_source.html#l00205">ast_config::includes</a>, and <a class="el" href="config_8c_source.html#l00217">ast_config_include::next</a>.</p>

<p>Referenced by <a class="el" href="config_8c_source.html#l00246">ast_include_new()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00338"></a>00338 {
<a name="l00339"></a>00339    <span class="keyword">struct </span><a class="code" href="structast__config__include.html">ast_config_include</a> *x;
<a name="l00340"></a>00340    <span class="keywordflow">for</span> (x=conf-&gt;<a class="code" href="structast__config.html#acb049f8b410c47aebfde624a7de10819">includes</a>;x;x=x-&gt;<a class="code" href="structast__config__include.html#ae2104fb51ee9f10eb0006df77fb8d504">next</a>) {
<a name="l00341"></a>00341       <span class="keywordflow">if</span> (strcmp(x-&gt;<a class="code" href="structast__config__include.html#a5d894d3ac3a63ddbe13305c29b0aceb8">included_file</a>,<a class="code" href="structast__config__include.html#a5d894d3ac3a63ddbe13305c29b0aceb8">included_file</a>) == 0)
<a name="l00342"></a>00342          <span class="keywordflow">return</span> x;
<a name="l00343"></a>00343    }
<a name="l00344"></a>00344    <span class="keywordflow">return</span> 0;
<a name="l00345"></a>00345 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ada3b4df6e8ca0a7408e66bd9761a1339"></a><!-- doxytag: member="config.h::ast_include_new" ref="ada3b4df6e8ca0a7408e66bd9761a1339" args="(struct ast_config *conf, const char *from_file, const char *included_file, int is_exec, const char *exec_file, int from_lineno, char *real_included_file_name, int real_included_file_name_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__config__include.html">ast_config_include</a>* ast_include_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>from_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>included_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>is_exec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>exec_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>from_lineno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>real_included_file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>real_included_file_name_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l00246">246</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00072">ast_calloc</a>, <a class="el" href="config_8c_source.html#l00337">ast_include_find()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="astmm_8h_source.html#l00099">ast_strdup</a>, <a class="el" href="strings_8h_source.html#l00063">ast_strlen_zero()</a>, <a class="el" href="config_8c_source.html#l00205">ast_config::includes</a>, and <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>.</p>

<p>Referenced by <a class="el" href="config_8c_source.html#l00922">process_text_line()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00247"></a>00247 {
<a name="l00248"></a>00248    <span class="comment">/* a file should be included ONCE. Otherwise, if one of the instances is changed,</span>
<a name="l00249"></a>00249 <span class="comment">    * then all be changed. -- how do we know to include it? -- Handling modified </span>
<a name="l00250"></a>00250 <span class="comment">    * instances is possible, I&apos;d have</span>
<a name="l00251"></a>00251 <span class="comment">    * to create a new master for each instance. */</span>
<a name="l00252"></a>00252    <span class="keyword">struct </span><a class="code" href="structast__config__include.html">ast_config_include</a> *inc;
<a name="l00253"></a>00253    <span class="keyword">struct </span>stat statbuf;
<a name="l00254"></a>00254    
<a name="l00255"></a>00255    inc = <a class="code" href="config_8h.html#a7a653e8d3b6e1696e58f52a0534aff80">ast_include_find</a>(conf, included_file);
<a name="l00256"></a>00256    <span class="keywordflow">if</span> (inc) {
<a name="l00257"></a>00257       <span class="keywordflow">do</span> {
<a name="l00258"></a>00258          inc-&gt;inclusion_count++;
<a name="l00259"></a>00259          snprintf(real_included_file_name, real_included_file_name_size, <span class="stringliteral">&quot;%s~~%d&quot;</span>, included_file, inc-&gt;inclusion_count);
<a name="l00260"></a>00260       } <span class="keywordflow">while</span> (stat(real_included_file_name, &amp;statbuf) == 0);
<a name="l00261"></a>00261       <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,<span class="stringliteral">&quot;&apos;%s&apos;, line %d:  Same File included more than once! This data will be saved in %s if saved back to disk.\n&quot;</span>, from_file, from_lineno, real_included_file_name);
<a name="l00262"></a>00262    } <span class="keywordflow">else</span>
<a name="l00263"></a>00263       *real_included_file_name = 0;
<a name="l00264"></a>00264    
<a name="l00265"></a>00265    inc = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(1,<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structast__config__include.html">ast_config_include</a>));
<a name="l00266"></a>00266    inc-&gt;include_location_file = <a class="code" href="astmm_8h.html#a2ef2401ade6b4b773138a82c86c40903">ast_strdup</a>(from_file);
<a name="l00267"></a>00267    inc-&gt;include_location_lineno = from_lineno;
<a name="l00268"></a>00268    <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(real_included_file_name))
<a name="l00269"></a>00269       inc-&gt;included_file = <a class="code" href="astmm_8h.html#a2ef2401ade6b4b773138a82c86c40903">ast_strdup</a>(real_included_file_name);
<a name="l00270"></a>00270    <span class="keywordflow">else</span>
<a name="l00271"></a>00271       inc-&gt;included_file = <a class="code" href="astmm_8h.html#a2ef2401ade6b4b773138a82c86c40903">ast_strdup</a>(included_file);
<a name="l00272"></a>00272    
<a name="l00273"></a>00273    inc-&gt;exec = is_exec;
<a name="l00274"></a>00274    <span class="keywordflow">if</span> (is_exec)
<a name="l00275"></a>00275       inc-&gt;exec_file = <a class="code" href="astmm_8h.html#a2ef2401ade6b4b773138a82c86c40903">ast_strdup</a>(exec_file);
<a name="l00276"></a>00276    
<a name="l00277"></a>00277    <span class="comment">/* attach this new struct to the conf struct */</span>
<a name="l00278"></a>00278    inc-&gt;next = conf-&gt;<a class="code" href="structast__config.html#acb049f8b410c47aebfde624a7de10819">includes</a>;
<a name="l00279"></a>00279    conf-&gt;<a class="code" href="structast__config.html#acb049f8b410c47aebfde624a7de10819">includes</a> = inc;
<a name="l00280"></a>00280    
<a name="l00281"></a>00281    <span class="keywordflow">return</span> inc;
<a name="l00282"></a>00282 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a008dccc13b0342d21fa91bf5c26bbcba"></a><!-- doxytag: member="config.h::ast_include_rename" ref="a008dccc13b0342d21fa91bf5c26bbcba" args="(struct ast_config *conf, const char *from_file, const char *to_file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_include_rename </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>from_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>to_file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l00284">284</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8h_source.html#l00079">ast_variable::file</a>, <a class="el" href="config_8c_source.html#l00187">ast_category::file</a>, <a class="el" href="astmm_8h_source.html#l00084">free</a>, <a class="el" href="config_8c_source.html#l00209">ast_config_include::include_location_file</a>, <a class="el" href="config_8c_source.html#l00205">ast_config::includes</a>, <a class="el" href="config_8h_source.html#l00077">ast_variable::next</a>, <a class="el" href="config_8c_source.html#l00195">ast_category::next</a>, <a class="el" href="config_8c_source.html#l00217">ast_config_include::next</a>, <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>, <a class="el" href="config_8c_source.html#l00199">ast_config::root</a>, and <a class="el" href="astmm_8h_source.html#l00096">strdup</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l01481">action_updateconfig()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00285"></a>00285 {
<a name="l00286"></a>00286    <span class="keyword">struct </span><a class="code" href="structast__config__include.html">ast_config_include</a> *incl;
<a name="l00287"></a>00287    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat;
<a name="l00288"></a>00288    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *v;
<a name="l00289"></a>00289    
<a name="l00290"></a>00290    <span class="keywordtype">int</span> from_len = strlen(from_file);
<a name="l00291"></a>00291    <span class="keywordtype">int</span> to_len = strlen(to_file);
<a name="l00292"></a>00292    
<a name="l00293"></a>00293    <span class="keywordflow">if</span> (strcmp(from_file, to_file) == 0) <span class="comment">/* no use wasting time if the name is the same */</span>
<a name="l00294"></a>00294       <span class="keywordflow">return</span>;
<a name="l00295"></a>00295    
<a name="l00296"></a>00296    <span class="comment">/* the manager code allows you to read in one config file, then</span>
<a name="l00297"></a>00297 <span class="comment">    * write it back out under a different name. But, the new arrangement</span>
<a name="l00298"></a>00298 <span class="comment">    * ties output lines to the file name. So, before you try to write</span>
<a name="l00299"></a>00299 <span class="comment">    * the config file to disk, better riffle thru the data and make sure</span>
<a name="l00300"></a>00300 <span class="comment">    * the file names are changed.</span>
<a name="l00301"></a>00301 <span class="comment">    */</span>
<a name="l00302"></a>00302    <span class="comment">/* file names are on categories, includes (of course), and on variables. So,</span>
<a name="l00303"></a>00303 <span class="comment">    * traverse all this and swap names */</span>
<a name="l00304"></a>00304 
<a name="l00305"></a>00305    <span class="keywordflow">for</span> (incl = conf-&gt;<a class="code" href="structast__config.html#acb049f8b410c47aebfde624a7de10819">includes</a>; incl; incl=incl-&gt;<a class="code" href="structast__config__include.html#ae2104fb51ee9f10eb0006df77fb8d504">next</a>) {
<a name="l00306"></a>00306       <span class="keywordflow">if</span> (strcmp(incl-&gt;<a class="code" href="structast__config__include.html#ad2a400871412e45079d5b0b09dbe34be">include_location_file</a>,from_file) == 0) {
<a name="l00307"></a>00307          <span class="keywordflow">if</span> (from_len &gt;= to_len)
<a name="l00308"></a>00308             strcpy(incl-&gt;<a class="code" href="structast__config__include.html#ad2a400871412e45079d5b0b09dbe34be">include_location_file</a>, to_file);
<a name="l00309"></a>00309          <span class="keywordflow">else</span> {
<a name="l00310"></a>00310             <a class="code" href="astmm_8h.html#aa7157aa9480bb73f090dca36776419bf">free</a>(incl-&gt;<a class="code" href="structast__config__include.html#ad2a400871412e45079d5b0b09dbe34be">include_location_file</a>);
<a name="l00311"></a>00311             incl-&gt;<a class="code" href="structast__config__include.html#ad2a400871412e45079d5b0b09dbe34be">include_location_file</a> = <a class="code" href="astmm_8h.html#a33bc8f85636226ba23bf348f78352aef">strdup</a>(to_file);
<a name="l00312"></a>00312          }
<a name="l00313"></a>00313       }
<a name="l00314"></a>00314    }
<a name="l00315"></a>00315    <span class="keywordflow">for</span> (cat = conf-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>; cat; cat = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>) {
<a name="l00316"></a>00316       <span class="keywordflow">if</span> (strcmp(cat-&gt;<a class="code" href="structast__category.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>,from_file) == 0) {
<a name="l00317"></a>00317          <span class="keywordflow">if</span> (from_len &gt;= to_len)
<a name="l00318"></a>00318             strcpy(cat-&gt;<a class="code" href="structast__category.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>, to_file);
<a name="l00319"></a>00319          <span class="keywordflow">else</span> {
<a name="l00320"></a>00320             <a class="code" href="astmm_8h.html#aa7157aa9480bb73f090dca36776419bf">free</a>(cat-&gt;<a class="code" href="structast__category.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>);
<a name="l00321"></a>00321             cat-&gt;<a class="code" href="structast__category.html#adf16cd437526a5c5e0e0af87745acbb8">file</a> = <a class="code" href="astmm_8h.html#a33bc8f85636226ba23bf348f78352aef">strdup</a>(to_file);
<a name="l00322"></a>00322          }
<a name="l00323"></a>00323       }
<a name="l00324"></a>00324       <span class="keywordflow">for</span> (v = cat-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>; v; v = v-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>) {
<a name="l00325"></a>00325          <span class="keywordflow">if</span> (strcmp(v-&gt;<a class="code" href="structast__variable.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>,from_file) == 0) {
<a name="l00326"></a>00326             <span class="keywordflow">if</span> (from_len &gt;= to_len)
<a name="l00327"></a>00327                strcpy(v-&gt;<a class="code" href="structast__variable.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>, to_file);
<a name="l00328"></a>00328             <span class="keywordflow">else</span> {
<a name="l00329"></a>00329                <a class="code" href="astmm_8h.html#aa7157aa9480bb73f090dca36776419bf">free</a>(v-&gt;<a class="code" href="structast__variable.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>);
<a name="l00330"></a>00330                v-&gt;<a class="code" href="structast__variable.html#adf16cd437526a5c5e0e0af87745acbb8">file</a> = <a class="code" href="astmm_8h.html#a33bc8f85636226ba23bf348f78352aef">strdup</a>(to_file);
<a name="l00331"></a>00331             }
<a name="l00332"></a>00332          }
<a name="l00333"></a>00333       }
<a name="l00334"></a>00334    }
<a name="l00335"></a>00335 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1a03993603e2bc2463153857836645bb"></a><!-- doxytag: member="config.h::ast_load_realtime" ref="a1a03993603e2bc2463153857836645bb" args="(const char *family,...) attribute_sentinel" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_load_realtime </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve realtime configuration. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to lookup This will use builtin configuration <a class="el" href="structbackends.html" title="the list of registered channel types">backends</a> to look up a particular entity in realtime and return a variable list of its parameters. Note that unlike the variables in <a class="el" href="structast__config.html">ast_config</a>, the resulting list of variables MUST be freed with <a class="el" href="config_8h.html#ad3d8122172af6f13687a07840411d65d" title="Free variable list.">ast_variables_destroy()</a> as there is no container.</td></tr>
  </table>
  </dd>
</dl>
<p>The difference between these two calls is that ast_load_realtime excludes fields whose <a class="el" href="structvalues.html">values</a> are NULL, while ast_load_realtime_all loads all <a class="el" href="structcolumns.html">columns</a>.</p>
<p>Note that you should use the constant SENTINEL to terminate arguments, in order to preserve cross-platform compatibility. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l02113">2113</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="config_8c_source.html#l02087">ast_load_realtime_helper()</a>, <a class="el" href="strings_8h_source.html#l00063">ast_strlen_zero()</a>, <a class="el" href="config_8h_source.html#l00077">ast_variable::next</a>, and <a class="el" href="config_8h_source.html#l00076">ast_variable::value</a>.</p>

<p>Referenced by <a class="el" href="app__meetme_8c_source.html#l01998">conf_run()</a>, <a class="el" href="app__voicemail_8c_source.html#l03783">copy_plain_file()</a>, <a class="el" href="app__meetme_8c_source.html#l03372">find_conf_realtime()</a>, <a class="el" href="app__followme_8c_source.html#l00917">find_realtime()</a>, <a class="el" href="app__minivm_8c_source.html#l00998">find_user_realtime()</a>, <a class="el" href="app__queue_8c_source.html#l02243">leave_queue()</a>, <a class="el" href="app__queue_8c_source.html#l01830">load_realtime_queue()</a>, <a class="el" href="res__musiconhold_8c_source.html#l01223">local_ast_moh_start()</a>, <a class="el" href="app__queue_8c_source.html#l05461">queue_function_queuewaitingcount()</a>, <a class="el" href="chan__h323_8c_source.html#l01226">realtime_alias()</a>, <a class="el" href="chan__h323_8c_source.html#l01554">realtime_peer()</a>, <a class="el" href="pbx__realtime_8c_source.html#l00079">realtime_switch_common()</a>, <a class="el" href="chan__h323_8c_source.html#l01440">realtime_user()</a>, and <a class="el" href="app__meetme_8c_source.html#l01815">rt_extend_conf()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02114"></a>02114 {
<a name="l02115"></a>02115    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *res, *cur, *prev = NULL, *freeme = NULL;
<a name="l02116"></a>02116    va_list ap;
<a name="l02117"></a>02117 
<a name="l02118"></a>02118    va_start(ap, family);
<a name="l02119"></a>02119    res = <a class="code" href="config_8c.html#aa552f9f0bd23b54d35d1f41fff914876">ast_load_realtime_helper</a>(family, ap);
<a name="l02120"></a>02120    va_end(ap);
<a name="l02121"></a>02121 
<a name="l02122"></a>02122    <span class="comment">/* Eliminate blank entries */</span>
<a name="l02123"></a>02123    <span class="keywordflow">for</span> (cur = res; cur; cur = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>) {
<a name="l02124"></a>02124       <span class="keywordflow">if</span> (freeme) {
<a name="l02125"></a>02125          <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(freeme);
<a name="l02126"></a>02126          freeme = NULL;
<a name="l02127"></a>02127       }
<a name="l02128"></a>02128 
<a name="l02129"></a>02129       <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(cur-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>)) {
<a name="l02130"></a>02130          <span class="keywordflow">if</span> (prev)
<a name="l02131"></a>02131             prev-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a> = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l02132"></a>02132          <span class="keywordflow">else</span>
<a name="l02133"></a>02133             res = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l02134"></a>02134          freeme = cur;
<a name="l02135"></a>02135       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>[0] == <span class="charliteral">&apos; &apos;</span> &amp;&amp; cur-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>[1] == <span class="charliteral">&apos;\0&apos;</span>) {
<a name="l02136"></a>02136          <span class="keywordtype">char</span> *vptr = (<span class="keywordtype">char</span> *) cur-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>;
<a name="l02137"></a>02137          vptr[0] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l02138"></a>02138          prev = cur;
<a name="l02139"></a>02139       } <span class="keywordflow">else</span> {
<a name="l02140"></a>02140          prev = cur;
<a name="l02141"></a>02141       }
<a name="l02142"></a>02142    }
<a name="l02143"></a>02143    <span class="keywordflow">return</span> res;
<a name="l02144"></a>02144 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a24f08a53aeabb2db90aa2b98dc485691"></a><!-- doxytag: member="config.h::ast_load_realtime_all" ref="a24f08a53aeabb2db90aa2b98dc485691" args="(const char *family,...) attribute_sentinel" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_load_realtime_all </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l02101">2101</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l02087">ast_load_realtime_helper()</a>.</p>

<p>Referenced by <a class="el" href="res__realtime_8c_source.html#l00043">cli_realtime_load()</a>, <a class="el" href="func__realtime_8c_source.html#l00144">function_realtime_read()</a>, <a class="el" href="func__realtime_8c_source.html#l00357">function_realtime_readdestroy()</a>, and <a class="el" href="func__realtime_8c_source.html#l00233">realtimefield_read()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02102"></a>02102 {
<a name="l02103"></a>02103    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *res;
<a name="l02104"></a>02104    va_list ap;
<a name="l02105"></a>02105 
<a name="l02106"></a>02106    va_start(ap, family);
<a name="l02107"></a>02107    res = <a class="code" href="config_8c.html#aa552f9f0bd23b54d35d1f41fff914876">ast_load_realtime_helper</a>(family, ap);
<a name="l02108"></a>02108    va_end(ap);
<a name="l02109"></a>02109 
<a name="l02110"></a>02110    <span class="keywordflow">return</span> res;
<a name="l02111"></a>02111 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a29ff8cd717c0c0bac60abbd827fec409"></a><!-- doxytag: member="config.h::ast_load_realtime_multientry" ref="a29ff8cd717c0c0bac60abbd827fec409" args="(const char *family,...) attribute_sentinel" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__config.html">ast_config</a>* ast_load_realtime_multientry </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve realtime configuration. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to lookup</td></tr>
  </table>
  </dd>
</dl>
<p>This will use builtin configuration <a class="el" href="structbackends.html" title="the list of registered channel types">backends</a> to look up a particular entity in realtime and return a variable list of its parameters. Unlike the ast_load_realtime, this function can return more than one entry and is thus stored inside a traditional <a class="el" href="structast__config.html">ast_config</a> structure rather than just returning a linked list of variables.</p>
<p>Note that you should use the constant SENTINEL to terminate arguments, in order to preserve cross-platform compatibility. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l02198">2198</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="cdr__sqlite_8c_source.html#l00059">db</a>, <a class="el" href="config_8c_source.html#l01992">find_engine()</a>, <a class="el" href="config_8h_source.html#l00115">ast_config_engine::realtime_multi_func</a>, and <a class="el" href="cdr__odbc_8c_source.html#l00052">table</a>.</p>

<p>Referenced by <a class="el" href="app__queue_8c_source.html#l06083">__queues_show()</a>, <a class="el" href="app__followme_8c_source.html#l00917">find_realtime()</a>, <a class="el" href="app__queue_8c_source.html#l01830">load_realtime_queue()</a>, <a class="el" href="app__directory_8c_source.html#l00382">realtime_directory()</a>, <a class="el" href="chan__sip_8c_source.html#l04739">realtime_peer()</a>, <a class="el" href="pbx__realtime_8c_source.html#l00079">realtime_switch_common()</a>, <a class="el" href="app__voicemail_8c_source.html#l10042">show_users_realtime()</a>, and <a class="el" href="app__queue_8c_source.html#l01906">update_realtime_members()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02199"></a>02199 {
<a name="l02200"></a>02200    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html" title="Configuration engine structure, used to define realtime drivers.">ast_config_engine</a> *eng;
<a name="l02201"></a>02201    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>[256];
<a name="l02202"></a>02202    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>[256];
<a name="l02203"></a>02203    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *res = NULL;
<a name="l02204"></a>02204    va_list ap;
<a name="l02205"></a>02205 
<a name="l02206"></a>02206    va_start(ap, family);
<a name="l02207"></a>02207    eng = <a class="code" href="config_8c.html#a8cf64b0a69a5440faa7f1c01e6232cfa" title="Find realtime engine for realtime family.">find_engine</a>(family, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l02208"></a>02208    <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#abe8a92c4a05c2b7084a8ad89b558b05f">realtime_multi_func</a>) 
<a name="l02209"></a>02209       res = eng-&gt;<a class="code" href="structast__config__engine.html#abe8a92c4a05c2b7084a8ad89b558b05f">realtime_multi_func</a>(db, table, ap);
<a name="l02210"></a>02210    va_end(ap);
<a name="l02211"></a>02211 
<a name="l02212"></a>02212    <span class="keywordflow">return</span> res;
<a name="l02213"></a>02213 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7e9aea581abeaae5d3799367d95284ac"></a><!-- doxytag: member="config.h::ast_parse_arg" ref="a7e9aea581abeaae5d3799367d95284ac" args="(const char *arg, enum ast_parse_flags flags, void *result,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_parse_arg </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569f">ast_parse_flags</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>p_result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The argument parsing routine. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>the string to parse. It is not modified. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>combination of ast_parse_flags to specify the return type and additional checks. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>result</em>&nbsp;</td><td>pointer to the result. NULL is valid here, and can be used to perform only the validity checks. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>...</em>&nbsp;</td><td>extra arguments are required according to flags. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>in case of success, != 0 otherwise. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>result</em>&nbsp;</td><td>returns the parsed value in case of success, the default value in case of error, or it is left unchanged in case of error and no default specified. Note that in certain cases (e.g. sockaddr_in, with multi-field return <a class="el" href="structvalues.html">values</a>) some of the fields in result may be changed even if an error occurs.</td></tr>
  </table>
  </dd>
</dl>
<p>Examples of use: ast_parse_arg("223", PARSE_INT32|PARSE_IN_RANGE, &amp;a, -1000, 1000); returns 0, a = 223 ast_parse_arg("22345", PARSE_INT32|PARSE_IN_RANGE|PARSE_DEFAULT, &amp;a, 9999, 10, 100); returns 1, a = 9999 ast_parse_arg("22345ssf", PARSE_UINT32|PARSE_IN_RANGE, &amp;b, 10, 100); returns 1, b unchanged ast_parse_arg("www.foo.biz:44", PARSE_INADDR, &amp;sa); returns 0, sa contains address and port ast_parse_arg("www.foo.biz", PARSE_INADDR|PARSE_PORT_REQUIRE, &amp;sa); returns 1 because port is missing, sa contains address </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l02286">2286</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="logger_8h_source.html#l00213">ast_debug</a>, <a class="el" href="utils_8c_source.html#l00182">ast_gethostbyname()</a>, <a class="el" href="utils_8c_source.html#l00431">ast_inet_ntoa()</a>, <a class="el" href="utils_8h_source.html#l00616">ast_strdupa</a>, <a class="el" href="adsistub_8c_source.html#l00059">buf</a>, <a class="el" href="chan__skinny_8c_source.html#l00982">hp</a>, <a class="el" href="config_8h_source.html#l00497">PARSE_DEFAULT</a>, <a class="el" href="config_8h_source.html#l00480">PARSE_DOUBLE</a>, <a class="el" href="config_8h_source.html#l00504">PARSE_IN_RANGE</a>, <a class="el" href="config_8h_source.html#l00489">PARSE_INADDR</a>, <a class="el" href="config_8h_source.html#l00478">PARSE_INT32</a>, <a class="el" href="config_8h_source.html#l00505">PARSE_OUT_RANGE</a>, <a class="el" href="config_8h_source.html#l00513">PARSE_PORT_FORBID</a>, <a class="el" href="config_8h_source.html#l00511">PARSE_PORT_IGNORE</a>, <a class="el" href="config_8h_source.html#l00510">PARSE_PORT_MASK</a>, <a class="el" href="config_8h_source.html#l00512">PARSE_PORT_REQUIRE</a>, <a class="el" href="config_8h_source.html#l00474">PARSE_TYPE</a>, <a class="el" href="config_8h_source.html#l00479">PARSE_UINT32</a>, and <a class="el" href="agi_2strcompat_8c_source.html#l00027">strsep()</a>.</p>

<p>Referenced by <a class="el" href="chan__sip_8c_source.html#l03607">ast_sip_ouraddrfor()</a>, <a class="el" href="chan__sip_8c_source.html#l13740">check_via_response()</a>, and <a class="el" href="chan__sip_8c_source.html#l24245">reload_config()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02288"></a>02288 {
<a name="l02289"></a>02289    va_list ap;
<a name="l02290"></a>02290    <span class="keywordtype">int</span> error = 0;
<a name="l02291"></a>02291 
<a name="l02292"></a>02292    va_start(ap, p_result);
<a name="l02293"></a>02293    <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569faa9556ebb6fa5b8ccfc5b4a062070f343">PARSE_TYPE</a>) {
<a name="l02294"></a>02294    <span class="keywordflow">case</span> <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fabac6774d4b76ec6847b57ccce4822738">PARSE_INT32</a>:
<a name="l02295"></a>02295        {
<a name="l02296"></a>02296       int32_t *result = p_result;
<a name="l02297"></a>02297       int32_t x, def = result ? *result : 0,
<a name="l02298"></a>02298          high = (int32_t)0x7fffffff,
<a name="l02299"></a>02299          low  = (int32_t)0x80000000;
<a name="l02300"></a>02300       <span class="comment">/* optional argument: first default value, then range */</span>
<a name="l02301"></a>02301       <span class="keywordflow">if</span> (flags &amp; <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569facc865488860e2c25dd9f80e5473cf760">PARSE_DEFAULT</a>)
<a name="l02302"></a>02302          def = va_arg(ap, int32_t);
<a name="l02303"></a>02303       <span class="keywordflow">if</span> (flags &amp; (<a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a>|<a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa827151da9f1b81f3fc253fc6e5f3c11b">PARSE_OUT_RANGE</a>)) {
<a name="l02304"></a>02304          <span class="comment">/* range requested, update bounds */</span>
<a name="l02305"></a>02305          low = va_arg(ap, int32_t);
<a name="l02306"></a>02306          high = va_arg(ap, int32_t);
<a name="l02307"></a>02307       }
<a name="l02308"></a>02308       x = strtol(arg, NULL, 0);
<a name="l02309"></a>02309       error = (x &lt; low) || (x &gt; high);
<a name="l02310"></a>02310       <span class="keywordflow">if</span> (flags &amp; <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa827151da9f1b81f3fc253fc6e5f3c11b">PARSE_OUT_RANGE</a>)
<a name="l02311"></a>02311          error = !error;
<a name="l02312"></a>02312       <span class="keywordflow">if</span> (result)
<a name="l02313"></a>02313          *result  = error ? def : x;
<a name="l02314"></a>02314       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(3,
<a name="l02315"></a>02315          <span class="stringliteral">&quot;extract int from [%s] in [%d, %d] gives [%d](%d)\n&quot;</span>,
<a name="l02316"></a>02316          arg, low, high,
<a name="l02317"></a>02317          result ? *result : x, error);
<a name="l02318"></a>02318       <span class="keywordflow">break</span>;
<a name="l02319"></a>02319        }
<a name="l02320"></a>02320 
<a name="l02321"></a>02321    <span class="keywordflow">case</span> <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fadba5c0b0122c30502fe469a55fea3c4b">PARSE_UINT32</a>:
<a name="l02322"></a>02322        {
<a name="l02323"></a>02323       uint32_t *result = p_result;
<a name="l02324"></a>02324       uint32_t x, def = result ? *result : 0,
<a name="l02325"></a>02325          low = 0, high = (uint32_t)~0;
<a name="l02326"></a>02326       <span class="comment">/* optional argument: first default value, then range */</span>
<a name="l02327"></a>02327       <span class="keywordflow">if</span> (flags &amp; PARSE_DEFAULT)
<a name="l02328"></a>02328          def = va_arg(ap, uint32_t);
<a name="l02329"></a>02329       <span class="keywordflow">if</span> (flags &amp; (<a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a>|PARSE_OUT_RANGE)) {
<a name="l02330"></a>02330          <span class="comment">/* range requested, update bounds */</span>
<a name="l02331"></a>02331          low = va_arg(ap, uint32_t);
<a name="l02332"></a>02332          high = va_arg(ap, uint32_t);
<a name="l02333"></a>02333       }
<a name="l02334"></a>02334       x = strtoul(arg, NULL, 0);
<a name="l02335"></a>02335       error = (x &lt; low) || (x &gt; high);
<a name="l02336"></a>02336       <span class="keywordflow">if</span> (flags &amp; PARSE_OUT_RANGE)
<a name="l02337"></a>02337          error = !error;
<a name="l02338"></a>02338       <span class="keywordflow">if</span> (result)
<a name="l02339"></a>02339          *result  = error ? def : x;
<a name="l02340"></a>02340       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(3,
<a name="l02341"></a>02341          <span class="stringliteral">&quot;extract uint from [%s] in [%u, %u] gives [%u](%d)\n&quot;</span>,
<a name="l02342"></a>02342          arg, low, high,
<a name="l02343"></a>02343          result ? *result : x, error);
<a name="l02344"></a>02344       <span class="keywordflow">break</span>;
<a name="l02345"></a>02345        }
<a name="l02346"></a>02346 
<a name="l02347"></a>02347    <span class="keywordflow">case</span> <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa911811e1ef2b6304138896f842ade7a6">PARSE_DOUBLE</a>:
<a name="l02348"></a>02348        {
<a name="l02349"></a>02349       <span class="keywordtype">double</span> *result = p_result;
<a name="l02350"></a>02350       <span class="keywordtype">double</span> x, def = result ? *result : 0,
<a name="l02351"></a>02351          low = -HUGE_VAL, high = HUGE_VAL;
<a name="l02352"></a>02352 
<a name="l02353"></a>02353       <span class="comment">/* optional argument: first default value, then range */</span>
<a name="l02354"></a>02354       <span class="keywordflow">if</span> (flags &amp; PARSE_DEFAULT)
<a name="l02355"></a>02355          def = va_arg(ap, <span class="keywordtype">double</span>);
<a name="l02356"></a>02356       <span class="keywordflow">if</span> (flags &amp; (<a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a>|PARSE_OUT_RANGE)) {
<a name="l02357"></a>02357          <span class="comment">/* range requested, update bounds */</span>
<a name="l02358"></a>02358          low = va_arg(ap, <span class="keywordtype">double</span>);
<a name="l02359"></a>02359          high = va_arg(ap, <span class="keywordtype">double</span>);
<a name="l02360"></a>02360       }
<a name="l02361"></a>02361       x = strtod(arg, NULL);
<a name="l02362"></a>02362       error = (x &lt; low) || (x &gt; high);
<a name="l02363"></a>02363       <span class="keywordflow">if</span> (flags &amp; PARSE_OUT_RANGE)
<a name="l02364"></a>02364          error = !error;
<a name="l02365"></a>02365       <span class="keywordflow">if</span> (result)
<a name="l02366"></a>02366          *result  = error ? def : x;
<a name="l02367"></a>02367       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(3,
<a name="l02368"></a>02368          <span class="stringliteral">&quot;extract double from [%s] in [%f, %f] gives [%f](%d)\n&quot;</span>,
<a name="l02369"></a>02369          arg, low, high,
<a name="l02370"></a>02370          result ? *result : x, error);
<a name="l02371"></a>02371       <span class="keywordflow">break</span>;
<a name="l02372"></a>02372        }
<a name="l02373"></a>02373    <span class="keywordflow">case</span> <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fadbbce4323faf5d2131137e15c1da10f1">PARSE_INADDR</a>:
<a name="l02374"></a>02374        {
<a name="l02375"></a>02375       <span class="keywordtype">char</span> *port, *<a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>;
<a name="l02376"></a>02376       <span class="keyword">struct </span>sockaddr_in _sa_buf;   <span class="comment">/* buffer for the result */</span>
<a name="l02377"></a>02377       <span class="keyword">struct </span>sockaddr_in *sa = p_result ?
<a name="l02378"></a>02378          (<span class="keyword">struct </span>sockaddr_in *)p_result : &amp;_sa_buf;
<a name="l02379"></a>02379       <span class="comment">/* default is either the supplied value or the result itself */</span>
<a name="l02380"></a>02380       <span class="keyword">struct </span>sockaddr_in *def = (flags &amp; PARSE_DEFAULT) ?
<a name="l02381"></a>02381          va_arg(ap, <span class="keyword">struct</span> sockaddr_in *) : sa;
<a name="l02382"></a>02382       <span class="keyword">struct </span>hostent *<a class="code" href="chan__skinny_8c.html#aa0f575fa3882aa394cc287edba645a35">hp</a>;
<a name="l02383"></a>02383       <span class="keyword">struct </span><a class="code" href="structast__hostent.html">ast_hostent</a> <a class="code" href="chan__skinny_8c.html#a9e435aef83f14da6d3d5ec44f821558e">ahp</a>;
<a name="l02384"></a>02384 
<a name="l02385"></a>02385       memset(&amp;_sa_buf, <span class="charliteral">&apos;\0&apos;</span>, <span class="keyword">sizeof</span>(_sa_buf)); <span class="comment">/* clear buffer */</span>
<a name="l02386"></a>02386       <span class="comment">/* duplicate the string to strip away the :port */</span>
<a name="l02387"></a>02387       port = <a class="code" href="utils_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6" title="duplicate a string in memory from the stack">ast_strdupa</a>(arg);
<a name="l02388"></a>02388       buf = <a class="code" href="agi_2strcompat_8c.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;port, <span class="stringliteral">&quot;:&quot;</span>);
<a name="l02389"></a>02389       sa-&gt;sin_family = AF_INET;  <span class="comment">/* assign family */</span>
<a name="l02390"></a>02390       <span class="comment">/*</span>
<a name="l02391"></a>02391 <span class="comment">       * honor the ports flag setting, assign default value</span>
<a name="l02392"></a>02392 <span class="comment">       * in case of errors or field unset.</span>
<a name="l02393"></a>02393 <span class="comment">       */</span>
<a name="l02394"></a>02394       flags &amp;= <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa5f8a497855d42eba8c324516d21f8998">PARSE_PORT_MASK</a>; <span class="comment">/* the only flags left to process */</span>
<a name="l02395"></a>02395       <span class="keywordflow">if</span> (port) {
<a name="l02396"></a>02396          <span class="keywordflow">if</span> (flags == <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>) {
<a name="l02397"></a>02397             error = 1;  <span class="comment">/* port was forbidden */</span>
<a name="l02398"></a>02398             sa-&gt;sin_port = def-&gt;sin_port;
<a name="l02399"></a>02399          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d">PARSE_PORT_IGNORE</a>)
<a name="l02400"></a>02400             sa-&gt;sin_port = def-&gt;sin_port;
<a name="l02401"></a>02401          <span class="keywordflow">else</span> <span class="comment">/* accept or require */</span>
<a name="l02402"></a>02402             sa-&gt;sin_port = htons(strtol(port, NULL, 0));
<a name="l02403"></a>02403       } <span class="keywordflow">else</span> {
<a name="l02404"></a>02404          sa-&gt;sin_port = def-&gt;sin_port;
<a name="l02405"></a>02405          <span class="keywordflow">if</span> (flags == <a class="code" href="config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569faf8734b2de041808f7ad5ce81ce4fcbcb">PARSE_PORT_REQUIRE</a>)
<a name="l02406"></a>02406             error = 1;
<a name="l02407"></a>02407       }
<a name="l02408"></a>02408       <span class="comment">/* Now deal with host part, even if we have errors before. */</span>
<a name="l02409"></a>02409       hp = <a class="code" href="utils_8h.html#ad3b63ee1041593219ef0765b28d70442" title="Thread-safe gethostbyname function to use in Asterisk.">ast_gethostbyname</a>(buf, &amp;<a class="code" href="chan__skinny_8c.html#a9e435aef83f14da6d3d5ec44f821558e">ahp</a>);
<a name="l02410"></a>02410       <span class="keywordflow">if</span> (hp)  <span class="comment">/* resolved successfully */</span>
<a name="l02411"></a>02411          memcpy(&amp;sa-&gt;sin_addr, hp-&gt;h_addr, <span class="keyword">sizeof</span>(sa-&gt;sin_addr));
<a name="l02412"></a>02412       <span class="keywordflow">else</span> {
<a name="l02413"></a>02413          error = 1;
<a name="l02414"></a>02414          sa-&gt;sin_addr = def-&gt;sin_addr;
<a name="l02415"></a>02415       }
<a name="l02416"></a>02416       <a class="code" href="logger_8h.html#a3f248112c8d6ce7e3959aa723dade648" title="Log a DEBUG message.">ast_debug</a>(3,
<a name="l02417"></a>02417          <span class="stringliteral">&quot;extract inaddr from [%s] gives [%s:%d](%d)\n&quot;</span>,
<a name="l02418"></a>02418          arg, <a class="code" href="network_8h.html#a5a735cb59e8a8ddd78078d396db7e106" title="thread-safe replacement for inet_ntoa().">ast_inet_ntoa</a>(sa-&gt;sin_addr),
<a name="l02419"></a>02419          ntohs(sa-&gt;sin_port), error);
<a name="l02420"></a>02420          <span class="keywordflow">break</span>;
<a name="l02421"></a>02421        }
<a name="l02422"></a>02422    }
<a name="l02423"></a>02423    va_end(ap);
<a name="l02424"></a>02424    <span class="keywordflow">return</span> error;
<a name="l02425"></a>02425 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6344200b56202a76de8db05af680f3ac"></a><!-- doxytag: member="config.h::ast_realtime_enabled" ref="a6344200b56202a76de8db05af680f3ac" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_realtime_enabled </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if there's any realtime <a class="el" href="structengines.html">engines</a> loaded. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l02161">2161</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c.html#aac242c96b19f1c7a0ecfb2c6c45cac4f">config_maps</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l02709">action_coresettings()</a>, <a class="el" href="config_8c_source.html#l02147">ast_check_realtime()</a>, and <a class="el" href="asterisk_8c_source.html#l00413">handle_show_settings()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02162"></a>02162 {
<a name="l02163"></a>02163    <span class="keywordflow">return</span> <a class="code" href="config_8c.html#aac242c96b19f1c7a0ecfb2c6c45cac4f">config_maps</a> ? 1 : 0;
<a name="l02164"></a>02164 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a403ec8b49645ea204e82cb72bb8cf9f4"></a><!-- doxytag: member="config.h::ast_realtime_require_field" ref="a403ec8b49645ea204e82cb72bb8cf9f4" args="(const char *family,...) attribute_sentinel" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_realtime_require_field </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Inform realtime what fields that may be stored. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config is referenced This will inform builtin configuration <a class="el" href="structbackends.html" title="the list of registered channel types">backends</a> that particular fields may be updated during the use of that configuration section. This is mainly to be used during startup routines, to ensure that various fields exist in the backend. The <a class="el" href="structbackends.html" title="the list of registered channel types">backends</a> may take various <a class="el" href="structactions.html" title="list of actions registered">actions</a>, such as creating new fields in the data store or warning the administrator that new fields may need to be created, in order to ensure proper function.</td></tr>
  </table>
  </dd>
</dl>
<p>The arguments are specified in <a class="el" href="structgroups.html">groups</a> of 3: column name, column type, and column size. The column types are specified as integer constants, defined by the enum require_type. Note that the size is specified as the <a class="el" href="structnumber.html" title="Number structure.">number</a> of equivalent character fields that a field may take up, even if a field is otherwise specified as an integer type. This is due to the fact that some fields have historically been specified as character types, even if they contained integer <a class="el" href="structvalues.html">values</a>.</p>
<p>A family should always specify its fields to the minimum necessary requirements to fulfill all possible <a class="el" href="structvalues.html">values</a> (within reason; for example, a timeout value may reasonably be specified as an INTEGER2, with size 5. Even though <a class="el" href="structvalues.html">values</a> above 32767 seconds are possible, they are unlikely to be useful, and we should not complain about that size).</p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>Required fields met specified standards </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>One or more fields was missing or insufficient</td></tr>
  </table>
  </dd>
</dl>
<p>Note that you should use the constant SENTINEL to terminate arguments, in order to preserve cross-platform compatibility.</p>
<dl class="since"><dt><b>Since:</b></dt><dd>1.6.1 </dd></dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l02166">2166</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="cdr__sqlite_8c_source.html#l00059">db</a>, <a class="el" href="config_8c_source.html#l01992">find_engine()</a>, <a class="el" href="config_8h_source.html#l00120">ast_config_engine::require_func</a>, and <a class="el" href="cdr__odbc_8c_source.html#l00052">table</a>.</p>

<p>Referenced by <a class="el" href="app__voicemail_8c_source.html#l01141">change_password_realtime()</a>, <a class="el" href="app__meetme_8c_source.html#l01998">conf_run()</a>, and <a class="el" href="app__meetme_8c_source.html#l06461">load_module()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02167"></a>02167 {
<a name="l02168"></a>02168    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html" title="Configuration engine structure, used to define realtime drivers.">ast_config_engine</a> *eng;
<a name="l02169"></a>02169    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>[256];
<a name="l02170"></a>02170    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>[256];
<a name="l02171"></a>02171    va_list ap;
<a name="l02172"></a>02172    <span class="keywordtype">int</span> res = -1;
<a name="l02173"></a>02173 
<a name="l02174"></a>02174    va_start(ap, family);
<a name="l02175"></a>02175    eng = <a class="code" href="config_8c.html#a8cf64b0a69a5440faa7f1c01e6232cfa" title="Find realtime engine for realtime family.">find_engine</a>(family, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l02176"></a>02176    <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#ae98837b68863176f4e9ead28e5572bb7">require_func</a>) {
<a name="l02177"></a>02177       res = eng-&gt;<a class="code" href="structast__config__engine.html#ae98837b68863176f4e9ead28e5572bb7">require_func</a>(db, table, ap);
<a name="l02178"></a>02178    }
<a name="l02179"></a>02179    va_end(ap);
<a name="l02180"></a>02180 
<a name="l02181"></a>02181    <span class="keywordflow">return</span> res;
<a name="l02182"></a>02182 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abbd9786e26d09dce06c32a53fd3c0cc2"></a><!-- doxytag: member="config.h::ast_store_realtime" ref="abbd9786e26d09dce06c32a53fd3c0cc2" args="(const char *family,...) attribute_sentinel" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_store_realtime </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create realtime configuration. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to be created This function is used to create a parameter in realtime configuration space. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of rows affected, or -1 on error. On the MySQL engine only, for reasons of backwards compatibility, the return value is the insert ID. This value is nonportable and may be changed in a future version to match the other <a class="el" href="structengines.html">engines</a>.</dd></dl>
<p>Note that you should use the constant SENTINEL to terminate arguments, in order to preserve cross-platform compatibility. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l02249">2249</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="cdr__sqlite_8c_source.html#l00059">db</a>, <a class="el" href="config_8c_source.html#l01992">find_engine()</a>, <a class="el" href="config_8h_source.html#l00118">ast_config_engine::store_func</a>, and <a class="el" href="cdr__odbc_8c_source.html#l00052">table</a>.</p>

<p>Referenced by <a class="el" href="logger_8c_source.html#l00465">ast_queue_log()</a>, <a class="el" href="res__realtime_8c_source.html#l00161">cli_realtime_store()</a>, <a class="el" href="app__voicemail_8c_source.html#l03783">copy_plain_file()</a>, <a class="el" href="func__realtime_8c_source.html#l00309">function_realtime_store()</a>, and <a class="el" href="app__voicemail_8c_source.html#l05141">leave_voicemail()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02250"></a>02250 {
<a name="l02251"></a>02251    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html" title="Configuration engine structure, used to define realtime drivers.">ast_config_engine</a> *eng;
<a name="l02252"></a>02252    <span class="keywordtype">int</span> res = -1;
<a name="l02253"></a>02253    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>[256];
<a name="l02254"></a>02254    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>[256];
<a name="l02255"></a>02255    va_list ap;
<a name="l02256"></a>02256 
<a name="l02257"></a>02257    va_start(ap, family);
<a name="l02258"></a>02258    eng = <a class="code" href="config_8c.html#a8cf64b0a69a5440faa7f1c01e6232cfa" title="Find realtime engine for realtime family.">find_engine</a>(family, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l02259"></a>02259    <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#a9b105fbf374b1e80dc1f23755dbae62d">store_func</a>) 
<a name="l02260"></a>02260       res = eng-&gt;<a class="code" href="structast__config__engine.html#a9b105fbf374b1e80dc1f23755dbae62d">store_func</a>(db, table, ap);
<a name="l02261"></a>02261    va_end(ap);
<a name="l02262"></a>02262 
<a name="l02263"></a>02263    <span class="keywordflow">return</span> res;
<a name="l02264"></a>02264 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a66b6af9ceef39cb23b48501efe87219f"></a><!-- doxytag: member="config.h::ast_unload_realtime" ref="a66b6af9ceef39cb23b48501efe87219f" args="(const char *family)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_unload_realtime </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>family</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release any resources cached for a realtime family. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to destroy Various <a class="el" href="structbackends.html" title="the list of registered channel types">backends</a> may cache attributes about a realtime data storage facility; on reload, a front end resource may request to purge that cache. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>If any cache was purged </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>If no cache was found </td></tr>
  </table>
  </dd>
</dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.6.1 </dd></dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l02184">2184</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="cdr__sqlite_8c_source.html#l00059">db</a>, <a class="el" href="config_8c_source.html#l01992">find_engine()</a>, <a class="el" href="cdr__odbc_8c_source.html#l00052">table</a>, and <a class="el" href="config_8h_source.html#l00121">ast_config_engine::unload_func</a>.</p>

<p>Referenced by <a class="el" href="chan__iax2_8c_source.html#l13611">__unload_module()</a>, <a class="el" href="app__voicemail_8c_source.html#l10603">load_config()</a>, <a class="el" href="app__meetme_8c_source.html#l06490">reload()</a>, <a class="el" href="chan__iax2_8c_source.html#l12947">reload_config()</a>, and <a class="el" href="app__meetme_8c_source.html#l06435">unload_module()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02185"></a>02185 {
<a name="l02186"></a>02186    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html" title="Configuration engine structure, used to define realtime drivers.">ast_config_engine</a> *eng;
<a name="l02187"></a>02187    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>[256];
<a name="l02188"></a>02188    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>[256];
<a name="l02189"></a>02189    <span class="keywordtype">int</span> res = -1;
<a name="l02190"></a>02190 
<a name="l02191"></a>02191    eng = <a class="code" href="config_8c.html#a8cf64b0a69a5440faa7f1c01e6232cfa" title="Find realtime engine for realtime family.">find_engine</a>(family, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l02192"></a>02192    <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#a8a7912512dca5b2b99fbbe090f64143b">unload_func</a>) {
<a name="l02193"></a>02193       res = eng-&gt;<a class="code" href="structast__config__engine.html#a8a7912512dca5b2b99fbbe090f64143b">unload_func</a>(db, table);
<a name="l02194"></a>02194    }
<a name="l02195"></a>02195    <span class="keywordflow">return</span> res;
<a name="l02196"></a>02196 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a30c75d60cfd1f61e41c7275bb30c77f6"></a><!-- doxytag: member="config.h::ast_update2_realtime" ref="a30c75d60cfd1f61e41c7275bb30c77f6" args="(const char *family,...) attribute_sentinel" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_update2_realtime </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update realtime configuration. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to be updated This function is used to update a parameter in realtime configuration space. It includes the ability to lookup a row based upon multiple key criteria. As a result, this function includes two sentinel <a class="el" href="structvalues.html">values</a>, one to terminate lookup <a class="el" href="structvalues.html">values</a> and the other to terminate the listing of fields to update. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of rows affected, or -1 on error.</dd></dl>
<p>Note that you should use the constant SENTINEL to terminate arguments, in order to preserve cross-platform compatibility. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l02232">2232</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="cdr__sqlite_8c_source.html#l00059">db</a>, <a class="el" href="config_8c_source.html#l01992">find_engine()</a>, <a class="el" href="cdr__odbc_8c_source.html#l00052">table</a>, and <a class="el" href="config_8h_source.html#l00117">ast_config_engine::update2_func</a>.</p>

<p>Referenced by <a class="el" href="app__voicemail_8c_source.html#l01141">change_password_realtime()</a>, and <a class="el" href="res__realtime_8c_source.html#l00114">cli_realtime_update2()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02233"></a>02233 {
<a name="l02234"></a>02234    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html" title="Configuration engine structure, used to define realtime drivers.">ast_config_engine</a> *eng;
<a name="l02235"></a>02235    <span class="keywordtype">int</span> res = -1;
<a name="l02236"></a>02236    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>[256];
<a name="l02237"></a>02237    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>[256];
<a name="l02238"></a>02238    va_list ap;
<a name="l02239"></a>02239 
<a name="l02240"></a>02240    va_start(ap, family);
<a name="l02241"></a>02241    eng = <a class="code" href="config_8c.html#a8cf64b0a69a5440faa7f1c01e6232cfa" title="Find realtime engine for realtime family.">find_engine</a>(family, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l02242"></a>02242    <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#adfcdf27ee2d95c83b0a1e07f77aa8f4a">update2_func</a>) 
<a name="l02243"></a>02243       res = eng-&gt;<a class="code" href="structast__config__engine.html#adfcdf27ee2d95c83b0a1e07f77aa8f4a">update2_func</a>(db, table, ap);
<a name="l02244"></a>02244    va_end(ap);
<a name="l02245"></a>02245 
<a name="l02246"></a>02246    <span class="keywordflow">return</span> res;
<a name="l02247"></a>02247 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab845019b2f1bb324ff57e14192d62c39"></a><!-- doxytag: member="config.h::ast_update_realtime" ref="ab845019b2f1bb324ff57e14192d62c39" args="(const char *family, const char *keyfield, const char *lookup,...) attribute_sentinel" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_update_realtime </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>keyfield</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lookup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update realtime configuration. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to be updated </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>keyfield</em>&nbsp;</td><td>which field to use as the key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lookup</em>&nbsp;</td><td>which value to look for in the key field to match the entry. This function is used to update a parameter in realtime configuration space. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of rows affected, or -1 on error.</dd></dl>
<p>Note that you should use the constant SENTINEL to terminate arguments, in order to preserve cross-platform compatibility. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l02215">2215</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="cdr__sqlite_8c_source.html#l00059">db</a>, <a class="el" href="config_8c_source.html#l01992">find_engine()</a>, <a class="el" href="cdr__odbc_8c_source.html#l00052">table</a>, and <a class="el" href="config_8h_source.html#l00116">ast_config_engine::update_func</a>.</p>

<p>Referenced by <a class="el" href="res__realtime_8c_source.html#l00081">cli_realtime_update()</a>, <a class="el" href="app__meetme_8c_source.html#l01998">conf_run()</a>, <a class="el" href="chan__sip_8c_source.html#l11990">destroy_association()</a>, <a class="el" href="func__realtime_8c_source.html#l00201">function_realtime_write()</a>, <a class="el" href="chan__sip_8c_source.html#l18198">handle_response_peerpoke()</a>, <a class="el" href="app__voicemail_8c_source.html#l05141">leave_voicemail()</a>, <a class="el" href="chan__iax2_8c_source.html#l04306">realtime_update_peer()</a>, <a class="el" href="app__voicemail_8c_source.html#l03657">rename_file()</a>, <a class="el" href="app__meetme_8c_source.html#l01815">rt_extend_conf()</a>, <a class="el" href="chan__sip_8c_source.html#l22832">sip_poke_noanswer()</a>, and <a class="el" href="app__queue_8c_source.html#l01892">update_realtime_member_field()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02216"></a>02216 {
<a name="l02217"></a>02217    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html" title="Configuration engine structure, used to define realtime drivers.">ast_config_engine</a> *eng;
<a name="l02218"></a>02218    <span class="keywordtype">int</span> res = -1;
<a name="l02219"></a>02219    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>[256];
<a name="l02220"></a>02220    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>[256];
<a name="l02221"></a>02221    va_list ap;
<a name="l02222"></a>02222 
<a name="l02223"></a>02223    va_start(ap, lookup);
<a name="l02224"></a>02224    eng = <a class="code" href="config_8c.html#a8cf64b0a69a5440faa7f1c01e6232cfa" title="Find realtime engine for realtime family.">find_engine</a>(family, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l02225"></a>02225    <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#af2a36658af0c127fa1e2c904a0db5276">update_func</a>) 
<a name="l02226"></a>02226       res = eng-&gt;<a class="code" href="structast__config__engine.html#af2a36658af0c127fa1e2c904a0db5276">update_func</a>(db, table, keyfield, lookup, ap);
<a name="l02227"></a>02227    va_end(ap);
<a name="l02228"></a>02228 
<a name="l02229"></a>02229    <span class="keywordflow">return</span> res;
<a name="l02230"></a>02230 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a132ddbd39dd9d26395c410f7647f76db"></a><!-- doxytag: member="config.h::ast_variable_append" ref="a132ddbd39dd9d26395c410f7647f76db" args="(struct ast_category *category, struct ast_variable *variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_variable_append </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l00348">348</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00194">ast_category::last</a>, <a class="el" href="config_8h_source.html#l00077">ast_variable::next</a>, and <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>.</p>

<p>Referenced by <a class="el" href="res__config__sqlite_8c_source.html#l00851">add_cfg_entry()</a>, <a class="el" href="res__config__sqlite_8c_source.html#l01118">add_rt_multi_cfg_entry()</a>, <a class="el" href="res__config__curl_8c_source.html#l00518">config_curl()</a>, <a class="el" href="res__config__ldap_8c_source.html#l01015">config_ldap()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00797">config_odbc()</a>, <a class="el" href="res__config__pgsql_8c_source.html#l01030">config_pgsql()</a>, <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>, <a class="el" href="config_8c_source.html#l00661">inherit_category()</a>, <a class="el" href="config_8c_source.html#l00474">move_variables()</a>, <a class="el" href="config_8c_source.html#l00922">process_text_line()</a>, <a class="el" href="app__directory_8c_source.html#l00382">realtime_directory()</a>, <a class="el" href="res__config__curl_8c_source.html#l00128">realtime_multi_curl()</a>, <a class="el" href="res__config__ldap_8c_source.html#l00939">realtime_multi_ldap()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00256">realtime_multi_odbc()</a>, <a class="el" href="res__config__pgsql_8c_source.html#l00418">realtime_multi_pgsql()</a>, and <a class="el" href="app__voicemail_8c_source.html#l01357">vm_change_password()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00349"></a>00349 {
<a name="l00350"></a>00350    <span class="keywordflow">if</span> (!variable)
<a name="l00351"></a>00351       <span class="keywordflow">return</span>;
<a name="l00352"></a>00352    <span class="keywordflow">if</span> (category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a>)
<a name="l00353"></a>00353       category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a>-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a> = variable;
<a name="l00354"></a>00354    <span class="keywordflow">else</span>
<a name="l00355"></a>00355       category-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a> = variable;
<a name="l00356"></a>00356    category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a> = variable;
<a name="l00357"></a>00357    <span class="keywordflow">while</span> (category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a>-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>)
<a name="l00358"></a>00358       category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a> = category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a>-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l00359"></a>00359 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a935ccfa153100ddd320c8918bd6e941b"></a><!-- doxytag: member="config.h::ast_variable_browse" ref="a935ccfa153100ddd320c8918bd6e941b" args="(const struct ast_config *config, const char *category)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_variable_browse </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>category</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Goes through variables Somewhat similar in intent as the ast_category_browse. List variables of config file category. </p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a></em>&nbsp;</td><td>list on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l00411">411</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00512">ast_category_get()</a>, <a class="el" href="config_8c_source.html#l00202">ast_config::last_browse</a>, <a class="el" href="config_8c_source.html#l00184">ast_category::name</a>, and <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>.</p>

<p>Referenced by <a class="el" href="http_8c_source.html#l00848">__ast_http_load()</a>, <a class="el" href="res__http__post_8c_source.html#l00408">__ast_http_post_load()</a>, <a class="el" href="manager_8c_source.html#l04061">__init_manager()</a>, <a class="el" href="manager_8c_source.html#l01156">action_getconfig()</a>, <a class="el" href="manager_8c_source.html#l01257">action_getconfigjson()</a>, <a class="el" href="res__adsi_8c_source.html#l01015">adsi_load()</a>, <a class="el" href="res__jabber_8c_source.html#l02907">aji_load_config()</a>, <a class="el" href="cli_8c_source.html#l01554">ast_cli_perms_init()</a>, <a class="el" href="app__directory_8c_source.html#l00505">AST_LIST_HEAD_NOLOCK()</a>, <a class="el" href="asterisk_8c_source.html#l02784">ast_readconfig()</a>, <a class="el" href="config_8c_source.html#l00435">ast_variable_retrieve()</a>, <a class="el" href="xmldoc_8c_source.html#l01765">ast_xmldoc_load_documentation()</a>, <a class="el" href="chan__console_8c_source.html#l01323">build_device()</a>, <a class="el" href="evt_8c_source.html#l00403">build_event_channel()</a>, <a class="el" href="app__rpt_8c_source.html#l09335">check_tx_freq()</a>, <a class="el" href="app__rpt_8c_source.html#l06589">collect_function_digits()</a>, <a class="el" href="app__meetme_8c_source.html#l03696">conf_exec()</a>, <a class="el" href="chan__skinny_8c_source.html#l07053">config_load()</a>, <a class="el" href="cdr__pgsql_8c_source.html#l00362">config_module()</a>, <a class="el" href="app__playback_8c_source.html#l00162">do_say()</a>, <a class="el" href="app__rpt_8c_source.html#l10605">do_scheduler()</a>, <a class="el" href="app__meetme_8c_source.html#l03546">find_conf()</a>, <a class="el" href="chan__gtalk_8c_source.html#l01901">gtalk_load_config()</a>, <a class="el" href="pbx__config_8c_source.html#l00672">handle_cli_dialplan_save()</a>, <a class="el" href="iax2-provision_8c_source.html#l00277">iax_template_parse()</a>, <a class="el" href="logger_8c_source.html#l00320">init_logger_chain()</a>, <a class="el" href="chan__jingle_8c_source.html#l01724">jingle_load_config()</a>, <a class="el" href="app__amd_8c_source.html#l00415">load_config()</a>, <a class="el" href="app__playback_8c_source.html#l00531">load_module()</a>, <a class="el" href="loader_8c_source.html#l00941">load_modules()</a>, <a class="el" href="res__musiconhold_8c_source.html#l01549">load_moh_classes()</a>, <a class="el" href="res__odbc_8c_source.html#l00730">load_odbc_config()</a>, <a class="el" href="app__rpt_8c_source.html#l02224">load_rpt_vars()</a>, <a class="el" href="misdn__config_8c_source.html#l01118">misdn_cfg_init()</a>, <a class="el" href="app__rpt_8c_source.html#l01984">node_lookup()</a>, <a class="el" href="cdr__odbc_8c_source.html#l00152">odbc_load_module()</a>, <a class="el" href="app__osplookup_8c_source.html#l00181">osp_create_provider()</a>, <a class="el" href="codec__adpcm_8c_source.html#l00311">parse_config()</a>, <a class="el" href="indications_8c_source.html#l00943">parse_tone_zone()</a>, <a class="el" href="pbx__config_8c_source.html#l01367">pbx_load_config()</a>, <a class="el" href="chan__agent_8c_source.html#l01180">read_agent_config()</a>, <a class="el" href="config_8c_source.html#l01879">read_config_maps()</a>, <a class="el" href="app__playback_8c_source.html#l00482">reload()</a>, <a class="el" href="chan__h323_8c_source.html#l02832">reload_config()</a>, <a class="el" href="app__followme_8c_source.html#l00297">reload_followme()</a>, <a class="el" href="app__queue_8c_source.html#l05650">reload_queue_rules()</a>, <a class="el" href="app__queue_8c_source.html#l05834">reload_single_queue()</a>, <a class="el" href="asterisk_8c_source.html#l03067">run_startup_commands()</a>, <a class="el" href="chan__iax2_8c_source.html#l12493">set_config()</a>, <a class="el" href="chan__dahdi_8c_source.html#l17079">setup_dahdi()</a>, <a class="el" href="app__voicemail_8c_source.html#l10042">show_users_realtime()</a>, <a class="el" href="chan__sip_8c_source.html#l16891">sip_cli_notify()</a>, <a class="el" href="app__meetme_8c_source.html#l06177">sla_build_station()</a>, <a class="el" href="app__meetme_8c_source.html#l06042">sla_build_trunk()</a>, <a class="el" href="res__smdi_8c_source.html#l00861">smdi_load()</a>, <a class="el" href="chan__oss_8c_source.html#l01348">store_config()</a>, and <a class="el" href="cdr__tds_8c_source.html#l00422">tds_load_module()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00412"></a>00412 {
<a name="l00413"></a>00413    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat = NULL;
<a name="l00414"></a>00414 
<a name="l00415"></a>00415    <span class="keywordflow">if</span> (category &amp;&amp; config-&gt;<a class="code" href="structast__config.html#acd249676fca8f438f6762b26fb92f712">last_browse</a> &amp;&amp; (config-&gt;<a class="code" href="structast__config.html#acd249676fca8f438f6762b26fb92f712">last_browse</a>-&gt;<a class="code" href="structast__category.html#a3777dbae63a15da001b2baa317a25149">name</a> == category)) {
<a name="l00416"></a>00416       cat = config-&gt;<a class="code" href="structast__config.html#acd249676fca8f438f6762b26fb92f712">last_browse</a>;
<a name="l00417"></a>00417    } <span class="keywordflow">else</span> {
<a name="l00418"></a>00418       cat = <a class="code" href="config_8h.html#a0c2db6370e5051f282b2926f5893b2ea" title="Retrieve a category if it exists.">ast_category_get</a>(config, category);
<a name="l00419"></a>00419    }
<a name="l00420"></a>00420 
<a name="l00421"></a>00421    <span class="keywordflow">return</span> (cat) ? cat-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a> : NULL;
<a name="l00422"></a>00422 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a387af9887266a55f3dcbbf3c12d4ccba"></a><!-- doxytag: member="config.h::ast_variable_delete" ref="a387af9887266a55f3dcbbf3c12d4ccba" args="(struct ast_category *category, const char *variable, const char *match, const char *line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_variable_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>match</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l00682">682</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00063">ast_strlen_zero()</a>, <a class="el" href="config_8c_source.html#l00397">ast_variables_destroy()</a>, <a class="el" href="config_8c_source.html#l00194">ast_category::last</a>, <a class="el" href="config_8h_source.html#l00075">ast_variable::name</a>, <a class="el" href="config_8h_source.html#l00077">ast_variable::next</a>, <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>, and <a class="el" href="config_8h_source.html#l00076">ast_variable::value</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00683"></a>00683 {
<a name="l00684"></a>00684    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *cur, *prev=NULL, *curn;
<a name="l00685"></a>00685    <span class="keywordtype">int</span> res = -1;
<a name="l00686"></a>00686    <span class="keywordtype">int</span> <a class="code" href="structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a> = 0;
<a name="l00687"></a>00687 
<a name="l00688"></a>00688    cur = category-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>;
<a name="l00689"></a>00689    <span class="keywordflow">while</span> (cur) {
<a name="l00690"></a>00690       <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> == variable) {
<a name="l00691"></a>00691          <span class="keywordflow">if</span> (prev) {
<a name="l00692"></a>00692             prev-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a> = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l00693"></a>00693             <span class="keywordflow">if</span> (cur == category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a>)
<a name="l00694"></a>00694                category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a> = prev;
<a name="l00695"></a>00695          } <span class="keywordflow">else</span> {
<a name="l00696"></a>00696             category-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a> = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l00697"></a>00697             <span class="keywordflow">if</span> (cur == category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a>)
<a name="l00698"></a>00698                category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a> = NULL;
<a name="l00699"></a>00699          }
<a name="l00700"></a>00700          cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a> = NULL;
<a name="l00701"></a>00701          <a class="code" href="config_8h.html#ad3d8122172af6f13687a07840411d65d" title="Free variable list.">ast_variables_destroy</a>(cur);
<a name="l00702"></a>00702          <span class="keywordflow">return</span> 0;
<a name="l00703"></a>00703       }
<a name="l00704"></a>00704       prev = cur;
<a name="l00705"></a>00705       cur = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l00706"></a>00706    }
<a name="l00707"></a>00707 
<a name="l00708"></a>00708    prev = NULL;
<a name="l00709"></a>00709    cur = category-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>;
<a name="l00710"></a>00710    <span class="keywordflow">while</span> (cur) {
<a name="l00711"></a>00711       curn = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l00712"></a>00712       <span class="keywordflow">if</span> ((!<a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(line) &amp;&amp; lineno == atoi(line)) || (<a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(line) &amp;&amp; !strcasecmp(cur-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, variable) &amp;&amp; (<a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(<a class="code" href="chan__iax2_8c.html#aa27930d6214f6421994d6bef51efb7aa">match</a>) || !strcasecmp(cur-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="chan__iax2_8c.html#aa27930d6214f6421994d6bef51efb7aa">match</a>)))) {
<a name="l00713"></a>00713          <span class="keywordflow">if</span> (prev) {
<a name="l00714"></a>00714             prev-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a> = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l00715"></a>00715             <span class="keywordflow">if</span> (cur == category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a>)
<a name="l00716"></a>00716                category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a> = prev;
<a name="l00717"></a>00717          } <span class="keywordflow">else</span> {
<a name="l00718"></a>00718             category-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a> = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l00719"></a>00719             <span class="keywordflow">if</span> (cur == category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a>)
<a name="l00720"></a>00720                category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a> = NULL;
<a name="l00721"></a>00721          }
<a name="l00722"></a>00722          cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a> = NULL;
<a name="l00723"></a>00723          <a class="code" href="config_8h.html#ad3d8122172af6f13687a07840411d65d" title="Free variable list.">ast_variables_destroy</a>(cur);
<a name="l00724"></a>00724          res = 0;
<a name="l00725"></a>00725       } <span class="keywordflow">else</span>
<a name="l00726"></a>00726          prev = cur;
<a name="l00727"></a>00727 
<a name="l00728"></a>00728       cur = curn;
<a name="l00729"></a>00729       lineno++;
<a name="l00730"></a>00730    }
<a name="l00731"></a>00731    <span class="keywordflow">return</span> res;
<a name="l00732"></a>00732 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad12cd7f4f5efe4a460c1aaed0ac488d5"></a><!-- doxytag: member="config.h::ast_variable_insert" ref="ad12cd7f4f5efe4a460c1aaed0ac488d5" args="(struct ast_category *category, struct ast_variable *variable, const char *line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_variable_insert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l00361">361</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8h_source.html#l00077">ast_variable::next</a>, and <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00362"></a>00362 {
<a name="l00363"></a>00363    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *cur = category-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>;
<a name="l00364"></a>00364    <span class="keywordtype">int</span> <a class="code" href="structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>;
<a name="l00365"></a>00365    <span class="keywordtype">int</span> insertline;
<a name="l00366"></a>00366 
<a name="l00367"></a>00367    <span class="keywordflow">if</span> (!variable || sscanf(line, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;insertline) != 1) {
<a name="l00368"></a>00368       <span class="keywordflow">return</span>;
<a name="l00369"></a>00369    }
<a name="l00370"></a>00370    <span class="keywordflow">if</span> (!insertline) {
<a name="l00371"></a>00371       variable-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a> = category-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>;
<a name="l00372"></a>00372       category-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a> = variable;
<a name="l00373"></a>00373    } <span class="keywordflow">else</span> {
<a name="l00374"></a>00374       <span class="keywordflow">for</span> (lineno = 1; lineno &lt; insertline; lineno++) {
<a name="l00375"></a>00375          cur = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l00376"></a>00376          <span class="keywordflow">if</span> (!cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>) {
<a name="l00377"></a>00377             <span class="keywordflow">break</span>;
<a name="l00378"></a>00378          }
<a name="l00379"></a>00379       }
<a name="l00380"></a>00380       variable-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a> = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l00381"></a>00381       cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a> = variable;
<a name="l00382"></a>00382    }
<a name="l00383"></a>00383 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a08e94d96f459e7301a74daf32035423b"></a><!-- doxytag: member="config.h::ast_variable_new" ref="a08e94d96f459e7301a74daf32035423b" args="(const char *name, const char *value, const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_variable_new </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l00223">223</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="astmm_8c_source.html#l00199">__ast_calloc()</a>, <a class="el" href="astmm_8h_source.html#l00072">ast_calloc</a>, <a class="el" href="config_8h_source.html#l00079">ast_variable::file</a>, <a class="el" href="config_8h_source.html#l00075">ast_variable::name</a>, <a class="el" href="config_8h_source.html#l00087">ast_variable::stuff</a>, and <a class="el" href="config_8h_source.html#l00076">ast_variable::value</a>.</p>

<p>Referenced by <a class="el" href="res__config__sqlite_8c_source.html#l00851">add_cfg_entry()</a>, <a class="el" href="res__config__sqlite_8c_source.html#l00999">add_rt_cfg_entry()</a>, <a class="el" href="res__config__sqlite_8c_source.html#l01118">add_rt_multi_cfg_entry()</a>, <a class="el" href="chan__sip_8c_source.html#l23568">add_var()</a>, <a class="el" href="pbx__spool_8c_source.html#l00110">apply_outgoing()</a>, <a class="el" href="channel_8c_source.html#l00186">ast_channeltype_list()</a>, <a class="el" href="config_8c_source.html#l00734">ast_variable_update()</a>, <a class="el" href="manager_8c_source.html#l00903">astman_get_variables()</a>, <a class="el" href="chan__iax2_8c_source.html#l12156">build_user()</a>, <a class="el" href="chan__iax2_8c_source.html#l07197">check_access()</a>, <a class="el" href="res__config__curl_8c_source.html#l00518">config_curl()</a>, <a class="el" href="res__config__ldap_8c_source.html#l01015">config_ldap()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00797">config_odbc()</a>, <a class="el" href="res__config__pgsql_8c_source.html#l01030">config_pgsql()</a>, <a class="el" href="chan__sip_8c_source.html#l02763">copy_vars()</a>, <a class="el" href="app__minivm_8c_source.html#l02299">create_vmaccount()</a>, <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>, <a class="el" href="http_8c_source.html#l00423">handle_uri()</a>, <a class="el" href="http_8c_source.html#l00659">httpd_helper_thread()</a>, <a class="el" href="iax2-parser_8c_source.html#l00717">iax_parse_ies()</a>, <a class="el" href="res__config__ldap_8c_source.html#l00181">ldap_table_config_add_attribute()</a>, <a class="el" href="chan__dahdi_8c_source.html#l09990">mkintf()</a>, <a class="el" href="app__parkandannounce_8c_source.html#l00088">parkandannounce_exec()</a>, <a class="el" href="http_8c_source.html#l00622">parse_cookies()</a>, <a class="el" href="chan__dahdi_8c_source.html#l16096">process_dahdi()</a>, <a class="el" href="config_8c_source.html#l00922">process_text_line()</a>, <a class="el" href="res__config__curl_8c_source.html#l00056">realtime_curl()</a>, <a class="el" href="app__directory_8c_source.html#l00382">realtime_directory()</a>, <a class="el" href="res__config__ldap_8c_source.html#l00266">realtime_ldap_entry_to_var()</a>, <a class="el" href="res__config__ldap_8c_source.html#l00349">realtime_ldap_result_to_vars()</a>, <a class="el" href="res__config__curl_8c_source.html#l00128">realtime_multi_curl()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00256">realtime_multi_odbc()</a>, <a class="el" href="res__config__pgsql_8c_source.html#l00418">realtime_multi_pgsql()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00111">realtime_odbc()</a>, <a class="el" href="res__config__pgsql_8c_source.html#l00283">realtime_pgsql()</a>, <a class="el" href="chan__sip_8c_source.html#l11341">transmit_notify_custom()</a>, <a class="el" href="config_8c_source.html#l00460">variable_clone()</a>, and <a class="el" href="app__voicemail_8c_source.html#l01357">vm_change_password()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00225"></a>00225 {
<a name="l00226"></a>00226    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *variable;
<a name="l00227"></a>00227    <span class="keywordtype">int</span> name_len = strlen(<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>) + 1; 
<a name="l00228"></a>00228    <span class="keywordtype">int</span> val_len = strlen(<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>) + 1; 
<a name="l00229"></a>00229    <span class="keywordtype">int</span> fn_len = strlen(filename) + 1;  
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 <span class="preprocessor">#ifdef MALLOC_DEBUG</span>
<a name="l00232"></a>00232 <span class="preprocessor"></span>   <span class="keywordflow">if</span> ((variable = <a class="code" href="astmm_8h.html#ad800d5c993a0c605f6e061bdef1b524c">__ast_calloc</a>(1, name_len + val_len + fn_len + <span class="keyword">sizeof</span>(*variable), <a class="code" href="structast__variable.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>, <a class="code" href="structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, func))) {
<a name="l00233"></a>00233 <span class="preprocessor">#else</span>
<a name="l00234"></a>00234 <span class="preprocessor"></span>   <span class="keywordflow">if</span> ((variable = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(1, name_len + val_len + fn_len + <span class="keyword">sizeof</span>(*variable)))) {
<a name="l00235"></a>00235 <span class="preprocessor">#endif</span>
<a name="l00236"></a>00236 <span class="preprocessor"></span>      <span class="keywordtype">char</span> *dst = variable-&gt;<a class="code" href="structast__variable.html#a7af2365ea6fa5bbbf507c1666e946824">stuff</a>;  <span class="comment">/* writable space starts here */</span>
<a name="l00237"></a>00237       variable-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = strcpy(dst, <a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>);
<a name="l00238"></a>00238       dst += name_len;
<a name="l00239"></a>00239       variable-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a> = strcpy(dst, <a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);
<a name="l00240"></a>00240       dst += val_len;
<a name="l00241"></a>00241       variable-&gt;<a class="code" href="structast__variable.html#adf16cd437526a5c5e0e0af87745acbb8">file</a> = strcpy(dst, filename);
<a name="l00242"></a>00242    }
<a name="l00243"></a>00243    <span class="keywordflow">return</span> variable;
<a name="l00244"></a>00244 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab87fa38c79226e5a0105ad9d2e2e9ae5"></a><!-- doxytag: member="config.h::ast_variable_retrieve" ref="ab87fa38c79226e5a0105ad9d2e2e9ae5" args="(const struct ast_config *config, const char *category, const char *variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_variable_retrieve </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>variable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets a variable. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>which (opened) config to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>category</em>&nbsp;</td><td>category under which the variable lies </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>variable</em>&nbsp;</td><td>which variable you wish to get the data for Goes through a given config file in the given category and searches for the given variable</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>The</em>&nbsp;</td><td>variable value on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>if unable to find it. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l00435">435</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00411">ast_variable_browse()</a>, <a class="el" href="config_8h_source.html#l00075">ast_variable::name</a>, <a class="el" href="config_8c_source.html#l00195">ast_category::next</a>, <a class="el" href="config_8h_source.html#l00077">ast_variable::next</a>, <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>, <a class="el" href="config_8c_source.html#l00199">ast_config::root</a>, and <a class="el" href="config_8h_source.html#l00076">ast_variable::value</a>.</p>

<p>Referenced by <a class="el" href="rtp_8c_source.html#l04739">__ast_rtp_reload()</a>, <a class="el" href="udptl_8c_source.html#l01342">__ast_udptl_reload()</a>, <a class="el" href="manager_8c_source.html#l04061">__init_manager()</a>, <a class="el" href="dsp_8c_source.html#l01681">_dsp_init()</a>, <a class="el" href="app__voicemail_8c_source.html#l11416">advanced_options()</a>, <a class="el" href="res__jabber_8c_source.html#l02907">aji_load_config()</a>, <a class="el" href="config_8c_source.html#l00424">ast_config_option()</a>, <a class="el" href="app__directory_8c_source.html#l00505">AST_LIST_HEAD_NOLOCK()</a>, <a class="el" href="res__phoneprov_8c_source.html#l00709">build_extension()</a>, <a class="el" href="func__config_8c_source.html#l00064">config_function_read()</a>, <a class="el" href="cdr__pgsql_8c_source.html#l00362">config_module()</a>, <a class="el" href="app__directory_8c_source.html#l00723">directory_exec()</a>, <a class="el" href="cdr_8c_source.html#l01396">do_reload()</a>, <a class="el" href="app__rpt_8c_source.html#l10605">do_scheduler()</a>, <a class="el" href="app__festival_8c_source.html#l00268">festival_exec()</a>, <a class="el" href="app__queue_8c_source.html#l01696">find_queue_by_name_rt()</a>, <a class="el" href="app__followme_8c_source.html#l00917">find_realtime()</a>, <a class="el" href="app__rpt_8c_source.html#l06305">function_macro()</a>, <a class="el" href="chan__sip_8c_source.html#l04706">get_insecure_variable_from_config()</a>, <a class="el" href="app__rpt_8c_source.html#l03843">get_wait_interval()</a>, <a class="el" href="chan__gtalk_8c_source.html#l01901">gtalk_load_config()</a>, <a class="el" href="iax2-provision_8c_source.html#l00277">iax_template_parse()</a>, <a class="el" href="func__odbc_8c_source.html#l00745">init_acf_query()</a>, <a class="el" href="logger_8c_source.html#l00320">init_logger_chain()</a>, <a class="el" href="chan__jingle_8c_source.html#l01724">jingle_load_config()</a>, <a class="el" href="app__alarmreceiver_8c_source.html#l00639">load_config()</a>, <a class="el" href="app__meetme_8c_source.html#l04446">load_config_meetme()</a>, <a class="el" href="indications_8c_source.html#l01030">load_indications()</a>, <a class="el" href="cdr__radius_8c_source.html#l00230">load_module()</a>, <a class="el" href="loader_8c_source.html#l00941">load_modules()</a>, <a class="el" href="app__rpt_8c_source.html#l02224">load_rpt_vars()</a>, <a class="el" href="app__voicemail_8c_source.html#l04163">make_email_file()</a>, <a class="el" href="app__rpt_8c_source.html#l01984">node_lookup()</a>, <a class="el" href="cdr__odbc_8c_source.html#l00152">odbc_load_module()</a>, <a class="el" href="app__osplookup_8c_source.html#l01772">osp_load()</a>, <a class="el" href="res__config__ldap_8c_source.html#l01577">parse_config()</a>, <a class="el" href="pbx__config_8c_source.html#l01367">pbx_load_config()</a>, <a class="el" href="pbx__config_8c_source.html#l01608">pbx_load_users()</a>, <a class="el" href="app__voicemail_8c_source.html#l07051">play_message()</a>, <a class="el" href="app__voicemail_8c_source.html#l03977">prep_email_sub_vars()</a>, <a class="el" href="enum_8c_source.html#l00959">private_enum_init()</a>, <a class="el" href="app__queue_8c_source.html#l05698">queue_set_global_params()</a>, <a class="el" href="chan__agent_8c_source.html#l01180">read_agent_config()</a>, <a class="el" href="app__directory_8c_source.html#l00382">realtime_directory()</a>, <a class="el" href="chan__h323_8c_source.html#l02832">reload_config()</a>, <a class="el" href="app__followme_8c_source.html#l00297">reload_followme()</a>, <a class="el" href="app__queue_8c_source.html#l05834">reload_single_queue()</a>, <a class="el" href="app__rpt_8c_source.html#l01412">retreive_memory()</a>, <a class="el" href="app__rpt_8c_source.html#l02197">retrieve_astcfgint()</a>, <a class="el" href="app__rpt_8c_source.html#l10730">rpt()</a>, <a class="el" href="app__rpt_8c_source.html#l12919">rpt_master()</a>, <a class="el" href="app__rpt_8c_source.html#l03937">rpt_tele_thread()</a>, <a class="el" href="app__rpt_8c_source.html#l05207">rpt_telemetry()</a>, <a class="el" href="app__rpt_8c_source.html#l03722">saynode()</a>, <a class="el" href="app__directory_8c_source.html#l00582">search_directory()</a>, <a class="el" href="chan__iax2_8c_source.html#l12493">set_config()</a>, <a class="el" href="chan__dahdi_8c_source.html#l17079">setup_dahdi()</a>, <a class="el" href="app__meetme_8c_source.html#l06177">sla_build_station()</a>, <a class="el" href="app__meetme_8c_source.html#l06042">sla_build_trunk()</a>, <a class="el" href="app__meetme_8c_source.html#l06285">sla_load_config()</a>, <a class="el" href="cdr__tds_8c_source.html#l00422">tds_load_module()</a>, <a class="el" href="app__rpt_8c_source.html#l03794">telem_lookup()</a>, <a class="el" href="app__queue_8c_source.html#l01906">update_realtime_members()</a>, <a class="el" href="app__voicemail_8c_source.html#l01357">vm_change_password()</a>, and <a class="el" href="app__voicemail_8c_source.html#l06307">vm_forwardoptions()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00436"></a>00436 {
<a name="l00437"></a>00437    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *v;
<a name="l00438"></a>00438 
<a name="l00439"></a>00439    <span class="keywordflow">if</span> (category) {
<a name="l00440"></a>00440       <span class="keywordflow">for</span> (v = <a class="code" href="config_8h.html#a935ccfa153100ddd320c8918bd6e941b" title="Goes through variables Somewhat similar in intent as the ast_category_browse. List...">ast_variable_browse</a>(config, category); v; v = v-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>) {
<a name="l00441"></a>00441          <span class="keywordflow">if</span> (!strcasecmp(variable, v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)) {
<a name="l00442"></a>00442             <span class="keywordflow">return</span> v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>;
<a name="l00443"></a>00443          }
<a name="l00444"></a>00444       }
<a name="l00445"></a>00445    } <span class="keywordflow">else</span> {
<a name="l00446"></a>00446       <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448       <span class="keywordflow">for</span> (cat = config-&gt;<a class="code" href="structast__config.html#a1d069527a476fcfd5e93263cda8099dd">root</a>; cat; cat = cat-&gt;<a class="code" href="structast__category.html#a0a4a1c6e5b4ed640d4bb7c697df91212">next</a>) {
<a name="l00449"></a>00449          <span class="keywordflow">for</span> (v = cat-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>; v; v = v-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>) {
<a name="l00450"></a>00450             <span class="keywordflow">if</span> (!strcasecmp(variable, v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)) {
<a name="l00451"></a>00451                <span class="keywordflow">return</span> v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>;
<a name="l00452"></a>00452             }
<a name="l00453"></a>00453          }
<a name="l00454"></a>00454       }
<a name="l00455"></a>00455    }
<a name="l00456"></a>00456 
<a name="l00457"></a>00457    <span class="keywordflow">return</span> NULL;
<a name="l00458"></a>00458 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a61b77e9b543a66af82d7ac7d4d6b4ac8"></a><!-- doxytag: member="config.h::ast_variable_update" ref="a61b77e9b543a66af82d7ac7d4d6b4ac8" args="(struct ast_category *category, const char *variable, const char *value, const char *match, unsigned int object)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_variable_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>match</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>object</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update variable value within a config. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>category</em>&nbsp;</td><td>Category element within the config </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>variable</em>&nbsp;</td><td>Name of the variable to change </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>New value of the variable </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>match</em>&nbsp;</td><td>If set, previous value of the variable (if NULL or zero-length, no matching will be done) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>object</em>&nbsp;</td><td>Boolean of whether to make the new variable an object </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success or -1 on failure. </dd></dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l00734">734</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="strings_8h_source.html#l00063">ast_strlen_zero()</a>, <a class="el" href="config_8c_source.html#l00223">ast_variable_new()</a>, <a class="el" href="config_8c_source.html#l00397">ast_variables_destroy()</a>, <a class="el" href="config_8h_source.html#l00079">ast_variable::file</a>, <a class="el" href="config_8c_source.html#l00194">ast_category::last</a>, <a class="el" href="config_8h_source.html#l00075">ast_variable::name</a>, <a class="el" href="config_8h_source.html#l00077">ast_variable::next</a>, <a class="el" href="config_8h_source.html#l00082">ast_variable::object</a>, <a class="el" href="config_8c_source.html#l00193">ast_category::root</a>, and <a class="el" href="config_8h_source.html#l00076">ast_variable::value</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l01324">handle_updates()</a>, <a class="el" href="config_8c_source.html#l00922">process_text_line()</a>, <a class="el" href="app__voicemail_8c_source.html#l01357">vm_change_password()</a>, and <a class="el" href="app__voicemail_8c_source.html#l06307">vm_forwardoptions()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00736"></a>00736 {
<a name="l00737"></a>00737    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *cur, *prev=NULL, *newer=NULL;
<a name="l00738"></a>00738 
<a name="l00739"></a>00739    <span class="keywordflow">for</span> (cur = category-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a>; cur; prev = cur, cur = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>) {
<a name="l00740"></a>00740       <span class="keywordflow">if</span> (strcasecmp(cur-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, variable) ||
<a name="l00741"></a>00741          (!<a class="code" href="strings_8h.html#a5c8aa5212ecb665fb072eac00c799da6">ast_strlen_zero</a>(<a class="code" href="chan__iax2_8c.html#aa27930d6214f6421994d6bef51efb7aa">match</a>) &amp;&amp; strcasecmp(cur-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="chan__iax2_8c.html#aa27930d6214f6421994d6bef51efb7aa">match</a>)))
<a name="l00742"></a>00742          <span class="keywordflow">continue</span>;
<a name="l00743"></a>00743 
<a name="l00744"></a>00744       <span class="keywordflow">if</span> (!(newer = <a class="code" href="config_8h.html#a08e94d96f459e7301a74daf32035423b">ast_variable_new</a>(variable, <a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, cur-&gt;<a class="code" href="structast__variable.html#adf16cd437526a5c5e0e0af87745acbb8">file</a>)))
<a name="l00745"></a>00745          <span class="keywordflow">return</span> -1;
<a name="l00746"></a>00746    
<a name="l00747"></a>00747       newer-&gt;next = cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l00748"></a>00748       newer-&gt;<a class="code" href="structast__variable.html#a328cd221e75f4bd92e3ccf406f0d0441">object</a> = cur-&gt;<a class="code" href="structast__variable.html#a328cd221e75f4bd92e3ccf406f0d0441">object</a> || <a class="code" href="structast__variable.html#a328cd221e75f4bd92e3ccf406f0d0441">object</a>;
<a name="l00749"></a>00749       <span class="keywordflow">if</span> (prev)
<a name="l00750"></a>00750          prev-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a> = newer;
<a name="l00751"></a>00751       <span class="keywordflow">else</span>
<a name="l00752"></a>00752          category-&gt;<a class="code" href="structast__category.html#a6f86d2cb07f9a779a13a854d21b40728">root</a> = newer;
<a name="l00753"></a>00753       <span class="keywordflow">if</span> (category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a> == cur)
<a name="l00754"></a>00754          category-&gt;<a class="code" href="structast__category.html#ac6bc41916ca996a56407db9d13e2e734">last</a> = newer;
<a name="l00755"></a>00755 
<a name="l00756"></a>00756       cur-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a> = NULL;
<a name="l00757"></a>00757       <a class="code" href="config_8h.html#ad3d8122172af6f13687a07840411d65d" title="Free variable list.">ast_variables_destroy</a>(cur);
<a name="l00758"></a>00758 
<a name="l00759"></a>00759       <span class="keywordflow">return</span> 0;
<a name="l00760"></a>00760    }
<a name="l00761"></a>00761 
<a name="l00762"></a>00762    <span class="comment">/* Could not find variable to update */</span>
<a name="l00763"></a>00763    <span class="keywordflow">return</span> -1;
<a name="l00764"></a>00764 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad3d8122172af6f13687a07840411d65d"></a><!-- doxytag: member="config.h::ast_variables_destroy" ref="ad3d8122172af6f13687a07840411d65d" args="(struct ast_variable *var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_variables_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td>
          <td class="paramname"> <em>var</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free variable list. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>var</em>&nbsp;</td><td>the linked list of variables to free This function frees a list of variables. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8c_source.html#l00397">397</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l00385">ast_comment_destroy()</a>, <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="config_8h_source.html#l00077">ast_variable::next</a>, <a class="el" href="config_8h_source.html#l00084">ast_variable::precomments</a>, <a class="el" href="config_8h_source.html#l00085">ast_variable::sameline</a>, and <a class="el" href="config_8h_source.html#l00086">ast_variable::trailing</a>.</p>

<p>Referenced by <a class="el" href="chan__sip_8c_source.html#l05498">__sip_destroy()</a>, <a class="el" href="config_8c_source.html#l00561">ast_category_destroy()</a>, <a class="el" href="config_8c_source.html#l00811">ast_category_empty()</a>, <a class="el" href="pbx_8c_source.html#l08106">ast_pbx_outgoing_app()</a>, <a class="el" href="pbx_8c_source.html#l07940">ast_pbx_outgoing_exten()</a>, <a class="el" href="agent_8c_source.html#l00510">ast_var_channel_types()</a>, <a class="el" href="agent_8c_source.html#l00529">ast_var_channel_types_table()</a>, <a class="el" href="config_8c_source.html#l00682">ast_variable_delete()</a>, <a class="el" href="config_8c_source.html#l00734">ast_variable_update()</a>, <a class="el" href="chan__h323_8c_source.html#l01478">build_peer()</a>, <a class="el" href="chan__h323_8c_source.html#l01360">build_user()</a>, <a class="el" href="res__realtime_8c_source.html#l00043">cli_realtime_load()</a>, <a class="el" href="app__meetme_8c_source.html#l01998">conf_run()</a>, <a class="el" href="app__voicemail_8c_source.html#l03783">copy_plain_file()</a>, <a class="el" href="chan__dahdi_8c_source.html#l03856">destroy_dahdi_pvt()</a>, <a class="el" href="app__meetme_8c_source.html#l03372">find_conf_realtime()</a>, <a class="el" href="app__followme_8c_source.html#l00917">find_realtime()</a>, <a class="el" href="app__minivm_8c_source.html#l00998">find_user_realtime()</a>, <a class="el" href="pbx__spool_8c_source.html#l00101">free_outgoing()</a>, <a class="el" href="app__minivm_8c_source.html#l00863">free_user()</a>, <a class="el" href="func__realtime_8c_source.html#l00144">function_realtime_read()</a>, <a class="el" href="func__realtime_8c_source.html#l00357">function_realtime_readdestroy()</a>, <a class="el" href="http_8c_source.html#l00423">handle_uri()</a>, <a class="el" href="http_8c_source.html#l00659">httpd_helper_thread()</a>, <a class="el" href="res__config__ldap_8c_source.html#l00544">ldap_loadentry()</a>, <a class="el" href="app__queue_8c_source.html#l02243">leave_queue()</a>, <a class="el" href="app__queue_8c_source.html#l01830">load_realtime_queue()</a>, <a class="el" href="res__musiconhold_8c_source.html#l01223">local_ast_moh_start()</a>, <a class="el" href="chan__sip_8c_source.html#l11366">manager_sipnotify()</a>, <a class="el" href="chan__iax2_8c_source.html#l01715">pvt_destructor()</a>, <a class="el" href="app__queue_8c_source.html#l05461">queue_function_queuewaitingcount()</a>, <a class="el" href="chan__h323_8c_source.html#l01226">realtime_alias()</a>, <a class="el" href="pbx__realtime_8c_source.html#l00176">realtime_canmatch()</a>, <a class="el" href="pbx__realtime_8c_source.html#l00186">realtime_exec()</a>, <a class="el" href="pbx__realtime_8c_source.html#l00166">realtime_exists()</a>, <a class="el" href="res__config__sqlite_8c_source.html#l01028">realtime_handler()</a>, <a class="el" href="res__config__ldap_8c_source.html#l00718">realtime_ldap_base_ap()</a>, <a class="el" href="res__config__ldap_8c_source.html#l00349">realtime_ldap_result_to_vars()</a>, <a class="el" href="pbx__realtime_8c_source.html#l00263">realtime_matchmore()</a>, <a class="el" href="res__config__odbc_8c_source.html#l00111">realtime_odbc()</a>, <a class="el" href="chan__h323_8c_source.html#l01554">realtime_peer()</a>, <a class="el" href="chan__h323_8c_source.html#l01440">realtime_user()</a>, <a class="el" href="func__realtime_8c_source.html#l00233">realtimefield_read()</a>, <a class="el" href="app__meetme_8c_source.html#l01815">rt_extend_conf()</a>, <a class="el" href="chan__sip_8c_source.html#l07151">sip_alloc()</a>, <a class="el" href="chan__sip_8c_source.html#l04649">sip_destroy_peer()</a>, <a class="el" href="chan__iax2_8c_source.html#l09458">socket_process()</a>, <a class="el" href="res__config__ldap_8c_source.html#l00199">table_configs_free()</a>, and <a class="el" href="chan__iax2_8c_source.html#l12142">user_destructor()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00398"></a>00398 {
<a name="l00399"></a>00399    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *vn;
<a name="l00400"></a>00400 
<a name="l00401"></a>00401    <span class="keywordflow">while</span> (v) {
<a name="l00402"></a>00402       vn = v;
<a name="l00403"></a>00403       v = v-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>;
<a name="l00404"></a>00404       <a class="code" href="config_8c.html#aa1eb8eebadbdaf6ffacdd744a5686aa6">ast_comment_destroy</a>(&amp;vn-&gt;<a class="code" href="structast__variable.html#a80bf10e9bcb9c00a7a59051a77a620cf">precomments</a>);
<a name="l00405"></a>00405       <a class="code" href="config_8c.html#aa1eb8eebadbdaf6ffacdd744a5686aa6">ast_comment_destroy</a>(&amp;vn-&gt;<a class="code" href="structast__variable.html#a6e4312227f9a7570709abf7f686f1cfe">sameline</a>);
<a name="l00406"></a>00406       <a class="code" href="config_8c.html#aa1eb8eebadbdaf6ffacdd744a5686aa6">ast_comment_destroy</a>(&amp;vn-&gt;<a class="code" href="structast__variable.html#ab09dbd177767543015efa3ba28fab03a">trailing</a>);
<a name="l00407"></a>00407       <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(vn);
<a name="l00408"></a>00408    }
<a name="l00409"></a>00409 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a35ece6ecbe9e41c18e58cc02a0db898a"></a><!-- doxytag: member="config.h::config_text_file_save" ref="a35ece6ecbe9e41c18e58cc02a0db898a" args="(const char *filename, const struct ast_config *cfg, const char *generator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int config_text_file_save </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>generator</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="config_8c_source.html#l01586">1586</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l01591">ast_config_text_file_save()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01587"></a>01587 {
<a name="l01588"></a>01588    <span class="keywordflow">return</span> <a class="code" href="config_8h.html#a473721b764b20c167c95b99239bc0654">ast_config_text_file_save</a>(configfile, cfg, <a class="code" href="app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a>);
<a name="l01589"></a>01589 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a07c61425fd6ef97bb27383e493fdf553"></a><!-- doxytag: member="config.h::read_config_maps" ref="a07c61425fd6ef97bb27383e493fdf553" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_config_maps </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Exposed re-initialization method for core process This method is intended for use only with the core re-initialization and is not designed to be called from any <a class="el" href="structuser.html" title="structure to hold users read from users.conf">user</a> applications. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l01879">1879</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="config_8c_source.html#l01846">append_mapping()</a>, <a class="el" href="config_8c_source.html#l00827">ast_config_destroy()</a>, <a class="el" href="config_8c_source.html#l02031">ast_config_internal_load()</a>, <a class="el" href="config_8c_source.html#l00673">ast_config_new()</a>, <a class="el" href="strings_8h_source.html#l00218">ast_copy_string()</a>, <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="config_8c_source.html#l00411">ast_variable_browse()</a>, <a class="el" href="adsistub_8c_source.html#l00059">buf</a>, <a class="el" href="config_8c_source.html#l01831">clear_config_maps()</a>, <a class="el" href="cdr__csv_8c_source.html#l00054">config</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="config_8c_source.html#l00204">ast_config::max_include_level</a>, <a class="el" href="config_8h_source.html#l00075">ast_variable::name</a>, <a class="el" href="config_8h_source.html#l00077">ast_variable::next</a>, <a class="el" href="agi_2strcompat_8c_source.html#l00027">strsep()</a>, <a class="el" href="cdr__odbc_8c_source.html#l00052">table</a>, and <a class="el" href="config_8h_source.html#l00076">ast_variable::value</a>.</p>

<p>Referenced by <a class="el" href="asterisk_8c_source.html#l03095">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01880"></a>01880 {
<a name="l01881"></a>01881    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *<a class="code" href="cdr__csv_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, *configtmp;
<a name="l01882"></a>01882    <span class="keyword">struct </span><a class="code" href="structast__variable.html" title="Structure for variables, used for configurations and for channel variables.">ast_variable</a> *v;
<a name="l01883"></a>01883    <span class="keywordtype">char</span> *driver, *<a class="code" href="cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, *database, *stringp, *tmp;
<a name="l01884"></a>01884    <span class="keyword">struct </span><a class="code" href="structast__flags.html" title="Structure used to handle boolean flags.">ast_flags</a> <a class="code" href="structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> = { 0 };
<a name="l01885"></a>01885 
<a name="l01886"></a>01886    <a class="code" href="config_8c.html#a95ded332420e035d20a10e0be4722f62">clear_config_maps</a>();
<a name="l01887"></a>01887 
<a name="l01888"></a>01888    configtmp = <a class="code" href="config_8h.html#a45e1a284d7d84c4b4a316764fbb887fb" title="Create a new base configuration structure.">ast_config_new</a>();
<a name="l01889"></a>01889    configtmp-&gt;<a class="code" href="structast__config.html#a98a1a362d95d774ba9bf42efd1706700">max_include_level</a> = 1;
<a name="l01890"></a>01890    config = <a class="code" href="config_8h.html#a721d5cd60abda2bdd96838336dc09669">ast_config_internal_load</a>(<a class="code" href="config_8c.html#ad7d518478e64aef37f9e57f74a0ec12a">extconfig_conf</a>, configtmp, flags, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;extconfig&quot;</span>);
<a name="l01891"></a>01891    <span class="keywordflow">if</span> (!config) {
<a name="l01892"></a>01892       <a class="code" href="config_8h.html#a710f0b2a897849572b77dd0854b8dc03" title="Destroys a config.">ast_config_destroy</a>(configtmp);
<a name="l01893"></a>01893       <span class="keywordflow">return</span> 0;
<a name="l01894"></a>01894    }
<a name="l01895"></a>01895 
<a name="l01896"></a>01896    <span class="keywordflow">for</span> (v = <a class="code" href="config_8h.html#a935ccfa153100ddd320c8918bd6e941b" title="Goes through variables Somewhat similar in intent as the ast_category_browse. List...">ast_variable_browse</a>(config, <span class="stringliteral">&quot;settings&quot;</span>); v; v = v-&gt;<a class="code" href="structast__variable.html#a46f18867e3894852bc489a4cd9cfa516">next</a>) {
<a name="l01897"></a>01897       <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#aa95cbf1d00929438101e64ee5a216d0c">buf</a>[512];
<a name="l01898"></a>01898       <a class="code" href="strings_8h.html#a17df4d252f3e2ecb230b526475ac4d93" title="Size-limited null-terminating string copy.">ast_copy_string</a>(buf, v-&gt;<a class="code" href="structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(buf));
<a name="l01899"></a>01899       stringp = buf;
<a name="l01900"></a>01900       driver = <a class="code" href="agi_2strcompat_8c.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;,&quot;</span>);
<a name="l01901"></a>01901 
<a name="l01902"></a>01902       <span class="keywordflow">if</span> ((tmp = strchr(stringp, <span class="charliteral">&apos;\&quot;&apos;</span>)))
<a name="l01903"></a>01903          stringp = tmp;
<a name="l01904"></a>01904 
<a name="l01905"></a>01905       <span class="comment">/* check if the database text starts with a double quote */</span>
<a name="l01906"></a>01906       <span class="keywordflow">if</span> (*stringp == <span class="charliteral">&apos;&quot;&apos;</span>) {
<a name="l01907"></a>01907          stringp++;
<a name="l01908"></a>01908          database = <a class="code" href="agi_2strcompat_8c.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;\&quot;&quot;</span>);
<a name="l01909"></a>01909          <a class="code" href="agi_2strcompat_8c.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;,&quot;</span>);
<a name="l01910"></a>01910       } <span class="keywordflow">else</span> {
<a name="l01911"></a>01911          <span class="comment">/* apparently this text has no quotes */</span>
<a name="l01912"></a>01912          database = <a class="code" href="agi_2strcompat_8c.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;,&quot;</span>);
<a name="l01913"></a>01913       }
<a name="l01914"></a>01914 
<a name="l01915"></a>01915       table = <a class="code" href="agi_2strcompat_8c.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;,&quot;</span>);
<a name="l01916"></a>01916 
<a name="l01917"></a>01917       <span class="keywordflow">if</span> (!strcmp(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <a class="code" href="config_8c.html#ad7d518478e64aef37f9e57f74a0ec12a">extconfig_conf</a>)) {
<a name="l01918"></a>01918          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot bind &apos;%s&apos;!\n&quot;</span>, <a class="code" href="config_8c.html#ad7d518478e64aef37f9e57f74a0ec12a">extconfig_conf</a>);
<a name="l01919"></a>01919          <span class="keywordflow">continue</span>;
<a name="l01920"></a>01920       }
<a name="l01921"></a>01921 
<a name="l01922"></a>01922       <span class="keywordflow">if</span> (!strcmp(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;asterisk.conf&quot;</span>)) {
<a name="l01923"></a>01923          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot bind &apos;asterisk.conf&apos;!\n&quot;</span>);
<a name="l01924"></a>01924          <span class="keywordflow">continue</span>;
<a name="l01925"></a>01925       }
<a name="l01926"></a>01926 
<a name="l01927"></a>01927       <span class="keywordflow">if</span> (!strcmp(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;logger.conf&quot;</span>)) {
<a name="l01928"></a>01928          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot bind &apos;logger.conf&apos;!\n&quot;</span>);
<a name="l01929"></a>01929          <span class="keywordflow">continue</span>;
<a name="l01930"></a>01930       }
<a name="l01931"></a>01931 
<a name="l01932"></a>01932       <span class="keywordflow">if</span> (!driver || !database)
<a name="l01933"></a>01933          <span class="keywordflow">continue</span>;
<a name="l01934"></a>01934       <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;sipfriends&quot;</span>)) {
<a name="l01935"></a>01935          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;The &apos;sipfriends&apos; table is obsolete, update your config to use sipusers and sippeers, though they can point to the same table.\n&quot;</span>);
<a name="l01936"></a>01936          <a class="code" href="config_8c.html#ac64061a3be3eb5639fce12c74a350014">append_mapping</a>(<span class="stringliteral">&quot;sipusers&quot;</span>, driver, database, table ? table : <span class="stringliteral">&quot;sipfriends&quot;</span>);
<a name="l01937"></a>01937          <a class="code" href="config_8c.html#ac64061a3be3eb5639fce12c74a350014">append_mapping</a>(<span class="stringliteral">&quot;sippeers&quot;</span>, driver, database, table ? table : <span class="stringliteral">&quot;sipfriends&quot;</span>);
<a name="l01938"></a>01938       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;iaxfriends&quot;</span>)) {
<a name="l01939"></a>01939          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;The &apos;iaxfriends&apos; table is obsolete, update your config to use iaxusers and iaxpeers, though they can point to the same table.\n&quot;</span>);
<a name="l01940"></a>01940          <a class="code" href="config_8c.html#ac64061a3be3eb5639fce12c74a350014">append_mapping</a>(<span class="stringliteral">&quot;iaxusers&quot;</span>, driver, database, table ? table : <span class="stringliteral">&quot;iaxfriends&quot;</span>);
<a name="l01941"></a>01941          <a class="code" href="config_8c.html#ac64061a3be3eb5639fce12c74a350014">append_mapping</a>(<span class="stringliteral">&quot;iaxpeers&quot;</span>, driver, database, table ? table : <span class="stringliteral">&quot;iaxfriends&quot;</span>);
<a name="l01942"></a>01942       } <span class="keywordflow">else</span> 
<a name="l01943"></a>01943          <a class="code" href="config_8c.html#ac64061a3be3eb5639fce12c74a350014">append_mapping</a>(v-&gt;<a class="code" href="structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, driver, database, table);
<a name="l01944"></a>01944    }
<a name="l01945"></a>01945       
<a name="l01946"></a>01946    <a class="code" href="config_8h.html#a710f0b2a897849572b77dd0854b8dc03" title="Destroys a config.">ast_config_destroy</a>(config);
<a name="l01947"></a>01947    <span class="keywordflow">return</span> 0;
<a name="l01948"></a>01948 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afd849f1845a148b2ea62cbd92c0112db"></a><!-- doxytag: member="config.h::register_config_cli" ref="afd849f1845a148b2ea62cbd92c0112db" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int register_config_cli </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Exposed initialization method for core process This method is intended for use only with the core initialization and is not designed to be called from any <a class="el" href="structuser.html" title="structure to hold users read from users.conf">user</a> applications. </p>

<p>Definition at line <a class="el" href="config_8c_source.html#l02558">2558</a> of file <a class="el" href="config_8c_source.html">config.c</a>.</p>

<p>References <a class="el" href="isdn__lib_8c_source.html#l00040">ARRAY_LEN</a>, and <a class="el" href="cli_8c_source.html#l01927">ast_cli_register_multiple()</a>.</p>

<p>Referenced by <a class="el" href="asterisk_8c_source.html#l03095">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02559"></a>02559 {
<a name="l02560"></a>02560    <a class="code" href="cli_8h.html#aadeef34f3106bb78aeb3414032ad7fb7" title="Register multiple commands.">ast_cli_register_multiple</a>(<a class="code" href="config_8c.html#a0ccbda45f056904a7b1b8bc96e58167b">cli_config</a>, <a class="code" href="isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="config_8c.html#a0ccbda45f056904a7b1b8bc96e58167b">cli_config</a>));
<a name="l02561"></a>02561    <span class="keywordflow">return</span> 0;
<a name="l02562"></a>02562 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:21:58 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
