<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (5 May 2010)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Wed May 5 15:19:38 2010</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_1ab815038f534adda65c8b4ae4993449.html">include</a>
  </div>
</div>
<div class="contents">
<h1>asterisk.h File Reference</h1>
<p>Asterisk main include file. File version handling, generic pbx functions.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="autoconfig_8h_source.html">asterisk/autoconfig.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="compat_8h_source.html">asterisk/compat.h</a>&quot;</code><br/>

<p><a href="asterisk_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a5ac4469f88c7a663b77716f1f3990748">AST_DIR_MODE</a>&nbsp;&nbsp;&nbsp;0777</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a>&nbsp;&nbsp;&nbsp;0666</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#ab0390be60f8c539a2662df2faf9985c7">ASTERISK_FILE_VERSION</a>(file, <a class="el" href="res__config__pgsql_8c.html#aad880fc4455c253781e8968f2239d56f">version</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register/unregister a source code file with the core.  <a href="#ab0390be60f8c539a2662df2faf9985c7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#ad4a33d84e5db799f6c4f73cd1461fd8a">bcopy</a>&nbsp;&nbsp;&nbsp;0x__dont_use_bcopy__use_memmove_instead()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#af9e62e8c88bfb03eb8c86da314055ad0">bzero</a>&nbsp;&nbsp;&nbsp;0x__dont_use_bzero__use_memset_instead&quot;&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a2a112ca1c7c7dc54fe43375469738dc4">DEFAULT_LANGUAGE</a>&nbsp;&nbsp;&nbsp;&quot;en&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#abe9b1c28165a7071e354bd9d7823ca1a">DEFAULT_SAMPLE_RATE</a>&nbsp;&nbsp;&nbsp;8000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#ab2dba0d8b577d63452ed65647bb22a3f">DEFAULT_SAMPLES_PER_MS</a>&nbsp;&nbsp;&nbsp;((DEFAULT_SAMPLE_RATE)/1000)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a6d2a9d4bb3ad87d2d532018e5348dadb">sched_setscheduler</a>&nbsp;&nbsp;&nbsp;__PLEASE_USE_ast_set_priority_INSTEAD_OF_sched_setscheduler__</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#aa074a86999c2684cd7ed271c4d275081">setpriority</a>&nbsp;&nbsp;&nbsp;__PLEASE_USE_ast_set_priority_INSTEAD_OF_setpriority__</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a075573924d385edb22dd8dedbd433256">ast_add_profile</a> (const char *, uint64_t scale)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">support for event profiling  <a href="#a075573924d385edb22dd8dedbd433256"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a826e3c1be1ea772fbdc32c1f312ec830">ast_complete_source_filename</a> (const char *partial, int n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#ade4aafcd250b794e0fba6250c8b26a0b">ast_fd_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a08e11e6ad5fe516b0e500509aeb8e271">ast_file_version_find</a> (const char *file)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find version for given module name.  <a href="#a08e11e6ad5fe516b0e500509aeb8e271"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a84666fa713cf20e8bc7e2d8524a10ce0">ast_mark</a> (int, int start1_stop0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a9884b316c6b39504d33d89ad6424ddbc">ast_profile</a> (int, int64_t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a9b09e95876dfecb9a8573819da0b255e">ast_register_atexit</a> (void(*func)(void))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register a function to be executed before Asterisk exits.  <a href="#a9b09e95876dfecb9a8573819da0b255e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a71ce879ebcbc81b231fc58e1931780b0">ast_register_file_version</a> (const char *file, const char *<a class="el" href="res__config__pgsql_8c.html#aad880fc4455c253781e8968f2239d56f">version</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register the version of a source code file with the core.  <a href="#a71ce879ebcbc81b231fc58e1931780b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#ad649acedd512a45c748a440e78a281c9">ast_set_priority</a> (int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">We set ourselves to a high priority, that we might pre-empt everything else. If your PBX has heavy activity on it, this is a good thing.  <a href="#ad649acedd512a45c748a440e78a281c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a7f60f486e8e4a322ae5132d791a94bcc">ast_unregister_atexit</a> (void(*func)(void))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unregister a function registered with <a class="el" href="asterisk_8h.html#a9b09e95876dfecb9a8573819da0b255e" title="Register a function to be executed before Asterisk exits.">ast_register_atexit()</a>.  <a href="#a7f60f486e8e4a322ae5132d791a94bcc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a7cda37f8ca9ae7173f49b09f05fac207">ast_unregister_file_version</a> (const char *file)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unregister a source code file from the core.  <a href="#a7cda37f8ca9ae7173f49b09f05fac207"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Asterisk main include file. File version handling, generic pbx functions. </p>

<p>Definition in file <a class="el" href="asterisk_8h_source.html">asterisk.h</a>.</p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a5ac4469f88c7a663b77716f1f3990748"></a><!-- doxytag: member="asterisk.h::AST_DIR_MODE" ref="a5ac4469f88c7a663b77716f1f3990748" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_DIR_MODE&nbsp;&nbsp;&nbsp;0777</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="asterisk_8h_source.html#l00033">33</a> of file <a class="el" href="asterisk_8h_source.html">asterisk.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa6293b2dae52a2b470494df672a26c42"></a><!-- doxytag: member="asterisk.h::AST_FILE_MODE" ref="aa6293b2dae52a2b470494df672a26c42" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_FILE_MODE&nbsp;&nbsp;&nbsp;0666</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="asterisk_8h_source.html#l00036">36</a> of file <a class="el" href="asterisk_8h_source.html">asterisk.h</a>.</p>

<p>Referenced by <a class="el" href="app_8c_source.html#l00668">__ast_play_and_record()</a>, <a class="el" href="manager_8c_source.html#l01565">action_createconfig()</a>, <a class="el" href="app_8c_source.html#l01213">ast_lock_path_lockfile()</a>, <a class="el" href="res__monitor_8c_source.html#l00148">ast_monitor_start()</a>, <a class="el" href="app__chanspy_8c_source.html#l01035">chanspy_exec()</a>, <a class="el" href="file_8c_source.html#l00209">copy()</a>, <a class="el" href="db_8c_source.html#l00054">dbinit()</a>, <a class="el" href="app__dictate_8c_source.html#l00084">dictate_exec()</a>, <a class="el" href="app__chanspy_8c_source.html#l01127">extenspy_exec()</a>, <a class="el" href="app__festival_8c_source.html#l00268">festival_exec()</a>, <a class="el" href="res__convert_8c_source.html#l00062">handle_cli_file_convert()</a>, <a class="el" href="res__agi_8c_source.html#l01494">handle_recordfile()</a>, <a class="el" href="cdr__sqlite_8c_source.html#l00172">load_module()</a>, <a class="el" href="app__record_8c_source.html#l00132">record_exec()</a>, <a class="el" href="app__meetme_8c_source.html#l04359">recordthread()</a>, <a class="el" href="app__sms_8c_source.html#l00765">sms_log()</a>, and <a class="el" href="chan__iax2_8c_source.html#l02853">try_firmware()</a>.</p>

</div>
</div>
<a class="anchor" id="ab0390be60f8c539a2662df2faf9985c7"></a><!-- doxytag: member="asterisk.h::ASTERISK_FILE_VERSION" ref="ab0390be60f8c539a2662df2faf9985c7" args="(file, version)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASTERISK_FILE_VERSION</td>
          <td>(</td>
          <td class="paramtype">file, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="res__config__pgsql_8c.html#aad880fc4455c253781e8968f2239d56f">version</a>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register/unregister a source code file with the core. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>the source file name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>version</em>&nbsp;</td><td>the version string (typically a SVN revision keyword string)</td></tr>
  </table>
  </dd>
</dl>
<p>This macro will place a file-scope constructor and destructor into the source of the module using it; this will cause the version of this file to registered with the Asterisk core (and unregistered) at the appropriate times.</p>
<p>Example:</p>
<div class="fragment"><pre class="fragment"> <a class="code" href="asterisk_8h.html#ab0390be60f8c539a2662df2faf9985c7" title="Register/unregister a source code file with the core.">ASTERISK_FILE_VERSION</a>(__FILE__, <span class="stringliteral">&quot;\$Revision\$&quot;</span>)
</pre></div><dl class="note"><dt><b>Note:</b></dt><dd>The dollar signs above have been protected with backslashes to keep SVN from modifying them in this file; under normal circumstances they would not be present and SVN would expand the Revision keyword into the file's revision <a class="el" href="structnumber.html" title="Number structure.">number</a>. </dd></dl>

<p>Definition at line <a class="el" href="asterisk_8h_source.html#l00164">164</a> of file <a class="el" href="asterisk_8h_source.html">asterisk.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad4a33d84e5db799f6c4f73cd1461fd8a"></a><!-- doxytag: member="asterisk.h::bcopy" ref="ad4a33d84e5db799f6c4f73cd1461fd8a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define bcopy&nbsp;&nbsp;&nbsp;0x__dont_use_bcopy__use_memmove_instead()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="asterisk_8h_source.html#l00224">224</a> of file <a class="el" href="asterisk_8h_source.html">asterisk.h</a>.</p>

</div>
</div>
<a class="anchor" id="af9e62e8c88bfb03eb8c86da314055ad0"></a><!-- doxytag: member="asterisk.h::bzero" ref="af9e62e8c88bfb03eb8c86da314055ad0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define bzero&nbsp;&nbsp;&nbsp;0x__dont_use_bzero__use_memset_instead&quot;&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="asterisk_8h_source.html#l00223">223</a> of file <a class="el" href="asterisk_8h_source.html">asterisk.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2a112ca1c7c7dc54fe43375469738dc4"></a><!-- doxytag: member="asterisk.h::DEFAULT_LANGUAGE" ref="a2a112ca1c7c7dc54fe43375469738dc4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_LANGUAGE&nbsp;&nbsp;&nbsp;&quot;en&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="asterisk_8h_source.html#l00039">39</a> of file <a class="el" href="asterisk_8h_source.html">asterisk.h</a>.</p>

<p>Referenced by <a class="el" href="file_8c_source.html#l00568">fileexists_core()</a>.</p>

</div>
</div>
<a class="anchor" id="abe9b1c28165a7071e354bd9d7823ca1a"></a><!-- doxytag: member="asterisk.h::DEFAULT_SAMPLE_RATE" ref="abe9b1c28165a7071e354bd9d7823ca1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_SAMPLE_RATE&nbsp;&nbsp;&nbsp;8000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="asterisk_8h_source.html#l00041">41</a> of file <a class="el" href="asterisk_8h_source.html">asterisk.h</a>.</p>

<p>Referenced by <a class="el" href="format__pcm_8c_source.html#l00256">check_header()</a>, <a class="el" href="format__ogg__vorbis_8c_source.html#l00081">ogg_vorbis_open()</a>, <a class="el" href="format__ogg__vorbis_8c_source.html#l00192">ogg_vorbis_rewrite()</a>, <a class="el" href="chan__oss_8c_source.html#l00469">setformat()</a>, and <a class="el" href="format__pcm_8c_source.html#l00336">write_header()</a>.</p>

</div>
</div>
<a class="anchor" id="ab2dba0d8b577d63452ed65647bb22a3f"></a><!-- doxytag: member="asterisk.h::DEFAULT_SAMPLES_PER_MS" ref="ab2dba0d8b577d63452ed65647bb22a3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_SAMPLES_PER_MS&nbsp;&nbsp;&nbsp;((DEFAULT_SAMPLE_RATE)/1000)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="asterisk_8h_source.html#l00042">42</a> of file <a class="el" href="asterisk_8h_source.html">asterisk.h</a>.</p>

<p>Referenced by <a class="el" href="file_8c_source.html#l00877">ast_stream_fastforward()</a>, <a class="el" href="file_8c_source.html#l00882">ast_stream_rewind()</a>, and <a class="el" href="app__amd_8c_source.html#l00146">isAnsweringMachine()</a>.</p>

</div>
</div>
<a class="anchor" id="a6d2a9d4bb3ad87d2d532018e5348dadb"></a><!-- doxytag: member="asterisk.h::sched_setscheduler" ref="a6d2a9d4bb3ad87d2d532018e5348dadb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define sched_setscheduler&nbsp;&nbsp;&nbsp;__PLEASE_USE_ast_set_priority_INSTEAD_OF_sched_setscheduler__</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="asterisk_8h_source.html#l00044">44</a> of file <a class="el" href="asterisk_8h_source.html">asterisk.h</a>.</p>

<p>Referenced by <a class="el" href="asterisk_8c_source.html#l01504">ast_set_priority()</a>.</p>

</div>
</div>
<a class="anchor" id="aa074a86999c2684cd7ed271c4d275081"></a><!-- doxytag: member="asterisk.h::setpriority" ref="aa074a86999c2684cd7ed271c4d275081" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define setpriority&nbsp;&nbsp;&nbsp;__PLEASE_USE_ast_set_priority_INSTEAD_OF_setpriority__</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="asterisk_8h_source.html#l00043">43</a> of file <a class="el" href="asterisk_8h_source.html">asterisk.h</a>.</p>

<p>Referenced by <a class="el" href="asterisk_8c_source.html#l01504">ast_set_priority()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a075573924d385edb22dd8dedbd433256"></a><!-- doxytag: member="asterisk.h::ast_add_profile" ref="a075573924d385edb22dd8dedbd433256" args="(const char *, uint64_t scale)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_add_profile </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>scale</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>support for event profiling </p>
<p>(note, this must be documented a lot more) ast_add_profile allocates a generic 'counter' with a given name, which can be shown with the command 'core show profile &lt;name&gt;'</p>
<p>The counter accumulates positive or negative <a class="el" href="structvalues.html">values</a> supplied by </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="asterisk_8h.html#a075573924d385edb22dd8dedbd433256" title="support for event profiling">ast_add_profile()</a>, dividing them by the 'scale' value passed in the create call, and also counts the <a class="el" href="structnumber.html" title="Number structure.">number</a> of 'events'. Values can also be taked by the TSC counter on ia32 architectures, in which case you can mark the start of an event calling ast_mark(id, 1) and then the end of the event with ast_mark(id, 0). For non-i386 architectures, these two calls return 0.</dd></dl>
<p>support for event profiling</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns the identifier of the counter. </dd></dl>

<p>Definition at line <a class="el" href="asterisk_8c_source.html#l00673">673</a> of file <a class="el" href="asterisk_8c_source.html">asterisk.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00072">ast_calloc</a>, <a class="el" href="astmm_8h_source.html#l00093">ast_realloc</a>, <a class="el" href="astmm_8h_source.html#l00099">ast_strdup</a>, <a class="el" href="asterisk_8c_source.html#l00665">profile_data::e</a>, <a class="el" href="asterisk_8c_source.html#l00663">profile_data::entries</a>, <a class="el" href="asterisk_8c_source.html#l00659">profile_entry::events</a>, <a class="el" href="asterisk_8c_source.html#l00657">profile_entry::mark</a>, <a class="el" href="asterisk_8c_source.html#l00664">profile_data::max_size</a>, <a class="el" href="asterisk_8c_source.html#l00655">profile_entry::name</a>, <a class="el" href="asterisk_8c_source.html#l00668">prof_data</a>, <a class="el" href="asterisk_8c_source.html#l00656">profile_entry::scale</a>, and <a class="el" href="asterisk_8c_source.html#l00658">profile_entry::value</a>.</p>

<p>Referenced by <a class="el" href="pbx_8c_source.html#l02389">extension_match_core()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00674"></a>00674 {
<a name="l00675"></a>00675    <span class="keywordtype">int</span> l = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structprofile__data.html">profile_data</a>);
<a name="l00676"></a>00676    <span class="keywordtype">int</span> n = 10; <span class="comment">/* default entries */</span>
<a name="l00677"></a>00677 
<a name="l00678"></a>00678    <span class="keywordflow">if</span> (<a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a> == NULL) {
<a name="l00679"></a>00679       <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a> = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(1, l + n*<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structprofile__entry.html">profile_entry</a>));
<a name="l00680"></a>00680       <span class="keywordflow">if</span> (<a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a> == NULL)
<a name="l00681"></a>00681          <span class="keywordflow">return</span> -1;
<a name="l00682"></a>00682       <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">entries</a> = 0;
<a name="l00683"></a>00683       <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#a98ca8117bc73d9d7520727c4ce8772e6">max_size</a> = n;
<a name="l00684"></a>00684    }
<a name="l00685"></a>00685    <span class="keywordflow">if</span> (<a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">entries</a> &gt;= <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#a98ca8117bc73d9d7520727c4ce8772e6">max_size</a>) {
<a name="l00686"></a>00686       <span class="keywordtype">void</span> *p;
<a name="l00687"></a>00687       n = <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#a98ca8117bc73d9d7520727c4ce8772e6">max_size</a> + 20;
<a name="l00688"></a>00688       p = <a class="code" href="astmm_8h.html#aa852314efa0cfeecee97ffc51b649734">ast_realloc</a>(<a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>, l + n*<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structprofile__entry.html">profile_entry</a>));
<a name="l00689"></a>00689       <span class="keywordflow">if</span> (p == NULL)
<a name="l00690"></a>00690          <span class="keywordflow">return</span> -1;
<a name="l00691"></a>00691       <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a> = p;
<a name="l00692"></a>00692       <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#a98ca8117bc73d9d7520727c4ce8772e6">max_size</a> = n;
<a name="l00693"></a>00693    }
<a name="l00694"></a>00694    n = <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">entries</a>++;
<a name="l00695"></a>00695    <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[n].<a class="code" href="structprofile__entry.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="code" href="astmm_8h.html#a2ef2401ade6b4b773138a82c86c40903">ast_strdup</a>(<a class="code" href="cdr__adaptive__odbc_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>);
<a name="l00696"></a>00696    <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[n].<a class="code" href="structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a> = 0;
<a name="l00697"></a>00697    <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[n].<a class="code" href="structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">events</a> = 0;
<a name="l00698"></a>00698    <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[n].<a class="code" href="structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a> = 0;
<a name="l00699"></a>00699    <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[n].<a class="code" href="structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">scale</a> = scale;
<a name="l00700"></a>00700    <span class="keywordflow">return</span> n;
<a name="l00701"></a>00701 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a826e3c1be1ea772fbdc32c1f312ec830"></a><!-- doxytag: member="asterisk.h::ast_complete_source_filename" ref="a826e3c1be1ea772fbdc32c1f312ec830" args="(const char *partial, int n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_complete_source_filename </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>partial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="asterisk_8c_source.html#l00335">335</a> of file <a class="el" href="asterisk_8c_source.html">asterisk.c</a>.</p>

<p>References <a class="el" href="linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="astmm_8h_source.html#l00099">ast_strdup</a>, <a class="el" href="asterisk_8c_source.html#l00290">file_version::file</a>, <a class="el" href="func__strings_8c_source.html#l00821">len()</a>, and <a class="el" href="structast__atexit.html#a56a8dd0a90ceeac591968d916dc3ecc7">ast_atexit::list</a>.</p>

<p>Referenced by <a class="el" href="cli_8c_source.html#l00361">handle_verbose()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00336"></a>00336 {
<a name="l00337"></a>00337    <span class="keyword">struct </span><a class="code" href="structfile__version.html">file_version</a> *find;
<a name="l00338"></a>00338    <span class="keywordtype">size_t</span> <a class="code" href="func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(partial);
<a name="l00339"></a>00339    <span class="keywordtype">int</span> count = 0;
<a name="l00340"></a>00340    <span class="keywordtype">char</span> *res = NULL;
<a name="l00341"></a>00341 
<a name="l00342"></a>00342    <a class="code" href="linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc" title="Read locks a list.">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="structfile__versions.html">file_versions</a>);
<a name="l00343"></a>00343    <a class="code" href="linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="structfile__versions.html">file_versions</a>, find, <a class="code" href="structfile__version.html#af4935a94ff02eea3d909e937796538ed">list</a>) {
<a name="l00344"></a>00344       <span class="keywordflow">if</span> (!strncasecmp(find-&gt;<a class="code" href="structfile__version.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>, partial, len) &amp;&amp; ++count &gt; n) {
<a name="l00345"></a>00345          res = <a class="code" href="astmm_8h.html#a2ef2401ade6b4b773138a82c86c40903">ast_strdup</a>(find-&gt;<a class="code" href="structfile__version.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>);
<a name="l00346"></a>00346          <span class="keywordflow">break</span>;
<a name="l00347"></a>00347       }
<a name="l00348"></a>00348    }
<a name="l00349"></a>00349    <a class="code" href="linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138" title="Attempts to unlock a read/write based list.">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="structfile__versions.html">file_versions</a>);
<a name="l00350"></a>00350    <span class="keywordflow">return</span> res;
<a name="l00351"></a>00351 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ade4aafcd250b794e0fba6250c8b26a0b"></a><!-- doxytag: member="asterisk.h::ast_fd_init" ref="ade4aafcd250b794e0fba6250c8b26a0b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_fd_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Provided by <a class="el" href="astfd_8c.html" title="Debugging routines for file descriptor leaks.">astfd.c</a> </p>

<p>Definition at line <a class="el" href="astfd_8c_source.html#l00275">275</a> of file <a class="el" href="astfd_8c_source.html">astfd.c</a>.</p>

<p>Referenced by <a class="el" href="asterisk_8c_source.html#l03095">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00276"></a>00276 {
<a name="l00277"></a>00277    <span class="keywordflow">return</span> 0;
<a name="l00278"></a>00278 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a08e11e6ad5fe516b0e500509aeb8e271"></a><!-- doxytag: member="asterisk.h::ast_file_version_find" ref="a08e11e6ad5fe516b0e500509aeb8e271" args="(const char *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_file_version_find </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find version for given module name. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>Module name (i.e. chan_sip.so) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>version string or NULL if the module is not found </dd></dl>

<p>Definition at line <a class="el" href="asterisk_8c_source.html#l00354">354</a> of file <a class="el" href="asterisk_8c_source.html">asterisk.c</a>.</p>

<p>References <a class="el" href="linkedlists_8h_source.html#l00541">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="linkedlists_8h_source.html#l00601">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="asterisk_8c_source.html#l00290">file_version::file</a>, <a class="el" href="structast__atexit.html#a56a8dd0a90ceeac591968d916dc3ecc7">ast_atexit::list</a>, and <a class="el" href="asterisk_8c_source.html#l00291">file_version::version</a>.</p>

<p>Referenced by <a class="el" href="manager_8c_source.html#l02885">manager_modulecheck()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00355"></a>00355 {
<a name="l00356"></a>00356    <span class="keyword">struct </span><a class="code" href="structfile__version.html">file_version</a> *iterator;
<a name="l00357"></a>00357 
<a name="l00358"></a>00358    <a class="code" href="linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595" title="Write locks a list.">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="structfile__versions.html">file_versions</a>);
<a name="l00359"></a>00359    <a class="code" href="linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="structfile__versions.html">file_versions</a>, iterator, <a class="code" href="structfile__version.html#af4935a94ff02eea3d909e937796538ed">list</a>) {
<a name="l00360"></a>00360       <span class="keywordflow">if</span> (!strcasecmp(iterator-&gt;<a class="code" href="structfile__version.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>, <a class="code" href="structfile__version.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>))
<a name="l00361"></a>00361          <span class="keywordflow">break</span>;
<a name="l00362"></a>00362    }
<a name="l00363"></a>00363    <a class="code" href="linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;
<a name="l00364"></a>00364    <a class="code" href="linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138" title="Attempts to unlock a read/write based list.">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="structfile__versions.html">file_versions</a>);
<a name="l00365"></a>00365    <span class="keywordflow">if</span> (iterator)
<a name="l00366"></a>00366       <span class="keywordflow">return</span> iterator-&gt;<a class="code" href="structfile__version.html#a56abfaab87c46691c1ef3ad0df23e864">version</a>;
<a name="l00367"></a>00367    <span class="keywordflow">return</span> NULL;
<a name="l00368"></a>00368 }      
</pre></div></p>

</div>
</div>
<a class="anchor" id="a84666fa713cf20e8bc7e2d8524a10ce0"></a><!-- doxytag: member="asterisk.h::ast_mark" ref="a84666fa713cf20e8bc7e2d8524a10ce0" args="(int, int start1_stop0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t ast_mark </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>start1_stop0</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="asterisk_8c_source.html#l00738">738</a> of file <a class="el" href="asterisk_8c_source.html">asterisk.c</a>.</p>

<p>References <a class="el" href="asterisk_8c_source.html#l00665">profile_data::e</a>, <a class="el" href="asterisk_8c_source.html#l00663">profile_data::entries</a>, <a class="el" href="asterisk_8c_source.html#l00659">profile_entry::events</a>, <a class="el" href="asterisk_8c_source.html#l00657">profile_entry::mark</a>, <a class="el" href="asterisk_8c_source.html#l00668">prof_data</a>, <a class="el" href="asterisk_8c_source.html#l00732">rdtsc()</a>, <a class="el" href="asterisk_8c_source.html#l00656">profile_entry::scale</a>, and <a class="el" href="asterisk_8c_source.html#l00658">profile_entry::value</a>.</p>

<p>Referenced by <a class="el" href="pbx_8c_source.html#l02389">extension_match_core()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00739"></a>00739 {
<a name="l00740"></a>00740    <span class="keywordflow">if</span> (!<a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a> || i &lt; 0 || i &gt; <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">entries</a>) <span class="comment">/* invalid index */</span>
<a name="l00741"></a>00741       <span class="keywordflow">return</span> 0;
<a name="l00742"></a>00742    <span class="keywordflow">if</span> (startstop == 1)
<a name="l00743"></a>00743       <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a> = <a class="code" href="asterisk_8c.html#a4840b412d71c9ff725760b9d5d3bfe25">rdtsc</a>();
<a name="l00744"></a>00744    <span class="keywordflow">else</span> {
<a name="l00745"></a>00745       <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a> = (<a class="code" href="asterisk_8c.html#a4840b412d71c9ff725760b9d5d3bfe25">rdtsc</a>() - <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a>);
<a name="l00746"></a>00746       <span class="keywordflow">if</span> (<a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">scale</a> &gt; 1)
<a name="l00747"></a>00747          <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a> /= <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">scale</a>;
<a name="l00748"></a>00748       <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a> += <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a>;
<a name="l00749"></a>00749       <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">events</a>++;
<a name="l00750"></a>00750    }
<a name="l00751"></a>00751    <span class="keywordflow">return</span> <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a>;
<a name="l00752"></a>00752 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9884b316c6b39504d33d89ad6424ddbc"></a><!-- doxytag: member="asterisk.h::ast_profile" ref="a9884b316c6b39504d33d89ad6424ddbc" args="(int, int64_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t ast_profile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="asterisk_8c_source.html#l00703">703</a> of file <a class="el" href="asterisk_8c_source.html">asterisk.c</a>.</p>

<p>References <a class="el" href="asterisk_8c_source.html#l00665">profile_data::e</a>, <a class="el" href="asterisk_8c_source.html#l00663">profile_data::entries</a>, <a class="el" href="asterisk_8c_source.html#l00659">profile_entry::events</a>, <a class="el" href="asterisk_8c_source.html#l00668">prof_data</a>, <a class="el" href="asterisk_8c_source.html#l00656">profile_entry::scale</a>, and <a class="el" href="asterisk_8c_source.html#l00658">profile_entry::value</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00704"></a>00704 {
<a name="l00705"></a>00705    <span class="keywordflow">if</span> (!<a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a> || i &lt; 0 || i &gt; <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">entries</a>) <span class="comment">/* invalid index */</span>
<a name="l00706"></a>00706       <span class="keywordflow">return</span> 0;
<a name="l00707"></a>00707    <span class="keywordflow">if</span> (<a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">scale</a> &gt; 1)
<a name="l00708"></a>00708       delta /= <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">scale</a>;
<a name="l00709"></a>00709    <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a> += delta;
<a name="l00710"></a>00710    <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">events</a>++;
<a name="l00711"></a>00711    <span class="keywordflow">return</span> <a class="code" href="asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#acd5cf24052b882eb848f02d9e3b24ee4">e</a>[i].<a class="code" href="structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a>;
<a name="l00712"></a>00712 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9b09e95876dfecb9a8573819da0b255e"></a><!-- doxytag: member="asterisk.h::ast_register_atexit" ref="a9b09e95876dfecb9a8573819da0b255e" args="(void(*func)(void))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_register_atexit </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&nbsp;</td>
          <td class="paramname"> <em>func</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register a function to be executed before Asterisk exits. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>func</em>&nbsp;</td><td>The callback function to use.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="asterisk_8c_source.html#l00914">914</a> of file <a class="el" href="asterisk_8c_source.html">asterisk.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00072">ast_calloc</a>, <a class="el" href="linkedlists_8h_source.html#l00702">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="asterisk_8c_source.html#l00932">ast_unregister_atexit()</a>, <a class="el" href="structast__atexit.html#af406187a441c51e4589704fae05f15fe">ast_atexit::func</a>, and <a class="el" href="structast__atexit.html#a56a8dd0a90ceeac591968d916dc3ecc7">ast_atexit::list</a>.</p>

<p>Referenced by <a class="el" href="xmldoc_8c_source.html#l01765">ast_xmldoc_load_documentation()</a>, <a class="el" href="cdr_8c_source.html#l01396">do_reload()</a>, <a class="el" href="res__musiconhold_8c_source.html#l01775">load_module()</a>, and <a class="el" href="asterisk_8c_source.html#l03095">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00915"></a>00915 {
<a name="l00916"></a>00916    <span class="keyword">struct </span><a class="code" href="structast__atexit.html">ast_atexit</a> *ae;
<a name="l00917"></a>00917 
<a name="l00918"></a>00918    <span class="keywordflow">if</span> (!(ae = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*ae))))
<a name="l00919"></a>00919       <span class="keywordflow">return</span> -1;
<a name="l00920"></a>00920 
<a name="l00921"></a>00921    ae-&gt;<a class="code" href="structast__atexit.html#af406187a441c51e4589704fae05f15fe">func</a> = <a class="code" href="structast__atexit.html#af406187a441c51e4589704fae05f15fe">func</a>;
<a name="l00922"></a>00922 
<a name="l00923"></a>00923    <a class="code" href="asterisk_8h.html#a7f60f486e8e4a322ae5132d791a94bcc" title="Unregister a function registered with ast_register_atexit().">ast_unregister_atexit</a>(<a class="code" href="structast__atexit.html#af406187a441c51e4589704fae05f15fe">func</a>);  
<a name="l00924"></a>00924 
<a name="l00925"></a>00925    <a class="code" href="linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595" title="Write locks a list.">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="structatexits.html">atexits</a>);
<a name="l00926"></a>00926    <a class="code" href="linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="structatexits.html">atexits</a>, ae, <a class="code" href="structast__atexit.html#a56a8dd0a90ceeac591968d916dc3ecc7">list</a>);
<a name="l00927"></a>00927    <a class="code" href="linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138" title="Attempts to unlock a read/write based list.">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="structatexits.html">atexits</a>);
<a name="l00928"></a>00928 
<a name="l00929"></a>00929    <span class="keywordflow">return</span> 0;
<a name="l00930"></a>00930 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a71ce879ebcbc81b231fc58e1931780b0"></a><!-- doxytag: member="asterisk.h::ast_register_file_version" ref="a71ce879ebcbc81b231fc58e1931780b0" args="(const char *file, const char *version)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_register_file_version </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>version</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register the version of a source code file with the core. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>the source file name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>version</em>&nbsp;</td><td>the version string (typically a SVN revision keyword string) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>nothing</dd></dl>
<p>This function should not be called directly, but instead the ASTERISK_FILE_VERSION macro should be used to register a file with the core. </p>

<p>Definition at line <a class="el" href="asterisk_8c_source.html#l00296">296</a> of file <a class="el" href="asterisk_8c_source.html">asterisk.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00072">ast_calloc</a>, <a class="el" href="linkedlists_8h_source.html#l00702">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="utils_8h_source.html#l00616">ast_strdupa</a>, <a class="el" href="strings_8h_source.html#l00150">ast_strip()</a>, and <a class="el" href="utils_8c_source.html#l01209">ast_strip_quoted()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00297"></a>00297 {
<a name="l00298"></a>00298    <span class="keyword">struct </span><a class="code" href="structfile__version.html">file_version</a> *<span class="keyword">new</span>;
<a name="l00299"></a>00299    <span class="keywordtype">char</span> *work;
<a name="l00300"></a>00300    <span class="keywordtype">size_t</span> version_length;
<a name="l00301"></a>00301 
<a name="l00302"></a>00302    work = <a class="code" href="utils_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6" title="duplicate a string in memory from the stack">ast_strdupa</a>(<a class="code" href="res__config__ldap_8c.html#aad880fc4455c253781e8968f2239d56f">version</a>);
<a name="l00303"></a>00303    work = <a class="code" href="strings_8h.html#aeb1c54e6e100c63176d8e22b0d5ca865" title="Strip leading/trailing whitespace from a string.">ast_strip</a>(<a class="code" href="strings_8h.html#aeb597bdc9a1209c2e7dd8af04de43485" title="Strip leading/trailing whitespace and quotes from a string.">ast_strip_quoted</a>(work, <span class="stringliteral">&quot;$&quot;</span>, <span class="stringliteral">&quot;$&quot;</span>));
<a name="l00304"></a>00304    version_length = strlen(work) + 1;
<a name="l00305"></a>00305    
<a name="l00306"></a>00306    <span class="keywordflow">if</span> (!(<span class="keyword">new</span> = <a class="code" href="astmm_8h.html#a1cb33b63d94fbbde94234b062249e015">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*<span class="keyword">new</span>) + version_length)))
<a name="l00307"></a>00307       <span class="keywordflow">return</span>;
<a name="l00308"></a>00308 
<a name="l00309"></a>00309    <span class="keyword">new</span>-&gt;file = <a class="code" href="structfile__version.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>;
<a name="l00310"></a>00310    <span class="keyword">new</span>-&gt;version = (<span class="keywordtype">char</span> *) <span class="keyword">new</span> + <span class="keyword">sizeof</span>(*<span class="keyword">new</span>);
<a name="l00311"></a>00311    memcpy(new-&gt;version, work, version_length);
<a name="l00312"></a>00312    <a class="code" href="linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595" title="Write locks a list.">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="structfile__versions.html">file_versions</a>);
<a name="l00313"></a>00313    <a class="code" href="linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="structfile__versions.html">file_versions</a>, <span class="keyword">new</span>, <a class="code" href="structfile__version.html#af4935a94ff02eea3d909e937796538ed">list</a>);
<a name="l00314"></a>00314    <a class="code" href="linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138" title="Attempts to unlock a read/write based list.">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="structfile__versions.html">file_versions</a>);
<a name="l00315"></a>00315 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad649acedd512a45c748a440e78a281c9"></a><!-- doxytag: member="asterisk.h::ast_set_priority" ref="ad649acedd512a45c748a440e78a281c9" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_set_priority </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>We set ourselves to a high priority, that we might pre-empt everything else. If your PBX has heavy activity on it, this is a good thing. </p>
<p>Provided by <a class="el" href="asterisk_8c.html" title="Top level source file for Asterisk - the Open Source PBX. Implementation of PBX core...">asterisk.c</a> </p>

<p>Definition at line <a class="el" href="asterisk_8c_source.html#l01504">1504</a> of file <a class="el" href="asterisk_8c_source.html">asterisk.c</a>.</p>

<p>References <a class="el" href="logger_8c_source.html#l01090">ast_log()</a>, <a class="el" href="logger_8h_source.html#l00079">ast_verbose</a>, <a class="el" href="logger_8h_source.html#l00152">LOG_WARNING</a>, <a class="el" href="asterisk_8h_source.html#l00044">sched_setscheduler</a>, and <a class="el" href="asterisk_8h_source.html#l00043">setpriority</a>.</p>

<p>Referenced by <a class="el" href="app__externalivr_8c_source.html#l00314">app_exec()</a>, <a class="el" href="asterisk_8c_source.html#l01001">ast_safe_system()</a>, <a class="el" href="asterisk_8c_source.html#l03038">canary_thread()</a>, <a class="el" href="app__ices_8c_source.html#l00072">icesencode()</a>, <a class="el" href="res__agi_8c_source.html#l00867">launch_script()</a>, <a class="el" href="asterisk_8c_source.html#l03095">main()</a>, <a class="el" href="app__mp3_8c_source.html#l00067">mp3play()</a>, <a class="el" href="app__nbscat_8c_source.html#l00068">NBScatplay()</a>, <a class="el" href="app__festival_8c_source.html#l00127">send_waveform_to_fd()</a>, <a class="el" href="res__musiconhold_8c_source.html#l00422">spawn_mp3()</a>, and <a class="el" href="app__dahdiras_8c_source.html#l00081">spawn_ras()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01505"></a>01505 {
<a name="l01506"></a>01506    <span class="keyword">struct </span>sched_param <a class="code" href="structsched.html">sched</a>;
<a name="l01507"></a>01507    memset(&amp;<a class="code" href="structsched.html">sched</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="structsched.html">sched</a>));
<a name="l01508"></a>01508 <span class="preprocessor">#ifdef __linux__</span>
<a name="l01509"></a>01509 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (pri) {  
<a name="l01510"></a>01510       <a class="code" href="structsched.html">sched</a>.sched_priority = 10;
<a name="l01511"></a>01511       <span class="keywordflow">if</span> (<a class="code" href="asterisk_8h.html#a6d2a9d4bb3ad87d2d532018e5348dadb">sched_setscheduler</a>(0, SCHED_RR, &amp;<a class="code" href="structsched.html">sched</a>)) {
<a name="l01512"></a>01512          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set high priority\n&quot;</span>);
<a name="l01513"></a>01513          <span class="keywordflow">return</span> -1;
<a name="l01514"></a>01514       } <span class="keywordflow">else</span>
<a name="l01515"></a>01515          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#gaa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a>)
<a name="l01516"></a>01516             <a class="code" href="logger_8h.html#afcd8b407dfb3f461488abf7d1ed70fb9">ast_verbose</a>(<span class="stringliteral">&quot;Set to realtime thread\n&quot;</span>);
<a name="l01517"></a>01517    } <span class="keywordflow">else</span> {
<a name="l01518"></a>01518       <a class="code" href="structsched.html">sched</a>.sched_priority = 0;
<a name="l01519"></a>01519       <span class="comment">/* According to the manpage, these parameters can never fail. */</span>
<a name="l01520"></a>01520       <a class="code" href="asterisk_8h.html#a6d2a9d4bb3ad87d2d532018e5348dadb">sched_setscheduler</a>(0, SCHED_OTHER, &amp;<a class="code" href="structsched.html">sched</a>);
<a name="l01521"></a>01521    }
<a name="l01522"></a>01522 <span class="preprocessor">#else</span>
<a name="l01523"></a>01523 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (pri) {
<a name="l01524"></a>01524       <span class="keywordflow">if</span> (<a class="code" href="asterisk_8h.html#aa074a86999c2684cd7ed271c4d275081">setpriority</a>(PRIO_PROCESS, 0, -10) == -1) {
<a name="l01525"></a>01525          <a class="code" href="logger_8h.html#a93dd824dff97fe84941d6d71b7a3710e" title="Used for sending a log message This is the standard logger function. Probably the...">ast_log</a>(<a class="code" href="logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set high priority\n&quot;</span>);
<a name="l01526"></a>01526          <span class="keywordflow">return</span> -1;
<a name="l01527"></a>01527       } <span class="keywordflow">else</span>
<a name="l01528"></a>01528          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#gaa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a>)
<a name="l01529"></a>01529             <a class="code" href="logger_8h.html#afcd8b407dfb3f461488abf7d1ed70fb9">ast_verbose</a>(<span class="stringliteral">&quot;Set to high priority\n&quot;</span>);
<a name="l01530"></a>01530    } <span class="keywordflow">else</span> {
<a name="l01531"></a>01531       <span class="comment">/* According to the manpage, these parameters can never fail. */</span>
<a name="l01532"></a>01532       <a class="code" href="asterisk_8h.html#aa074a86999c2684cd7ed271c4d275081">setpriority</a>(PRIO_PROCESS, 0, 0);
<a name="l01533"></a>01533    }
<a name="l01534"></a>01534 <span class="preprocessor">#endif</span>
<a name="l01535"></a>01535 <span class="preprocessor"></span>   <span class="keywordflow">return</span> 0;
<a name="l01536"></a>01536 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7f60f486e8e4a322ae5132d791a94bcc"></a><!-- doxytag: member="asterisk.h::ast_unregister_atexit" ref="a7f60f486e8e4a322ae5132d791a94bcc" args="(void(*func)(void))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_unregister_atexit </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&nbsp;</td>
          <td class="paramname"> <em>func</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unregister a function registered with <a class="el" href="asterisk_8h.html#a9b09e95876dfecb9a8573819da0b255e" title="Register a function to be executed before Asterisk exits.">ast_register_atexit()</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>func</em>&nbsp;</td><td>The callback function to unregister. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="asterisk_8c_source.html#l00932">932</a> of file <a class="el" href="asterisk_8c_source.html">asterisk.c</a>.</p>

<p>References <a class="el" href="linkedlists_8h_source.html#l00564">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="linkedlists_8h_source.html#l00541">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="linkedlists_8h_source.html#l00601">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="astmm_8h_source.html#l00084">free</a>, <a class="el" href="structast__atexit.html#af406187a441c51e4589704fae05f15fe">ast_atexit::func</a>, and <a class="el" href="structast__atexit.html#a56a8dd0a90ceeac591968d916dc3ecc7">ast_atexit::list</a>.</p>

<p>Referenced by <a class="el" href="asterisk_8c_source.html#l00914">ast_register_atexit()</a>, <a class="el" href="cdr_8c_source.html#l01396">do_reload()</a>, and <a class="el" href="res__musiconhold_8c_source.html#l01823">unload_module()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00933"></a>00933 {
<a name="l00934"></a>00934    <span class="keyword">struct </span><a class="code" href="structast__atexit.html">ast_atexit</a> *ae = NULL;
<a name="l00935"></a>00935 
<a name="l00936"></a>00936    <a class="code" href="linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595" title="Write locks a list.">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="structatexits.html">atexits</a>);
<a name="l00937"></a>00937    <a class="code" href="linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="structatexits.html">atexits</a>, ae, <a class="code" href="structast__atexit.html#a56a8dd0a90ceeac591968d916dc3ecc7">list</a>) {
<a name="l00938"></a>00938       <span class="keywordflow">if</span> (ae-&gt;<a class="code" href="structast__atexit.html#af406187a441c51e4589704fae05f15fe">func</a> == <a class="code" href="structast__atexit.html#af406187a441c51e4589704fae05f15fe">func</a>) {
<a name="l00939"></a>00939          <a class="code" href="linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="structast__atexit.html#a56a8dd0a90ceeac591968d916dc3ecc7">list</a>);
<a name="l00940"></a>00940          <span class="keywordflow">break</span>;
<a name="l00941"></a>00941       }
<a name="l00942"></a>00942    }
<a name="l00943"></a>00943    <a class="code" href="linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;
<a name="l00944"></a>00944    <a class="code" href="linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138" title="Attempts to unlock a read/write based list.">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="structatexits.html">atexits</a>);
<a name="l00945"></a>00945 
<a name="l00946"></a>00946    <a class="code" href="astmm_8h.html#aa7157aa9480bb73f090dca36776419bf">free</a>(ae);
<a name="l00947"></a>00947 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7cda37f8ca9ae7173f49b09f05fac207"></a><!-- doxytag: member="asterisk.h::ast_unregister_file_version" ref="a7cda37f8ca9ae7173f49b09f05fac207" args="(const char *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_unregister_file_version </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unregister a source code file from the core. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>the source file name </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>nothing</dd></dl>
<p>This function should not be called directly, but instead the ASTERISK_FILE_VERSION macro should be used to automatically unregister the file when the module is unloaded. </p>

<p>Definition at line <a class="el" href="asterisk_8c_source.html#l00317">317</a> of file <a class="el" href="asterisk_8c_source.html">asterisk.c</a>.</p>

<p>References <a class="el" href="astmm_8h_source.html#l00087">ast_free</a>, <a class="el" href="linkedlists_8h_source.html#l00564">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="linkedlists_8h_source.html#l00541">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="linkedlists_8h_source.html#l00601">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="asterisk_8c_source.html#l00290">file_version::file</a>, and <a class="el" href="structast__atexit.html#a56a8dd0a90ceeac591968d916dc3ecc7">ast_atexit::list</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00318"></a>00318 {
<a name="l00319"></a>00319    <span class="keyword">struct </span><a class="code" href="structfile__version.html">file_version</a> *find;
<a name="l00320"></a>00320 
<a name="l00321"></a>00321    <a class="code" href="linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595" title="Write locks a list.">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="structfile__versions.html">file_versions</a>);
<a name="l00322"></a>00322    <a class="code" href="linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="structfile__versions.html">file_versions</a>, find, <a class="code" href="structfile__version.html#af4935a94ff02eea3d909e937796538ed">list</a>) {
<a name="l00323"></a>00323       <span class="keywordflow">if</span> (!strcasecmp(find-&gt;<a class="code" href="structfile__version.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>, <a class="code" href="structfile__version.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>)) {
<a name="l00324"></a>00324          <a class="code" href="linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="structfile__version.html#af4935a94ff02eea3d909e937796538ed">list</a>);
<a name="l00325"></a>00325          <span class="keywordflow">break</span>;
<a name="l00326"></a>00326       }
<a name="l00327"></a>00327    }
<a name="l00328"></a>00328    <a class="code" href="linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;
<a name="l00329"></a>00329    <a class="code" href="linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138" title="Attempts to unlock a read/write based list.">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="structfile__versions.html">file_versions</a>);
<a name="l00330"></a>00330 
<a name="l00331"></a>00331    <span class="keywordflow">if</span> (find)
<a name="l00332"></a>00332       <a class="code" href="astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(find);
<a name="l00333"></a>00333 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed May 5 15:19:38 2010 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
